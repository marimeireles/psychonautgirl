var vx=n=>{throw TypeError(n)};var Xg=(n,e,t)=>e.has(n)||vx("Cannot "+t);var j=(n,e,t)=>(Xg(n,e,"read from private field"),t?t.call(n):e.get(n)),ge=(n,e,t)=>e.has(n)?vx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),oe=(n,e,t,r)=>(Xg(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Et=(n,e,t)=>(Xg(n,e,"access private method"),t);var gh=(n,e,t,r)=>({set _(i){oe(n,e,i,t)},get _(){return j(n,e,r)}});function bD(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Yn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ip(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function tT(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var nT={exports:{}},jp={},rT={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yu=Symbol.for("react.element"),xD=Symbol.for("react.portal"),SD=Symbol.for("react.fragment"),CD=Symbol.for("react.strict_mode"),kD=Symbol.for("react.profiler"),TD=Symbol.for("react.provider"),_D=Symbol.for("react.context"),ED=Symbol.for("react.forward_ref"),OD=Symbol.for("react.suspense"),MD=Symbol.for("react.memo"),AD=Symbol.for("react.lazy"),wx=Symbol.iterator;function RD(n){return n===null||typeof n!="object"?null:(n=wx&&n[wx]||n["@@iterator"],typeof n=="function"?n:null)}var iT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sT=Object.assign,oT={};function Wl(n,e,t){this.props=n,this.context=e,this.refs=oT,this.updater=t||iT}Wl.prototype.isReactComponent={};Wl.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Wl.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function aT(){}aT.prototype=Wl.prototype;function zv(n,e,t){this.props=n,this.context=e,this.refs=oT,this.updater=t||iT}var $v=zv.prototype=new aT;$v.constructor=zv;sT($v,Wl.prototype);$v.isPureReactComponent=!0;var bx=Array.isArray,lT=Object.prototype.hasOwnProperty,Hv={current:null},cT={key:!0,ref:!0,__self:!0,__source:!0};function uT(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)lT.call(e,r)&&!cT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Yu,type:n,key:s,ref:o,props:i,_owner:Hv.current}}function PD(n,e){return{$$typeof:Yu,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Uv(n){return typeof n=="object"&&n!==null&&n.$$typeof===Yu}function DD(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var xx=/\/+/g;function Jg(n,e){return typeof n=="object"&&n!==null&&n.key!=null?DD(""+n.key):e.toString(36)}function Od(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Yu:case xD:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Jg(o,0):r,bx(i)?(t="",n!=null&&(t=n.replace(xx,"$&/")+"/"),Od(i,e,t,"",function(c){return c})):i!=null&&(Uv(i)&&(i=PD(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(xx,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",bx(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Jg(s,a);o+=Od(s,e,t,l,i)}else if(l=RD(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Jg(s,a++),o+=Od(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function mh(n,e,t){if(n==null)return n;var r=[],i=0;return Od(n,r,"","",function(s){return e.call(t,s,i++)}),r}function ND(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Xt={current:null},Md={transition:null},ID={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:Md,ReactCurrentOwner:Hv};function hT(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:mh,forEach:function(n,e,t){mh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return mh(n,function(){e++}),e},toArray:function(n){return mh(n,function(e){return e})||[]},only:function(n){if(!Uv(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};he.Component=Wl;he.Fragment=SD;he.Profiler=kD;he.PureComponent=zv;he.StrictMode=CD;he.Suspense=OD;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ID;he.act=hT;he.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=sT({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Hv.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)lT.call(e,l)&&!cT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Yu,type:n.type,key:i,ref:s,props:r,_owner:o}};he.createContext=function(n){return n={$$typeof:_D,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:TD,_context:n},n.Consumer=n};he.createElement=uT;he.createFactory=function(n){var e=uT.bind(null,n);return e.type=n,e};he.createRef=function(){return{current:null}};he.forwardRef=function(n){return{$$typeof:ED,render:n}};he.isValidElement=Uv;he.lazy=function(n){return{$$typeof:AD,_payload:{_status:-1,_result:n},_init:ND}};he.memo=function(n,e){return{$$typeof:MD,type:n,compare:e===void 0?null:e}};he.startTransition=function(n){var e=Md.transition;Md.transition={};try{n()}finally{Md.transition=e}};he.unstable_act=hT;he.useCallback=function(n,e){return Xt.current.useCallback(n,e)};he.useContext=function(n){return Xt.current.useContext(n)};he.useDebugValue=function(){};he.useDeferredValue=function(n){return Xt.current.useDeferredValue(n)};he.useEffect=function(n,e){return Xt.current.useEffect(n,e)};he.useId=function(){return Xt.current.useId()};he.useImperativeHandle=function(n,e,t){return Xt.current.useImperativeHandle(n,e,t)};he.useInsertionEffect=function(n,e){return Xt.current.useInsertionEffect(n,e)};he.useLayoutEffect=function(n,e){return Xt.current.useLayoutEffect(n,e)};he.useMemo=function(n,e){return Xt.current.useMemo(n,e)};he.useReducer=function(n,e,t){return Xt.current.useReducer(n,e,t)};he.useRef=function(n){return Xt.current.useRef(n)};he.useState=function(n){return Xt.current.useState(n)};he.useSyncExternalStore=function(n,e,t){return Xt.current.useSyncExternalStore(n,e,t)};he.useTransition=function(){return Xt.current.useTransition()};he.version="18.3.1";rT.exports=he;var k=rT.exports;const B=Ip(k),dT=bD({__proto__:null,default:B},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jD=k,LD=Symbol.for("react.element"),FD=Symbol.for("react.fragment"),WD=Object.prototype.hasOwnProperty,BD=jD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zD={key:!0,ref:!0,__self:!0,__source:!0};function fT(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)WD.call(e,r)&&!zD.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:LD,type:n,key:s,ref:o,props:i,_owner:BD.current}}jp.Fragment=FD;jp.jsx=fT;jp.jsxs=fT;nT.exports=jp;var b=nT.exports,pT={exports:{}},On={},gT={exports:{}},mT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(R,I){var z=R.length;R.push(I);e:for(;0<z;){var ee=z-1>>>1,X=R[ee];if(0<i(X,I))R[ee]=I,R[z]=X,z=ee;else break e}}function t(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var I=R[0],z=R.pop();if(z!==I){R[0]=z;e:for(var ee=0,X=R.length,ie=X>>>1;ee<ie;){var te=2*(ee+1)-1,_e=R[te],Re=te+1,de=R[Re];if(0>i(_e,z))Re<X&&0>i(de,_e)?(R[ee]=de,R[Re]=z,ee=Re):(R[ee]=_e,R[te]=z,ee=te);else if(Re<X&&0>i(de,z))R[ee]=de,R[Re]=z,ee=Re;else break e}}return I}function i(R,I){var z=R.sortIndex-I.sortIndex;return z!==0?z:R.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(R){for(var I=t(c);I!==null;){if(I.callback===null)r(c);else if(I.startTime<=R)r(c),I.sortIndex=I.expirationTime,e(l,I);else break;I=t(c)}}function x(R){if(g=!1,w(R),!p)if(t(l)!==null)p=!0,U(S);else{var I=t(c);I!==null&&G(x,I.startTime-R)}}function S(R,I){p=!1,g&&(g=!1,y(_),_=-1),f=!0;var z=d;try{for(w(I),h=t(l);h!==null&&(!(h.expirationTime>I)||R&&!$());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,d=h.priorityLevel;var X=ee(h.expirationTime<=I);I=n.unstable_now(),typeof X=="function"?h.callback=X:h===t(l)&&r(l),w(I)}else r(l);h=t(l)}if(h!==null)var ie=!0;else{var te=t(c);te!==null&&G(x,te.startTime-I),ie=!1}return ie}finally{h=null,d=z,f=!1}}var C=!1,T=null,_=-1,M=5,P=-1;function $(){return!(n.unstable_now()-P<M)}function N(){if(T!==null){var R=n.unstable_now();P=R;var I=!0;try{I=T(!0,R)}finally{I?H():(C=!1,T=null)}}else C=!1}var H;if(typeof v=="function")H=function(){v(N)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,V=D.port2;D.port1.onmessage=N,H=function(){V.postMessage(null)}}else H=function(){m(N,0)};function U(R){T=R,C||(C=!0,H())}function G(R,I){_=m(function(){R(n.unstable_now())},I)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(R){R.callback=null},n.unstable_continueExecution=function(){p||f||(p=!0,U(S))},n.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<R?Math.floor(1e3/R):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(R){switch(d){case 1:case 2:case 3:var I=3;break;default:I=d}var z=d;d=I;try{return R()}finally{d=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(R,I){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var z=d;d=R;try{return I()}finally{d=z}},n.unstable_scheduleCallback=function(R,I,z){var ee=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ee+z:ee):z=ee,R){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=z+X,R={id:u++,callback:I,priorityLevel:R,startTime:z,expirationTime:X,sortIndex:-1},z>ee?(R.sortIndex=z,e(c,R),t(l)===null&&R===t(c)&&(g?(y(_),_=-1):g=!0,G(x,z-ee))):(R.sortIndex=X,e(l,R),p||f||(p=!0,U(S))),R},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(R){var I=d;return function(){var z=d;d=I;try{return R.apply(this,arguments)}finally{d=z}}}})(mT);gT.exports=mT;var $D=gT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HD=k,En=$D;function W(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yT=new Set,iu={};function na(n,e){xl(n,e),xl(n+"Capture",e)}function xl(n,e){for(iu[n]=e,n=0;n<e.length;n++)yT.add(e[n])}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ry=Object.prototype.hasOwnProperty,UD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sx={},Cx={};function VD(n){return Ry.call(Cx,n)?!0:Ry.call(Sx,n)?!1:UD.test(n)?Cx[n]=!0:(Sx[n]=!0,!1)}function GD(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function qD(n,e,t,r){if(e===null||typeof e>"u"||GD(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jt(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Tt[n]=new Jt(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Tt[e]=new Jt(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Tt[n]=new Jt(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Tt[n]=new Jt(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Tt[n]=new Jt(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Tt[n]=new Jt(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Tt[n]=new Jt(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Tt[n]=new Jt(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Tt[n]=new Jt(n,5,!1,n.toLowerCase(),null,!1,!1)});var Vv=/[\-:]([a-z])/g;function Gv(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Vv,Gv);Tt[e]=new Jt(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Vv,Gv);Tt[e]=new Jt(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Vv,Gv);Tt[e]=new Jt(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Tt[n]=new Jt(n,1,!1,n.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Tt[n]=new Jt(n,1,!1,n.toLowerCase(),null,!0,!0)});function qv(n,e,t,r){var i=Tt.hasOwnProperty(e)?Tt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qD(e,t,i,r)&&(t=null),r||i===null?VD(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Ii=HD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yh=Symbol.for("react.element"),Ia=Symbol.for("react.portal"),ja=Symbol.for("react.fragment"),Yv=Symbol.for("react.strict_mode"),Py=Symbol.for("react.profiler"),vT=Symbol.for("react.provider"),wT=Symbol.for("react.context"),Kv=Symbol.for("react.forward_ref"),Dy=Symbol.for("react.suspense"),Ny=Symbol.for("react.suspense_list"),Xv=Symbol.for("react.memo"),ss=Symbol.for("react.lazy"),bT=Symbol.for("react.offscreen"),kx=Symbol.iterator;function sc(n){return n===null||typeof n!="object"?null:(n=kx&&n[kx]||n["@@iterator"],typeof n=="function"?n:null)}var We=Object.assign,Qg;function xc(n){if(Qg===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Qg=e&&e[1]||""}return`
`+Qg+n}var Zg=!1;function em(n,e){if(!n||Zg)return"";Zg=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Zg=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?xc(n):""}function YD(n){switch(n.tag){case 5:return xc(n.type);case 16:return xc("Lazy");case 13:return xc("Suspense");case 19:return xc("SuspenseList");case 0:case 2:case 15:return n=em(n.type,!1),n;case 11:return n=em(n.type.render,!1),n;case 1:return n=em(n.type,!0),n;default:return""}}function Iy(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ja:return"Fragment";case Ia:return"Portal";case Py:return"Profiler";case Yv:return"StrictMode";case Dy:return"Suspense";case Ny:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case wT:return(n.displayName||"Context")+".Consumer";case vT:return(n._context.displayName||"Context")+".Provider";case Kv:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Xv:return e=n.displayName||null,e!==null?e:Iy(n.type)||"Memo";case ss:e=n._payload,n=n._init;try{return Iy(n(e))}catch{}}return null}function KD(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Iy(e);case 8:return e===Yv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zs(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function xT(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XD(n){var e=xT(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function vh(n){n._valueTracker||(n._valueTracker=XD(n))}function ST(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=xT(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function ef(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function jy(n,e){var t=e.checked;return We({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Tx(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=zs(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function CT(n,e){e=e.checked,e!=null&&qv(n,"checked",e,!1)}function Ly(n,e){CT(n,e);var t=zs(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Fy(n,e.type,t):e.hasOwnProperty("defaultValue")&&Fy(n,e.type,zs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function _x(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Fy(n,e,t){(e!=="number"||ef(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Sc=Array.isArray;function Qa(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+zs(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Wy(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return We({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ex(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(W(92));if(Sc(t)){if(1<t.length)throw Error(W(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:zs(t)}}function kT(n,e){var t=zs(e.value),r=zs(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Ox(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function TT(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function By(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?TT(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var wh,_T=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(wh=wh||document.createElement("div"),wh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function su(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Rc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JD=["Webkit","ms","Moz","O"];Object.keys(Rc).forEach(function(n){JD.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Rc[e]=Rc[n]})});function ET(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Rc.hasOwnProperty(n)&&Rc[n]?(""+e).trim():e+"px"}function OT(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=ET(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var QD=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zy(n,e){if(e){if(QD[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function $y(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hy=null;function Jv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Uy=null,Za=null,el=null;function Mx(n){if(n=Ju(n)){if(typeof Uy!="function")throw Error(W(280));var e=n.stateNode;e&&(e=zp(e),Uy(n.stateNode,n.type,e))}}function MT(n){Za?el?el.push(n):el=[n]:Za=n}function AT(){if(Za){var n=Za,e=el;if(el=Za=null,Mx(n),e)for(n=0;n<e.length;n++)Mx(e[n])}}function RT(n,e){return n(e)}function PT(){}var tm=!1;function DT(n,e,t){if(tm)return n(e,t);tm=!0;try{return RT(n,e,t)}finally{tm=!1,(Za!==null||el!==null)&&(PT(),AT())}}function ou(n,e){var t=n.stateNode;if(t===null)return null;var r=zp(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(W(231,e,typeof t));return t}var Vy=!1;if(Ti)try{var oc={};Object.defineProperty(oc,"passive",{get:function(){Vy=!0}}),window.addEventListener("test",oc,oc),window.removeEventListener("test",oc,oc)}catch{Vy=!1}function ZD(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Pc=!1,tf=null,nf=!1,Gy=null,e2={onError:function(n){Pc=!0,tf=n}};function t2(n,e,t,r,i,s,o,a,l){Pc=!1,tf=null,ZD.apply(e2,arguments)}function n2(n,e,t,r,i,s,o,a,l){if(t2.apply(this,arguments),Pc){if(Pc){var c=tf;Pc=!1,tf=null}else throw Error(W(198));nf||(nf=!0,Gy=c)}}function ra(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function NT(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Ax(n){if(ra(n)!==n)throw Error(W(188))}function r2(n){var e=n.alternate;if(!e){if(e=ra(n),e===null)throw Error(W(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Ax(i),n;if(s===r)return Ax(i),e;s=s.sibling}throw Error(W(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(t.alternate!==r)throw Error(W(190))}if(t.tag!==3)throw Error(W(188));return t.stateNode.current===t?n:e}function IT(n){return n=r2(n),n!==null?jT(n):null}function jT(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=jT(n);if(e!==null)return e;n=n.sibling}return null}var LT=En.unstable_scheduleCallback,Rx=En.unstable_cancelCallback,i2=En.unstable_shouldYield,s2=En.unstable_requestPaint,Ye=En.unstable_now,o2=En.unstable_getCurrentPriorityLevel,Qv=En.unstable_ImmediatePriority,FT=En.unstable_UserBlockingPriority,rf=En.unstable_NormalPriority,a2=En.unstable_LowPriority,WT=En.unstable_IdlePriority,Lp=null,Vr=null;function l2(n){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(Lp,n,void 0,(n.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:h2,c2=Math.log,u2=Math.LN2;function h2(n){return n>>>=0,n===0?32:31-(c2(n)/u2|0)|0}var bh=64,xh=4194304;function Cc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function sf(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Cc(a):(s&=o,s!==0&&(r=Cc(s)))}else o=t&~i,o!==0?r=Cc(o):s!==0&&(r=Cc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Sr(e),i=1<<t,r|=n[t],e&=~i;return r}function d2(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f2(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Sr(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=d2(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function qy(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function BT(){var n=bh;return bh<<=1,!(bh&4194240)&&(bh=64),n}function nm(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Ku(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Sr(e),n[e]=t}function p2(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Sr(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function Zv(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Sr(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var we=0;function zT(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var $T,ew,HT,UT,VT,Yy=!1,Sh=[],Os=null,Ms=null,As=null,au=new Map,lu=new Map,hs=[],g2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Px(n,e){switch(n){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Ms=null;break;case"mouseover":case"mouseout":As=null;break;case"pointerover":case"pointerout":au.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":lu.delete(e.pointerId)}}function ac(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ju(e),e!==null&&ew(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function m2(n,e,t,r,i){switch(e){case"focusin":return Os=ac(Os,n,e,t,r,i),!0;case"dragenter":return Ms=ac(Ms,n,e,t,r,i),!0;case"mouseover":return As=ac(As,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return au.set(s,ac(au.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,lu.set(s,ac(lu.get(s)||null,n,e,t,r,i)),!0}return!1}function GT(n){var e=vo(n.target);if(e!==null){var t=ra(e);if(t!==null){if(e=t.tag,e===13){if(e=NT(t),e!==null){n.blockedOn=e,VT(n.priority,function(){HT(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ad(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Ky(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Hy=r,t.target.dispatchEvent(r),Hy=null}else return e=Ju(t),e!==null&&ew(e),n.blockedOn=t,!1;e.shift()}return!0}function Dx(n,e,t){Ad(n)&&t.delete(e)}function y2(){Yy=!1,Os!==null&&Ad(Os)&&(Os=null),Ms!==null&&Ad(Ms)&&(Ms=null),As!==null&&Ad(As)&&(As=null),au.forEach(Dx),lu.forEach(Dx)}function lc(n,e){n.blockedOn===e&&(n.blockedOn=null,Yy||(Yy=!0,En.unstable_scheduleCallback(En.unstable_NormalPriority,y2)))}function cu(n){function e(i){return lc(i,n)}if(0<Sh.length){lc(Sh[0],n);for(var t=1;t<Sh.length;t++){var r=Sh[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Os!==null&&lc(Os,n),Ms!==null&&lc(Ms,n),As!==null&&lc(As,n),au.forEach(e),lu.forEach(e),t=0;t<hs.length;t++)r=hs[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<hs.length&&(t=hs[0],t.blockedOn===null);)GT(t),t.blockedOn===null&&hs.shift()}var tl=Ii.ReactCurrentBatchConfig,of=!0;function v2(n,e,t,r){var i=we,s=tl.transition;tl.transition=null;try{we=1,tw(n,e,t,r)}finally{we=i,tl.transition=s}}function w2(n,e,t,r){var i=we,s=tl.transition;tl.transition=null;try{we=4,tw(n,e,t,r)}finally{we=i,tl.transition=s}}function tw(n,e,t,r){if(of){var i=Ky(n,e,t,r);if(i===null)dm(n,e,r,af,t),Px(n,r);else if(m2(i,n,e,t,r))r.stopPropagation();else if(Px(n,r),e&4&&-1<g2.indexOf(n)){for(;i!==null;){var s=Ju(i);if(s!==null&&$T(s),s=Ky(n,e,t,r),s===null&&dm(n,e,r,af,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else dm(n,e,r,null,t)}}var af=null;function Ky(n,e,t,r){if(af=null,n=Jv(r),n=vo(n),n!==null)if(e=ra(n),e===null)n=null;else if(t=e.tag,t===13){if(n=NT(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return af=n,null}function qT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o2()){case Qv:return 1;case FT:return 4;case rf:case a2:return 16;case WT:return 536870912;default:return 16}default:return 16}}var Ss=null,nw=null,Rd=null;function YT(){if(Rd)return Rd;var n,e=nw,t=e.length,r,i="value"in Ss?Ss.value:Ss.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Rd=i.slice(n,1<r?1-r:void 0)}function Pd(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Ch(){return!0}function Nx(){return!1}function Mn(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ch:Nx,this.isPropagationStopped=Nx,this}return We(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Ch)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Ch)},persist:function(){},isPersistent:Ch}),e}var Bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rw=Mn(Bl),Xu=We({},Bl,{view:0,detail:0}),b2=Mn(Xu),rm,im,cc,Fp=We({},Xu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iw,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==cc&&(cc&&n.type==="mousemove"?(rm=n.screenX-cc.screenX,im=n.screenY-cc.screenY):im=rm=0,cc=n),rm)},movementY:function(n){return"movementY"in n?n.movementY:im}}),Ix=Mn(Fp),x2=We({},Fp,{dataTransfer:0}),S2=Mn(x2),C2=We({},Xu,{relatedTarget:0}),sm=Mn(C2),k2=We({},Bl,{animationName:0,elapsedTime:0,pseudoElement:0}),T2=Mn(k2),_2=We({},Bl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),E2=Mn(_2),O2=We({},Bl,{data:0}),jx=Mn(O2),M2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function P2(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=R2[n])?!!e[n]:!1}function iw(){return P2}var D2=We({},Xu,{key:function(n){if(n.key){var e=M2[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Pd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?A2[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iw,charCode:function(n){return n.type==="keypress"?Pd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Pd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),N2=Mn(D2),I2=We({},Fp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lx=Mn(I2),j2=We({},Xu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iw}),L2=Mn(j2),F2=We({},Bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),W2=Mn(F2),B2=We({},Fp,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),z2=Mn(B2),$2=[9,13,27,32],sw=Ti&&"CompositionEvent"in window,Dc=null;Ti&&"documentMode"in document&&(Dc=document.documentMode);var H2=Ti&&"TextEvent"in window&&!Dc,KT=Ti&&(!sw||Dc&&8<Dc&&11>=Dc),Fx=" ",Wx=!1;function XT(n,e){switch(n){case"keyup":return $2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var La=!1;function U2(n,e){switch(n){case"compositionend":return JT(e);case"keypress":return e.which!==32?null:(Wx=!0,Fx);case"textInput":return n=e.data,n===Fx&&Wx?null:n;default:return null}}function V2(n,e){if(La)return n==="compositionend"||!sw&&XT(n,e)?(n=YT(),Rd=nw=Ss=null,La=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return KT&&e.locale!=="ko"?null:e.data;default:return null}}var G2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bx(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!G2[n.type]:e==="textarea"}function QT(n,e,t,r){MT(r),e=lf(e,"onChange"),0<e.length&&(t=new rw("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Nc=null,uu=null;function q2(n){c_(n,0)}function Wp(n){var e=Ba(n);if(ST(e))return n}function Y2(n,e){if(n==="change")return e}var ZT=!1;if(Ti){var om;if(Ti){var am="oninput"in document;if(!am){var zx=document.createElement("div");zx.setAttribute("oninput","return;"),am=typeof zx.oninput=="function"}om=am}else om=!1;ZT=om&&(!document.documentMode||9<document.documentMode)}function $x(){Nc&&(Nc.detachEvent("onpropertychange",e_),uu=Nc=null)}function e_(n){if(n.propertyName==="value"&&Wp(uu)){var e=[];QT(e,uu,n,Jv(n)),DT(q2,e)}}function K2(n,e,t){n==="focusin"?($x(),Nc=e,uu=t,Nc.attachEvent("onpropertychange",e_)):n==="focusout"&&$x()}function X2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Wp(uu)}function J2(n,e){if(n==="click")return Wp(e)}function Q2(n,e){if(n==="input"||n==="change")return Wp(e)}function Z2(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Tr=typeof Object.is=="function"?Object.is:Z2;function hu(n,e){if(Tr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Ry.call(e,i)||!Tr(n[i],e[i]))return!1}return!0}function Hx(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ux(n,e){var t=Hx(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Hx(t)}}function t_(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?t_(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function n_(){for(var n=window,e=ef();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=ef(n.document)}return e}function ow(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function eN(n){var e=n_(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&t_(t.ownerDocument.documentElement,t)){if(r!==null&&ow(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Ux(t,s);var o=Ux(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var tN=Ti&&"documentMode"in document&&11>=document.documentMode,Fa=null,Xy=null,Ic=null,Jy=!1;function Vx(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Jy||Fa==null||Fa!==ef(r)||(r=Fa,"selectionStart"in r&&ow(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ic&&hu(Ic,r)||(Ic=r,r=lf(Xy,"onSelect"),0<r.length&&(e=new rw("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Fa)))}function kh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Wa={animationend:kh("Animation","AnimationEnd"),animationiteration:kh("Animation","AnimationIteration"),animationstart:kh("Animation","AnimationStart"),transitionend:kh("Transition","TransitionEnd")},lm={},r_={};Ti&&(r_=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function Bp(n){if(lm[n])return lm[n];if(!Wa[n])return n;var e=Wa[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in r_)return lm[n]=e[t];return n}var i_=Bp("animationend"),s_=Bp("animationiteration"),o_=Bp("animationstart"),a_=Bp("transitionend"),l_=new Map,Gx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Js(n,e){l_.set(n,e),na(e,[n])}for(var cm=0;cm<Gx.length;cm++){var um=Gx[cm],nN=um.toLowerCase(),rN=um[0].toUpperCase()+um.slice(1);Js(nN,"on"+rN)}Js(i_,"onAnimationEnd");Js(s_,"onAnimationIteration");Js(o_,"onAnimationStart");Js("dblclick","onDoubleClick");Js("focusin","onFocus");Js("focusout","onBlur");Js(a_,"onTransitionEnd");xl("onMouseEnter",["mouseout","mouseover"]);xl("onMouseLeave",["mouseout","mouseover"]);xl("onPointerEnter",["pointerout","pointerover"]);xl("onPointerLeave",["pointerout","pointerover"]);na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));na("onBeforeInput",["compositionend","keypress","textInput","paste"]);na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iN=new Set("cancel close invalid load scroll toggle".split(" ").concat(kc));function qx(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,n2(r,e,void 0,n),n.currentTarget=null}function c_(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;qx(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;qx(i,a,c),s=l}}}if(nf)throw n=Gy,nf=!1,Gy=null,n}function Oe(n,e){var t=e[n0];t===void 0&&(t=e[n0]=new Set);var r=n+"__bubble";t.has(r)||(u_(e,n,2,!1),t.add(r))}function hm(n,e,t){var r=0;e&&(r|=4),u_(t,n,r,e)}var Th="_reactListening"+Math.random().toString(36).slice(2);function du(n){if(!n[Th]){n[Th]=!0,yT.forEach(function(t){t!=="selectionchange"&&(iN.has(t)||hm(t,!1,n),hm(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Th]||(e[Th]=!0,hm("selectionchange",!1,e))}}function u_(n,e,t,r){switch(qT(e)){case 1:var i=v2;break;case 4:i=w2;break;default:i=tw}t=i.bind(null,e,t,n),i=void 0,!Vy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function dm(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=vo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}DT(function(){var c=s,u=Jv(t),h=[];e:{var d=l_.get(n);if(d!==void 0){var f=rw,p=n;switch(n){case"keypress":if(Pd(t)===0)break e;case"keydown":case"keyup":f=N2;break;case"focusin":p="focus",f=sm;break;case"focusout":p="blur",f=sm;break;case"beforeblur":case"afterblur":f=sm;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Ix;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=S2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=L2;break;case i_:case s_:case o_:f=T2;break;case a_:f=W2;break;case"scroll":f=b2;break;case"wheel":f=z2;break;case"copy":case"cut":case"paste":f=E2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Lx}var g=(e&4)!==0,m=!g&&n==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var v=c,w;v!==null;){w=v;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,y!==null&&(x=ou(v,y),x!=null&&g.push(fu(v,x,w)))),m)break;v=v.return}0<g.length&&(d=new f(d,p,null,t,u),h.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",d&&t!==Hy&&(p=t.relatedTarget||t.fromElement)&&(vo(p)||p[_i]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=t.relatedTarget||t.toElement,f=c,p=p?vo(p):null,p!==null&&(m=ra(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(g=Ix,x="onMouseLeave",y="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(g=Lx,x="onPointerLeave",y="onPointerEnter",v="pointer"),m=f==null?d:Ba(f),w=p==null?d:Ba(p),d=new g(x,v+"leave",f,t,u),d.target=m,d.relatedTarget=w,x=null,vo(u)===c&&(g=new g(y,v+"enter",p,t,u),g.target=w,g.relatedTarget=m,x=g),m=x,f&&p)t:{for(g=f,y=p,v=0,w=g;w;w=ga(w))v++;for(w=0,x=y;x;x=ga(x))w++;for(;0<v-w;)g=ga(g),v--;for(;0<w-v;)y=ga(y),w--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=ga(g),y=ga(y)}g=null}else g=null;f!==null&&Yx(h,d,f,g,!1),p!==null&&m!==null&&Yx(h,m,p,g,!0)}}e:{if(d=c?Ba(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var S=Y2;else if(Bx(d))if(ZT)S=Q2;else{S=X2;var C=K2}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=J2);if(S&&(S=S(n,c))){QT(h,S,t,u);break e}C&&C(n,d,c),n==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&Fy(d,"number",d.value)}switch(C=c?Ba(c):window,n){case"focusin":(Bx(C)||C.contentEditable==="true")&&(Fa=C,Xy=c,Ic=null);break;case"focusout":Ic=Xy=Fa=null;break;case"mousedown":Jy=!0;break;case"contextmenu":case"mouseup":case"dragend":Jy=!1,Vx(h,t,u);break;case"selectionchange":if(tN)break;case"keydown":case"keyup":Vx(h,t,u)}var T;if(sw)e:{switch(n){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else La?XT(n,t)&&(_="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(_="onCompositionStart");_&&(KT&&t.locale!=="ko"&&(La||_!=="onCompositionStart"?_==="onCompositionEnd"&&La&&(T=YT()):(Ss=u,nw="value"in Ss?Ss.value:Ss.textContent,La=!0)),C=lf(c,_),0<C.length&&(_=new jx(_,n,null,t,u),h.push({event:_,listeners:C}),T?_.data=T:(T=JT(t),T!==null&&(_.data=T)))),(T=H2?U2(n,t):V2(n,t))&&(c=lf(c,"onBeforeInput"),0<c.length&&(u=new jx("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=T))}c_(h,e)})}function fu(n,e,t){return{instance:n,listener:e,currentTarget:t}}function lf(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ou(n,t),s!=null&&r.unshift(fu(n,s,i)),s=ou(n,e),s!=null&&r.push(fu(n,s,i))),n=n.return}return r}function ga(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Yx(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ou(t,s),l!=null&&o.unshift(fu(t,l,a))):i||(l=ou(t,s),l!=null&&o.push(fu(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var sN=/\r\n?/g,oN=/\u0000|\uFFFD/g;function Kx(n){return(typeof n=="string"?n:""+n).replace(sN,`
`).replace(oN,"")}function _h(n,e,t){if(e=Kx(e),Kx(n)!==e&&t)throw Error(W(425))}function cf(){}var Qy=null,Zy=null;function e0(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var t0=typeof setTimeout=="function"?setTimeout:void 0,aN=typeof clearTimeout=="function"?clearTimeout:void 0,Xx=typeof Promise=="function"?Promise:void 0,lN=typeof queueMicrotask=="function"?queueMicrotask:typeof Xx<"u"?function(n){return Xx.resolve(null).then(n).catch(cN)}:t0;function cN(n){setTimeout(function(){throw n})}function fm(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),cu(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);cu(e)}function Rs(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Jx(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var zl=Math.random().toString(36).slice(2),Br="__reactFiber$"+zl,pu="__reactProps$"+zl,_i="__reactContainer$"+zl,n0="__reactEvents$"+zl,uN="__reactListeners$"+zl,hN="__reactHandles$"+zl;function vo(n){var e=n[Br];if(e)return e;for(var t=n.parentNode;t;){if(e=t[_i]||t[Br]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Jx(n);n!==null;){if(t=n[Br])return t;n=Jx(n)}return e}n=t,t=n.parentNode}return null}function Ju(n){return n=n[Br]||n[_i],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ba(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(W(33))}function zp(n){return n[pu]||null}var r0=[],za=-1;function Qs(n){return{current:n}}function Ae(n){0>za||(n.current=r0[za],r0[za]=null,za--)}function Te(n,e){za++,r0[za]=n.current,n.current=e}var $s={},jt=Qs($s),ln=Qs(!1),Uo=$s;function Sl(n,e){var t=n.type.contextTypes;if(!t)return $s;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function cn(n){return n=n.childContextTypes,n!=null}function uf(){Ae(ln),Ae(jt)}function Qx(n,e,t){if(jt.current!==$s)throw Error(W(168));Te(jt,e),Te(ln,t)}function h_(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,KD(n)||"Unknown",i));return We({},t,r)}function hf(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||$s,Uo=jt.current,Te(jt,n),Te(ln,ln.current),!0}function Zx(n,e,t){var r=n.stateNode;if(!r)throw Error(W(169));t?(n=h_(n,e,Uo),r.__reactInternalMemoizedMergedChildContext=n,Ae(ln),Ae(jt),Te(jt,n)):Ae(ln),Te(ln,t)}var fi=null,$p=!1,pm=!1;function d_(n){fi===null?fi=[n]:fi.push(n)}function dN(n){$p=!0,d_(n)}function Zs(){if(!pm&&fi!==null){pm=!0;var n=0,e=we;try{var t=fi;for(we=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}fi=null,$p=!1}catch(i){throw fi!==null&&(fi=fi.slice(n+1)),LT(Qv,Zs),i}finally{we=e,pm=!1}}return null}var $a=[],Ha=0,df=null,ff=0,Wn=[],Bn=0,Vo=null,yi=1,vi="";function co(n,e){$a[Ha++]=ff,$a[Ha++]=df,df=n,ff=e}function f_(n,e,t){Wn[Bn++]=yi,Wn[Bn++]=vi,Wn[Bn++]=Vo,Vo=n;var r=yi;n=vi;var i=32-Sr(r)-1;r&=~(1<<i),t+=1;var s=32-Sr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,yi=1<<32-Sr(e)+i|t<<i|r,vi=s+n}else yi=1<<s|t<<i|r,vi=n}function aw(n){n.return!==null&&(co(n,1),f_(n,1,0))}function lw(n){for(;n===df;)df=$a[--Ha],$a[Ha]=null,ff=$a[--Ha],$a[Ha]=null;for(;n===Vo;)Vo=Wn[--Bn],Wn[Bn]=null,vi=Wn[--Bn],Wn[Bn]=null,yi=Wn[--Bn],Wn[Bn]=null}var kn=null,Cn=null,De=!1,gr=null;function p_(n,e){var t=Hn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function eS(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,kn=n,Cn=Rs(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,kn=n,Cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Vo!==null?{id:yi,overflow:vi}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Hn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,kn=n,Cn=null,!0):!1;default:return!1}}function i0(n){return(n.mode&1)!==0&&(n.flags&128)===0}function s0(n){if(De){var e=Cn;if(e){var t=e;if(!eS(n,e)){if(i0(n))throw Error(W(418));e=Rs(t.nextSibling);var r=kn;e&&eS(n,e)?p_(r,t):(n.flags=n.flags&-4097|2,De=!1,kn=n)}}else{if(i0(n))throw Error(W(418));n.flags=n.flags&-4097|2,De=!1,kn=n}}}function tS(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;kn=n}function Eh(n){if(n!==kn)return!1;if(!De)return tS(n),De=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!e0(n.type,n.memoizedProps)),e&&(e=Cn)){if(i0(n))throw g_(),Error(W(418));for(;e;)p_(n,e),e=Rs(e.nextSibling)}if(tS(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(W(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Cn=Rs(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Cn=null}}else Cn=kn?Rs(n.stateNode.nextSibling):null;return!0}function g_(){for(var n=Cn;n;)n=Rs(n.nextSibling)}function Cl(){Cn=kn=null,De=!1}function cw(n){gr===null?gr=[n]:gr.push(n)}var fN=Ii.ReactCurrentBatchConfig;function uc(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(W(309));var r=t.stateNode}if(!r)throw Error(W(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(W(284));if(!t._owner)throw Error(W(290,n))}return n}function Oh(n,e){throw n=Object.prototype.toString.call(e),Error(W(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function nS(n){var e=n._init;return e(n._payload)}function m_(n){function e(y,v){if(n){var w=y.deletions;w===null?(y.deletions=[v],y.flags|=16):w.push(v)}}function t(y,v){if(!n)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Is(y,v),y.index=0,y.sibling=null,y}function s(y,v,w){return y.index=w,n?(w=y.alternate,w!==null?(w=w.index,w<v?(y.flags|=2,v):w):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,v,w,x){return v===null||v.tag!==6?(v=xm(w,y.mode,x),v.return=y,v):(v=i(v,w),v.return=y,v)}function l(y,v,w,x){var S=w.type;return S===ja?u(y,v,w.props.children,x,w.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ss&&nS(S)===v.type)?(x=i(v,w.props),x.ref=uc(y,v,w),x.return=y,x):(x=Wd(w.type,w.key,w.props,null,y.mode,x),x.ref=uc(y,v,w),x.return=y,x)}function c(y,v,w,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Sm(w,y.mode,x),v.return=y,v):(v=i(v,w.children||[]),v.return=y,v)}function u(y,v,w,x,S){return v===null||v.tag!==7?(v=jo(w,y.mode,x,S),v.return=y,v):(v=i(v,w),v.return=y,v)}function h(y,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=xm(""+v,y.mode,w),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case yh:return w=Wd(v.type,v.key,v.props,null,y.mode,w),w.ref=uc(y,null,v),w.return=y,w;case Ia:return v=Sm(v,y.mode,w),v.return=y,v;case ss:var x=v._init;return h(y,x(v._payload),w)}if(Sc(v)||sc(v))return v=jo(v,y.mode,w,null),v.return=y,v;Oh(y,v)}return null}function d(y,v,w,x){var S=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(y,v,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case yh:return w.key===S?l(y,v,w,x):null;case Ia:return w.key===S?c(y,v,w,x):null;case ss:return S=w._init,d(y,v,S(w._payload),x)}if(Sc(w)||sc(w))return S!==null?null:u(y,v,w,x,null);Oh(y,w)}return null}function f(y,v,w,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(w)||null,a(v,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case yh:return y=y.get(x.key===null?w:x.key)||null,l(v,y,x,S);case Ia:return y=y.get(x.key===null?w:x.key)||null,c(v,y,x,S);case ss:var C=x._init;return f(y,v,w,C(x._payload),S)}if(Sc(x)||sc(x))return y=y.get(w)||null,u(v,y,x,S,null);Oh(v,x)}return null}function p(y,v,w,x){for(var S=null,C=null,T=v,_=v=0,M=null;T!==null&&_<w.length;_++){T.index>_?(M=T,T=null):M=T.sibling;var P=d(y,T,w[_],x);if(P===null){T===null&&(T=M);break}n&&T&&P.alternate===null&&e(y,T),v=s(P,v,_),C===null?S=P:C.sibling=P,C=P,T=M}if(_===w.length)return t(y,T),De&&co(y,_),S;if(T===null){for(;_<w.length;_++)T=h(y,w[_],x),T!==null&&(v=s(T,v,_),C===null?S=T:C.sibling=T,C=T);return De&&co(y,_),S}for(T=r(y,T);_<w.length;_++)M=f(T,y,_,w[_],x),M!==null&&(n&&M.alternate!==null&&T.delete(M.key===null?_:M.key),v=s(M,v,_),C===null?S=M:C.sibling=M,C=M);return n&&T.forEach(function($){return e(y,$)}),De&&co(y,_),S}function g(y,v,w,x){var S=sc(w);if(typeof S!="function")throw Error(W(150));if(w=S.call(w),w==null)throw Error(W(151));for(var C=S=null,T=v,_=v=0,M=null,P=w.next();T!==null&&!P.done;_++,P=w.next()){T.index>_?(M=T,T=null):M=T.sibling;var $=d(y,T,P.value,x);if($===null){T===null&&(T=M);break}n&&T&&$.alternate===null&&e(y,T),v=s($,v,_),C===null?S=$:C.sibling=$,C=$,T=M}if(P.done)return t(y,T),De&&co(y,_),S;if(T===null){for(;!P.done;_++,P=w.next())P=h(y,P.value,x),P!==null&&(v=s(P,v,_),C===null?S=P:C.sibling=P,C=P);return De&&co(y,_),S}for(T=r(y,T);!P.done;_++,P=w.next())P=f(T,y,_,P.value,x),P!==null&&(n&&P.alternate!==null&&T.delete(P.key===null?_:P.key),v=s(P,v,_),C===null?S=P:C.sibling=P,C=P);return n&&T.forEach(function(N){return e(y,N)}),De&&co(y,_),S}function m(y,v,w,x){if(typeof w=="object"&&w!==null&&w.type===ja&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case yh:e:{for(var S=w.key,C=v;C!==null;){if(C.key===S){if(S=w.type,S===ja){if(C.tag===7){t(y,C.sibling),v=i(C,w.props.children),v.return=y,y=v;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ss&&nS(S)===C.type){t(y,C.sibling),v=i(C,w.props),v.ref=uc(y,C,w),v.return=y,y=v;break e}t(y,C);break}else e(y,C);C=C.sibling}w.type===ja?(v=jo(w.props.children,y.mode,x,w.key),v.return=y,y=v):(x=Wd(w.type,w.key,w.props,null,y.mode,x),x.ref=uc(y,v,w),x.return=y,y=x)}return o(y);case Ia:e:{for(C=w.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){t(y,v.sibling),v=i(v,w.children||[]),v.return=y,y=v;break e}else{t(y,v);break}else e(y,v);v=v.sibling}v=Sm(w,y.mode,x),v.return=y,y=v}return o(y);case ss:return C=w._init,m(y,v,C(w._payload),x)}if(Sc(w))return p(y,v,w,x);if(sc(w))return g(y,v,w,x);Oh(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(t(y,v.sibling),v=i(v,w),v.return=y,y=v):(t(y,v),v=xm(w,y.mode,x),v.return=y,y=v),o(y)):t(y,v)}return m}var kl=m_(!0),y_=m_(!1),pf=Qs(null),gf=null,Ua=null,uw=null;function hw(){uw=Ua=gf=null}function dw(n){var e=pf.current;Ae(pf),n._currentValue=e}function o0(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function nl(n,e){gf=n,uw=Ua=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(an=!0),n.firstContext=null)}function Kn(n){var e=n._currentValue;if(uw!==n)if(n={context:n,memoizedValue:e,next:null},Ua===null){if(gf===null)throw Error(W(308));Ua=n,gf.dependencies={lanes:0,firstContext:n}}else Ua=Ua.next=n;return e}var wo=null;function fw(n){wo===null?wo=[n]:wo.push(n)}function v_(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,fw(e)):(t.next=i.next,i.next=t),e.interleaved=t,Ei(n,r)}function Ei(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var as=!1;function pw(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w_(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Si(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ps(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ei(n,t)}return i=r.interleaved,i===null?(e.next=e,fw(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ei(n,t)}function Dd(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Zv(n,t)}}function rS(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function mf(n,e,t,r){var i=n.updateQueue;as=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=n,g=a;switch(d=e,f=t,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=We({},h,d);break e;case 2:as=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);qo|=o,n.lanes=o,n.memoizedState=h}}function iS(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var Qu={},Gr=Qs(Qu),gu=Qs(Qu),mu=Qs(Qu);function bo(n){if(n===Qu)throw Error(W(174));return n}function gw(n,e){switch(Te(mu,e),Te(gu,n),Te(Gr,Qu),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:By(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=By(e,n)}Ae(Gr),Te(Gr,e)}function Tl(){Ae(Gr),Ae(gu),Ae(mu)}function b_(n){bo(mu.current);var e=bo(Gr.current),t=By(e,n.type);e!==t&&(Te(gu,n),Te(Gr,t))}function mw(n){gu.current===n&&(Ae(Gr),Ae(gu))}var je=Qs(0);function yf(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gm=[];function yw(){for(var n=0;n<gm.length;n++)gm[n]._workInProgressVersionPrimary=null;gm.length=0}var Nd=Ii.ReactCurrentDispatcher,mm=Ii.ReactCurrentBatchConfig,Go=0,Fe=null,at=null,ft=null,vf=!1,jc=!1,yu=0,pN=0;function Ot(){throw Error(W(321))}function vw(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Tr(n[t],e[t]))return!1;return!0}function ww(n,e,t,r,i,s){if(Go=s,Fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nd.current=n===null||n.memoizedState===null?vN:wN,n=t(r,i),jc){s=0;do{if(jc=!1,yu=0,25<=s)throw Error(W(301));s+=1,ft=at=null,e.updateQueue=null,Nd.current=bN,n=t(r,i)}while(jc)}if(Nd.current=wf,e=at!==null&&at.next!==null,Go=0,ft=at=Fe=null,vf=!1,e)throw Error(W(300));return n}function bw(){var n=yu!==0;return yu=0,n}function Ar(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Fe.memoizedState=ft=n:ft=ft.next=n,ft}function Xn(){if(at===null){var n=Fe.alternate;n=n!==null?n.memoizedState:null}else n=at.next;var e=ft===null?Fe.memoizedState:ft.next;if(e!==null)ft=e,at=n;else{if(n===null)throw Error(W(310));at=n,n={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},ft===null?Fe.memoizedState=ft=n:ft=ft.next=n}return ft}function vu(n,e){return typeof e=="function"?e(n):e}function ym(n){var e=Xn(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var r=at,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Go&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Fe.lanes|=u,qo|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Tr(r,e.memoizedState)||(an=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Fe.lanes|=s,qo|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function vm(n){var e=Xn(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Tr(s,e.memoizedState)||(an=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function x_(){}function S_(n,e){var t=Fe,r=Xn(),i=e(),s=!Tr(r.memoizedState,i);if(s&&(r.memoizedState=i,an=!0),r=r.queue,xw(T_.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||ft!==null&&ft.memoizedState.tag&1){if(t.flags|=2048,wu(9,k_.bind(null,t,r,i,e),void 0,null),gt===null)throw Error(W(349));Go&30||C_(t,e,i)}return i}function C_(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function k_(n,e,t,r){e.value=t,e.getSnapshot=r,__(e)&&E_(n)}function T_(n,e,t){return t(function(){__(e)&&E_(n)})}function __(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Tr(n,t)}catch{return!0}}function E_(n){var e=Ei(n,1);e!==null&&Cr(e,n,1,-1)}function sS(n){var e=Ar();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vu,lastRenderedState:n},e.queue=n,n=n.dispatch=yN.bind(null,Fe,n),[e.memoizedState,n]}function wu(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function O_(){return Xn().memoizedState}function Id(n,e,t,r){var i=Ar();Fe.flags|=n,i.memoizedState=wu(1|e,t,void 0,r===void 0?null:r)}function Hp(n,e,t,r){var i=Xn();r=r===void 0?null:r;var s=void 0;if(at!==null){var o=at.memoizedState;if(s=o.destroy,r!==null&&vw(r,o.deps)){i.memoizedState=wu(e,t,s,r);return}}Fe.flags|=n,i.memoizedState=wu(1|e,t,s,r)}function oS(n,e){return Id(8390656,8,n,e)}function xw(n,e){return Hp(2048,8,n,e)}function M_(n,e){return Hp(4,2,n,e)}function A_(n,e){return Hp(4,4,n,e)}function R_(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function P_(n,e,t){return t=t!=null?t.concat([n]):null,Hp(4,4,R_.bind(null,e,n),t)}function Sw(){}function D_(n,e){var t=Xn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&vw(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function N_(n,e){var t=Xn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&vw(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function I_(n,e,t){return Go&21?(Tr(t,e)||(t=BT(),Fe.lanes|=t,qo|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,an=!0),n.memoizedState=t)}function gN(n,e){var t=we;we=t!==0&&4>t?t:4,n(!0);var r=mm.transition;mm.transition={};try{n(!1),e()}finally{we=t,mm.transition=r}}function j_(){return Xn().memoizedState}function mN(n,e,t){var r=Ns(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},L_(n))F_(e,t);else if(t=v_(n,e,t,r),t!==null){var i=Vt();Cr(t,n,r,i),W_(t,e,r)}}function yN(n,e,t){var r=Ns(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(L_(n))F_(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Tr(a,o)){var l=e.interleaved;l===null?(i.next=i,fw(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=v_(n,e,i,r),t!==null&&(i=Vt(),Cr(t,n,r,i),W_(t,e,r))}}function L_(n){var e=n.alternate;return n===Fe||e!==null&&e===Fe}function F_(n,e){jc=vf=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function W_(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Zv(n,t)}}var wf={readContext:Kn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},vN={readContext:Kn,useCallback:function(n,e){return Ar().memoizedState=[n,e===void 0?null:e],n},useContext:Kn,useEffect:oS,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Id(4194308,4,R_.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Id(4194308,4,n,e)},useInsertionEffect:function(n,e){return Id(4,2,n,e)},useMemo:function(n,e){var t=Ar();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Ar();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=mN.bind(null,Fe,n),[r.memoizedState,n]},useRef:function(n){var e=Ar();return n={current:n},e.memoizedState=n},useState:sS,useDebugValue:Sw,useDeferredValue:function(n){return Ar().memoizedState=n},useTransition:function(){var n=sS(!1),e=n[0];return n=gN.bind(null,n[1]),Ar().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Fe,i=Ar();if(De){if(t===void 0)throw Error(W(407));t=t()}else{if(t=e(),gt===null)throw Error(W(349));Go&30||C_(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,oS(T_.bind(null,r,s,n),[n]),r.flags|=2048,wu(9,k_.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Ar(),e=gt.identifierPrefix;if(De){var t=vi,r=yi;t=(r&~(1<<32-Sr(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=yu++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=pN++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},wN={readContext:Kn,useCallback:D_,useContext:Kn,useEffect:xw,useImperativeHandle:P_,useInsertionEffect:M_,useLayoutEffect:A_,useMemo:N_,useReducer:ym,useRef:O_,useState:function(){return ym(vu)},useDebugValue:Sw,useDeferredValue:function(n){var e=Xn();return I_(e,at.memoizedState,n)},useTransition:function(){var n=ym(vu)[0],e=Xn().memoizedState;return[n,e]},useMutableSource:x_,useSyncExternalStore:S_,useId:j_,unstable_isNewReconciler:!1},bN={readContext:Kn,useCallback:D_,useContext:Kn,useEffect:xw,useImperativeHandle:P_,useInsertionEffect:M_,useLayoutEffect:A_,useMemo:N_,useReducer:vm,useRef:O_,useState:function(){return vm(vu)},useDebugValue:Sw,useDeferredValue:function(n){var e=Xn();return at===null?e.memoizedState=n:I_(e,at.memoizedState,n)},useTransition:function(){var n=vm(vu)[0],e=Xn().memoizedState;return[n,e]},useMutableSource:x_,useSyncExternalStore:S_,useId:j_,unstable_isNewReconciler:!1};function lr(n,e){if(n&&n.defaultProps){e=We({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function a0(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:We({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Up={isMounted:function(n){return(n=n._reactInternals)?ra(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Vt(),i=Ns(n),s=Si(r,i);s.payload=e,t!=null&&(s.callback=t),e=Ps(n,s,i),e!==null&&(Cr(e,n,i,r),Dd(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Vt(),i=Ns(n),s=Si(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ps(n,s,i),e!==null&&(Cr(e,n,i,r),Dd(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Vt(),r=Ns(n),i=Si(t,r);i.tag=2,e!=null&&(i.callback=e),e=Ps(n,i,r),e!==null&&(Cr(e,n,r,t),Dd(e,n,r))}};function aS(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!hu(t,r)||!hu(i,s):!0}function B_(n,e,t){var r=!1,i=$s,s=e.contextType;return typeof s=="object"&&s!==null?s=Kn(s):(i=cn(e)?Uo:jt.current,r=e.contextTypes,s=(r=r!=null)?Sl(n,i):$s),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Up,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function lS(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Up.enqueueReplaceState(e,e.state,null)}function l0(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},pw(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Kn(s):(s=cn(e)?Uo:jt.current,i.context=Sl(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(a0(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Up.enqueueReplaceState(i,i.state,null),mf(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function _l(n,e){try{var t="",r=e;do t+=YD(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function wm(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function c0(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var xN=typeof WeakMap=="function"?WeakMap:Map;function z_(n,e,t){t=Si(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){xf||(xf=!0,w0=r),c0(n,e)},t}function $_(n,e,t){t=Si(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){c0(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){c0(n,e),typeof r!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function cS(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new xN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=IN.bind(null,n,e,t),e.then(n,n))}function uS(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function hS(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Si(-1,1),e.tag=2,Ps(t,e,1))),t.lanes|=1),n)}var SN=Ii.ReactCurrentOwner,an=!1;function Bt(n,e,t,r){e.child=n===null?y_(e,null,t,r):kl(e,n.child,t,r)}function dS(n,e,t,r,i){t=t.render;var s=e.ref;return nl(e,i),r=ww(n,e,t,r,s,i),t=bw(),n!==null&&!an?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Oi(n,e,i)):(De&&t&&aw(e),e.flags|=1,Bt(n,e,r,i),e.child)}function fS(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!Aw(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,H_(n,e,s,r,i)):(n=Wd(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:hu,t(o,r)&&n.ref===e.ref)return Oi(n,e,i)}return e.flags|=1,n=Is(s,r),n.ref=e.ref,n.return=e,e.child=n}function H_(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(hu(s,r)&&n.ref===e.ref)if(an=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(an=!0);else return e.lanes=n.lanes,Oi(n,e,i)}return u0(n,e,t,r,i)}function U_(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Ga,bn),bn|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Te(Ga,bn),bn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Te(Ga,bn),bn|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Te(Ga,bn),bn|=r;return Bt(n,e,i,t),e.child}function V_(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function u0(n,e,t,r,i){var s=cn(t)?Uo:jt.current;return s=Sl(e,s),nl(e,i),t=ww(n,e,t,r,s,i),r=bw(),n!==null&&!an?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Oi(n,e,i)):(De&&r&&aw(e),e.flags|=1,Bt(n,e,t,i),e.child)}function pS(n,e,t,r,i){if(cn(t)){var s=!0;hf(e)}else s=!1;if(nl(e,i),e.stateNode===null)jd(n,e),B_(e,t,r),l0(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Kn(c):(c=cn(t)?Uo:jt.current,c=Sl(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&lS(e,o,r,c),as=!1;var d=e.memoizedState;o.state=d,mf(e,r,o,i),l=e.memoizedState,a!==r||d!==l||ln.current||as?(typeof u=="function"&&(a0(e,t,u,r),l=e.memoizedState),(a=as||aS(e,t,a,r,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,w_(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:lr(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Kn(l):(l=cn(t)?Uo:jt.current,l=Sl(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&lS(e,o,r,l),as=!1,d=e.memoizedState,o.state=d,mf(e,r,o,i);var p=e.memoizedState;a!==h||d!==p||ln.current||as?(typeof f=="function"&&(a0(e,t,f,r),p=e.memoizedState),(c=as||aS(e,t,c,r,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return h0(n,e,t,r,s,i)}function h0(n,e,t,r,i,s){V_(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Zx(e,t,!1),Oi(n,e,s);r=e.stateNode,SN.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=kl(e,n.child,null,s),e.child=kl(e,null,a,s)):Bt(n,e,a,s),e.memoizedState=r.state,i&&Zx(e,t,!0),e.child}function G_(n){var e=n.stateNode;e.pendingContext?Qx(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Qx(n,e.context,!1),gw(n,e.containerInfo)}function gS(n,e,t,r,i){return Cl(),cw(i),e.flags|=256,Bt(n,e,t,r),e.child}var d0={dehydrated:null,treeContext:null,retryLane:0};function f0(n){return{baseLanes:n,cachePool:null,transitions:null}}function q_(n,e,t){var r=e.pendingProps,i=je.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Te(je,i&1),n===null)return s0(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=qp(o,r,0,null),n=jo(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=f0(t),e.memoizedState=d0,n):Cw(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return CN(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Is(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Is(a,s):(s=jo(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?f0(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=d0,r}return s=n.child,n=s.sibling,r=Is(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Cw(n,e){return e=qp({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Mh(n,e,t,r){return r!==null&&cw(r),kl(e,n.child,null,t),n=Cw(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function CN(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=wm(Error(W(422))),Mh(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=qp({mode:"visible",children:r.children},i,0,null),s=jo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&kl(e,n.child,null,o),e.child.memoizedState=f0(o),e.memoizedState=d0,s);if(!(e.mode&1))return Mh(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=wm(s,r,void 0),Mh(n,e,o,r)}if(a=(o&n.childLanes)!==0,an||a){if(r=gt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ei(n,i),Cr(r,n,i,-1))}return Mw(),r=wm(Error(W(421))),Mh(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=jN.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Cn=Rs(i.nextSibling),kn=e,De=!0,gr=null,n!==null&&(Wn[Bn++]=yi,Wn[Bn++]=vi,Wn[Bn++]=Vo,yi=n.id,vi=n.overflow,Vo=e),e=Cw(e,r.children),e.flags|=4096,e)}function mS(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),o0(n.return,e,t)}function bm(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function Y_(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Bt(n,e,r.children,t),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&mS(n,t,e);else if(n.tag===19)mS(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Te(je,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&yf(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),bm(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&yf(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}bm(e,!0,t,null,s);break;case"together":bm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jd(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Oi(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),qo|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(W(153));if(e.child!==null){for(n=e.child,t=Is(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Is(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function kN(n,e,t){switch(e.tag){case 3:G_(e),Cl();break;case 5:b_(e);break;case 1:cn(e.type)&&hf(e);break;case 4:gw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Te(pf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(je,je.current&1),e.flags|=128,null):t&e.child.childLanes?q_(n,e,t):(Te(je,je.current&1),n=Oi(n,e,t),n!==null?n.sibling:null);Te(je,je.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return Y_(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Te(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,U_(n,e,t)}return Oi(n,e,t)}var K_,p0,X_,J_;K_=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};p0=function(){};X_=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,bo(Gr.current);var s=null;switch(t){case"input":i=jy(n,i),r=jy(n,r),s=[];break;case"select":i=We({},i,{value:void 0}),r=We({},r,{value:void 0}),s=[];break;case"textarea":i=Wy(n,i),r=Wy(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=cf)}zy(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(iu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(iu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Oe("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};J_=function(n,e,t,r){t!==r&&(e.flags|=4)};function hc(n,e){if(!De)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Mt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function TN(n,e,t){var r=e.pendingProps;switch(lw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return cn(e.type)&&uf(),Mt(e),null;case 3:return r=e.stateNode,Tl(),Ae(ln),Ae(jt),yw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Eh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gr!==null&&(S0(gr),gr=null))),p0(n,e),Mt(e),null;case 5:mw(e);var i=bo(mu.current);if(t=e.type,n!==null&&e.stateNode!=null)X_(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Mt(e),null}if(n=bo(Gr.current),Eh(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Br]=e,r[pu]=s,n=(e.mode&1)!==0,t){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(i=0;i<kc.length;i++)Oe(kc[i],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Tx(r,s),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Oe("invalid",r);break;case"textarea":Ex(r,s),Oe("invalid",r)}zy(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&_h(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&_h(r.textContent,a,n),i=["children",""+a]):iu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Oe("scroll",r)}switch(t){case"input":vh(r),_x(r,s,!0);break;case"textarea":vh(r),Ox(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=cf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=TT(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Br]=e,n[pu]=r,K_(n,e,!1,!1),e.stateNode=n;e:{switch(o=$y(t,r),t){case"dialog":Oe("cancel",n),Oe("close",n),i=r;break;case"iframe":case"object":case"embed":Oe("load",n),i=r;break;case"video":case"audio":for(i=0;i<kc.length;i++)Oe(kc[i],n);i=r;break;case"source":Oe("error",n),i=r;break;case"img":case"image":case"link":Oe("error",n),Oe("load",n),i=r;break;case"details":Oe("toggle",n),i=r;break;case"input":Tx(n,r),i=jy(n,r),Oe("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=We({},r,{value:void 0}),Oe("invalid",n);break;case"textarea":Ex(n,r),i=Wy(n,r),Oe("invalid",n);break;default:i=r}zy(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?OT(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_T(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&su(n,l):typeof l=="number"&&su(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(iu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Oe("scroll",n):l!=null&&qv(n,s,l,o))}switch(t){case"input":vh(n),_x(n,r,!1);break;case"textarea":vh(n),Ox(n);break;case"option":r.value!=null&&n.setAttribute("value",""+zs(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Qa(n,!!r.multiple,s,!1):r.defaultValue!=null&&Qa(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=cf)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(n&&e.stateNode!=null)J_(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(t=bo(mu.current),bo(Gr.current),Eh(e)){if(r=e.stateNode,t=e.memoizedProps,r[Br]=e,(s=r.nodeValue!==t)&&(n=kn,n!==null))switch(n.tag){case 3:_h(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&_h(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Br]=e,e.stateNode=r}return Mt(e),null;case 13:if(Ae(je),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(De&&Cn!==null&&e.mode&1&&!(e.flags&128))g_(),Cl(),e.flags|=98560,s=!1;else if(s=Eh(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[Br]=e}else Cl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),s=!1}else gr!==null&&(S0(gr),gr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||je.current&1?ct===0&&(ct=3):Mw())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return Tl(),p0(n,e),n===null&&du(e.stateNode.containerInfo),Mt(e),null;case 10:return dw(e.type._context),Mt(e),null;case 17:return cn(e.type)&&uf(),Mt(e),null;case 19:if(Ae(je),s=e.memoizedState,s===null)return Mt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)hc(s,!1);else{if(ct!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=yf(n),o!==null){for(e.flags|=128,hc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Te(je,je.current&1|2),e.child}n=n.sibling}s.tail!==null&&Ye()>El&&(e.flags|=128,r=!0,hc(s,!1),e.lanes=4194304)}else{if(!r)if(n=yf(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),hc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!De)return Mt(e),null}else 2*Ye()-s.renderingStartTime>El&&t!==1073741824&&(e.flags|=128,r=!0,hc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ye(),e.sibling=null,t=je.current,Te(je,r?t&1|2:t&1),e):(Mt(e),null);case 22:case 23:return Ow(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function _N(n,e){switch(lw(e),e.tag){case 1:return cn(e.type)&&uf(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Tl(),Ae(ln),Ae(jt),yw(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return mw(e),null;case 13:if(Ae(je),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Cl()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ae(je),null;case 4:return Tl(),null;case 10:return dw(e.type._context),null;case 22:case 23:return Ow(),null;case 24:return null;default:return null}}var Ah=!1,Dt=!1,EN=typeof WeakSet=="function"?WeakSet:Set,K=null;function Va(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){$e(n,e,r)}else t.current=null}function g0(n,e,t){try{t()}catch(r){$e(n,e,r)}}var yS=!1;function ON(n,e){if(Qy=of,n=n_(),ow(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=n,d=null;t:for(;;){for(var f;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===n)break t;if(d===t&&++c===i&&(a=o),d===s&&++u===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Zy={focusedElem:n,selectionRange:t},of=!1,K=e;K!==null;)if(e=K,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,K=n;else for(;K!==null;){e=K;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,m=p.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:lr(e.type,g),m);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(x){$e(e,e.return,x)}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}return p=yS,yS=!1,p}function Lc(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&g0(e,t,s)}i=i.next}while(i!==r)}}function Vp(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function m0(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Q_(n){var e=n.alternate;e!==null&&(n.alternate=null,Q_(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Br],delete e[pu],delete e[n0],delete e[uN],delete e[hN])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Z_(n){return n.tag===5||n.tag===3||n.tag===4}function vS(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Z_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function y0(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=cf));else if(r!==4&&(n=n.child,n!==null))for(y0(n,e,t),n=n.sibling;n!==null;)y0(n,e,t),n=n.sibling}function v0(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(v0(n,e,t),n=n.sibling;n!==null;)v0(n,e,t),n=n.sibling}var wt=null,dr=!1;function Gi(n,e,t){for(t=t.child;t!==null;)eE(n,e,t),t=t.sibling}function eE(n,e,t){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(Lp,t)}catch{}switch(t.tag){case 5:Dt||Va(t,e);case 6:var r=wt,i=dr;wt=null,Gi(n,e,t),wt=r,dr=i,wt!==null&&(dr?(n=wt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):wt.removeChild(t.stateNode));break;case 18:wt!==null&&(dr?(n=wt,t=t.stateNode,n.nodeType===8?fm(n.parentNode,t):n.nodeType===1&&fm(n,t),cu(n)):fm(wt,t.stateNode));break;case 4:r=wt,i=dr,wt=t.stateNode.containerInfo,dr=!0,Gi(n,e,t),wt=r,dr=i;break;case 0:case 11:case 14:case 15:if(!Dt&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&g0(t,e,o),i=i.next}while(i!==r)}Gi(n,e,t);break;case 1:if(!Dt&&(Va(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){$e(t,e,a)}Gi(n,e,t);break;case 21:Gi(n,e,t);break;case 22:t.mode&1?(Dt=(r=Dt)||t.memoizedState!==null,Gi(n,e,t),Dt=r):Gi(n,e,t);break;default:Gi(n,e,t)}}function wS(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new EN),e.forEach(function(r){var i=LN.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function nr(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:wt=a.stateNode,dr=!1;break e;case 3:wt=a.stateNode.containerInfo,dr=!0;break e;case 4:wt=a.stateNode.containerInfo,dr=!0;break e}a=a.return}if(wt===null)throw Error(W(160));eE(s,o,i),wt=null,dr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){$e(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tE(e,n),e=e.sibling}function tE(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(nr(e,n),Mr(n),r&4){try{Lc(3,n,n.return),Vp(3,n)}catch(g){$e(n,n.return,g)}try{Lc(5,n,n.return)}catch(g){$e(n,n.return,g)}}break;case 1:nr(e,n),Mr(n),r&512&&t!==null&&Va(t,t.return);break;case 5:if(nr(e,n),Mr(n),r&512&&t!==null&&Va(t,t.return),n.flags&32){var i=n.stateNode;try{su(i,"")}catch(g){$e(n,n.return,g)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&CT(i,s),$y(a,o);var c=$y(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?OT(i,h):u==="dangerouslySetInnerHTML"?_T(i,h):u==="children"?su(i,h):qv(i,u,h,c)}switch(a){case"input":Ly(i,s);break;case"textarea":kT(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Qa(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Qa(i,!!s.multiple,s.defaultValue,!0):Qa(i,!!s.multiple,s.multiple?[]:"",!1))}i[pu]=s}catch(g){$e(n,n.return,g)}}break;case 6:if(nr(e,n),Mr(n),r&4){if(n.stateNode===null)throw Error(W(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(g){$e(n,n.return,g)}}break;case 3:if(nr(e,n),Mr(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{cu(e.containerInfo)}catch(g){$e(n,n.return,g)}break;case 4:nr(e,n),Mr(n);break;case 13:nr(e,n),Mr(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(_w=Ye())),r&4&&wS(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Dt=(c=Dt)||u,nr(e,n),Dt=c):nr(e,n),Mr(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(K=n,u=n.child;u!==null;){for(h=K=u;K!==null;){switch(d=K,f=d.child,d.tag){case 0:case 11:case 14:case 15:Lc(4,d,d.return);break;case 1:Va(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){$e(r,t,g)}}break;case 5:Va(d,d.return);break;case 22:if(d.memoizedState!==null){xS(h);continue}}f!==null?(f.return=d,K=f):xS(h)}u=u.sibling}e:for(u=null,h=n;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ET("display",o))}catch(g){$e(n,n.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){$e(n,n.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:nr(e,n),Mr(n),r&4&&wS(n);break;case 21:break;default:nr(e,n),Mr(n)}}function Mr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Z_(t)){var r=t;break e}t=t.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(su(i,""),r.flags&=-33);var s=vS(n);v0(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=vS(n);y0(n,a,o);break;default:throw Error(W(161))}}catch(l){$e(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function MN(n,e,t){K=n,nE(n)}function nE(n,e,t){for(var r=(n.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ah;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Dt;a=Ah;var c=Dt;if(Ah=o,(Dt=l)&&!c)for(K=i;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?SS(i):l!==null?(l.return=o,K=l):SS(i);for(;s!==null;)K=s,nE(s),s=s.sibling;K=i,Ah=a,Dt=c}bS(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):bS(n)}}function bS(n){for(;K!==null;){var e=K;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dt||Vp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Dt)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:lr(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&iS(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}iS(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&cu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Dt||e.flags&512&&m0(e)}catch(d){$e(e,e.return,d)}}if(e===n){K=null;break}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}}function xS(n){for(;K!==null;){var e=K;if(e===n){K=null;break}var t=e.sibling;if(t!==null){t.return=e.return,K=t;break}K=e.return}}function SS(n){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Vp(4,e)}catch(l){$e(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){$e(e,i,l)}}var s=e.return;try{m0(e)}catch(l){$e(e,s,l)}break;case 5:var o=e.return;try{m0(e)}catch(l){$e(e,o,l)}}}catch(l){$e(e,e.return,l)}if(e===n){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var AN=Math.ceil,bf=Ii.ReactCurrentDispatcher,kw=Ii.ReactCurrentOwner,Un=Ii.ReactCurrentBatchConfig,fe=0,gt=null,tt=null,kt=0,bn=0,Ga=Qs(0),ct=0,bu=null,qo=0,Gp=0,Tw=0,Fc=null,rn=null,_w=0,El=1/0,ui=null,xf=!1,w0=null,Ds=null,Rh=!1,Cs=null,Sf=0,Wc=0,b0=null,Ld=-1,Fd=0;function Vt(){return fe&6?Ye():Ld!==-1?Ld:Ld=Ye()}function Ns(n){return n.mode&1?fe&2&&kt!==0?kt&-kt:fN.transition!==null?(Fd===0&&(Fd=BT()),Fd):(n=we,n!==0||(n=window.event,n=n===void 0?16:qT(n.type)),n):1}function Cr(n,e,t,r){if(50<Wc)throw Wc=0,b0=null,Error(W(185));Ku(n,t,r),(!(fe&2)||n!==gt)&&(n===gt&&(!(fe&2)&&(Gp|=t),ct===4&&ds(n,kt)),un(n,r),t===1&&fe===0&&!(e.mode&1)&&(El=Ye()+500,$p&&Zs()))}function un(n,e){var t=n.callbackNode;f2(n,e);var r=sf(n,n===gt?kt:0);if(r===0)t!==null&&Rx(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Rx(t),e===1)n.tag===0?dN(CS.bind(null,n)):d_(CS.bind(null,n)),lN(function(){!(fe&6)&&Zs()}),t=null;else{switch(zT(r)){case 1:t=Qv;break;case 4:t=FT;break;case 16:t=rf;break;case 536870912:t=WT;break;default:t=rf}t=uE(t,rE.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function rE(n,e){if(Ld=-1,Fd=0,fe&6)throw Error(W(327));var t=n.callbackNode;if(rl()&&n.callbackNode!==t)return null;var r=sf(n,n===gt?kt:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Cf(n,r);else{e=r;var i=fe;fe|=2;var s=sE();(gt!==n||kt!==e)&&(ui=null,El=Ye()+500,Io(n,e));do try{DN();break}catch(a){iE(n,a)}while(!0);hw(),bf.current=s,fe=i,tt!==null?e=0:(gt=null,kt=0,e=ct)}if(e!==0){if(e===2&&(i=qy(n),i!==0&&(r=i,e=x0(n,i))),e===1)throw t=bu,Io(n,0),ds(n,r),un(n,Ye()),t;if(e===6)ds(n,r);else{if(i=n.current.alternate,!(r&30)&&!RN(i)&&(e=Cf(n,r),e===2&&(s=qy(n),s!==0&&(r=s,e=x0(n,s))),e===1))throw t=bu,Io(n,0),ds(n,r),un(n,Ye()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:uo(n,rn,ui);break;case 3:if(ds(n,r),(r&130023424)===r&&(e=_w+500-Ye(),10<e)){if(sf(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Vt(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=t0(uo.bind(null,n,rn,ui),e);break}uo(n,rn,ui);break;case 4:if(ds(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Sr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AN(r/1960))-r,10<r){n.timeoutHandle=t0(uo.bind(null,n,rn,ui),r);break}uo(n,rn,ui);break;case 5:uo(n,rn,ui);break;default:throw Error(W(329))}}}return un(n,Ye()),n.callbackNode===t?rE.bind(null,n):null}function x0(n,e){var t=Fc;return n.current.memoizedState.isDehydrated&&(Io(n,e).flags|=256),n=Cf(n,e),n!==2&&(e=rn,rn=t,e!==null&&S0(e)),n}function S0(n){rn===null?rn=n:rn.push.apply(rn,n)}function RN(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Tr(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ds(n,e){for(e&=~Tw,e&=~Gp,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Sr(e),r=1<<t;n[t]=-1,e&=~r}}function CS(n){if(fe&6)throw Error(W(327));rl();var e=sf(n,0);if(!(e&1))return un(n,Ye()),null;var t=Cf(n,e);if(n.tag!==0&&t===2){var r=qy(n);r!==0&&(e=r,t=x0(n,r))}if(t===1)throw t=bu,Io(n,0),ds(n,e),un(n,Ye()),t;if(t===6)throw Error(W(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,uo(n,rn,ui),un(n,Ye()),null}function Ew(n,e){var t=fe;fe|=1;try{return n(e)}finally{fe=t,fe===0&&(El=Ye()+500,$p&&Zs())}}function Yo(n){Cs!==null&&Cs.tag===0&&!(fe&6)&&rl();var e=fe;fe|=1;var t=Un.transition,r=we;try{if(Un.transition=null,we=1,n)return n()}finally{we=r,Un.transition=t,fe=e,!(fe&6)&&Zs()}}function Ow(){bn=Ga.current,Ae(Ga)}function Io(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,aN(t)),tt!==null)for(t=tt.return;t!==null;){var r=t;switch(lw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&uf();break;case 3:Tl(),Ae(ln),Ae(jt),yw();break;case 5:mw(r);break;case 4:Tl();break;case 13:Ae(je);break;case 19:Ae(je);break;case 10:dw(r.type._context);break;case 22:case 23:Ow()}t=t.return}if(gt=n,tt=n=Is(n.current,null),kt=bn=e,ct=0,bu=null,Tw=Gp=qo=0,rn=Fc=null,wo!==null){for(e=0;e<wo.length;e++)if(t=wo[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}wo=null}return n}function iE(n,e){do{var t=tt;try{if(hw(),Nd.current=wf,vf){for(var r=Fe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}vf=!1}if(Go=0,ft=at=Fe=null,jc=!1,yu=0,kw.current=null,t===null||t.return===null){ct=1,bu=e,tt=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=kt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=uS(o);if(f!==null){f.flags&=-257,hS(f,o,a,s,e),f.mode&1&&cS(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){cS(s,c,e),Mw();break e}l=Error(W(426))}}else if(De&&a.mode&1){var m=uS(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),hS(m,o,a,s,e),cw(_l(l,a));break e}}s=l=_l(l,a),ct!==4&&(ct=2),Fc===null?Fc=[s]:Fc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=z_(s,l,e);rS(s,y);break e;case 1:a=l;var v=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ds===null||!Ds.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=$_(s,a,e);rS(s,x);break e}}s=s.return}while(s!==null)}aE(t)}catch(S){e=S,tt===t&&t!==null&&(tt=t=t.return);continue}break}while(!0)}function sE(){var n=bf.current;return bf.current=wf,n===null?wf:n}function Mw(){(ct===0||ct===3||ct===2)&&(ct=4),gt===null||!(qo&268435455)&&!(Gp&268435455)||ds(gt,kt)}function Cf(n,e){var t=fe;fe|=2;var r=sE();(gt!==n||kt!==e)&&(ui=null,Io(n,e));do try{PN();break}catch(i){iE(n,i)}while(!0);if(hw(),fe=t,bf.current=r,tt!==null)throw Error(W(261));return gt=null,kt=0,ct}function PN(){for(;tt!==null;)oE(tt)}function DN(){for(;tt!==null&&!i2();)oE(tt)}function oE(n){var e=cE(n.alternate,n,bn);n.memoizedProps=n.pendingProps,e===null?aE(n):tt=e,kw.current=null}function aE(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=_N(t,e),t!==null){t.flags&=32767,tt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ct=6,tt=null;return}}else if(t=TN(t,e,bn),t!==null){tt=t;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=n}while(e!==null);ct===0&&(ct=5)}function uo(n,e,t){var r=we,i=Un.transition;try{Un.transition=null,we=1,NN(n,e,t,r)}finally{Un.transition=i,we=r}return null}function NN(n,e,t,r){do rl();while(Cs!==null);if(fe&6)throw Error(W(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(W(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(p2(n,s),n===gt&&(tt=gt=null,kt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Rh||(Rh=!0,uE(rf,function(){return rl(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Un.transition,Un.transition=null;var o=we;we=1;var a=fe;fe|=4,kw.current=null,ON(n,t),tE(t,n),eN(Zy),of=!!Qy,Zy=Qy=null,n.current=t,MN(t),s2(),fe=a,we=o,Un.transition=s}else n.current=t;if(Rh&&(Rh=!1,Cs=n,Sf=i),s=n.pendingLanes,s===0&&(Ds=null),l2(t.stateNode),un(n,Ye()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(xf)throw xf=!1,n=w0,w0=null,n;return Sf&1&&n.tag!==0&&rl(),s=n.pendingLanes,s&1?n===b0?Wc++:(Wc=0,b0=n):Wc=0,Zs(),null}function rl(){if(Cs!==null){var n=zT(Sf),e=Un.transition,t=we;try{if(Un.transition=null,we=16>n?16:n,Cs===null)var r=!1;else{if(n=Cs,Cs=null,Sf=0,fe&6)throw Error(W(331));var i=fe;for(fe|=4,K=n.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(K=c;K!==null;){var u=K;switch(u.tag){case 0:case 11:case 15:Lc(8,u,s)}var h=u.child;if(h!==null)h.return=u,K=h;else for(;K!==null;){u=K;var d=u.sibling,f=u.return;if(Q_(u),u===c){K=null;break}if(d!==null){d.return=f,K=d;break}K=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Lc(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,K=y;break e}K=s.return}}var v=n.current;for(K=v;K!==null;){o=K;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,K=w;else e:for(o=v;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Vp(9,a)}}catch(S){$e(a,a.return,S)}if(a===o){K=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,K=x;break e}K=a.return}}if(fe=i,Zs(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(Lp,n)}catch{}r=!0}return r}finally{we=t,Un.transition=e}}return!1}function kS(n,e,t){e=_l(t,e),e=z_(n,e,1),n=Ps(n,e,1),e=Vt(),n!==null&&(Ku(n,1,e),un(n,e))}function $e(n,e,t){if(n.tag===3)kS(n,n,t);else for(;e!==null;){if(e.tag===3){kS(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ds===null||!Ds.has(r))){n=_l(t,n),n=$_(e,n,1),e=Ps(e,n,1),n=Vt(),e!==null&&(Ku(e,1,n),un(e,n));break}}e=e.return}}function IN(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Vt(),n.pingedLanes|=n.suspendedLanes&t,gt===n&&(kt&t)===t&&(ct===4||ct===3&&(kt&130023424)===kt&&500>Ye()-_w?Io(n,0):Tw|=t),un(n,e)}function lE(n,e){e===0&&(n.mode&1?(e=xh,xh<<=1,!(xh&130023424)&&(xh=4194304)):e=1);var t=Vt();n=Ei(n,e),n!==null&&(Ku(n,e,t),un(n,t))}function jN(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),lE(n,t)}function LN(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),lE(n,t)}var cE;cE=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ln.current)an=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return an=!1,kN(n,e,t);an=!!(n.flags&131072)}else an=!1,De&&e.flags&1048576&&f_(e,ff,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;jd(n,e),n=e.pendingProps;var i=Sl(e,jt.current);nl(e,t),i=ww(null,e,r,n,i,t);var s=bw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cn(r)?(s=!0,hf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pw(e),i.updater=Up,e.stateNode=i,i._reactInternals=e,l0(e,r,n,t),e=h0(null,e,r,!0,s,t)):(e.tag=0,De&&s&&aw(e),Bt(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(jd(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=WN(r),n=lr(r,n),i){case 0:e=u0(null,e,r,n,t);break e;case 1:e=pS(null,e,r,n,t);break e;case 11:e=dS(null,e,r,n,t);break e;case 14:e=fS(null,e,r,lr(r.type,n),t);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lr(r,i),u0(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lr(r,i),pS(n,e,r,i,t);case 3:e:{if(G_(e),n===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,w_(n,e),mf(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=_l(Error(W(423)),e),e=gS(n,e,r,t,i);break e}else if(r!==i){i=_l(Error(W(424)),e),e=gS(n,e,r,t,i);break e}else for(Cn=Rs(e.stateNode.containerInfo.firstChild),kn=e,De=!0,gr=null,t=y_(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Cl(),r===i){e=Oi(n,e,t);break e}Bt(n,e,r,t)}e=e.child}return e;case 5:return b_(e),n===null&&s0(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,e0(r,i)?o=null:s!==null&&e0(r,s)&&(e.flags|=32),V_(n,e),Bt(n,e,o,t),e.child;case 6:return n===null&&s0(e),null;case 13:return q_(n,e,t);case 4:return gw(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=kl(e,null,r,t):Bt(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lr(r,i),dS(n,e,r,i,t);case 7:return Bt(n,e,e.pendingProps,t),e.child;case 8:return Bt(n,e,e.pendingProps.children,t),e.child;case 12:return Bt(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Te(pf,r._currentValue),r._currentValue=o,s!==null)if(Tr(s.value,o)){if(s.children===i.children&&!ln.current){e=Oi(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Si(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),o0(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),o0(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Bt(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,nl(e,t),i=Kn(i),r=r(i),e.flags|=1,Bt(n,e,r,t),e.child;case 14:return r=e.type,i=lr(r,e.pendingProps),i=lr(r.type,i),fS(n,e,r,i,t);case 15:return H_(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lr(r,i),jd(n,e),e.tag=1,cn(r)?(n=!0,hf(e)):n=!1,nl(e,t),B_(e,r,i),l0(e,r,i,t),h0(null,e,r,!0,n,t);case 19:return Y_(n,e,t);case 22:return U_(n,e,t)}throw Error(W(156,e.tag))};function uE(n,e){return LT(n,e)}function FN(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(n,e,t,r){return new FN(n,e,t,r)}function Aw(n){return n=n.prototype,!(!n||!n.isReactComponent)}function WN(n){if(typeof n=="function")return Aw(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Kv)return 11;if(n===Xv)return 14}return 2}function Is(n,e){var t=n.alternate;return t===null?(t=Hn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Wd(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")Aw(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case ja:return jo(t.children,i,s,e);case Yv:o=8,i|=8;break;case Py:return n=Hn(12,t,e,i|2),n.elementType=Py,n.lanes=s,n;case Dy:return n=Hn(13,t,e,i),n.elementType=Dy,n.lanes=s,n;case Ny:return n=Hn(19,t,e,i),n.elementType=Ny,n.lanes=s,n;case bT:return qp(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case vT:o=10;break e;case wT:o=9;break e;case Kv:o=11;break e;case Xv:o=14;break e;case ss:o=16,r=null;break e}throw Error(W(130,n==null?n:typeof n,""))}return e=Hn(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function jo(n,e,t,r){return n=Hn(7,n,r,e),n.lanes=t,n}function qp(n,e,t,r){return n=Hn(22,n,r,e),n.elementType=bT,n.lanes=t,n.stateNode={isHidden:!1},n}function xm(n,e,t){return n=Hn(6,n,null,e),n.lanes=t,n}function Sm(n,e,t){return e=Hn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function BN(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nm(0),this.expirationTimes=nm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Rw(n,e,t,r,i,s,o,a,l){return n=new BN(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Hn(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},pw(s),n}function zN(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ia,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function hE(n){if(!n)return $s;n=n._reactInternals;e:{if(ra(n)!==n||n.tag!==1)throw Error(W(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(n.tag===1){var t=n.type;if(cn(t))return h_(n,t,e)}return e}function dE(n,e,t,r,i,s,o,a,l){return n=Rw(t,r,!0,n,i,s,o,a,l),n.context=hE(null),t=n.current,r=Vt(),i=Ns(t),s=Si(r,i),s.callback=e??null,Ps(t,s,i),n.current.lanes=i,Ku(n,i,r),un(n,r),n}function Yp(n,e,t,r){var i=e.current,s=Vt(),o=Ns(i);return t=hE(t),e.context===null?e.context=t:e.pendingContext=t,e=Si(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Ps(i,e,o),n!==null&&(Cr(n,i,o,s),Dd(n,i,o)),o}function kf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function TS(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Pw(n,e){TS(n,e),(n=n.alternate)&&TS(n,e)}function $N(){return null}var fE=typeof reportError=="function"?reportError:function(n){console.error(n)};function Dw(n){this._internalRoot=n}Kp.prototype.render=Dw.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(W(409));Yp(n,e,null,null)};Kp.prototype.unmount=Dw.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Yo(function(){Yp(null,n,null,null)}),e[_i]=null}};function Kp(n){this._internalRoot=n}Kp.prototype.unstable_scheduleHydration=function(n){if(n){var e=UT();n={blockedOn:null,target:n,priority:e};for(var t=0;t<hs.length&&e!==0&&e<hs[t].priority;t++);hs.splice(t,0,n),t===0&&GT(n)}};function Nw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Xp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function _S(){}function HN(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=kf(o);s.call(c)}}var o=dE(e,r,n,0,null,!1,!1,"",_S);return n._reactRootContainer=o,n[_i]=o.current,du(n.nodeType===8?n.parentNode:n),Yo(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=kf(l);a.call(c)}}var l=Rw(n,0,!1,null,null,!1,!1,"",_S);return n._reactRootContainer=l,n[_i]=l.current,du(n.nodeType===8?n.parentNode:n),Yo(function(){Yp(e,l,t,r)}),l}function Jp(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=kf(o);a.call(l)}}Yp(e,o,n,i)}else o=HN(t,e,n,i,r);return kf(o)}$T=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Cc(e.pendingLanes);t!==0&&(Zv(e,t|1),un(e,Ye()),!(fe&6)&&(El=Ye()+500,Zs()))}break;case 13:Yo(function(){var r=Ei(n,1);if(r!==null){var i=Vt();Cr(r,n,1,i)}}),Pw(n,1)}};ew=function(n){if(n.tag===13){var e=Ei(n,134217728);if(e!==null){var t=Vt();Cr(e,n,134217728,t)}Pw(n,134217728)}};HT=function(n){if(n.tag===13){var e=Ns(n),t=Ei(n,e);if(t!==null){var r=Vt();Cr(t,n,e,r)}Pw(n,e)}};UT=function(){return we};VT=function(n,e){var t=we;try{return we=n,e()}finally{we=t}};Uy=function(n,e,t){switch(e){case"input":if(Ly(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=zp(r);if(!i)throw Error(W(90));ST(r),Ly(r,i)}}}break;case"textarea":kT(n,t);break;case"select":e=t.value,e!=null&&Qa(n,!!t.multiple,e,!1)}};RT=Ew;PT=Yo;var UN={usingClientEntryPoint:!1,Events:[Ju,Ba,zp,MT,AT,Ew]},dc={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VN={bundleType:dc.bundleType,version:dc.version,rendererPackageName:dc.rendererPackageName,rendererConfig:dc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=IT(n),n===null?null:n.stateNode},findFiberByHostInstance:dc.findFiberByHostInstance||$N,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{Lp=Ph.inject(VN),Vr=Ph}catch{}}On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UN;On.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nw(e))throw Error(W(200));return zN(n,e,null,t)};On.createRoot=function(n,e){if(!Nw(n))throw Error(W(299));var t=!1,r="",i=fE;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Rw(n,1,!1,null,null,t,!1,r,i),n[_i]=e.current,du(n.nodeType===8?n.parentNode:n),new Dw(e)};On.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(W(188)):(n=Object.keys(n).join(","),Error(W(268,n)));return n=IT(e),n=n===null?null:n.stateNode,n};On.flushSync=function(n){return Yo(n)};On.hydrate=function(n,e,t){if(!Xp(e))throw Error(W(200));return Jp(null,n,e,!0,t)};On.hydrateRoot=function(n,e,t){if(!Nw(n))throw Error(W(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=fE;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=dE(e,null,n,1,t??null,i,!1,s,o),n[_i]=e.current,du(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Kp(e)};On.render=function(n,e,t){if(!Xp(e))throw Error(W(200));return Jp(null,n,e,!1,t)};On.unmountComponentAtNode=function(n){if(!Xp(n))throw Error(W(40));return n._reactRootContainer?(Yo(function(){Jp(null,null,n,!1,function(){n._reactRootContainer=null,n[_i]=null})}),!0):!1};On.unstable_batchedUpdates=Ew;On.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Xp(t))throw Error(W(200));if(n==null||n._reactInternals===void 0)throw Error(W(38));return Jp(n,e,t,!1,r)};On.version="18.3.1-next-f1338f8080-20240426";function pE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pE)}catch(n){console.error(n)}}pE(),pT.exports=On;var ji=pT.exports;const Iw=Ip(ji);var gE,ES=ji;gE=ES.createRoot,ES.hydrateRoot;const GN=1,qN=1e6;let Cm=0;function YN(){return Cm=(Cm+1)%Number.MAX_SAFE_INTEGER,Cm.toString()}const km=new Map,OS=n=>{if(km.has(n))return;const e=setTimeout(()=>{km.delete(n),Bc({type:"REMOVE_TOAST",toastId:n})},qN);km.set(n,e)},KN=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,GN)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?OS(t):n.toasts.forEach(r=>{OS(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Bd=[];let zd={toasts:[]};function Bc(n){zd=KN(zd,n),Bd.forEach(e=>{e(zd)})}function XN({...n}){const e=YN(),t=i=>Bc({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Bc({type:"DISMISS_TOAST",toastId:e});return Bc({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function JN(){const[n,e]=k.useState(zd);return k.useEffect(()=>(Bd.push(e),()=>{const t=Bd.indexOf(e);t>-1&&Bd.splice(t,1)}),[n]),{...n,toast:XN,dismiss:t=>Bc({type:"DISMISS_TOAST",toastId:t})}}function lt(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function MS(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function mE(...n){return e=>{let t=!1;const r=n.map(i=>{const s=MS(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():MS(n[i],null)}}}}function _r(...n){return k.useCallback(mE(...n),n)}function Qp(n,e=[]){let t=[];function r(s,o){const a=k.createContext(o),l=t.length;t=[...t,o];const c=h=>{var y;const{scope:d,children:f,...p}=h,g=((y=d==null?void 0:d[n])==null?void 0:y[l])||a,m=k.useMemo(()=>p,Object.values(p));return b.jsx(g.Provider,{value:m,children:f})};c.displayName=s+"Provider";function u(h,d){var g;const f=((g=d==null?void 0:d[n])==null?void 0:g[l])||a,p=k.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=t.map(o=>k.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return k.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,QN(i,...e)]}function QN(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function C0(n){const e=ZN(n),t=k.forwardRef((r,i)=>{const{children:s,...o}=r,a=k.Children.toArray(s),l=a.find(tI);if(l){const c=l.props.children,u=a.map(h=>h===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:h);return b.jsx(e,{...o,ref:i,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return b.jsx(e,{...o,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}function ZN(n){const e=k.forwardRef((t,r)=>{const{children:i,...s}=t;if(k.isValidElement(i)){const o=rI(i),a=nI(s,i.props);return i.type!==k.Fragment&&(a.ref=r?mE(r,o):o),k.cloneElement(i,a)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var yE=Symbol("radix.slottable");function eI(n){const e=({children:t})=>b.jsx(b.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=yE,e}function tI(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===yE}function nI(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function rI(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function iI(n){const e=n+"CollectionProvider",[t,r]=Qp(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:m,children:y}=g,v=B.useRef(null),w=B.useRef(new Map).current;return b.jsx(i,{scope:m,itemMap:w,collectionRef:v,children:y})};o.displayName=e;const a=n+"CollectionSlot",l=C0(a),c=B.forwardRef((g,m)=>{const{scope:y,children:v}=g,w=s(a,y),x=_r(m,w.collectionRef);return b.jsx(l,{ref:x,children:v})});c.displayName=a;const u=n+"CollectionItemSlot",h="data-radix-collection-item",d=C0(u),f=B.forwardRef((g,m)=>{const{scope:y,children:v,...w}=g,x=B.useRef(null),S=_r(m,x),C=s(u,y);return B.useEffect(()=>(C.itemMap.set(x,{ref:x,...w}),()=>void C.itemMap.delete(x))),b.jsx(d,{[h]:"",ref:S,children:v})});f.displayName=u;function p(g){const m=s(n+"CollectionConsumer",g);return B.useCallback(()=>{const v=m.collectionRef.current;if(!v)return[];const w=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(m.itemMap.values()).sort((C,T)=>w.indexOf(C.ref.current)-w.indexOf(T.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},p,r]}var sI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],mn=sI.reduce((n,e)=>{const t=C0(`Primitive.${e}`),r=k.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function vE(n,e){n&&ji.flushSync(()=>n.dispatchEvent(e))}function Hs(n){const e=k.useRef(n);return k.useEffect(()=>{e.current=n}),k.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function oI(n,e=globalThis==null?void 0:globalThis.document){const t=Hs(n);k.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var aI="DismissableLayer",k0="dismissableLayer.update",lI="dismissableLayer.pointerDownOutside",cI="dismissableLayer.focusOutside",AS,wE=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jw=k.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,c=k.useContext(wE),[u,h]=k.useState(null),d=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=k.useState({}),p=_r(e,T=>h(T)),g=Array.from(c.layers),[m]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(m),v=u?g.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,x=v>=y,S=hI(T=>{const _=T.target,M=[...c.branches].some(P=>P.contains(_));!x||M||(i==null||i(T),o==null||o(T),T.defaultPrevented||a==null||a())},d),C=dI(T=>{const _=T.target;[...c.branches].some(P=>P.contains(_))||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())},d);return oI(T=>{v===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},d),k.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(AS=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),RS(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=AS)}},[u,d,t,c]),k.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),RS())},[u,c]),k.useEffect(()=>{const T=()=>f({});return document.addEventListener(k0,T),()=>document.removeEventListener(k0,T)},[]),b.jsx(mn.div,{...l,ref:p,style:{pointerEvents:w?x?"auto":"none":void 0,...n.style},onFocusCapture:lt(n.onFocusCapture,C.onFocusCapture),onBlurCapture:lt(n.onBlurCapture,C.onBlurCapture),onPointerDownCapture:lt(n.onPointerDownCapture,S.onPointerDownCapture)})});jw.displayName=aI;var uI="DismissableLayerBranch",bE=k.forwardRef((n,e)=>{const t=k.useContext(wE),r=k.useRef(null),i=_r(e,r);return k.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),b.jsx(mn.div,{...n,ref:i})});bE.displayName=uI;function hI(n,e=globalThis==null?void 0:globalThis.document){const t=Hs(n),r=k.useRef(!1),i=k.useRef(()=>{});return k.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){xE(lI,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function dI(n,e=globalThis==null?void 0:globalThis.document){const t=Hs(n),r=k.useRef(!1);return k.useEffect(()=>{const i=s=>{s.target&&!r.current&&xE(cI,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function RS(){const n=new CustomEvent(k0);document.dispatchEvent(n)}function xE(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?vE(i,s):i.dispatchEvent(s)}var fI=jw,pI=bE,Us=globalThis!=null&&globalThis.document?k.useLayoutEffect:()=>{},gI="Portal",SE=k.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[i,s]=k.useState(!1);Us(()=>s(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Iw.createPortal(b.jsx(mn.div,{...r,ref:e}),o):null});SE.displayName=gI;function mI(n,e){return k.useReducer((t,r)=>e[t][r]??t,n)}var Lw=n=>{const{present:e,children:t}=n,r=yI(e),i=typeof t=="function"?t({present:r.isPresent}):k.Children.only(t),s=_r(r.ref,vI(i));return typeof t=="function"||r.isPresent?k.cloneElement(i,{ref:s}):null};Lw.displayName="Presence";function yI(n){const[e,t]=k.useState(),r=k.useRef(null),i=k.useRef(n),s=k.useRef("none"),o=n?"mounted":"unmounted",[a,l]=mI(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const c=Dh(r.current);s.current=a==="mounted"?c:"none"},[a]),Us(()=>{const c=r.current,u=i.current;if(u!==n){const d=s.current,f=Dh(c);n?l("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&d!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),Us(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=f=>{const g=Dh(r.current).includes(f.animationName);if(f.target===e&&g&&(l("ANIMATION_END"),!i.current)){const m=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=m)})}},d=f=>{f.target===e&&(s.current=Dh(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:k.useCallback(c=>{r.current=c?getComputedStyle(c):null,t(c)},[])}}function Dh(n){return(n==null?void 0:n.animationName)||"none"}function vI(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var wI=dT[" useInsertionEffect ".trim().toString()]||Us;function bI({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,o]=xI({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:i;{const u=k.useRef(n!==void 0);k.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=k.useCallback(u=>{var h;if(a){const d=SI(u)?u(n):u;d!==n&&((h=o.current)==null||h.call(o,d))}else s(u)},[a,n,s,o]);return[l,c]}function xI({defaultProp:n,onChange:e}){const[t,r]=k.useState(n),i=k.useRef(t),s=k.useRef(e);return wI(()=>{s.current=e},[e]),k.useEffect(()=>{var o;i.current!==t&&((o=s.current)==null||o.call(s,t),i.current=t)},[t,i]),[t,r,s]}function SI(n){return typeof n=="function"}var CI=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),kI="VisuallyHidden",Zp=k.forwardRef((n,e)=>b.jsx(mn.span,{...n,ref:e,style:{...CI,...n.style}}));Zp.displayName=kI;var TI=Zp,Fw="ToastProvider",[Ww,_I,EI]=iI("Toast"),[CE,EK]=Qp("Toast",[EI]),[OI,eg]=CE(Fw),kE=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=n,[a,l]=k.useState(null),[c,u]=k.useState(0),h=k.useRef(!1),d=k.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Fw}\`. Expected non-empty \`string\`.`),b.jsx(Ww.Provider,{scope:e,children:b.jsx(OI,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:k.useCallback(()=>u(f=>f+1),[]),onToastRemove:k.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:d,children:o})})};kE.displayName=Fw;var TE="ToastViewport",MI=["F8"],T0="toast.viewportPause",_0="toast.viewportResume",_E=k.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=MI,label:i="Notifications ({hotkey})",...s}=n,o=eg(TE,t),a=_I(t),l=k.useRef(null),c=k.useRef(null),u=k.useRef(null),h=k.useRef(null),d=_r(e,h,o.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=o.toastCount>0;k.useEffect(()=>{const m=y=>{var w;r.length!==0&&r.every(x=>y[x]||y.code===x)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[r]),k.useEffect(()=>{const m=l.current,y=h.current;if(p&&m&&y){const v=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(T0);y.dispatchEvent(C),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(_0);y.dispatchEvent(C),o.isClosePausedRef.current=!1}},x=C=>{!m.contains(C.relatedTarget)&&w()},S=()=>{m.contains(document.activeElement)||w()};return m.addEventListener("focusin",v),m.addEventListener("focusout",x),m.addEventListener("pointermove",v),m.addEventListener("pointerleave",S),window.addEventListener("blur",v),window.addEventListener("focus",w),()=>{m.removeEventListener("focusin",v),m.removeEventListener("focusout",x),m.removeEventListener("pointermove",v),m.removeEventListener("pointerleave",S),window.removeEventListener("blur",v),window.removeEventListener("focus",w)}}},[p,o.isClosePausedRef]);const g=k.useCallback(({tabbingDirection:m})=>{const v=a().map(w=>{const x=w.ref.current,S=[x,...$I(x)];return m==="forwards"?S:S.reverse()});return(m==="forwards"?v.reverse():v).flat()},[a]);return k.useEffect(()=>{const m=h.current;if(m){const y=v=>{var S,C,T;const w=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!w){const _=document.activeElement,M=v.shiftKey;if(v.target===m&&M){(S=c.current)==null||S.focus();return}const N=g({tabbingDirection:M?"backwards":"forwards"}),H=N.findIndex(D=>D===_);Tm(N.slice(H+1))?v.preventDefault():M?(C=c.current)==null||C.focus():(T=u.current)==null||T.focus()}};return m.addEventListener("keydown",y),()=>m.removeEventListener("keydown",y)}},[a,g]),b.jsxs(pI,{ref:l,role:"region","aria-label":i.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&b.jsx(E0,{ref:c,onFocusFromOutsideViewport:()=>{const m=g({tabbingDirection:"forwards"});Tm(m)}}),b.jsx(Ww.Slot,{scope:t,children:b.jsx(mn.ol,{tabIndex:-1,...s,ref:d})}),p&&b.jsx(E0,{ref:u,onFocusFromOutsideViewport:()=>{const m=g({tabbingDirection:"backwards"});Tm(m)}})]})});_E.displayName=TE;var EE="ToastFocusProxy",E0=k.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=eg(EE,t);return b.jsx(Zp,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});E0.displayName=EE;var Zu="Toast",AI="toast.swipeStart",RI="toast.swipeMove",PI="toast.swipeCancel",DI="toast.swipeEnd",OE=k.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...o}=n,[a,l]=bI({prop:r,defaultProp:i??!0,onChange:s,caller:Zu});return b.jsx(Lw,{present:t||a,children:b.jsx(jI,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Hs(n.onPause),onResume:Hs(n.onResume),onSwipeStart:lt(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:lt(n.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:lt(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:lt(n.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});OE.displayName=Zu;var[NI,II]=CE(Zu,{onClose(){}}),jI=k.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:d,onSwipeEnd:f,...p}=n,g=eg(Zu,t),[m,y]=k.useState(null),v=_r(e,D=>y(D)),w=k.useRef(null),x=k.useRef(null),S=i||g.duration,C=k.useRef(0),T=k.useRef(S),_=k.useRef(0),{onToastAdd:M,onToastRemove:P}=g,$=Hs(()=>{var V;(m==null?void 0:m.contains(document.activeElement))&&((V=g.viewport)==null||V.focus()),o()}),N=k.useCallback(D=>{!D||D===1/0||(window.clearTimeout(_.current),C.current=new Date().getTime(),_.current=window.setTimeout($,D))},[$]);k.useEffect(()=>{const D=g.viewport;if(D){const V=()=>{N(T.current),c==null||c()},U=()=>{const G=new Date().getTime()-C.current;T.current=T.current-G,window.clearTimeout(_.current),l==null||l()};return D.addEventListener(T0,U),D.addEventListener(_0,V),()=>{D.removeEventListener(T0,U),D.removeEventListener(_0,V)}}},[g.viewport,S,l,c,N]),k.useEffect(()=>{s&&!g.isClosePausedRef.current&&N(S)},[s,S,g.isClosePausedRef,N]),k.useEffect(()=>(M(),()=>P()),[M,P]);const H=k.useMemo(()=>m?IE(m):null,[m]);return g.viewport?b.jsxs(b.Fragment,{children:[H&&b.jsx(LI,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:H}),b.jsx(NI,{scope:t,onClose:$,children:ji.createPortal(b.jsx(Ww.ItemSlot,{scope:t,children:b.jsx(fI,{asChild:!0,onEscapeKeyDown:lt(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||$(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:b.jsx(mn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":g.swipeDirection,...p,ref:v,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:lt(n.onKeyDown,D=>{D.key==="Escape"&&(a==null||a(D.nativeEvent),D.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:lt(n.onPointerDown,D=>{D.button===0&&(w.current={x:D.clientX,y:D.clientY})}),onPointerMove:lt(n.onPointerMove,D=>{if(!w.current)return;const V=D.clientX-w.current.x,U=D.clientY-w.current.y,G=!!x.current,R=["left","right"].includes(g.swipeDirection),I=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,z=R?I(0,V):0,ee=R?0:I(0,U),X=D.pointerType==="touch"?10:2,ie={x:z,y:ee},te={originalEvent:D,delta:ie};G?(x.current=ie,Nh(RI,h,te,{discrete:!1})):PS(ie,g.swipeDirection,X)?(x.current=ie,Nh(AI,u,te,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs(V)>X||Math.abs(U)>X)&&(w.current=null)}),onPointerUp:lt(n.onPointerUp,D=>{const V=x.current,U=D.target;if(U.hasPointerCapture(D.pointerId)&&U.releasePointerCapture(D.pointerId),x.current=null,w.current=null,V){const G=D.currentTarget,R={originalEvent:D,delta:V};PS(V,g.swipeDirection,g.swipeThreshold)?Nh(DI,f,R,{discrete:!0}):Nh(PI,d,R,{discrete:!0}),G.addEventListener("click",I=>I.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),LI=n=>{const{__scopeToast:e,children:t,...r}=n,i=eg(Zu,e),[s,o]=k.useState(!1),[a,l]=k.useState(!1);return BI(()=>o(!0)),k.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:b.jsx(SE,{asChild:!0,children:b.jsx(Zp,{...r,children:s&&b.jsxs(b.Fragment,{children:[i.label," ",t]})})})},FI="ToastTitle",ME=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return b.jsx(mn.div,{...r,ref:e})});ME.displayName=FI;var WI="ToastDescription",AE=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return b.jsx(mn.div,{...r,ref:e})});AE.displayName=WI;var RE="ToastAction",PE=k.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?b.jsx(NE,{altText:t,asChild:!0,children:b.jsx(Bw,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${RE}\`. Expected non-empty \`string\`.`),null)});PE.displayName=RE;var DE="ToastClose",Bw=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=II(DE,t);return b.jsx(NE,{asChild:!0,children:b.jsx(mn.button,{type:"button",...r,ref:e,onClick:lt(n.onClick,i.onClose)})})});Bw.displayName=DE;var NE=k.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return b.jsx(mn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function IE(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),zI(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...IE(r))}}),e}function Nh(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?vE(i,s):i.dispatchEvent(s)}var PS=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function BI(n=()=>{}){const e=Hs(n);Us(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function zI(n){return n.nodeType===n.ELEMENT_NODE}function $I(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Tm(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var HI=kE,jE=_E,LE=OE,FE=ME,WE=AE,BE=PE,zE=Bw;function $E(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=$E(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function HE(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=$E(n))&&(r&&(r+=" "),r+=e);return r}const DS=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,NS=HE,UI=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return NS(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=t==null?void 0:t[c],h=s==null?void 0:s[c];if(u===null)return null;const d=DS(u)||DS(h);return i[c][d]}),a=t&&Object.entries(t).reduce((c,u)=>{let[h,d]=u;return d===void 0||(c[h]=d),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:d,...f}=u;return Object.entries(f).every(p=>{let[g,m]=p;return Array.isArray(m)?m.includes({...s,...a}[g]):{...s,...a}[g]===m})?[...c,h,d]:c},[]);return NS(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UE=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=k.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>k.createElement("svg",{ref:l,...GI,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:UE("lucide",i),...a},[...o.map(([c,u])=>k.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=(n,e)=>{const t=k.forwardRef(({className:r,...i},s)=>k.createElement(qI,{ref:s,iconNode:e,className:UE(`lucide-${VI(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=be("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=be("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=be("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=be("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=be("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=be("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=be("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=be("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=be("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=be("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=be("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=be("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=be("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=be("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=be("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=be("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=be("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=be("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=be("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=be("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=be("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=be("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=be("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=be("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zw="-",vj=n=>{const e=bj(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(zw);return a[0]===""&&a.length!==1&&a.shift(),qE(a,e)||wj(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},qE=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?qE(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=n.join(zw);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},jS=/^\[(.+)\]$/,wj=n=>{if(jS.test(n)){const e=jS.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},bj=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return Sj(Object.entries(n.classGroups),t).forEach(([s,o])=>{M0(o,r,s,e)}),r},M0=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const s=i===""?e:LS(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(xj(i)){M0(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{M0(o,LS(e,s),t,r)})})},LS=(n,e)=>{let t=n;return e.split(zw).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},xj=n=>n.isThemeGetter,Sj=(n,e)=>e?n.map(([t,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,i]}):n,Cj=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},YE="!",kj=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,u=0,h;for(let m=0;m<a.length;m++){let y=a[m];if(c===0){if(y===i&&(r||a.slice(m,m+s)===e)){l.push(a.slice(u,m)),u=m+s;continue}if(y==="/"){h=m;continue}}y==="["?c++:y==="]"&&c--}const d=l.length===0?a:a.substring(u),f=d.startsWith(YE),p=f?d.substring(1):d,g=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}};return t?a=>t({className:a,parseClassName:o}):o},Tj=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},_j=n=>({cache:Cj(n.cacheSize),parseClassName:kj(n),...vj(n)}),Ej=/\s+/,Oj=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=n.trim().split(Ej);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:d,maybePostfixModifierPosition:f}=t(c);let p=!!f,g=r(p?d.substring(0,f):d);if(!g){if(!p){a=c+(a.length>0?" "+a:a);continue}if(g=r(d),!g){a=c+(a.length>0?" "+a:a);continue}p=!1}const m=Tj(u).join(":"),y=h?m+YE:m,v=y+g;if(s.includes(v))continue;s.push(v);const w=i(g,p);for(let x=0;x<w.length;++x){const S=w[x];s.push(y+S)}a=c+(a.length>0?" "+a:a)}return a};function Mj(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=KE(e))&&(r&&(r+=" "),r+=t);return r}const KE=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=KE(n[r]))&&(t&&(t+=" "),t+=e);return t};function Aj(n,...e){let t,r,i,s=o;function o(l){const c=e.reduce((u,h)=>h(u),n());return t=_j(c),r=t.cache.get,i=t.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=Oj(l,t);return i(l,u),u}return function(){return s(Mj.apply(null,arguments))}}const Ee=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},XE=/^\[(?:([a-z-]+):)?(.+)\]$/i,Rj=/^\d+\/\d+$/,Pj=new Set(["px","full","screen"]),Dj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Nj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ij=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,jj=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Lj=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ri=n=>il(n)||Pj.has(n)||Rj.test(n),qi=n=>$l(n,"length",Vj),il=n=>!!n&&!Number.isNaN(Number(n)),Em=n=>$l(n,"number",il),fc=n=>!!n&&Number.isInteger(Number(n)),Fj=n=>n.endsWith("%")&&il(n.slice(0,-1)),ae=n=>XE.test(n),Yi=n=>Dj.test(n),Wj=new Set(["length","size","percentage"]),Bj=n=>$l(n,Wj,JE),zj=n=>$l(n,"position",JE),$j=new Set(["image","url"]),Hj=n=>$l(n,$j,qj),Uj=n=>$l(n,"",Gj),pc=()=>!0,$l=(n,e,t)=>{const r=XE.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},Vj=n=>Nj.test(n)&&!Ij.test(n),JE=()=>!1,Gj=n=>jj.test(n),qj=n=>Lj.test(n),Yj=()=>{const n=Ee("colors"),e=Ee("spacing"),t=Ee("blur"),r=Ee("brightness"),i=Ee("borderColor"),s=Ee("borderRadius"),o=Ee("borderSpacing"),a=Ee("borderWidth"),l=Ee("contrast"),c=Ee("grayscale"),u=Ee("hueRotate"),h=Ee("invert"),d=Ee("gap"),f=Ee("gradientColorStops"),p=Ee("gradientColorStopPositions"),g=Ee("inset"),m=Ee("margin"),y=Ee("opacity"),v=Ee("padding"),w=Ee("saturate"),x=Ee("scale"),S=Ee("sepia"),C=Ee("skew"),T=Ee("space"),_=Ee("translate"),M=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",ae,e],N=()=>[ae,e],H=()=>["",ri,qi],D=()=>["auto",il,ae],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>["start","end","center","between","around","evenly","stretch"],I=()=>["","0",ae],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>[il,ae];return{cacheSize:500,separator:":",theme:{colors:[pc],spacing:[ri,qi],blur:["none","",Yi,ae],brightness:ee(),borderColor:[n],borderRadius:["none","","full",Yi,ae],borderSpacing:N(),borderWidth:H(),contrast:ee(),grayscale:I(),hueRotate:ee(),invert:I(),gap:N(),gradientColorStops:[n],gradientColorStopPositions:[Fj,qi],inset:$(),margin:$(),opacity:ee(),padding:N(),saturate:ee(),scale:ee(),sepia:I(),skew:ee(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",ae]}],container:["container"],columns:[{columns:[Yi]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),ae]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",fc,ae]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ae]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",fc,ae]}],"grid-cols":[{"grid-cols":[pc]}],"col-start-end":[{col:["auto",{span:["full",fc,ae]},ae]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[pc]}],"row-start-end":[{row:["auto",{span:[fc,ae]},ae]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ae]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ae]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...R()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...R(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...R(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ae,e]}],"min-w":[{"min-w":[ae,e,"min","max","fit"]}],"max-w":[{"max-w":[ae,e,"none","full","min","max","fit","prose",{screen:[Yi]},Yi]}],h:[{h:[ae,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ae,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ae,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ae,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Yi,qi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Em]}],"font-family":[{font:[pc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ae]}],"line-clamp":[{"line-clamp":["none",il,Em]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ri,ae]}],"list-image":[{"list-image":["none",ae]}],"list-style-type":[{list:["none","disc","decimal",ae]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ri,qi]}],"underline-offset":[{"underline-offset":["auto",ri,ae]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ae]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ae]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),zj]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Bj]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Hj]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:U()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[ri,ae]}],"outline-w":[{outline:[ri,qi]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[ri,qi]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Yi,Uj]}],"shadow-color":[{shadow:[pc]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Yi,ae]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ae]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",ae]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",ae]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[fc,ae]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ae]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ae]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ae]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[ri,qi,Em]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Kj=Aj(Yj);function ia(...n){return Kj(HE(n))}const Xj=HI,QE=k.forwardRef(({className:n,...e},t)=>b.jsx(jE,{ref:t,className:ia("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));QE.displayName=jE.displayName;const Jj=UI("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ZE=k.forwardRef(({className:n,variant:e,...t},r)=>b.jsx(LE,{ref:r,className:ia(Jj({variant:e}),n),...t}));ZE.displayName=LE.displayName;const Qj=k.forwardRef(({className:n,...e},t)=>b.jsx(BE,{ref:t,className:ia("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",n),...e}));Qj.displayName=BE.displayName;const eO=k.forwardRef(({className:n,...e},t)=>b.jsx(zE,{ref:t,className:ia("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:b.jsx(GE,{className:"h-4 w-4"})}));eO.displayName=zE.displayName;const tO=k.forwardRef(({className:n,...e},t)=>b.jsx(FE,{ref:t,className:ia("text-sm font-semibold",n),...e}));tO.displayName=FE.displayName;const nO=k.forwardRef(({className:n,...e},t)=>b.jsx(WE,{ref:t,className:ia("text-sm opacity-90",n),...e}));nO.displayName=WE.displayName;function Zj(){const{toasts:n}=JN();return b.jsxs(Xj,{children:[n.map(function({id:e,title:t,description:r,action:i,...s}){return b.jsxs(ZE,{...s,children:[b.jsxs("div",{className:"grid gap-1",children:[t&&b.jsx(tO,{children:t}),r&&b.jsx(nO,{children:r})]}),i,b.jsx(eO,{})]},e)}),b.jsx(QE,{})]})}var FS=["light","dark"],eL="(prefers-color-scheme: dark)",tL=k.createContext(void 0),nL={setTheme:n=>{},themes:[]},rL=()=>{var n;return(n=k.useContext(tL))!=null?n:nL};k.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:l})=>{let c=s==="system",u=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(p=>`'${p}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,h=i?FS.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",d=(p,g=!1,m=!0)=>{let y=o?o[p]:p,v=g?p+"|| ''":`'${y}'`,w="";return i&&m&&!g&&FS.includes(p)&&(w+=`d.style.colorScheme = '${p}';`),t==="class"?g||y?w+=`c.add(${v})`:w+="null":y&&(w+=`d[s](n,${v})`),w},f=n?`!function(){${u}${d(n)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${eL}',m=window.matchMedia(t);if(m.media!==t||m.matches){${d("dark")}}else{${d("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${d(o?"x[e]":"e",!0)}}${c?"":"else{"+d(s,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${d(o?"x[e]":"e",!0)}}else{${d(s,!1,!1)};}${h}}catch(t){}}();`;return k.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:f}})});var iL=n=>{switch(n){case"success":return aL;case"info":return cL;case"warning":return lL;case"error":return uL;default:return null}},sL=Array(12).fill(0),oL=({visible:n,className:e})=>B.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},B.createElement("div",{className:"sonner-spinner"},sL.map((t,r)=>B.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),aL=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),lL=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),cL=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),uL=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),hL=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},B.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),B.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),dL=()=>{let[n,e]=B.useState(document.hidden);return B.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},A0=1,fL=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:A0++,o=this.toasts.find(l=>l.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...i,dismissible:a,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let i=e instanceof Promise?e:e(),s=r!==void 0,o,a=i.then(async c=>{if(o=["resolve",c],B.isValidElement(c))s=!1,this.create({id:r,type:"default",message:c});else if(gL(c)&&!c.ok){s=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:h})}else if(t.success!==void 0){s=!1;let u=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:h})}}).catch(async c=>{if(o=["reject",c],t.error!==void 0){s=!1;let u=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:h})}}).finally(()=>{var c;s&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||A0++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},tn=new fL,pL=(n,e)=>{let t=(e==null?void 0:e.id)||A0++;return tn.addToast({title:n,...e,id:t}),t},gL=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",mL=pL,yL=()=>tn.toasts,vL=()=>tn.getActiveToasts(),vr=Object.assign(mL,{success:tn.success,info:tn.info,warning:tn.warning,error:tn.error,custom:tn.custom,message:tn.message,promise:tn.promise,dismiss:tn.dismiss,loading:tn.loading},{getHistory:yL,getToasts:vL});function wL(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}wL(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ih(n){return n.label!==void 0}var bL=3,xL="32px",SL="16px",WS=4e3,CL=356,kL=14,TL=20,_L=200;function rr(...n){return n.filter(Boolean).join(" ")}function EL(n){let[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var OL=n=>{var e,t,r,i,s,o,a,l,c,u,h;let{invert:d,toast:f,unstyled:p,interacting:g,setHeights:m,visibleToasts:y,heights:v,index:w,toasts:x,expanded:S,removeToast:C,defaultRichColors:T,closeButton:_,style:M,cancelButtonStyle:P,actionButtonStyle:$,className:N="",descriptionClassName:H="",duration:D,position:V,gap:U,loadingIcon:G,expandByDefault:R,classNames:I,icons:z,closeButtonAriaLabel:ee="Close toast",pauseWhenPageIsHidden:X}=n,[ie,te]=B.useState(null),[_e,Re]=B.useState(null),[de,Bi]=B.useState(!1),[Rn,_t]=B.useState(!1),[zi,ua]=B.useState(!1),[$i,dh]=B.useState(!1),[Gg,fh]=B.useState(!1),[qg,rc]=B.useState(0),[ha,dx]=B.useState(0),ic=B.useRef(f.duration||D||WS),fx=B.useRef(null),io=B.useRef(null),hD=w===0,dD=w+1<=y,Pn=f.type,da=f.dismissible!==!1,fD=f.className||"",pD=f.descriptionClassName||"",ph=B.useMemo(()=>v.findIndex(se=>se.toastId===f.id)||0,[v,f.id]),gD=B.useMemo(()=>{var se;return(se=f.closeButton)!=null?se:_},[f.closeButton,_]),px=B.useMemo(()=>f.duration||D||WS,[f.duration,D]),Yg=B.useRef(0),fa=B.useRef(0),gx=B.useRef(0),pa=B.useRef(null),[mD,yD]=V.split("-"),mx=B.useMemo(()=>v.reduce((se,xe,Pe)=>Pe>=ph?se:se+xe.height,0),[v,ph]),yx=dL(),vD=f.invert||d,Kg=Pn==="loading";fa.current=B.useMemo(()=>ph*U+mx,[ph,mx]),B.useEffect(()=>{ic.current=px},[px]),B.useEffect(()=>{Bi(!0)},[]),B.useEffect(()=>{let se=io.current;if(se){let xe=se.getBoundingClientRect().height;return dx(xe),m(Pe=>[{toastId:f.id,height:xe,position:f.position},...Pe]),()=>m(Pe=>Pe.filter(Zn=>Zn.toastId!==f.id))}},[m,f.id]),B.useLayoutEffect(()=>{if(!de)return;let se=io.current,xe=se.style.height;se.style.height="auto";let Pe=se.getBoundingClientRect().height;se.style.height=xe,dx(Pe),m(Zn=>Zn.find(er=>er.toastId===f.id)?Zn.map(er=>er.toastId===f.id?{...er,height:Pe}:er):[{toastId:f.id,height:Pe,position:f.position},...Zn])},[de,f.title,f.description,m,f.id]);let Hi=B.useCallback(()=>{_t(!0),rc(fa.current),m(se=>se.filter(xe=>xe.toastId!==f.id)),setTimeout(()=>{C(f)},_L)},[f,C,m,fa]);B.useEffect(()=>{if(f.promise&&Pn==="loading"||f.duration===1/0||f.type==="loading")return;let se;return S||g||X&&yx?(()=>{if(gx.current<Yg.current){let xe=new Date().getTime()-Yg.current;ic.current=ic.current-xe}gx.current=new Date().getTime()})():ic.current!==1/0&&(Yg.current=new Date().getTime(),se=setTimeout(()=>{var xe;(xe=f.onAutoClose)==null||xe.call(f,f),Hi()},ic.current)),()=>clearTimeout(se)},[S,g,f,Pn,X,yx,Hi]),B.useEffect(()=>{f.delete&&Hi()},[Hi,f.delete]);function wD(){var se,xe,Pe;return z!=null&&z.loading?B.createElement("div",{className:rr(I==null?void 0:I.loader,(se=f==null?void 0:f.classNames)==null?void 0:se.loader,"sonner-loader"),"data-visible":Pn==="loading"},z.loading):G?B.createElement("div",{className:rr(I==null?void 0:I.loader,(xe=f==null?void 0:f.classNames)==null?void 0:xe.loader,"sonner-loader"),"data-visible":Pn==="loading"},G):B.createElement(oL,{className:rr(I==null?void 0:I.loader,(Pe=f==null?void 0:f.classNames)==null?void 0:Pe.loader),visible:Pn==="loading"})}return B.createElement("li",{tabIndex:0,ref:io,className:rr(N,fD,I==null?void 0:I.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,I==null?void 0:I.default,I==null?void 0:I[Pn],(t=f==null?void 0:f.classNames)==null?void 0:t[Pn]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:T,"data-styled":!(f.jsx||f.unstyled||p),"data-mounted":de,"data-promise":!!f.promise,"data-swiped":Gg,"data-removed":Rn,"data-visible":dD,"data-y-position":mD,"data-x-position":yD,"data-index":w,"data-front":hD,"data-swiping":zi,"data-dismissible":da,"data-type":Pn,"data-invert":vD,"data-swipe-out":$i,"data-swipe-direction":_e,"data-expanded":!!(S||R&&de),style:{"--index":w,"--toasts-before":w,"--z-index":x.length-w,"--offset":`${Rn?qg:fa.current}px`,"--initial-height":R?"auto":`${ha}px`,...M,...f.style},onDragEnd:()=>{ua(!1),te(null),pa.current=null},onPointerDown:se=>{Kg||!da||(fx.current=new Date,rc(fa.current),se.target.setPointerCapture(se.pointerId),se.target.tagName!=="BUTTON"&&(ua(!0),pa.current={x:se.clientX,y:se.clientY}))},onPointerUp:()=>{var se,xe,Pe,Zn;if($i||!da)return;pa.current=null;let er=Number(((se=io.current)==null?void 0:se.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ui=Number(((xe=io.current)==null?void 0:xe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),so=new Date().getTime()-((Pe=fx.current)==null?void 0:Pe.getTime()),tr=ie==="x"?er:Ui,Vi=Math.abs(tr)/so;if(Math.abs(tr)>=TL||Vi>.11){rc(fa.current),(Zn=f.onDismiss)==null||Zn.call(f,f),Re(ie==="x"?er>0?"right":"left":Ui>0?"down":"up"),Hi(),dh(!0),fh(!1);return}ua(!1),te(null)},onPointerMove:se=>{var xe,Pe,Zn,er;if(!pa.current||!da||((xe=window.getSelection())==null?void 0:xe.toString().length)>0)return;let Ui=se.clientY-pa.current.y,so=se.clientX-pa.current.x,tr=(Pe=n.swipeDirections)!=null?Pe:EL(V);!ie&&(Math.abs(so)>1||Math.abs(Ui)>1)&&te(Math.abs(so)>Math.abs(Ui)?"x":"y");let Vi={x:0,y:0};ie==="y"?(tr.includes("top")||tr.includes("bottom"))&&(tr.includes("top")&&Ui<0||tr.includes("bottom")&&Ui>0)&&(Vi.y=Ui):ie==="x"&&(tr.includes("left")||tr.includes("right"))&&(tr.includes("left")&&so<0||tr.includes("right")&&so>0)&&(Vi.x=so),(Math.abs(Vi.x)>0||Math.abs(Vi.y)>0)&&fh(!0),(Zn=io.current)==null||Zn.style.setProperty("--swipe-amount-x",`${Vi.x}px`),(er=io.current)==null||er.style.setProperty("--swipe-amount-y",`${Vi.y}px`)}},gD&&!f.jsx?B.createElement("button",{"aria-label":ee,"data-disabled":Kg,"data-close-button":!0,onClick:Kg||!da?()=>{}:()=>{var se;Hi(),(se=f.onDismiss)==null||se.call(f,f)},className:rr(I==null?void 0:I.closeButton,(i=f==null?void 0:f.classNames)==null?void 0:i.closeButton)},(s=z==null?void 0:z.close)!=null?s:hL):null,f.jsx||k.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:B.createElement(B.Fragment,null,Pn||f.icon||f.promise?B.createElement("div",{"data-icon":"",className:rr(I==null?void 0:I.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||wD():null,f.type!=="loading"?f.icon||(z==null?void 0:z[Pn])||iL(Pn):null):null,B.createElement("div",{"data-content":"",className:rr(I==null?void 0:I.content,(a=f==null?void 0:f.classNames)==null?void 0:a.content)},B.createElement("div",{"data-title":"",className:rr(I==null?void 0:I.title,(l=f==null?void 0:f.classNames)==null?void 0:l.title)},typeof f.title=="function"?f.title():f.title),f.description?B.createElement("div",{"data-description":"",className:rr(H,pD,I==null?void 0:I.description,(c=f==null?void 0:f.classNames)==null?void 0:c.description)},typeof f.description=="function"?f.description():f.description):null),k.isValidElement(f.cancel)?f.cancel:f.cancel&&Ih(f.cancel)?B.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||P,onClick:se=>{var xe,Pe;Ih(f.cancel)&&da&&((Pe=(xe=f.cancel).onClick)==null||Pe.call(xe,se),Hi())},className:rr(I==null?void 0:I.cancelButton,(u=f==null?void 0:f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,k.isValidElement(f.action)?f.action:f.action&&Ih(f.action)?B.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||$,onClick:se=>{var xe,Pe;Ih(f.action)&&((Pe=(xe=f.action).onClick)==null||Pe.call(xe,se),!se.defaultPrevented&&Hi())},className:rr(I==null?void 0:I.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function BS(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function ML(n,e){let t={};return[n,e].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",a=s?SL:xL;function l(c){["top","right","bottom","left"].forEach(u=>{t[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?t[`${o}-${c}`]=a:t[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),t}var AL=k.forwardRef(function(n,e){let{invert:t,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:h,duration:d,style:f,visibleToasts:p=bL,toastOptions:g,dir:m=BS(),gap:y=kL,loadingIcon:v,icons:w,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:S}=n,[C,T]=B.useState([]),_=B.useMemo(()=>Array.from(new Set([r].concat(C.filter(X=>X.position).map(X=>X.position)))),[C,r]),[M,P]=B.useState([]),[$,N]=B.useState(!1),[H,D]=B.useState(!1),[V,U]=B.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=B.useRef(null),R=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=B.useRef(null),z=B.useRef(!1),ee=B.useCallback(X=>{T(ie=>{var te;return(te=ie.find(_e=>_e.id===X.id))!=null&&te.delete||tn.dismiss(X.id),ie.filter(({id:_e})=>_e!==X.id)})},[]);return B.useEffect(()=>tn.subscribe(X=>{if(X.dismiss){T(ie=>ie.map(te=>te.id===X.id?{...te,delete:!0}:te));return}setTimeout(()=>{Iw.flushSync(()=>{T(ie=>{let te=ie.findIndex(_e=>_e.id===X.id);return te!==-1?[...ie.slice(0,te),{...ie[te],...X},...ie.slice(te+1)]:[X,...ie]})})})}),[]),B.useEffect(()=>{if(u!=="system"){U(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;let X=window.matchMedia("(prefers-color-scheme: dark)");try{X.addEventListener("change",({matches:ie})=>{U(ie?"dark":"light")})}catch{X.addListener(({matches:te})=>{try{U(te?"dark":"light")}catch(_e){console.error(_e)}})}},[u]),B.useEffect(()=>{C.length<=1&&N(!1)},[C]),B.useEffect(()=>{let X=ie=>{var te,_e;i.every(Re=>ie[Re]||ie.code===Re)&&(N(!0),(te=G.current)==null||te.focus()),ie.code==="Escape"&&(document.activeElement===G.current||(_e=G.current)!=null&&_e.contains(document.activeElement))&&N(!1)};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[i]),B.useEffect(()=>{if(G.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,z.current=!1)}},[G.current]),B.createElement("section",{ref:e,"aria-label":`${x} ${R}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},_.map((X,ie)=>{var te;let[_e,Re]=X.split("-");return C.length?B.createElement("ol",{key:X,dir:m==="auto"?BS():m,tabIndex:-1,ref:G,className:a,"data-sonner-toaster":!0,"data-theme":V,"data-y-position":_e,"data-lifted":$&&C.length>1&&!s,"data-x-position":Re,style:{"--front-toast-height":`${((te=M[0])==null?void 0:te.height)||0}px`,"--width":`${CL}px`,"--gap":`${y}px`,...f,...ML(l,c)},onBlur:de=>{z.current&&!de.currentTarget.contains(de.relatedTarget)&&(z.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||z.current||(z.current=!0,I.current=de.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{H||N(!1)},onDragEnd:()=>N(!1),onPointerDown:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||D(!0)},onPointerUp:()=>D(!1)},C.filter(de=>!de.position&&ie===0||de.position===X).map((de,Bi)=>{var Rn,_t;return B.createElement(OL,{key:de.id,icons:w,index:Bi,toast:de,defaultRichColors:h,duration:(Rn=g==null?void 0:g.duration)!=null?Rn:d,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:t,visibleToasts:p,closeButton:(_t=g==null?void 0:g.closeButton)!=null?_t:o,interacting:H,position:X,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ee,toasts:C.filter(zi=>zi.position==de.position),heights:M.filter(zi=>zi.position==de.position),setHeights:P,expandByDefault:s,gap:y,loadingIcon:v,expanded:$,pauseWhenPageIsHidden:S,swipeDirections:n.swipeDirections})})):null}))});const RL=({...n})=>{const{theme:e="system"}=rL();return b.jsx(AL,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})},PL=["top","right","bottom","left"],Vs=Math.min,xn=Math.max,Tf=Math.round,jh=Math.floor,qr=n=>({x:n,y:n}),DL={left:"right",right:"left",bottom:"top",top:"bottom"},NL={start:"end",end:"start"};function R0(n,e,t){return xn(n,Vs(e,t))}function Mi(n,e){return typeof n=="function"?n(e):n}function Ai(n){return n.split("-")[0]}function Hl(n){return n.split("-")[1]}function $w(n){return n==="x"?"y":"x"}function Hw(n){return n==="y"?"height":"width"}const IL=new Set(["top","bottom"]);function $r(n){return IL.has(Ai(n))?"y":"x"}function Uw(n){return $w($r(n))}function jL(n,e,t){t===void 0&&(t=!1);const r=Hl(n),i=Uw(n),s=Hw(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=_f(o)),[o,_f(o)]}function LL(n){const e=_f(n);return[P0(n),e,P0(e)]}function P0(n){return n.replace(/start|end/g,e=>NL[e])}const zS=["left","right"],$S=["right","left"],FL=["top","bottom"],WL=["bottom","top"];function BL(n,e,t){switch(n){case"top":case"bottom":return t?e?$S:zS:e?zS:$S;case"left":case"right":return e?FL:WL;default:return[]}}function zL(n,e,t,r){const i=Hl(n);let s=BL(Ai(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(P0)))),s}function _f(n){return n.replace(/left|right|bottom|top/g,e=>DL[e])}function $L(n){return{top:0,right:0,bottom:0,left:0,...n}}function rO(n){return typeof n!="number"?$L(n):{top:n,right:n,bottom:n,left:n}}function Ef(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function HS(n,e,t){let{reference:r,floating:i}=n;const s=$r(e),o=Uw(e),a=Hw(o),l=Ai(e),c=s==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let f;switch(l){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-i.width,y:h};break;default:f={x:r.x,y:r.y}}switch(Hl(e)){case"start":f[o]-=d*(t&&c?-1:1);break;case"end":f[o]+=d*(t&&c?-1:1);break}return f}const HL=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:h}=HS(c,r,l),d=r,f={},p=0;for(let g=0;g<a.length;g++){const{name:m,fn:y}=a[g],{x:v,y:w,data:x,reset:S}=await y({x:u,y:h,initialPlacement:r,placement:d,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:n,floating:e}});u=v??u,h=w??h,f={...f,[m]:{...f[m],...x}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(d=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):S.rects),{x:u,y:h}=HS(c,d,l)),g=-1)}return{x:u,y:h,placement:d,strategy:i,middlewareData:f}};async function xu(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=Mi(e,n),p=rO(f),m=a[d?h==="floating"?"reference":"floating":h],y=Ef(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(m)))==null||t?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),x=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},S=Ef(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:w,strategy:l}):v);return{top:(y.top-S.top+p.top)/x.y,bottom:(S.bottom-y.bottom+p.bottom)/x.y,left:(y.left-S.left+p.left)/x.x,right:(S.right-y.right+p.right)/x.x}}const UL=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Mi(n,e)||{};if(c==null)return{};const h=rO(u),d={x:t,y:r},f=Uw(i),p=Hw(f),g=await o.getDimensions(c),m=f==="y",y=m?"top":"left",v=m?"bottom":"right",w=m?"clientHeight":"clientWidth",x=s.reference[p]+s.reference[f]-d[f]-s.floating[p],S=d[f]-s.reference[f],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let T=C?C[w]:0;(!T||!await(o.isElement==null?void 0:o.isElement(C)))&&(T=a.floating[w]||s.floating[p]);const _=x/2-S/2,M=T/2-g[p]/2-1,P=Vs(h[y],M),$=Vs(h[v],M),N=P,H=T-g[p]-$,D=T/2-g[p]/2+_,V=R0(N,D,H),U=!l.arrow&&Hl(i)!=null&&D!==V&&s.reference[p]/2-(D<N?P:$)-g[p]/2<0,G=U?D<N?D-N:D-H:0;return{[f]:d[f]+G,data:{[f]:V,centerOffset:D-V-G,...U&&{alignmentOffset:G}},reset:U}}}),VL=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...m}=Mi(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const y=Ai(i),v=$r(a),w=Ai(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=d||(w||!g?[_f(a)]:LL(a)),C=p!=="none";!d&&C&&S.push(...zL(a,g,p,x));const T=[a,...S],_=await xu(e,m),M=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&M.push(_[y]),h){const D=jL(i,o,x);M.push(_[D[0]],_[D[1]])}if(P=[...P,{placement:i,overflows:M}],!M.every(D=>D<=0)){var $,N;const D=((($=s.flip)==null?void 0:$.index)||0)+1,V=T[D];if(V&&(!(h==="alignment"?v!==$r(V):!1)||P.every(R=>R.overflows[0]>0&&$r(R.placement)===v)))return{data:{index:D,overflows:P},reset:{placement:V}};let U=(N=P.filter(G=>G.overflows[0]<=0).sort((G,R)=>G.overflows[1]-R.overflows[1])[0])==null?void 0:N.placement;if(!U)switch(f){case"bestFit":{var H;const G=(H=P.filter(R=>{if(C){const I=$r(R.placement);return I===v||I==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(I=>I>0).reduce((I,z)=>I+z,0)]).sort((R,I)=>R[1]-I[1])[0])==null?void 0:H[0];G&&(U=G);break}case"initialPlacement":U=a;break}if(i!==U)return{reset:{placement:U}}}return{}}}};function US(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function VS(n){return PL.some(e=>n[e]>=0)}const GL=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Mi(n,e);switch(r){case"referenceHidden":{const s=await xu(e,{...i,elementContext:"reference"}),o=US(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:VS(o)}}}case"escaped":{const s=await xu(e,{...i,altBoundary:!0}),o=US(s,t.floating);return{data:{escapedOffsets:o,escaped:VS(o)}}}default:return{}}}}},iO=new Set(["left","top"]);async function qL(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ai(t),a=Hl(t),l=$r(t)==="y",c=iO.has(o)?-1:1,u=s&&l?-1:1,h=Mi(e,n);let{mainAxis:d,crossAxis:f,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*u,y:d*c}:{x:d*c,y:f*u}}const YL=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await qL(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},KL=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:m=>{let{x:y,y:v}=m;return{x:y,y:v}}},...l}=Mi(n,e),c={x:t,y:r},u=await xu(e,l),h=$r(Ai(i)),d=$w(h);let f=c[d],p=c[h];if(s){const m=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=f+u[m],w=f-u[y];f=R0(v,f,w)}if(o){const m=h==="y"?"top":"left",y=h==="y"?"bottom":"right",v=p+u[m],w=p-u[y];p=R0(v,p,w)}const g=a.fn({...e,[d]:f,[h]:p});return{...g,data:{x:g.x-t,y:g.y-r,enabled:{[d]:s,[h]:o}}}}}},XL=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Mi(n,e),u={x:t,y:r},h=$r(i),d=$w(h);let f=u[d],p=u[h];const g=Mi(a,e),m=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const w=d==="y"?"height":"width",x=s.reference[d]-s.floating[w]+m.mainAxis,S=s.reference[d]+s.reference[w]-m.mainAxis;f<x?f=x:f>S&&(f=S)}if(c){var y,v;const w=d==="y"?"width":"height",x=iO.has(Ai(i)),S=s.reference[h]-s.floating[w]+(x&&((y=o.offset)==null?void 0:y[h])||0)+(x?0:m.crossAxis),C=s.reference[h]+s.reference[w]+(x?0:((v=o.offset)==null?void 0:v[h])||0)-(x?m.crossAxis:0);p<S?p=S:p>C&&(p=C)}return{[d]:f,[h]:p}}}},JL=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Mi(n,e),u=await xu(e,c),h=Ai(i),d=Hl(i),f=$r(i)==="y",{width:p,height:g}=s.floating;let m,y;h==="top"||h==="bottom"?(m=h,y=d===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=h,m=d==="end"?"top":"bottom");const v=g-u.top-u.bottom,w=p-u.left-u.right,x=Vs(g-u[m],v),S=Vs(p-u[y],w),C=!e.middlewareData.shift;let T=x,_=S;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(_=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=v),C&&!d){const P=xn(u.left,0),$=xn(u.right,0),N=xn(u.top,0),H=xn(u.bottom,0);f?_=p-2*(P!==0||$!==0?P+$:xn(u.left,u.right)):T=g-2*(N!==0||H!==0?N+H:xn(u.top,u.bottom))}await l({...e,availableWidth:_,availableHeight:T});const M=await o.getDimensions(a.floating);return p!==M.width||g!==M.height?{reset:{rects:!0}}:{}}}};function tg(){return typeof window<"u"}function Ul(n){return sO(n)?(n.nodeName||"").toLowerCase():"#document"}function Tn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Zr(n){var e;return(e=(sO(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function sO(n){return tg()?n instanceof Node||n instanceof Tn(n).Node:!1}function Er(n){return tg()?n instanceof Element||n instanceof Tn(n).Element:!1}function Kr(n){return tg()?n instanceof HTMLElement||n instanceof Tn(n).HTMLElement:!1}function GS(n){return!tg()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Tn(n).ShadowRoot}const QL=new Set(["inline","contents"]);function eh(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Or(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!QL.has(i)}const ZL=new Set(["table","td","th"]);function eF(n){return ZL.has(Ul(n))}const tF=[":popover-open",":modal"];function ng(n){return tF.some(e=>{try{return n.matches(e)}catch{return!1}})}const nF=["transform","translate","scale","rotate","perspective"],rF=["transform","translate","scale","rotate","perspective","filter"],iF=["paint","layout","strict","content"];function Vw(n){const e=Gw(),t=Er(n)?Or(n):n;return nF.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||rF.some(r=>(t.willChange||"").includes(r))||iF.some(r=>(t.contain||"").includes(r))}function sF(n){let e=Gs(n);for(;Kr(e)&&!Ol(e);){if(Vw(e))return e;if(ng(e))return null;e=Gs(e)}return null}function Gw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const oF=new Set(["html","body","#document"]);function Ol(n){return oF.has(Ul(n))}function Or(n){return Tn(n).getComputedStyle(n)}function rg(n){return Er(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Gs(n){if(Ul(n)==="html")return n;const e=n.assignedSlot||n.parentNode||GS(n)&&n.host||Zr(n);return GS(e)?e.host:e}function oO(n){const e=Gs(n);return Ol(e)?n.ownerDocument?n.ownerDocument.body:n.body:Kr(e)&&eh(e)?e:oO(e)}function Su(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=oO(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=Tn(i);if(s){const a=D0(o);return e.concat(o,o.visualViewport||[],eh(i)?i:[],a&&t?Su(a):[])}return e.concat(i,Su(i,[],t))}function D0(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function aO(n){const e=Or(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Kr(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=Tf(t)!==s||Tf(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function qw(n){return Er(n)?n:n.contextElement}function sl(n){const e=qw(n);if(!Kr(e))return qr(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=aO(e);let o=(s?Tf(t.width):t.width)/r,a=(s?Tf(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const aF=qr(0);function lO(n){const e=Tn(n);return!Gw()||!e.visualViewport?aF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function lF(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Tn(n)?!1:e}function Ko(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=qw(n);let o=qr(1);e&&(r?Er(r)&&(o=sl(r)):o=sl(n));const a=lF(s,t,r)?lO(s):qr(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const d=Tn(s),f=r&&Er(r)?Tn(r):r;let p=d,g=D0(p);for(;g&&r&&f!==p;){const m=sl(g),y=g.getBoundingClientRect(),v=Or(g),w=y.left+(g.clientLeft+parseFloat(v.paddingLeft))*m.x,x=y.top+(g.clientTop+parseFloat(v.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,h*=m.y,l+=w,c+=x,p=Tn(g),g=D0(p)}}return Ef({width:u,height:h,x:l,y:c})}function Yw(n,e){const t=rg(n).scrollLeft;return e?e.left+t:Ko(Zr(n)).left+t}function cO(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:Yw(n,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function cF(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=Zr(r),a=e?ng(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=qr(1);const u=qr(0),h=Kr(r);if((h||!h&&!s)&&((Ul(r)!=="body"||eh(o))&&(l=rg(r)),Kr(r))){const f=Ko(r);c=sl(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}const d=o&&!h&&!s?cO(o,l,!0):qr(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+d.x,y:t.y*c.y-l.scrollTop*c.y+u.y+d.y}}function uF(n){return Array.from(n.getClientRects())}function hF(n){const e=Zr(n),t=rg(n),r=n.ownerDocument.body,i=xn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=xn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+Yw(n);const a=-t.scrollTop;return Or(r).direction==="rtl"&&(o+=xn(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function dF(n,e){const t=Tn(n),r=Zr(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=Gw();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}const fF=new Set(["absolute","fixed"]);function pF(n,e){const t=Ko(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=Kr(n)?sl(n):qr(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function qS(n,e,t){let r;if(e==="viewport")r=dF(n,t);else if(e==="document")r=hF(Zr(n));else if(Er(e))r=pF(e,t);else{const i=lO(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Ef(r)}function uO(n,e){const t=Gs(n);return t===e||!Er(t)||Ol(t)?!1:Or(t).position==="fixed"||uO(t,e)}function gF(n,e){const t=e.get(n);if(t)return t;let r=Su(n,[],!1).filter(a=>Er(a)&&Ul(a)!=="body"),i=null;const s=Or(n).position==="fixed";let o=s?Gs(n):n;for(;Er(o)&&!Ol(o);){const a=Or(o),l=Vw(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&fF.has(i.position)||eh(o)&&!l&&uO(n,o))?r=r.filter(u=>u!==o):i=a,o=Gs(o)}return e.set(n,r),r}function mF(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?ng(e)?[]:gF(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const h=qS(e,u,i);return c.top=xn(h.top,c.top),c.right=Vs(h.right,c.right),c.bottom=Vs(h.bottom,c.bottom),c.left=xn(h.left,c.left),c},qS(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function yF(n){const{width:e,height:t}=aO(n);return{width:e,height:t}}function vF(n,e,t){const r=Kr(e),i=Zr(e),s=t==="fixed",o=Ko(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=qr(0);function c(){l.x=Yw(i)}if(r||!r&&!s)if((Ul(e)!=="body"||eh(i))&&(a=rg(e)),r){const f=Ko(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?cO(i,a):qr(0),h=o.left+a.scrollLeft-l.x-u.x,d=o.top+a.scrollTop-l.y-u.y;return{x:h,y:d,width:o.width,height:o.height}}function Om(n){return Or(n).position==="static"}function YS(n,e){if(!Kr(n)||Or(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Zr(n)===t&&(t=t.ownerDocument.body),t}function hO(n,e){const t=Tn(n);if(ng(n))return t;if(!Kr(n)){let i=Gs(n);for(;i&&!Ol(i);){if(Er(i)&&!Om(i))return i;i=Gs(i)}return t}let r=YS(n,e);for(;r&&eF(r)&&Om(r);)r=YS(r,e);return r&&Ol(r)&&Om(r)&&!Vw(r)?t:r||sF(n)||t}const wF=async function(n){const e=this.getOffsetParent||hO,t=this.getDimensions,r=await t(n.floating);return{reference:vF(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function bF(n){return Or(n).direction==="rtl"}const xF={convertOffsetParentRelativeRectToViewportRelativeRect:cF,getDocumentElement:Zr,getClippingRect:mF,getOffsetParent:hO,getElementRects:wF,getClientRects:uF,getDimensions:yF,getScale:sl,isElement:Er,isRTL:bF};function dO(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function SF(n,e){let t=null,r;const i=Zr(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=n.getBoundingClientRect(),{left:u,top:h,width:d,height:f}=c;if(a||e(),!d||!f)return;const p=jh(h),g=jh(i.clientWidth-(u+d)),m=jh(i.clientHeight-(h+f)),y=jh(u),w={rootMargin:-p+"px "+-g+"px "+-m+"px "+-y+"px",threshold:xn(0,Vs(1,l))||1};let x=!0;function S(C){const T=C[0].intersectionRatio;if(T!==l){if(!x)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!dO(c,n.getBoundingClientRect())&&o(),x=!1}try{t=new IntersectionObserver(S,{...w,root:i.ownerDocument})}catch{t=new IntersectionObserver(S,w)}t.observe(n)}return o(!0),s}function CF(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=qw(n),u=i||s?[...c?Su(c):[],...Su(e)]:[];u.forEach(y=>{i&&y.addEventListener("scroll",t,{passive:!0}),s&&y.addEventListener("resize",t)});const h=c&&a?SF(c,t):null;let d=-1,f=null;o&&(f=new ResizeObserver(y=>{let[v]=y;v&&v.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(e)})),t()}),c&&!l&&f.observe(c),f.observe(e));let p,g=l?Ko(n):null;l&&m();function m(){const y=Ko(n);g&&!dO(g,y)&&t(),g=y,p=requestAnimationFrame(m)}return t(),()=>{var y;u.forEach(v=>{i&&v.removeEventListener("scroll",t),s&&v.removeEventListener("resize",t)}),h==null||h(),(y=f)==null||y.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const kF=YL,TF=KL,_F=VL,EF=JL,OF=GL,KS=UL,MF=XL,AF=(n,e,t)=>{const r=new Map,i={platform:xF,...t},s={...i.platform,_c:r};return HL(n,e,{...i,platform:s})};var RF=typeof document<"u",PF=function(){},$d=RF?k.useLayoutEffect:PF;function Of(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Of(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!Of(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function fO(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function XS(n,e){const t=fO(n);return Math.round(e*t)/t}function Mm(n){const e=k.useRef(n);return $d(()=>{e.current=n}),e}function DF(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,h]=k.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[d,f]=k.useState(r);Of(d,r)||f(r);const[p,g]=k.useState(null),[m,y]=k.useState(null),v=k.useCallback(R=>{R!==C.current&&(C.current=R,g(R))},[]),w=k.useCallback(R=>{R!==T.current&&(T.current=R,y(R))},[]),x=s||p,S=o||m,C=k.useRef(null),T=k.useRef(null),_=k.useRef(u),M=l!=null,P=Mm(l),$=Mm(i),N=Mm(c),H=k.useCallback(()=>{if(!C.current||!T.current)return;const R={placement:e,strategy:t,middleware:d};$.current&&(R.platform=$.current),AF(C.current,T.current,R).then(I=>{const z={...I,isPositioned:N.current!==!1};D.current&&!Of(_.current,z)&&(_.current=z,ji.flushSync(()=>{h(z)}))})},[d,e,t,$,N]);$d(()=>{c===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,h(R=>({...R,isPositioned:!1})))},[c]);const D=k.useRef(!1);$d(()=>(D.current=!0,()=>{D.current=!1}),[]),$d(()=>{if(x&&(C.current=x),S&&(T.current=S),x&&S){if(P.current)return P.current(x,S,H);H()}},[x,S,H,P,M]);const V=k.useMemo(()=>({reference:C,floating:T,setReference:v,setFloating:w}),[v,w]),U=k.useMemo(()=>({reference:x,floating:S}),[x,S]),G=k.useMemo(()=>{const R={position:t,left:0,top:0};if(!U.floating)return R;const I=XS(U.floating,u.x),z=XS(U.floating,u.y);return a?{...R,transform:"translate("+I+"px, "+z+"px)",...fO(U.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:I,top:z}},[t,a,U.floating,u.x,u.y]);return k.useMemo(()=>({...u,update:H,refs:V,elements:U,floatingStyles:G}),[u,H,V,U,G])}const NF=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?KS({element:r.current,padding:i}).fn(t):{}:r?KS({element:r,padding:i}).fn(t):{}}}},IF=(n,e)=>({...kF(n),options:[n,e]}),jF=(n,e)=>({...TF(n),options:[n,e]}),LF=(n,e)=>({...MF(n),options:[n,e]}),FF=(n,e)=>({..._F(n),options:[n,e]}),WF=(n,e)=>({...EF(n),options:[n,e]}),BF=(n,e)=>({...OF(n),options:[n,e]}),zF=(n,e)=>({...NF(n),options:[n,e]});var $F="Arrow",pO=k.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return b.jsx(mn.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:b.jsx("polygon",{points:"0,0 30,0 15,10"})})});pO.displayName=$F;var HF=pO;function UF(n){const[e,t]=k.useState(void 0);return Us(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var gO="Popper",[mO,yO]=Qp(gO),[MK,vO]=mO(gO),wO="PopperAnchor",bO=k.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=vO(wO,t),o=k.useRef(null),a=_r(e,o);return k.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:b.jsx(mn.div,{...i,ref:a})});bO.displayName=wO;var Kw="PopperContent",[VF,GF]=mO(Kw),xO=k.forwardRef((n,e)=>{var de,Bi,Rn,_t,zi,ua;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:d=!1,updatePositionStrategy:f="optimized",onPlaced:p,...g}=n,m=vO(Kw,t),[y,v]=k.useState(null),w=_r(e,$i=>v($i)),[x,S]=k.useState(null),C=UF(x),T=(C==null?void 0:C.width)??0,_=(C==null?void 0:C.height)??0,M=r+(s!=="center"?"-"+s:""),P=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},$=Array.isArray(c)?c:[c],N=$.length>0,H={padding:P,boundary:$.filter(YF),altBoundary:N},{refs:D,floatingStyles:V,placement:U,isPositioned:G,middlewareData:R}=DF({strategy:"fixed",placement:M,whileElementsMounted:(...$i)=>CF(...$i,{animationFrame:f==="always"}),elements:{reference:m.anchor},middleware:[IF({mainAxis:i+_,alignmentAxis:o}),l&&jF({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?LF():void 0,...H}),l&&FF({...H}),WF({...H,apply:({elements:$i,rects:dh,availableWidth:Gg,availableHeight:fh})=>{const{width:qg,height:rc}=dh.reference,ha=$i.floating.style;ha.setProperty("--radix-popper-available-width",`${Gg}px`),ha.setProperty("--radix-popper-available-height",`${fh}px`),ha.setProperty("--radix-popper-anchor-width",`${qg}px`),ha.setProperty("--radix-popper-anchor-height",`${rc}px`)}}),x&&zF({element:x,padding:a}),KF({arrowWidth:T,arrowHeight:_}),d&&BF({strategy:"referenceHidden",...H})]}),[I,z]=kO(U),ee=Hs(p);Us(()=>{G&&(ee==null||ee())},[G,ee]);const X=(de=R.arrow)==null?void 0:de.x,ie=(Bi=R.arrow)==null?void 0:Bi.y,te=((Rn=R.arrow)==null?void 0:Rn.centerOffset)!==0,[_e,Re]=k.useState();return Us(()=>{y&&Re(window.getComputedStyle(y).zIndex)},[y]),b.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:G?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_e,"--radix-popper-transform-origin":[(_t=R.transformOrigin)==null?void 0:_t.x,(zi=R.transformOrigin)==null?void 0:zi.y].join(" "),...((ua=R.hide)==null?void 0:ua.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:b.jsx(VF,{scope:t,placedSide:I,onArrowChange:S,arrowX:X,arrowY:ie,shouldHideArrow:te,children:b.jsx(mn.div,{"data-side":I,"data-align":z,...g,ref:w,style:{...g.style,animation:G?void 0:"none"}})})})});xO.displayName=Kw;var SO="PopperArrow",qF={top:"bottom",right:"left",bottom:"top",left:"right"},CO=k.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=GF(SO,r),o=qF[s.placedSide];return b.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:b.jsx(HF,{...i,ref:t,style:{...i.style,display:"block"}})})});CO.displayName=SO;function YF(n){return n!==null}var KF=n=>({name:"transformOrigin",options:n,fn(e){var m,y,v;const{placement:t,rects:r,middlewareData:i}=e,o=((m=i.arrow)==null?void 0:m.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=kO(t),h={start:"0%",center:"50%",end:"100%"}[u],d=(((y=i.arrow)==null?void 0:y.x)??0)+a/2,f=(((v=i.arrow)==null?void 0:v.y)??0)+l/2;let p="",g="";return c==="bottom"?(p=o?h:`${d}px`,g=`${-l}px`):c==="top"?(p=o?h:`${d}px`,g=`${r.floating.height+l}px`):c==="right"?(p=`${-l}px`,g=o?h:`${f}px`):c==="left"&&(p=`${r.floating.width+l}px`,g=o?h:`${f}px`),{data:{x:p,y:g}}}});function kO(n){const[e,t="center"]=n.split("-");return[e,t]}var XF=bO,JF=xO,QF=CO,[ig,AK]=Qp("Tooltip",[yO]),Xw=yO(),TO="TooltipProvider",ZF=700,JS="tooltip.open",[eW,_O]=ig(TO),EO=n=>{const{__scopeTooltip:e,delayDuration:t=ZF,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=n,o=k.useRef(!0),a=k.useRef(!1),l=k.useRef(0);return k.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),b.jsx(eW,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:k.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:k.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};EO.displayName=TO;var OO="Tooltip",[RK,sg]=ig(OO),N0="TooltipTrigger",tW=k.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=sg(N0,t),s=_O(N0,t),o=Xw(t),a=k.useRef(null),l=_r(e,a,i.onTriggerChange),c=k.useRef(!1),u=k.useRef(!1),h=k.useCallback(()=>c.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),b.jsx(XF,{asChild:!0,...o,children:b.jsx(mn.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:lt(n.onPointerMove,d=>{d.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:lt(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:lt(n.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:lt(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:lt(n.onBlur,i.onClose),onClick:lt(n.onClick,i.onClose)})})});tW.displayName=N0;var nW="TooltipPortal",[PK,rW]=ig(nW,{forceMount:void 0}),Ml="TooltipContent",MO=k.forwardRef((n,e)=>{const t=rW(Ml,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=sg(Ml,n.__scopeTooltip);return b.jsx(Lw,{present:r||o.open,children:o.disableHoverableContent?b.jsx(AO,{side:i,...s,ref:e}):b.jsx(iW,{side:i,...s,ref:e})})}),iW=k.forwardRef((n,e)=>{const t=sg(Ml,n.__scopeTooltip),r=_O(Ml,n.__scopeTooltip),i=k.useRef(null),s=_r(e,i),[o,a]=k.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:h}=r,d=k.useCallback(()=>{a(null),h(!1)},[h]),f=k.useCallback((p,g)=>{const m=p.currentTarget,y={x:p.clientX,y:p.clientY},v=cW(y,m.getBoundingClientRect()),w=uW(y,v),x=hW(g.getBoundingClientRect()),S=fW([...w,...x]);a(S),h(!0)},[h]);return k.useEffect(()=>()=>d(),[d]),k.useEffect(()=>{if(l&&u){const p=m=>f(m,u),g=m=>f(m,l);return l.addEventListener("pointerleave",p),u.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",g)}}},[l,u,f,d]),k.useEffect(()=>{if(o){const p=g=>{const m=g.target,y={x:g.clientX,y:g.clientY},v=(l==null?void 0:l.contains(m))||(u==null?void 0:u.contains(m)),w=!dW(y,o);v?d():w&&(d(),c())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,u,o,c,d]),b.jsx(AO,{...n,ref:s})}),[sW,oW]=ig(OO,{isInside:!1}),aW=eI("TooltipContent"),AO=k.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=sg(Ml,t),c=Xw(t),{onClose:u}=l;return k.useEffect(()=>(document.addEventListener(JS,u),()=>document.removeEventListener(JS,u)),[u]),k.useEffect(()=>{if(l.trigger){const h=d=>{const f=d.target;f!=null&&f.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),b.jsx(jw,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:b.jsxs(JF,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[b.jsx(aW,{children:r}),b.jsx(sW,{scope:t,isInside:!0,children:b.jsx(TI,{id:l.contentId,role:"tooltip",children:i||r})})]})})});MO.displayName=Ml;var RO="TooltipArrow",lW=k.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=Xw(t);return oW(RO,t).isInside?null:b.jsx(QF,{...i,...r,ref:e})});lW.displayName=RO;function cW(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function uW(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function hW(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function dW(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,h=l.x,d=l.y;u>r!=d>r&&t<(h-c)*(r-u)/(d-u)+c&&(i=!i)}return i}function fW(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),pW(e)}function pW(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var gW=EO,PO=MO;const mW=gW,yW=k.forwardRef(({className:n,sideOffset:e=4,...t},r)=>b.jsx(PO,{ref:r,sideOffset:e,className:ia("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));yW.displayName=PO.displayName;var og=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ag=typeof window>"u"||"Deno"in globalThis;function cr(){}function vW(n,e){return typeof n=="function"?n(e):n}function wW(n){return typeof n=="number"&&n>=0&&n!==1/0}function bW(n,e){return Math.max(n+(e||0)-Date.now(),0)}function I0(n,e){return typeof n=="function"?n(e):n}function xW(n,e){return typeof n=="function"?n(e):n}function QS(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==Jw(o,e.options))return!1}else if(!ku(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function ZS(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(Cu(e.options.mutationKey)!==Cu(s))return!1}else if(!ku(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function Jw(n,e){return((e==null?void 0:e.queryKeyHashFn)||Cu)(n)}function Cu(n){return JSON.stringify(n,(e,t)=>j0(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function ku(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>ku(n[t],e[t])):!1}function DO(n,e){if(n===e)return n;const t=e1(n)&&e1(e);if(t||j0(n)&&j0(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{},l=new Set(r);let c=0;for(let u=0;u<o;u++){const h=t?u:s[u];(!t&&l.has(h)||t)&&n[h]===void 0&&e[h]===void 0?(a[h]=void 0,c++):(a[h]=DO(n[h],e[h]),a[h]===n[h]&&n[h]!==void 0&&c++)}return i===o&&c===i?n:a}return e}function e1(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function j0(n){if(!t1(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!t1(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function t1(n){return Object.prototype.toString.call(n)==="[object Object]"}function SW(n){return new Promise(e=>{setTimeout(e,n)})}function CW(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?DO(n,e):e}function kW(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function TW(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var Qw=Symbol();function NO(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===Qw?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Mo,ys,fl,qk,_W=(qk=class extends og{constructor(){super();ge(this,Mo);ge(this,ys);ge(this,fl);oe(this,fl,e=>{if(!ag&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){j(this,ys)||this.setEventListener(j(this,fl))}onUnsubscribe(){var e;this.hasListeners()||((e=j(this,ys))==null||e.call(this),oe(this,ys,void 0))}setEventListener(e){var t;oe(this,fl,e),(t=j(this,ys))==null||t.call(this),oe(this,ys,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){j(this,Mo)!==e&&(oe(this,Mo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof j(this,Mo)=="boolean"?j(this,Mo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Mo=new WeakMap,ys=new WeakMap,fl=new WeakMap,qk),IO=new _W,pl,vs,gl,Yk,EW=(Yk=class extends og{constructor(){super();ge(this,pl,!0);ge(this,vs);ge(this,gl);oe(this,gl,e=>{if(!ag&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){j(this,vs)||this.setEventListener(j(this,gl))}onUnsubscribe(){var e;this.hasListeners()||((e=j(this,vs))==null||e.call(this),oe(this,vs,void 0))}setEventListener(e){var t;oe(this,gl,e),(t=j(this,vs))==null||t.call(this),oe(this,vs,e(this.setOnline.bind(this)))}setOnline(e){j(this,pl)!==e&&(oe(this,pl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return j(this,pl)}},pl=new WeakMap,vs=new WeakMap,gl=new WeakMap,Yk),Mf=new EW;function OW(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function MW(n){return Math.min(1e3*2**n,3e4)}function jO(n){return(n??"online")==="online"?Mf.isOnline():!0}var LO=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Am(n){return n instanceof LO}function FO(n){let e=!1,t=0,r=!1,i;const s=OW(),o=g=>{var m;r||(d(new LO(g)),(m=n.abort)==null||m.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>IO.isFocused()&&(n.networkMode==="always"||Mf.isOnline())&&n.canRun(),u=()=>jO(n.networkMode)&&n.canRun(),h=g=>{var m;r||(r=!0,(m=n.onSuccess)==null||m.call(n,g),i==null||i(),s.resolve(g))},d=g=>{var m;r||(r=!0,(m=n.onError)==null||m.call(n,g),i==null||i(),s.reject(g))},f=()=>new Promise(g=>{var m;i=y=>{(r||c())&&g(y)},(m=n.onPause)==null||m.call(n)}).then(()=>{var g;i=void 0,r||(g=n.onContinue)==null||g.call(n)}),p=()=>{if(r)return;let g;const m=t===0?n.initialPromise:void 0;try{g=m??n.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var C;if(r)return;const v=n.retry??(ag?0:3),w=n.retryDelay??MW,x=typeof w=="function"?w(t,y):w,S=v===!0||typeof v=="number"&&t<v||typeof v=="function"&&v(t,y);if(e||!S){d(y);return}t++,(C=n.onFail)==null||C.call(n,t,y),SW(x).then(()=>c()?void 0:f()).then(()=>{e?d(y):p()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?p():f().then(p),s)}}var AW=n=>setTimeout(n,0);function RW(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=AW;const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var $t=RW(),Ao,Kk,WO=(Kk=class{constructor(){ge(this,Ao)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wW(this.gcTime)&&oe(this,Ao,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(ag?1/0:5*60*1e3))}clearGcTimeout(){j(this,Ao)&&(clearTimeout(j(this,Ao)),oe(this,Ao,void 0))}},Ao=new WeakMap,Kk),ml,Ro,jn,Po,Rt,Gu,Do,ur,ai,Xk,PW=(Xk=class extends WO{constructor(e){super();ge(this,ur);ge(this,ml);ge(this,Ro);ge(this,jn);ge(this,Po);ge(this,Rt);ge(this,Gu);ge(this,Do);oe(this,Do,!1),oe(this,Gu,e.defaultOptions),this.setOptions(e.options),this.observers=[],oe(this,Po,e.client),oe(this,jn,j(this,Po).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,oe(this,ml,NW(this.options)),this.state=e.state??j(this,ml),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=j(this,Rt))==null?void 0:e.promise}setOptions(e){this.options={...j(this,Gu),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&j(this,jn).remove(this)}setData(e,t){const r=CW(this.state.data,e,this.options);return Et(this,ur,ai).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){Et(this,ur,ai).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,i;const t=(r=j(this,Rt))==null?void 0:r.promise;return(i=j(this,Rt))==null||i.cancel(e),t?t.then(cr).catch(cr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(j(this,ml))}isActive(){return this.observers.some(e=>xW(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Qw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>I0(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!bW(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=j(this,Rt))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=j(this,Rt))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),j(this,jn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(j(this,Rt)&&(j(this,Do)?j(this,Rt).cancel({revert:!0}):j(this,Rt).cancelRetry()),this.scheduleGc()),j(this,jn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Et(this,ur,ai).call(this,{type:"invalidate"})}fetch(e,t){var c,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(j(this,Rt))return j(this,Rt).continueRetry(),j(this,Rt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,i=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(oe(this,Do,!0),r.signal)})},s=()=>{const d=NO(this.options,t),p=(()=>{const g={client:j(this,Po),queryKey:this.queryKey,meta:this.meta};return i(g),g})();return oe(this,Do,!1),this.options.persister?this.options.persister(d,p,this):d(p)},a=(()=>{const d={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:j(this,Po),state:this.state,fetchFn:s};return i(d),d})();(c=this.options.behavior)==null||c.onFetch(a,this),oe(this,Ro,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Et(this,ur,ai).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta});const l=d=>{var f,p,g,m;Am(d)&&d.silent||Et(this,ur,ai).call(this,{type:"error",error:d}),Am(d)||((p=(f=j(this,jn).config).onError)==null||p.call(f,d,this),(m=(g=j(this,jn).config).onSettled)==null||m.call(g,this.state.data,d,this)),this.scheduleGc()};return oe(this,Rt,FO({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{var f,p,g,m;if(d===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(y){l(y);return}(p=(f=j(this,jn).config).onSuccess)==null||p.call(f,d,this),(m=(g=j(this,jn).config).onSettled)==null||m.call(g,d,this.state.error,this),this.scheduleGc()},onError:l,onFail:(d,f)=>{Et(this,ur,ai).call(this,{type:"failed",failureCount:d,error:f})},onPause:()=>{Et(this,ur,ai).call(this,{type:"pause"})},onContinue:()=>{Et(this,ur,ai).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),j(this,Rt).start()}},ml=new WeakMap,Ro=new WeakMap,jn=new WeakMap,Po=new WeakMap,Rt=new WeakMap,Gu=new WeakMap,Do=new WeakMap,ur=new WeakSet,ai=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...DW(r.data,this.options),fetchMeta:e.meta??null};case"success":return oe(this,Ro,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Am(i)&&i.revert&&j(this,Ro)?{...j(this,Ro),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),$t.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),j(this,jn).notify({query:this,type:"updated",action:e})})},Xk);function DW(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jO(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function NW(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var jr,Jk,IW=(Jk=class extends og{constructor(e={}){super();ge(this,jr);this.config=e,oe(this,jr,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??Jw(i,t);let o=this.get(s);return o||(o=new PW({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){j(this,jr).has(e.queryHash)||(j(this,jr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=j(this,jr).get(e.queryHash);t&&(e.destroy(),t===e&&j(this,jr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){$t.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return j(this,jr).get(e)}getAll(){return[...j(this,jr).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>QS(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>QS(e,r)):t}notify(e){$t.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){$t.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){$t.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},jr=new WeakMap,Jk),Lr,Wt,No,Fr,ns,Qk,jW=(Qk=class extends WO{constructor(e){super();ge(this,Fr);ge(this,Lr);ge(this,Wt);ge(this,No);this.mutationId=e.mutationId,oe(this,Wt,e.mutationCache),oe(this,Lr,[]),this.state=e.state||LW(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){j(this,Lr).includes(e)||(j(this,Lr).push(e),this.clearGcTimeout(),j(this,Wt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){oe(this,Lr,j(this,Lr).filter(t=>t!==e)),this.scheduleGc(),j(this,Wt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){j(this,Lr).length||(this.state.status==="pending"?this.scheduleGc():j(this,Wt).remove(this))}continue(){var e;return((e=j(this,No))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,o,a,l,c,u,h,d,f,p,g,m,y,v,w,x,S,C,T,_;const t=()=>{Et(this,Fr,ns).call(this,{type:"continue"})};oe(this,No,FO({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(M,P)=>{Et(this,Fr,ns).call(this,{type:"failed",failureCount:M,error:P})},onPause:()=>{Et(this,Fr,ns).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>j(this,Wt).canRun(this)}));const r=this.state.status==="pending",i=!j(this,No).canStart();try{if(r)t();else{Et(this,Fr,ns).call(this,{type:"pending",variables:e,isPaused:i}),await((o=(s=j(this,Wt).config).onMutate)==null?void 0:o.call(s,e,this));const P=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));P!==this.state.context&&Et(this,Fr,ns).call(this,{type:"pending",context:P,variables:e,isPaused:i})}const M=await j(this,No).start();return await((u=(c=j(this,Wt).config).onSuccess)==null?void 0:u.call(c,M,e,this.state.context,this)),await((d=(h=this.options).onSuccess)==null?void 0:d.call(h,M,e,this.state.context)),await((p=(f=j(this,Wt).config).onSettled)==null?void 0:p.call(f,M,null,this.state.variables,this.state.context,this)),await((m=(g=this.options).onSettled)==null?void 0:m.call(g,M,null,e,this.state.context)),Et(this,Fr,ns).call(this,{type:"success",data:M}),M}catch(M){try{throw await((v=(y=j(this,Wt).config).onError)==null?void 0:v.call(y,M,e,this.state.context,this)),await((x=(w=this.options).onError)==null?void 0:x.call(w,M,e,this.state.context)),await((C=(S=j(this,Wt).config).onSettled)==null?void 0:C.call(S,void 0,M,this.state.variables,this.state.context,this)),await((_=(T=this.options).onSettled)==null?void 0:_.call(T,void 0,M,e,this.state.context)),M}finally{Et(this,Fr,ns).call(this,{type:"error",error:M})}}finally{j(this,Wt).runNext(this)}}},Lr=new WeakMap,Wt=new WeakMap,No=new WeakMap,Fr=new WeakSet,ns=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),$t.batch(()=>{j(this,Lr).forEach(r=>{r.onMutationUpdate(e)}),j(this,Wt).notify({mutation:this,type:"updated",action:e})})},Qk);function LW(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var mi,hr,qu,Zk,FW=(Zk=class extends og{constructor(e={}){super();ge(this,mi);ge(this,hr);ge(this,qu);this.config=e,oe(this,mi,new Set),oe(this,hr,new Map),oe(this,qu,0)}build(e,t,r){const i=new jW({mutationCache:this,mutationId:++gh(this,qu)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){j(this,mi).add(e);const t=Lh(e);if(typeof t=="string"){const r=j(this,hr).get(t);r?r.push(e):j(this,hr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(j(this,mi).delete(e)){const t=Lh(e);if(typeof t=="string"){const r=j(this,hr).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&j(this,hr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Lh(e);if(typeof t=="string"){const r=j(this,hr).get(t),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=Lh(e);if(typeof t=="string"){const i=(r=j(this,hr).get(t))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){$t.batch(()=>{j(this,mi).forEach(e=>{this.notify({type:"removed",mutation:e})}),j(this,mi).clear(),j(this,hr).clear()})}getAll(){return Array.from(j(this,mi))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>ZS(t,r))}findAll(e={}){return this.getAll().filter(t=>ZS(e,t))}notify(e){$t.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return $t.batch(()=>Promise.all(e.map(t=>t.continue().catch(cr))))}},mi=new WeakMap,hr=new WeakMap,qu=new WeakMap,Zk);function Lh(n){var e;return(e=n.options.scope)==null?void 0:e.id}function n1(n){return{onFetch:(e,t)=>{var u,h,d,f,p;const r=e.options,i=(d=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:d.direction,s=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const m=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=NO(e.options,e.fetchOptions),v=async(w,x,S)=>{if(g)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const T=(()=>{const $={client:e.client,queryKey:e.queryKey,pageParam:x,direction:S?"backward":"forward",meta:e.options.meta};return m($),$})(),_=await y(T),{maxPages:M}=e.options,P=S?TW:kW;return{pages:P(w.pages,_,M),pageParams:P(w.pageParams,x,M)}};if(i&&s.length){const w=i==="backward",x=w?WW:r1,S={pages:s,pageParams:o},C=x(r,S);a=await v(S,C,w)}else{const w=n??s.length;do{const x=l===0?o[0]??r.initialPageParam:r1(r,a);if(l>0&&x==null)break;a=await v(a,x),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var g,m;return(m=(g=e.options).persister)==null?void 0:m.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function r1(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function WW(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var ze,ws,bs,yl,vl,xs,wl,bl,eT,BW=(eT=class{constructor(n={}){ge(this,ze);ge(this,ws);ge(this,bs);ge(this,yl);ge(this,vl);ge(this,xs);ge(this,wl);ge(this,bl);oe(this,ze,n.queryCache||new IW),oe(this,ws,n.mutationCache||new FW),oe(this,bs,n.defaultOptions||{}),oe(this,yl,new Map),oe(this,vl,new Map),oe(this,xs,0)}mount(){gh(this,xs)._++,j(this,xs)===1&&(oe(this,wl,IO.subscribe(async n=>{n&&(await this.resumePausedMutations(),j(this,ze).onFocus())})),oe(this,bl,Mf.subscribe(async n=>{n&&(await this.resumePausedMutations(),j(this,ze).onOnline())})))}unmount(){var n,e;gh(this,xs)._--,j(this,xs)===0&&((n=j(this,wl))==null||n.call(this),oe(this,wl,void 0),(e=j(this,bl))==null||e.call(this),oe(this,bl,void 0))}isFetching(n){return j(this,ze).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return j(this,ws).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=j(this,ze).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=j(this,ze).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(I0(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return j(this,ze).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=j(this,ze).get(r.queryHash),s=i==null?void 0:i.state.data,o=vW(e,s);if(o!==void 0)return j(this,ze).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return $t.batch(()=>j(this,ze).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=j(this,ze).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=j(this,ze);$t.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=j(this,ze);return $t.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=$t.batch(()=>j(this,ze).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(cr).catch(cr)}invalidateQueries(n,e={}){return $t.batch(()=>(j(this,ze).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=$t.batch(()=>j(this,ze).findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(cr)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(cr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=j(this,ze).build(this,e);return t.isStaleByTime(I0(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(cr).catch(cr)}fetchInfiniteQuery(n){return n.behavior=n1(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(cr).catch(cr)}ensureInfiniteQueryData(n){return n.behavior=n1(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Mf.isOnline()?j(this,ws).resumePausedMutations():Promise.resolve()}getQueryCache(){return j(this,ze)}getMutationCache(){return j(this,ws)}getDefaultOptions(){return j(this,bs)}setDefaultOptions(n){oe(this,bs,n)}setQueryDefaults(n,e){j(this,yl).set(Cu(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...j(this,yl).values()],t={};return e.forEach(r=>{ku(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){j(this,vl).set(Cu(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...j(this,vl).values()],t={};return e.forEach(r=>{ku(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...j(this,bs).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Jw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Qw&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...j(this,bs).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){j(this,ze).clear(),j(this,ws).clear()}},ze=new WeakMap,ws=new WeakMap,bs=new WeakMap,yl=new WeakMap,vl=new WeakMap,xs=new WeakMap,wl=new WeakMap,bl=new WeakMap,eT),zW=k.createContext(void 0),$W=({client:n,children:e})=>(k.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),b.jsx(zW.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tu(){return Tu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Tu.apply(this,arguments)}var ks;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ks||(ks={}));const i1="popstate";function HW(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return L0("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:zO(i)}return VW(e,t,null,n)}function ut(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function BO(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function UW(){return Math.random().toString(36).substr(2,8)}function s1(n,e){return{usr:n.state,key:n.key,idx:e}}function L0(n,e,t,r){return t===void 0&&(t=null),Tu({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Vl(e):e,{state:t,key:e&&e.key||r||UW()})}function zO(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Vl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function VW(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ks.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Tu({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=ks.Pop;let m=u(),y=m==null?null:m-c;c=m,l&&l({action:a,location:g.location,delta:y})}function d(m,y){a=ks.Push;let v=L0(g.location,m,y);c=u()+1;let w=s1(v,c),x=g.createHref(v);try{o.pushState(w,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(x)}s&&l&&l({action:a,location:g.location,delta:1})}function f(m,y){a=ks.Replace;let v=L0(g.location,m,y);c=u();let w=s1(v,c),x=g.createHref(v);o.replaceState(w,"",x),s&&l&&l({action:a,location:g.location,delta:0})}function p(m){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof m=="string"?m:zO(m);return v=v.replace(/ $/,"%20"),ut(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let g={get action(){return a},get location(){return n(i,o)},listen(m){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(i1,h),l=m,()=>{i.removeEventListener(i1,h),l=null}},createHref(m){return e(i,m)},createURL:p,encodeLocation(m){let y=p(m);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:f,go(m){return o.go(m)}};return g}var o1;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(o1||(o1={}));function GW(n,e,t){return t===void 0&&(t="/"),qW(n,e,t,!1)}function qW(n,e,t,r){let i=typeof e=="string"?Vl(e):e,s=UO(i.pathname||"/",t);if(s==null)return null;let o=$O(n);YW(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=sB(s);a=rB(o[l],c,r)}return a}function $O(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ut(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Lo([r,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(ut(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),$O(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:tB(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of HO(s.path))i(s,o,l)}),e}function HO(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=HO(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function YW(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:nB(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const KW=/^:[\w-]+$/,XW=3,JW=2,QW=1,ZW=10,eB=-2,a1=n=>n==="*";function tB(n,e){let t=n.split("/"),r=t.length;return t.some(a1)&&(r+=eB),e&&(r+=JW),t.filter(i=>!a1(i)).reduce((i,s)=>i+(KW.test(s)?XW:s===""?QW:ZW),r)}function nB(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function rB(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=l1({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!h&&c&&t&&!r[r.length-1].route.index&&(h=l1({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Lo([s,h.pathname]),pathnameBase:hB(Lo([s,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(s=Lo([s,h.pathnameBase]))}return o}function l1(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=iB(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:d,isOptional:f}=u;if(d==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[h];return f&&!p?c[d]=void 0:c[d]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function iB(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),BO(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function sB(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return BO(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function UO(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function oB(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Vl(n):n;return{pathname:t?t.startsWith("/")?t:aB(t,e):e,search:dB(r),hash:fB(i)}}function aB(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Rm(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lB(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cB(n,e){let t=lB(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function uB(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Vl(n):(i=Tu({},n),ut(!i.pathname||!i.pathname.includes("?"),Rm("?","pathname","search",i)),ut(!i.pathname||!i.pathname.includes("#"),Rm("#","pathname","hash",i)),ut(!i.search||!i.search.includes("#"),Rm("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let h=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=oB(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Lo=n=>n.join("/").replace(/\/\/+/g,"/"),hB=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),dB=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,fB=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function pB(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const VO=["post","put","patch","delete"];new Set(VO);const gB=["get",...VO];new Set(gB);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _u(){return _u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_u.apply(this,arguments)}const Zw=k.createContext(null),mB=k.createContext(null),lg=k.createContext(null),cg=k.createContext(null),Gl=k.createContext({outlet:null,matches:[],isDataRoute:!1}),GO=k.createContext(null);function ug(){return k.useContext(cg)!=null}function eb(){return ug()||ut(!1),k.useContext(cg).location}function qO(n){k.useContext(lg).static||k.useLayoutEffect(n)}function yB(){let{isDataRoute:n}=k.useContext(Gl);return n?AB():vB()}function vB(){ug()||ut(!1);let n=k.useContext(Zw),{basename:e,future:t,navigator:r}=k.useContext(lg),{matches:i}=k.useContext(Gl),{pathname:s}=eb(),o=JSON.stringify(cB(i,t.v7_relativeSplatPath)),a=k.useRef(!1);return qO(()=>{a.current=!0}),k.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=uB(c,JSON.parse(o),s,u.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Lo([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,s,n])}function wB(n,e){return bB(n,e)}function bB(n,e,t,r){ug()||ut(!1);let{navigator:i}=k.useContext(lg),{matches:s}=k.useContext(Gl),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=eb(),u;if(e){var h;let m=typeof e=="string"?Vl(e):e;l==="/"||(h=m.pathname)!=null&&h.startsWith(l)||ut(!1),u=m}else u=c;let d=u.pathname||"/",f=d;if(l!=="/"){let m=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(m.length).join("/")}let p=GW(n,{pathname:f}),g=TB(p&&p.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:Lo([l,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?l:Lo([l,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),s,t,r);return e&&g?k.createElement(cg.Provider,{value:{location:_u({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ks.Pop}},g):g}function xB(){let n=MB(),e=pB(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:i},t):null,null)}const SB=k.createElement(xB,null);class CB extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?k.createElement(Gl.Provider,{value:this.props.routeContext},k.createElement(GO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kB(n){let{routeContext:e,match:t,children:r}=n,i=k.useContext(Zw);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(Gl.Provider,{value:e},r)}function TB(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||ut(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:d,errors:f}=t,p=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,d)=>{let f,p=!1,g=null,m=null;t&&(f=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||SB,l&&(c<0&&d===0?(p=!0,m=null):c===d&&(p=!0,m=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,d+1)),v=()=>{let w;return f?w=g:p?w=m:h.route.Component?w=k.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=u,k.createElement(kB,{match:h,routeContext:{outlet:u,matches:y,isDataRoute:t!=null},children:w})};return t&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?k.createElement(CB,{location:t.location,revalidation:t.revalidation,component:g,error:f,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var YO=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(YO||{}),Af=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Af||{});function _B(n){let e=k.useContext(Zw);return e||ut(!1),e}function EB(n){let e=k.useContext(mB);return e||ut(!1),e}function OB(n){let e=k.useContext(Gl);return e||ut(!1),e}function KO(n){let e=OB(),t=e.matches[e.matches.length-1];return t.route.id||ut(!1),t.route.id}function MB(){var n;let e=k.useContext(GO),t=EB(Af.UseRouteError),r=KO(Af.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function AB(){let{router:n}=_B(YO.UseNavigateStable),e=KO(Af.UseNavigateStable),t=k.useRef(!1);return qO(()=>{t.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,_u({fromRouteId:e},s)))},[n,e])}function RB(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Hd(n){ut(!1)}function PB(n){let{basename:e="/",children:t=null,location:r,navigationType:i=ks.Pop,navigator:s,static:o=!1,future:a}=n;ug()&&ut(!1);let l=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:l,navigator:s,static:o,future:_u({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Vl(r));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:p="default"}=r,g=k.useMemo(()=>{let m=UO(u,l);return m==null?null:{location:{pathname:m,search:h,hash:d,state:f,key:p},navigationType:i}},[l,u,h,d,f,p,i]);return g==null?null:k.createElement(lg.Provider,{value:c},k.createElement(cg.Provider,{children:t,value:g}))}function DB(n){let{children:e,location:t}=n;return wB(F0(e),t)}new Promise(()=>{});function F0(n,e){e===void 0&&(e=[]);let t=[];return k.Children.forEach(n,(r,i)=>{if(!k.isValidElement(r))return;let s=[...e,i];if(r.type===k.Fragment){t.push.apply(t,F0(r.props.children,s));return}r.type!==Hd&&ut(!1),!r.props.index||!r.props.children||ut(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=F0(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const NB="6";try{window.__reactRouterVersion=NB}catch{}const IB="startTransition",c1=dT[IB];function jB(n){let{basename:e,children:t,future:r,window:i}=n,s=k.useRef();s.current==null&&(s.current=HW({window:i,v5Compat:!0}));let o=s.current,[a,l]=k.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=k.useCallback(h=>{c&&c1?c1(()=>l(h)):l(h)},[l,c]);return k.useLayoutEffect(()=>o.listen(u),[o,u]),k.useEffect(()=>RB(r),[r]),k.createElement(PB,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}var u1;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(u1||(u1={}));var h1;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(h1||(h1={}));var hg={exports:{}},XO={},JO={exports:{}},LB="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",FB=LB,WB=FB;function QO(){}function ZO(){}ZO.resetWarningCache=QO;var BB=function(){function n(r,i,s,o,a,l){if(l!==WB){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ZO,resetWarningCache:QO};return t.PropTypes=t,t};JO.exports=BB();var eM=JO.exports;function tM(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=tM(n[e]))&&(r&&(r+=" "),r+=t);else for(e in n)n[e]&&(r&&(r+=" "),r+=e);return r}function d1(){for(var n,e,t=0,r="";t<arguments.length;)(n=arguments[t++])&&(e=tM(n))&&(r&&(r+=" "),r+=e);return r}const zB=Object.freeze(Object.defineProperty({__proto__:null,clsx:d1,default:d1},Symbol.toStringTag,{value:"Module"})),$B=tT(zB);var Ue={},ei={};Object.defineProperty(ei,"__esModule",{value:!0});ei.dontSetMe=qB;ei.findInArray=HB;ei.int=GB;ei.isFunction=UB;ei.isNum=VB;function HB(n,e){for(let t=0,r=n.length;t<r;t++)if(e.apply(e,[n[t],t,n]))return n[t]}function UB(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Function]"}function VB(n){return typeof n=="number"&&!isNaN(n)}function GB(n){return parseInt(n,10)}function qB(n,e,t){if(n[e])return new Error("Invalid prop ".concat(e," passed to ").concat(t," - do not set this, set it on the child."))}var sa={};Object.defineProperty(sa,"__esModule",{value:!0});sa.browserPrefixToKey=rM;sa.browserPrefixToStyle=YB;sa.default=void 0;sa.getPrefix=nM;const Pm=["Moz","Webkit","O","ms"];function nM(){var n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(n=window.document)===null||n===void 0||(n=n.documentElement)===null||n===void 0?void 0:n.style;if(!t||e in t)return"";for(let r=0;r<Pm.length;r++)if(rM(e,Pm[r])in t)return Pm[r];return""}function rM(n,e){return e?"".concat(e).concat(KB(n)):n}function YB(n,e){return e?"-".concat(e.toLowerCase(),"-").concat(n):n}function KB(n){let e="",t=!0;for(let r=0;r<n.length;r++)t?(e+=n[r].toUpperCase(),t=!1):n[r]==="-"?t=!0:e+=n[r];return e}sa.default=nM();Object.defineProperty(Ue,"__esModule",{value:!0});Ue.addClassName=oM;Ue.addEvent=QB;Ue.addUserSelectStyles=cz;Ue.createCSSTransform=sz;Ue.createSVGTransform=oz;Ue.getTouch=az;Ue.getTouchIdentifier=lz;Ue.getTranslation=tb;Ue.innerHeight=nz;Ue.innerWidth=rz;Ue.matchesSelector=sM;Ue.matchesSelectorAndParentsTo=JB;Ue.offsetXYFromParent=iz;Ue.outerHeight=ez;Ue.outerWidth=tz;Ue.removeClassName=aM;Ue.removeEvent=ZB;Ue.removeUserSelectStyles=uz;var _n=ei,f1=XB(sa);function iM(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(iM=function(r){return r?t:e})(n)}function XB(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=iM(e);if(t&&t.has(n))return t.get(n);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var o=i?Object.getOwnPropertyDescriptor(n,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=n[s]}return r.default=n,t&&t.set(n,r),r}let Fh="";function sM(n,e){return Fh||(Fh=(0,_n.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,_n.isFunction)(n[t])})),(0,_n.isFunction)(n[Fh])?n[Fh](e):!1}function JB(n,e,t){let r=n;do{if(sM(r,e))return!0;if(r===t)return!1;r=r.parentNode}while(r);return!1}function QB(n,e,t,r){if(!n)return;const i={capture:!0,...r};n.addEventListener?n.addEventListener(e,t,i):n.attachEvent?n.attachEvent("on"+e,t):n["on"+e]=t}function ZB(n,e,t,r){if(!n)return;const i={capture:!0,...r};n.removeEventListener?n.removeEventListener(e,t,i):n.detachEvent?n.detachEvent("on"+e,t):n["on"+e]=null}function ez(n){let e=n.clientHeight;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,_n.int)(t.borderTopWidth),e+=(0,_n.int)(t.borderBottomWidth),e}function tz(n){let e=n.clientWidth;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,_n.int)(t.borderLeftWidth),e+=(0,_n.int)(t.borderRightWidth),e}function nz(n){let e=n.clientHeight;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,_n.int)(t.paddingTop),e-=(0,_n.int)(t.paddingBottom),e}function rz(n){let e=n.clientWidth;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,_n.int)(t.paddingLeft),e-=(0,_n.int)(t.paddingRight),e}function iz(n,e,t){const i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),s=(n.clientX+e.scrollLeft-i.left)/t,o=(n.clientY+e.scrollTop-i.top)/t;return{x:s,y:o}}function sz(n,e){const t=tb(n,e,"px");return{[(0,f1.browserPrefixToKey)("transform",f1.default)]:t}}function oz(n,e){return tb(n,e,"")}function tb(n,e,t){let{x:r,y:i}=n,s="translate(".concat(r).concat(t,",").concat(i).concat(t,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+t),a="".concat(typeof e.y=="string"?e.y:e.y+t);s="translate(".concat(o,", ").concat(a,")")+s}return s}function az(n,e){return n.targetTouches&&(0,_n.findInArray)(n.targetTouches,t=>e===t.identifier)||n.changedTouches&&(0,_n.findInArray)(n.changedTouches,t=>e===t.identifier)}function lz(n){if(n.targetTouches&&n.targetTouches[0])return n.targetTouches[0].identifier;if(n.changedTouches&&n.changedTouches[0])return n.changedTouches[0].identifier}function cz(n){if(!n)return;let e=n.getElementById("react-draggable-style-el");e||(e=n.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,n.getElementsByTagName("head")[0].appendChild(e)),n.body&&oM(n.body,"react-draggable-transparent-selection")}function uz(n){if(n)try{if(n.body&&aM(n.body,"react-draggable-transparent-selection"),n.selection)n.selection.empty();else{const e=(n.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function oM(n,e){n.classList?n.classList.add(e):n.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(n.className+=" ".concat(e))}function aM(n,e){n.classList?n.classList.remove(e):n.className=n.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var ti={};Object.defineProperty(ti,"__esModule",{value:!0});ti.canDragX=fz;ti.canDragY=pz;ti.createCoreData=mz;ti.createDraggableData=yz;ti.getBoundPosition=hz;ti.getControlPosition=gz;ti.snapToGrid=dz;var vn=ei,qa=Ue;function hz(n,e,t){if(!n.props.bounds)return[e,t];let{bounds:r}=n.props;r=typeof r=="string"?r:vz(r);const i=nb(n);if(typeof r=="string"){const{ownerDocument:s}=i,o=s.defaultView;let a;if(r==="parent"?a=i.parentNode:a=s.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const l=a,c=o.getComputedStyle(i),u=o.getComputedStyle(l);r={left:-i.offsetLeft+(0,vn.int)(u.paddingLeft)+(0,vn.int)(c.marginLeft),top:-i.offsetTop+(0,vn.int)(u.paddingTop)+(0,vn.int)(c.marginTop),right:(0,qa.innerWidth)(l)-(0,qa.outerWidth)(i)-i.offsetLeft+(0,vn.int)(u.paddingRight)-(0,vn.int)(c.marginRight),bottom:(0,qa.innerHeight)(l)-(0,qa.outerHeight)(i)-i.offsetTop+(0,vn.int)(u.paddingBottom)-(0,vn.int)(c.marginBottom)}}return(0,vn.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,vn.isNum)(r.bottom)&&(t=Math.min(t,r.bottom)),(0,vn.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,vn.isNum)(r.top)&&(t=Math.max(t,r.top)),[e,t]}function dz(n,e,t){const r=Math.round(e/n[0])*n[0],i=Math.round(t/n[1])*n[1];return[r,i]}function fz(n){return n.props.axis==="both"||n.props.axis==="x"}function pz(n){return n.props.axis==="both"||n.props.axis==="y"}function gz(n,e,t){const r=typeof e=="number"?(0,qa.getTouch)(n,e):null;if(typeof e=="number"&&!r)return null;const i=nb(t),s=t.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,qa.offsetXYFromParent)(r||n,s,t.props.scale)}function mz(n,e,t){const r=!(0,vn.isNum)(n.lastX),i=nb(n);return r?{node:i,deltaX:0,deltaY:0,lastX:e,lastY:t,x:e,y:t}:{node:i,deltaX:e-n.lastX,deltaY:t-n.lastY,lastX:n.lastX,lastY:n.lastY,x:e,y:t}}function yz(n,e){const t=n.props.scale;return{node:e.node,x:n.state.x+e.deltaX/t,y:n.state.y+e.deltaY/t,deltaX:e.deltaX/t,deltaY:e.deltaY/t,lastX:n.state.x,lastY:n.state.y}}function vz(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}}function nb(n){const e=n.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var dg={},fg={};Object.defineProperty(fg,"__esModule",{value:!0});fg.default=wz;function wz(){}Object.defineProperty(dg,"__esModule",{value:!0});dg.default=void 0;var Dm=xz(k),Qt=rb(eM),bz=rb(ji),At=Ue,Ki=ti,Nm=ei,gc=rb(fg);function rb(n){return n&&n.__esModule?n:{default:n}}function lM(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(lM=function(r){return r?t:e})(n)}function xz(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=lM(e);if(t&&t.has(n))return t.get(n);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var o=i?Object.getOwnPropertyDescriptor(n,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=n[s]}return r.default=n,t&&t.set(n,r),r}function Ft(n,e,t){return e=Sz(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Sz(n){var e=Cz(n,"string");return typeof e=="symbol"?e:String(e)}function Cz(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const sr={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Xi=sr.mouse,pg=class extends Dm.Component{constructor(){super(...arguments),Ft(this,"dragging",!1),Ft(this,"lastX",NaN),Ft(this,"lastY",NaN),Ft(this,"touchIdentifier",null),Ft(this,"mounted",!1),Ft(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=t;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,At.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,At.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;e.type==="touchstart"&&e.preventDefault();const i=(0,At.getTouchIdentifier)(e);this.touchIdentifier=i;const s=(0,Ki.getControlPosition)(e,i,this);if(s==null)return;const{x:o,y:a}=s,l=(0,Ki.createCoreData)(this,o,a);(0,gc.default)("DraggableCore: handleDragStart: %j",l),(0,gc.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,At.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,At.addEvent)(r,Xi.move,this.handleDrag),(0,At.addEvent)(r,Xi.stop,this.handleDragStop))}),Ft(this,"handleDrag",e=>{const t=(0,Ki.getControlPosition)(e,this.touchIdentifier,this);if(t==null)return;let{x:r,y:i}=t;if(Array.isArray(this.props.grid)){let a=r-this.lastX,l=i-this.lastY;if([a,l]=(0,Ki.snapToGrid)(this.props.grid,a,l),!a&&!l)return;r=this.lastX+a,i=this.lastY+l}const s=(0,Ki.createCoreData)(this,r,i);if((0,gc.default)("DraggableCore: handleDrag: %j",s),this.props.onDrag(e,s)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=r,this.lastY=i}),Ft(this,"handleDragStop",e=>{if(!this.dragging)return;const t=(0,Ki.getControlPosition)(e,this.touchIdentifier,this);if(t==null)return;let{x:r,y:i}=t;if(Array.isArray(this.props.grid)){let l=r-this.lastX||0,c=i-this.lastY||0;[l,c]=(0,Ki.snapToGrid)(this.props.grid,l,c),r=this.lastX+l,i=this.lastY+c}const s=(0,Ki.createCoreData)(this,r,i);if(this.props.onStop(e,s)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,At.removeUserSelectStyles)(a.ownerDocument),(0,gc.default)("DraggableCore: handleDragStop: %j",s),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,gc.default)("DraggableCore: Removing handlers"),(0,At.removeEvent)(a.ownerDocument,Xi.move,this.handleDrag),(0,At.removeEvent)(a.ownerDocument,Xi.stop,this.handleDragStop))}),Ft(this,"onMouseDown",e=>(Xi=sr.mouse,this.handleDragStart(e))),Ft(this,"onMouseUp",e=>(Xi=sr.mouse,this.handleDragStop(e))),Ft(this,"onTouchStart",e=>(Xi=sr.touch,this.handleDragStart(e))),Ft(this,"onTouchEnd",e=>(Xi=sr.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,At.addEvent)(e,sr.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,At.removeEvent)(t,sr.mouse.move,this.handleDrag),(0,At.removeEvent)(t,sr.touch.move,this.handleDrag),(0,At.removeEvent)(t,sr.mouse.stop,this.handleDragStop),(0,At.removeEvent)(t,sr.touch.stop,this.handleDragStop),(0,At.removeEvent)(e,sr.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,At.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(t=this.props)===null||t===void 0||(t=t.nodeRef)===null||t===void 0?void 0:t.current:bz.default.findDOMNode(this)}render(){return Dm.cloneElement(Dm.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};dg.default=pg;Ft(pg,"displayName","DraggableCore");Ft(pg,"propTypes",{allowAnyClick:Qt.default.bool,children:Qt.default.node.isRequired,disabled:Qt.default.bool,enableUserSelectHack:Qt.default.bool,offsetParent:function(n,e){if(n[e]&&n[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Qt.default.arrayOf(Qt.default.number),handle:Qt.default.string,cancel:Qt.default.string,nodeRef:Qt.default.object,onStart:Qt.default.func,onDrag:Qt.default.func,onStop:Qt.default.func,onMouseDown:Qt.default.func,scale:Qt.default.number,className:Nm.dontSetMe,style:Nm.dontSetMe,transform:Nm.dontSetMe});Ft(pg,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),n.default=void 0;var e=d(k),t=u(eM),r=u(ji),i=u($B),s=Ue,o=ti,a=ei,l=u(dg),c=u(fg);function u(v){return v&&v.__esModule?v:{default:v}}function h(v){if(typeof WeakMap!="function")return null;var w=new WeakMap,x=new WeakMap;return(h=function(S){return S?x:w})(v)}function d(v,w){if(v&&v.__esModule)return v;if(v===null||typeof v!="object"&&typeof v!="function")return{default:v};var x=h(w);if(x&&x.has(v))return x.get(v);var S={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in v)if(T!=="default"&&Object.prototype.hasOwnProperty.call(v,T)){var _=C?Object.getOwnPropertyDescriptor(v,T):null;_&&(_.get||_.set)?Object.defineProperty(S,T,_):S[T]=v[T]}return S.default=v,x&&x.set(v,S),S}function f(){return f=Object.assign?Object.assign.bind():function(v){for(var w=1;w<arguments.length;w++){var x=arguments[w];for(var S in x)Object.prototype.hasOwnProperty.call(x,S)&&(v[S]=x[S])}return v},f.apply(this,arguments)}function p(v,w,x){return w=g(w),w in v?Object.defineProperty(v,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[w]=x,v}function g(v){var w=m(v,"string");return typeof w=="symbol"?w:String(w)}function m(v,w){if(typeof v!="object"||v===null)return v;var x=v[Symbol.toPrimitive];if(x!==void 0){var S=x.call(v,w||"default");if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(v)}class y extends e.Component{static getDerivedStateFromProps(w,x){let{position:S}=w,{prevPropsPosition:C}=x;return S&&(!C||S.x!==C.x||S.y!==C.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:S,prevPropsPosition:C}),{x:S.x,y:S.y,prevPropsPosition:{...S}}):null}constructor(w){super(w),p(this,"onDragStart",(x,S)=>{if((0,c.default)("Draggable: onDragStart: %j",S),this.props.onStart(x,(0,o.createDraggableData)(this,S))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(x,S)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",S);const C=(0,o.createDraggableData)(this,S),T={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:M,y:P}=T;T.x+=this.state.slackX,T.y+=this.state.slackY;const[$,N]=(0,o.getBoundPosition)(this,T.x,T.y);T.x=$,T.y=N,T.slackX=this.state.slackX+(M-T.x),T.slackY=this.state.slackY+(P-T.y),C.x=T.x,C.y=T.y,C.deltaX=T.x-this.state.x,C.deltaY=T.y-this.state.y}if(this.props.onDrag(x,C)===!1)return!1;this.setState(T)}),p(this,"onDragStop",(x,S)=>{if(!this.state.dragging||this.props.onStop(x,(0,o.createDraggableData)(this,S))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",S);const T={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:M,y:P}=this.props.position;T.x=M,T.y=P}this.setState(T)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var w,x;return(w=(x=this.props)===null||x===void 0||(x=x.nodeRef)===null||x===void 0?void 0:x.current)!==null&&w!==void 0?w:r.default.findDOMNode(this)}render(){const{axis:w,bounds:x,children:S,defaultPosition:C,defaultClassName:T,defaultClassNameDragging:_,defaultClassNameDragged:M,position:P,positionOffset:$,scale:N,...H}=this.props;let D={},V=null;const G=!!!P||this.state.dragging,R=P||C,I={x:(0,o.canDragX)(this)&&G?this.state.x:R.x,y:(0,o.canDragY)(this)&&G?this.state.y:R.y};this.state.isElementSVG?V=(0,s.createSVGTransform)(I,$):D=(0,s.createCSSTransform)(I,$);const z=(0,i.default)(S.props.className||"",T,{[_]:this.state.dragging,[M]:this.state.dragged});return e.createElement(l.default,f({},H,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(S),{className:z,style:{...S.props.style,...D},transform:V}))}}n.default=y,p(y,"displayName","Draggable"),p(y,"propTypes",{...l.default.propTypes,axis:t.default.oneOf(["both","x","y","none"]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(y,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(XO);const{default:cM,DraggableCore:kz}=XO;hg.exports=cM;hg.exports.default=cM;hg.exports.DraggableCore=kz;var Tz=hg.exports;const _z=Ip(Tz);var Je=function(){return Je=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Je.apply(this,arguments)},p1={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},g1={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},Wh={width:"20px",height:"20px",position:"absolute",zIndex:1},Ez={top:Je(Je({},p1),{top:"-5px"}),right:Je(Je({},g1),{left:void 0,right:"-5px"}),bottom:Je(Je({},p1),{top:void 0,bottom:"-5px"}),left:Je(Je({},g1),{left:"-5px"}),topRight:Je(Je({},Wh),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Je(Je({},Wh),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Je(Je({},Wh),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Je(Je({},Wh),{left:"-10px",top:"-10px",cursor:"nw-resize"})},Oz=k.memo(function(n){var e=n.onResizeStart,t=n.direction,r=n.children,i=n.replaceStyles,s=n.className,o=k.useCallback(function(c){e(c,t)},[e,t]),a=k.useCallback(function(c){e(c,t)},[e,t]),l=k.useMemo(function(){return Je(Je({position:"absolute",userSelect:"none"},Ez[t]),i??{})},[i,t]);return b.jsx("div",{className:s||void 0,style:l,onMouseDown:o,onTouchStart:a,children:r})}),Mz=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rr=function(){return Rr=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Rr.apply(this,arguments)},Az={width:"auto",height:"auto"},Bh=function(n,e,t){return Math.max(Math.min(n,t),e)},m1=function(n,e,t){var r=Math.round(n/e);return r*e+t*(r-1)},ma=function(n,e){return new RegExp(n,"i").test(e)},zh=function(n){return!!(n.touches&&n.touches.length)},Rz=function(n){return!!((n.clientX||n.clientX===0)&&(n.clientY||n.clientY===0))},y1=function(n,e,t){t===void 0&&(t=0);var r=e.reduce(function(s,o,a){return Math.abs(o-n)<Math.abs(e[s]-n)?a:s},0),i=Math.abs(e[r]-n);return t===0||i<t?e[r]:n},Im=function(n){return n=n.toString(),n==="auto"||n.endsWith("px")||n.endsWith("%")||n.endsWith("vh")||n.endsWith("vw")||n.endsWith("vmax")||n.endsWith("vmin")?n:"".concat(n,"px")},$h=function(n,e,t,r){if(n&&typeof n=="string"){if(n.endsWith("px"))return Number(n.replace("px",""));if(n.endsWith("%")){var i=Number(n.replace("%",""))/100;return e*i}if(n.endsWith("vw")){var i=Number(n.replace("vw",""))/100;return t*i}if(n.endsWith("vh")){var i=Number(n.replace("vh",""))/100;return r*i}}return n},Pz=function(n,e,t,r,i,s,o){return r=$h(r,n.width,e,t),i=$h(i,n.height,e,t),s=$h(s,n.width,e,t),o=$h(o,n.height,e,t),{maxWidth:typeof r>"u"?void 0:Number(r),maxHeight:typeof i>"u"?void 0:Number(i),minWidth:typeof s>"u"?void 0:Number(s),minHeight:typeof o>"u"?void 0:Number(o)}},Dz=function(n){return Array.isArray(n)?n:[n,n]},Nz=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],v1="__resizable_base__",Iz=function(n){Mz(e,n);function e(t){var r,i,s,o,a=n.call(this,t)||this;return a.ratio=1,a.resizable=null,a.parentLeft=0,a.parentTop=0,a.resizableLeft=0,a.resizableRight=0,a.resizableTop=0,a.resizableBottom=0,a.targetLeft=0,a.targetTop=0,a.delta={width:0,height:0},a.appendBase=function(){if(!a.resizable||!a.window)return null;var l=a.parentNode;if(!l)return null;var c=a.window.document.createElement("div");return c.style.width="100%",c.style.height="100%",c.style.position="absolute",c.style.transform="scale(0, 0)",c.style.left="0",c.style.flex="0 0 100%",c.classList?c.classList.add(v1):c.className+=v1,l.appendChild(c),c},a.removeBase=function(l){var c=a.parentNode;c&&c.removeChild(l)},a.state={isResizing:!1,width:(i=(r=a.propsSize)===null||r===void 0?void 0:r.width)!==null&&i!==void 0?i:"auto",height:(o=(s=a.propsSize)===null||s===void 0?void 0:s.height)!==null&&o!==void 0?o:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),a}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||Az},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var t=0,r=0;if(this.resizable&&this.window){var i=this.resizable.offsetWidth,s=this.resizable.offsetHeight,o=this.resizable.style.position;o!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:i,r=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:s,this.resizable.style.position=o}return{width:t,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var t=this,r=this.props.size,i=function(a){var l;if(typeof t.state[a]>"u"||t.state[a]==="auto")return"auto";if(t.propsSize&&t.propsSize[a]&&(!((l=t.propsSize[a])===null||l===void 0)&&l.toString().endsWith("%"))){if(t.state[a].toString().endsWith("%"))return t.state[a].toString();var c=t.getParentSize(),u=Number(t.state[a].toString().replace("px","")),h=u/c[a]*100;return"".concat(h,"%")}return Im(t.state[a])},s=r&&typeof r.width<"u"&&!this.state.isResizing?Im(r.width):i("width"),o=r&&typeof r.height<"u"&&!this.state.isResizing?Im(r.height):i("height");return{width:s,height:o}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var r=!1,i=this.parentNode.style.flexWrap;i!=="wrap"&&(r=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var s={width:t.offsetWidth,height:t.offsetHeight};return r&&(this.parentNode.style.flexWrap=i),this.removeBase(t),s},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(t,r){var i=this.propsSize&&this.propsSize[r];return this.state[r]==="auto"&&this.state.original[r]===t&&(typeof i>"u"||i==="auto")?"auto":t},e.prototype.calculateNewMaxFromBoundary=function(t,r){var i=this.props.boundsByDirection,s=this.state.direction,o=i&&ma("left",s),a=i&&ma("top",s),l,c;if(this.props.bounds==="parent"){var u=this.parentNode;u&&(l=o?this.resizableRight-this.parentLeft:u.offsetWidth+(this.parentLeft-this.resizableLeft),c=a?this.resizableBottom-this.parentTop:u.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(l=o?this.resizableRight:this.window.innerWidth-this.resizableLeft,c=a?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(l=o?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),c=a?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return l&&Number.isFinite(l)&&(t=t&&t<l?t:l),c&&Number.isFinite(c)&&(r=r&&r<c?r:c),{maxWidth:t,maxHeight:r}},e.prototype.calculateNewSizeFromDirection=function(t,r){var i=this.props.scale||1,s=Dz(this.props.resizeRatio||1),o=s[0],a=s[1],l=this.state,c=l.direction,u=l.original,h=this.props,d=h.lockAspectRatio,f=h.lockAspectRatioExtraHeight,p=h.lockAspectRatioExtraWidth,g=u.width,m=u.height,y=f||0,v=p||0;return ma("right",c)&&(g=u.width+(t-u.x)*o/i,d&&(m=(g-v)/this.ratio+y)),ma("left",c)&&(g=u.width-(t-u.x)*o/i,d&&(m=(g-v)/this.ratio+y)),ma("bottom",c)&&(m=u.height+(r-u.y)*a/i,d&&(g=(m-y)*this.ratio+v)),ma("top",c)&&(m=u.height-(r-u.y)*a/i,d&&(g=(m-y)*this.ratio+v)),{newWidth:g,newHeight:m}},e.prototype.calculateNewSizeFromAspectRatio=function(t,r,i,s){var o=this.props,a=o.lockAspectRatio,l=o.lockAspectRatioExtraHeight,c=o.lockAspectRatioExtraWidth,u=typeof s.width>"u"?10:s.width,h=typeof i.width>"u"||i.width<0?t:i.width,d=typeof s.height>"u"?10:s.height,f=typeof i.height>"u"||i.height<0?r:i.height,p=l||0,g=c||0;if(a){var m=(d-p)*this.ratio+g,y=(f-p)*this.ratio+g,v=(u-g)/this.ratio+p,w=(h-g)/this.ratio+p,x=Math.max(u,m),S=Math.min(h,y),C=Math.max(d,v),T=Math.min(f,w);t=Bh(t,x,S),r=Bh(r,C,T)}else t=Bh(t,u,h),r=Bh(r,d,f);return{newWidth:t,newHeight:r}},e.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds==="parent"){var r=this.parentNode;if(r){var i=r.getBoundingClientRect();this.parentLeft=i.left*t,this.parentTop=i.top*t}}if(this.props.bounds&&typeof this.props.bounds!="string"){var s=this.props.bounds.getBoundingClientRect();this.targetLeft=s.left*t,this.targetTop=s.top*t}if(this.resizable){var o=this.resizable.getBoundingClientRect(),a=o.left,l=o.top,c=o.right,u=o.bottom;this.resizableLeft=a*t,this.resizableRight=c*t,this.resizableTop=l*t,this.resizableBottom=u*t}},e.prototype.onResizeStart=function(t,r){if(!(!this.resizable||!this.window)){var i=0,s=0;if(t.nativeEvent&&Rz(t.nativeEvent)?(i=t.nativeEvent.clientX,s=t.nativeEvent.clientY):t.nativeEvent&&zh(t.nativeEvent)&&(i=t.nativeEvent.touches[0].clientX,s=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var o=this.props.onResizeStart(t,r,this.resizable);if(o===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var a,l=this.window.getComputedStyle(this.resizable);if(l.flexBasis!=="auto"){var c=this.parentNode;if(c){var u=this.window.getComputedStyle(c).flexDirection;this.flexDir=u.startsWith("row")?"row":"column",a=l.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var h={original:{x:i,y:s,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Rr(Rr({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:r,flexBasis:a};this.setState(h)}},e.prototype.onMouseMove=function(t){var r=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&zh(t))try{t.preventDefault(),t.stopPropagation()}catch{}var i=this.props,s=i.maxWidth,o=i.maxHeight,a=i.minWidth,l=i.minHeight,c=zh(t)?t.touches[0].clientX:t.clientX,u=zh(t)?t.touches[0].clientY:t.clientY,h=this.state,d=h.direction,f=h.original,p=h.width,g=h.height,m=this.getParentSize(),y=Pz(m,this.window.innerWidth,this.window.innerHeight,s,o,a,l);s=y.maxWidth,o=y.maxHeight,a=y.minWidth,l=y.minHeight;var v=this.calculateNewSizeFromDirection(c,u),w=v.newHeight,x=v.newWidth,S=this.calculateNewMaxFromBoundary(s,o);this.props.snap&&this.props.snap.x&&(x=y1(x,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(w=y1(w,this.props.snap.y,this.props.snapGap));var C=this.calculateNewSizeFromAspectRatio(x,w,{width:S.maxWidth,height:S.maxHeight},{width:a,height:l});if(x=C.newWidth,w=C.newHeight,this.props.grid){var T=m1(x,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),_=m1(w,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),M=this.props.snapGap||0,P=M===0||Math.abs(T-x)<=M?T:x,$=M===0||Math.abs(_-w)<=M?_:w;x=P,w=$}var N={width:x-f.width,height:w-f.height};if(this.delta=N,p&&typeof p=="string"){if(p.endsWith("%")){var H=x/m.width*100;x="".concat(H,"%")}else if(p.endsWith("vw")){var D=x/this.window.innerWidth*100;x="".concat(D,"vw")}else if(p.endsWith("vh")){var V=x/this.window.innerHeight*100;x="".concat(V,"vh")}}if(g&&typeof g=="string"){if(g.endsWith("%")){var H=w/m.height*100;w="".concat(H,"%")}else if(g.endsWith("vw")){var D=w/this.window.innerWidth*100;w="".concat(D,"vw")}else if(g.endsWith("vh")){var V=w/this.window.innerHeight*100;w="".concat(V,"vh")}}var U={width:this.createSizeForCssProperty(x,"width"),height:this.createSizeForCssProperty(w,"height")};this.flexDir==="row"?U.flexBasis=U.width:this.flexDir==="column"&&(U.flexBasis=U.height);var G=this.state.width!==U.width,R=this.state.height!==U.height,I=this.state.flexBasis!==U.flexBasis,z=G||R||I;z&&ji.flushSync(function(){r.setState(U)}),this.props.onResize&&z&&this.props.onResize(t,d,this.resizable,N)}},e.prototype.onMouseUp=function(t){var r,i,s=this.state,o=s.isResizing,a=s.direction;s.original,!(!o||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(t,a,this.resizable,this.delta),this.props.size&&this.setState({width:(r=this.props.size.width)!==null&&r!==void 0?r:"auto",height:(i=this.props.size.height)!==null&&i!==void 0?i:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Rr(Rr({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(t){var r,i;this.setState({width:(r=t.width)!==null&&r!==void 0?r:"auto",height:(i=t.height)!==null&&i!==void 0?i:"auto"})},e.prototype.renderResizer=function(){var t=this,r=this.props,i=r.enable,s=r.handleStyles,o=r.handleClasses,a=r.handleWrapperStyle,l=r.handleWrapperClass,c=r.handleComponent;if(!i)return null;var u=Object.keys(i).map(function(h){return i[h]!==!1?b.jsx(Oz,{direction:h,onResizeStart:t.onResizeStart,replaceStyles:s&&s[h],className:o&&o[h],children:c&&c[h]?c[h]:null},h):null});return b.jsx("div",{className:l,style:a,children:u})},e.prototype.render=function(){var t=this,r=Object.keys(this.props).reduce(function(o,a){return Nz.indexOf(a)!==-1||(o[a]=t.props[a]),o},{}),i=Rr(Rr(Rr({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(i.flexBasis=this.state.flexBasis);var s=this.props.as||"div";return b.jsxs(s,Rr({style:i,className:this.props.className},r,{ref:function(o){o&&(t.resizable=o)},children:[this.state.isResizing&&b.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(k.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var W0=function(n,e){return W0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},W0(n,e)};function jz(n,e){W0(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var st=function(){return st=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},st.apply(this,arguments)};function Lz(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}var Fz={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},Wz=function(n){return{bottom:n,bottomLeft:n,bottomRight:n,left:n,right:n,top:n,topLeft:n,topRight:n}},Bz=function(n){jz(e,n);function e(t){var r=n.call(this,t)||this;return r.resizingPosition={x:0,y:0},r.offsetFromParent={left:0,top:0},r.resizableElement={current:null},r.originalPosition={x:0,y:0},r.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},r.onResizeStart=r.onResizeStart.bind(r),r.onResize=r.onResize.bind(r),r.onResizeStop=r.onResizeStop.bind(r),r.onDragStart=r.onDragStart.bind(r),r.onDrag=r.onDrag.bind(r),r.onDragStop=r.onDragStop.bind(r),r.getMaxSizesFromProps=r.getMaxSizesFromProps.bind(r),r}return e.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,r=t.left,i=t.top,s=this.getDraggablePosition(),o=s.x,a=s.y;this.draggable.setState({x:o-r,y:a-i}),this.forceUpdate()},e.prototype.getDraggablePosition=function(){var t=this.draggable.state,r=t.x,i=t.y;return{x:r,y:i}},e.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},e.prototype.getParentSize=function(){return this.resizable.getParentSize()},e.prototype.getMaxSizesFromProps=function(){var t=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,r=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:t,maxHeight:r}},e.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},e.prototype.getOffsetHeight=function(t){var r=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/r;case"body":return document.body.offsetHeight/r;default:return t.offsetHeight}},e.prototype.getOffsetWidth=function(t){var r=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/r;case"body":return document.body.offsetWidth/r;default:return t.offsetWidth}},e.prototype.onDragStart=function(t,r){this.props.onDragStart&&this.props.onDragStart(t,r);var i=this.getDraggablePosition();if(this.originalPosition=i,!!this.props.bounds){var s=this.getParent(),o=this.props.scale,a;if(this.props.bounds==="parent")a=s;else if(this.props.bounds==="body"){var l=s.getBoundingClientRect(),c=l.left,u=l.top,h=document.body.getBoundingClientRect(),d=-(c-s.offsetLeft*o-h.left)/o,f=-(u-s.offsetTop*o-h.top)/o,p=(document.body.offsetWidth-this.resizable.size.width*o)/o+d,g=(document.body.offsetHeight-this.resizable.size.height*o)/o+f;return this.setState({bounds:{top:f,right:p,bottom:g,left:d}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var m=s.getBoundingClientRect(),y=m.left,v=m.top,w=-(y-s.offsetLeft*o)/o,x=-(v-s.offsetTop*o)/o,p=(window.innerWidth-this.resizable.size.width*o)/o+w,g=(window.innerHeight-this.resizable.size.height*o)/o+x;return this.setState({bounds:{top:x,right:p,bottom:g,left:w}})}else typeof this.props.bounds=="string"?a=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(a=this.props.bounds);if(!(!(a instanceof HTMLElement)||!(s instanceof HTMLElement))){var S=a.getBoundingClientRect(),C=S.left,T=S.top,_=s.getBoundingClientRect(),M=_.left,P=_.top,$=(C-M)/o,N=T-P;if(this.resizable){this.updateOffsetFromParent();var H=this.offsetFromParent;this.setState({bounds:{top:N-H.top,right:$+(a.offsetWidth-this.resizable.size.width)-H.left/o,bottom:N+(a.offsetHeight-this.resizable.size.height)-H.top,left:$-H.left/o}})}}}},e.prototype.onDrag=function(t,r){if(this.props.onDrag){var i=this.offsetFromParent,s=i.left,o=i.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(t,st(st({},r),{x:r.x+s,y:r.y+o}));if(this.props.dragAxis==="x")return this.props.onDrag(t,st(st({},r),{x:r.x+s,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(t,st(st({},r),{x:this.originalPosition.x+s,y:r.y+o,deltaX:0}))}},e.prototype.onDragStop=function(t,r){if(this.props.onDragStop){var i=this.offsetFromParent,s=i.left,o=i.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(t,st(st({},r),{x:r.x+s,y:r.y+o}));if(this.props.dragAxis==="x")return this.props.onDragStop(t,st(st({},r),{x:r.x+s,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(t,st(st({},r),{x:this.originalPosition.x+s,y:r.y+o,deltaX:0}))}},e.prototype.onResizeStart=function(t,r,i){t.stopPropagation(),this.setState({resizing:!0});var s=this.props.scale,o=this.offsetFromParent,a=this.getDraggablePosition();if(this.resizingPosition={x:a.x+o.left,y:a.y+o.top},this.originalPosition=a,this.props.bounds){var l=this.getParent(),c=void 0;this.props.bounds==="parent"?c=l:this.props.bounds==="body"?c=document.body:this.props.bounds==="window"?c=window:typeof this.props.bounds=="string"?c=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(c=this.props.bounds);var u=this.getSelfElement();if(u instanceof Element&&(c instanceof HTMLElement||c===window)&&l instanceof HTMLElement){var h=this.getMaxSizesFromProps(),d=h.maxWidth,f=h.maxHeight,p=this.getParentSize();if(d&&typeof d=="string")if(d.endsWith("%")){var g=Number(d.replace("%",""))/100;d=p.width*g}else d.endsWith("px")&&(d=Number(d.replace("px","")));if(f&&typeof f=="string")if(f.endsWith("%")){var g=Number(f.replace("%",""))/100;f=p.height*g}else f.endsWith("px")&&(f=Number(f.replace("px","")));var m=u.getBoundingClientRect(),y=m.left,v=m.top,w=this.props.bounds==="window"?{left:0,top:0}:c.getBoundingClientRect(),x=w.left,S=w.top,C=this.getOffsetWidth(c),T=this.getOffsetHeight(c),_=r.toLowerCase().endsWith("left"),M=r.toLowerCase().endsWith("right"),P=r.startsWith("top"),$=r.startsWith("bottom");if((_||P)&&this.resizable){var N=(y-x)/s+this.resizable.size.width;this.setState({maxWidth:N>Number(d)?d:N})}if(M||this.props.lockAspectRatio&&!_&&!P){var N=C+(x-y)/s;this.setState({maxWidth:N>Number(d)?d:N})}if((P||_)&&this.resizable){var N=(v-S)/s+this.resizable.size.height;this.setState({maxHeight:N>Number(f)?f:N})}if($||this.props.lockAspectRatio&&!P&&!_){var N=T+(S-v)/s;this.setState({maxHeight:N>Number(f)?f:N})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(t,r,i)},e.prototype.onResize=function(t,r,i,s){var o=this,a={x:this.originalPosition.x,y:this.originalPosition.y},l=-s.width,c=-s.height,u=["top","left","topLeft","bottomLeft","topRight"];u.includes(r)&&(r==="bottomLeft"?a.x+=l:(r==="topRight"||(a.x+=l),a.y+=c));var h=this.draggable.state;(a.x!==h.x||a.y!==h.y)&&ji.flushSync(function(){o.draggable.setState(a)}),this.updateOffsetFromParent();var d=this.offsetFromParent,f=this.getDraggablePosition().x+d.left,p=this.getDraggablePosition().y+d.top;this.resizingPosition={x:f,y:p},this.props.onResize&&this.props.onResize(t,r,i,s,{x:f,y:p})},e.prototype.onResizeStop=function(t,r,i,s){this.setState({resizing:!1});var o=this.getMaxSizesFromProps(),a=o.maxWidth,l=o.maxHeight;this.setState({maxWidth:a,maxHeight:l}),this.props.onResizeStop&&this.props.onResizeStop(t,r,i,s,this.resizingPosition)},e.prototype.updateSize=function(t){this.resizable&&this.resizable.updateSize({width:t.width,height:t.height})},e.prototype.updatePosition=function(t){this.draggable.setState(t)},e.prototype.updateOffsetFromParent=function(){var t=this.props.scale,r=this.getParent(),i=this.getSelfElement();if(!r||i===null)return{top:0,left:0};var s=r.getBoundingClientRect(),o=s.left,a=s.top,l=i.getBoundingClientRect(),c=this.getDraggablePosition(),u=r.scrollLeft,h=r.scrollTop;this.offsetFromParent={left:l.left-o+u-c.x*t,top:l.top-a+h-c.y*t}},e.prototype.render=function(){var t=this,r=this.props,i=r.disableDragging,s=r.style,o=r.dragHandleClassName,a=r.position,l=r.onMouseDown,c=r.onMouseUp,u=r.dragAxis,h=r.dragGrid,d=r.bounds,f=r.enableUserSelectHack,p=r.cancel,g=r.children;r.onResizeStart,r.onResize,r.onResizeStop,r.onDragStart,r.onDrag,r.onDragStop;var m=r.resizeHandleStyles,y=r.resizeHandleClasses,v=r.resizeHandleComponent,w=r.enableResizing,x=r.resizeGrid,S=r.resizeHandleWrapperClass,C=r.resizeHandleWrapperStyle,T=r.scale,_=r.allowAnyClick,M=r.dragPositionOffset,P=Lz(r,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),$=this.props.default?st({},this.props.default):void 0;delete P.default;var N=i||o?{cursor:"auto"}:{cursor:"move"},H=st(st(st({},Fz),N),s),D=this.offsetFromParent,V=D.left,U=D.top,G;a&&(G={x:a.x-V,y:a.y-U});var R=this.state.resizing?void 0:G,I=this.state.resizing?"both":u;return k.createElement(_z,{ref:function(z){z&&(t.draggable=z)},handle:o?".".concat(o):void 0,defaultPosition:$,onMouseDown:l,onMouseUp:c,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:I,disabled:i,grid:h,bounds:d?this.state.bounds:void 0,position:R,enableUserSelectHack:f,cancel:p,scale:T,allowAnyClick:_,nodeRef:this.resizableElement,positionOffset:M},k.createElement(Iz,st({},P,{ref:function(z){z&&(t.resizable=z,t.resizableElement.current=z.resizable)},defaultSize:$,size:this.props.size,enable:typeof w=="boolean"?Wz(w):w,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:H,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:x,handleWrapperClass:S,handleWrapperStyle:C,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:m,handleClasses:y,handleComponent:v,scale:this.props.scale}),g))},e.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},e}(k.PureComponent);const Ji=({title:n,children:e,onClose:t,defaultPosition:r={x:100,y:100},width:i="w-96",height:s="h-auto",icon:o,zIndex:a=10,onFocus:l,isMinimized:c,onMinimize:u})=>{const[h,d]=k.useState(!1),[f,p]=k.useState(!1),g=c!==void 0?c:h;k.useEffect(()=>{const v=()=>{p(window.innerWidth<768)};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const m=()=>{const v=!g;u?u(v):d(v)};if(g)return null;const y=b.jsxs("div",{className:"win95-border bg-card flex flex-col shadow-lg h-full",children:[b.jsxs("div",{className:"window-title win95-title flex items-center justify-between px-1 py-1 cursor-move select-none",children:[b.jsxs("div",{className:"flex items-center gap-2 text-primary-foreground font-bold text-sm",children:[o&&b.jsx("span",{className:"text-base",children:o}),b.jsx("span",{children:n})]}),b.jsxs("div",{className:"flex gap-1",children:[b.jsx("button",{onClick:m,className:"win95-border bg-card hover:bg-muted w-5 h-5 flex items-center justify-center active:win95-border-inset",children:b.jsx(aj,{className:"w-3 h-3"})}),b.jsx("button",{className:"win95-border bg-card hover:bg-muted w-5 h-5 flex items-center justify-center active:win95-border-inset",children:b.jsx(fj,{className:"w-2.5 h-2.5"})}),b.jsx("button",{onClick:t,className:"win95-border bg-card hover:bg-muted w-5 h-5 flex items-center justify-center active:win95-border-inset",children:b.jsx(GE,{className:"w-3 h-3"})})]})]}),b.jsx("div",{className:"p-2 bg-card overflow-auto flex-1",children:e})]});return f?b.jsx("div",{className:"fixed top-0 left-0 right-0 bottom-10 m-2 animate-fade-in",style:{zIndex:a},onClick:l,children:y}):b.jsx(Bz,{default:{x:r.x,y:r.y,width:384,height:"auto"},minWidth:300,minHeight:200,bounds:"window",dragHandleClassName:"window-title",className:"animate-fade-in",style:{zIndex:a},onMouseDown:l,enableResizing:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},resizeHandleStyles:{bottomRight:{cursor:"nwse-resize",width:"20px",height:"20px",right:"0px",bottom:"0px"},bottom:{cursor:"ns-resize",height:"10px"},right:{cursor:"ew-resize",width:"10px"},top:{cursor:"ns-resize",height:"10px"},left:{cursor:"ew-resize",width:"10px"},topRight:{cursor:"nesw-resize",width:"20px",height:"20px"},topLeft:{cursor:"nwse-resize",width:"20px",height:"20px"},bottomLeft:{cursor:"nesw-resize",width:"20px",height:"20px"}},children:y})},ya=({icon:n,label:e,onClick:t})=>b.jsxs("button",{onClick:t,className:"flex flex-col items-center gap-1 p-2 hover:bg-primary/20 active:bg-primary/30 rounded group w-20",children:[b.jsx("div",{className:"text-4xl pixelated drop-shadow-lg",children:n}),b.jsx("span",{className:"text-xs text-white font-bold drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)] text-center leading-tight",children:e})]}),zz=({onStartClick:n,windows:e=[],onWindowClick:t})=>{const[r,i]=k.useState(new Date);return k.useEffect(()=>{const s=setInterval(()=>i(new Date),1e3);return()=>clearInterval(s)},[]),b.jsxs("div",{className:"fixed bottom-0 left-0 right-0 h-10 win95-border taskbar-gradient flex items-center justify-between px-2 z-50 shadow-lg",children:[b.jsxs("button",{onClick:n,className:"win95-border bg-gradient-to-br from-primary/20 to-accent/30 hover:from-primary/30 hover:to-accent/40 px-3 py-1 font-bold text-sm active:win95-border-inset flex items-center gap-2",children:[b.jsx(O0,{className:"w-4 h-4 text-primary"}),"Start"]}),b.jsx("div",{className:"flex-1 flex items-center gap-2 px-2 overflow-x-auto",children:e.map(s=>b.jsxs("button",{onClick:()=>t==null?void 0:t(s.id),className:"win95-border bg-card hover:bg-muted px-2 py-1 text-sm active:win95-border-inset flex items-center gap-2 min-w-[120px] max-w-[150px]",children:[b.jsx("span",{children:s.icon}),b.jsx("span",{className:"truncate",children:s.title})]},s.id))}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("a",{href:"https://open.spotify.com/user/12162592549?si=1248bae490c74683",target:"_blank",rel:"noopener noreferrer",className:"win95-border bg-card hover:bg-muted p-1 active:win95-border-inset",title:"Listen on Spotify",children:b.jsx(yj,{className:"w-4 h-4 text-primary"})}),b.jsx("div",{className:"win95-border-inset bg-muted/60 backdrop-blur-sm px-3 py-1 text-sm font-mono min-w-[100px] text-center",children:r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},$z=({isOpen:n,onClose:e,onOpenBlog:t,onOpenWindow:r})=>{const i=k.useRef(null);if(k.useEffect(()=>{const o=a=>{i.current&&!i.current.contains(a.target)&&e()};return n&&document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[n,e]),!n)return null;const s=[{name:"Software",icon:""},{name:"Research",icon:""},{name:"Community",icon:""},{name:"Activism",icon:""}];return b.jsxs("div",{ref:i,className:"fixed bottom-10 left-0 w-64 win95-border bg-card shadow-2xl z-50 animate-fade-in",children:[b.jsx("div",{className:"bg-gradient-to-r from-primary/30 to-accent/40 px-3 py-6 flex items-center gap-3 border-b-2 border-border",children:b.jsxs("div",{className:"text-sm font-bold",children:[b.jsx("div",{className:"text-primary",children:"Mari's website"}),b.jsx("div",{className:"text-xs text-muted-foreground",children:"v1.0"})]})}),b.jsxs("div",{className:"p-1",children:[b.jsxs("div",{className:"mb-1 relative group/programs",children:[b.jsxs("button",{className:"w-full px-3 py-1.5 flex items-center gap-2 hover:bg-primary/20 active:bg-primary/30 text-left text-sm",children:[b.jsx(_m,{className:"w-4 h-4"}),b.jsx("span",{className:"flex-1",children:"Programs"}),b.jsx(IS,{className:"w-3 h-3 text-muted-foreground"})]}),b.jsx("div",{className:"hidden group-hover/programs:block absolute left-full top-0 ml-1 w-48 win95-border bg-card shadow-2xl z-50",children:b.jsxs("div",{className:"p-1",children:[b.jsx(Zt,{icon:"",text:"Paint",onClick:()=>{r("paint"),e()}}),b.jsx(Zt,{icon:"",text:"Chat",onClick:()=>{r("chat"),e()}}),b.jsx(Zt,{icon:"",text:"Gallery",onClick:()=>{r("gallery"),e()}}),b.jsx(Zt,{icon:"",text:"Guestbook",onClick:()=>{r("guestbook"),e()}}),b.jsx(Zt,{icon:"",text:"Collaborative Dashboard",onClick:()=>{window.open("/dashboard","_blank"),e()},showArrow:!0})]})})]}),b.jsx("div",{className:"h-px bg-border my-1"}),b.jsxs("div",{className:"mb-1 relative group/blogs",children:[b.jsxs("button",{className:"w-full px-3 py-1.5 flex items-center gap-2 hover:bg-primary/20 active:bg-primary/30 text-left text-sm",children:[b.jsx(_m,{className:"w-4 h-4"}),b.jsx("span",{className:"flex-1",children:"Blogs"}),b.jsx(IS,{className:"w-3 h-3 text-muted-foreground"})]}),b.jsx("div",{className:"hidden group-hover/blogs:block absolute left-full top-0 ml-1 w-56 win95-border bg-card shadow-2xl z-50",children:b.jsxs("div",{className:"p-1",children:[b.jsx(Zt,{icon:"",text:"Do Cyborgs Dream of Bionic Sheep?",onClick:()=>{window.open("https://cyborgdream.github.io/","_blank"),e()},showArrow:!0}),b.jsx(Zt,{icon:"",text:"Medium",onClick:()=>{window.open("https://medium.com/@mari-meir","_blank"),e()},showArrow:!0}),b.jsx(Zt,{icon:"",text:"Tech for Good Research",onClick:()=>{window.open("https://techforgoodresearch.substack.com/","_blank"),e()},showArrow:!0}),b.jsx(Zt,{icon:"",text:"Wireless Hippie",onClick:()=>{window.open("https://wireless-hippie.neocities.org/","_blank"),e()},showArrow:!0}),b.jsx(Zt,{icon:"",text:"Letters for the Evanescents",onClick:()=>{window.open("https://lettersfortheevanescents.mataroa.blog/","_blank"),e()},showArrow:!0})]})})]}),b.jsx("div",{className:"h-px bg-border my-1"}),b.jsxs("div",{children:[b.jsxs("div",{className:"px-3 py-1 text-xs font-bold text-muted-foreground flex items-center gap-1",children:[b.jsx(_m,{className:"w-3 h-3"}),"My interests"]}),s.map(o=>b.jsx(Zt,{icon:o.icon,text:o.name,onClick:()=>{t(o.name),e()}},o.name)),b.jsx(Zt,{icon:"",text:"Reading List",onClick:()=>{window.open("/reading-list.html","_blank"),e()},showArrow:!0})]}),b.jsx("div",{className:"h-px bg-border my-1"}),b.jsx(Zt,{icon:"",text:"About",onClick:()=>{r("about"),e()}}),b.jsx(Zt,{icon:"",text:"Settings",onClick:()=>{window.open("https://github.com/marimeireles/psychonautgirl","_blank"),e()},showArrow:!0})]})]})},Zt=({icon:n,text:e,onClick:t,showArrow:r=!1})=>b.jsxs("button",{onClick:t,className:"w-full px-3 py-1.5 flex items-center gap-2 hover:bg-primary/20 active:bg-primary/30 text-left group text-sm",children:[b.jsx("span",{className:"text-base",children:n}),b.jsx("span",{className:`flex-1 ${r?"underline":""}`,children:e}),r&&b.jsx(JI,{className:"w-3 h-3 text-muted-foreground"})]});function E(n,e,t){return(e=function(r){var i=function(s,o){if(typeof s!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var l=a.call(s,o||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(s)}(r,"string");return typeof i=="symbol"?i:i+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function w1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function O(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?w1(Object(t),!0).forEach(function(r){E(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):w1(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ne(n,e){if(n==null)return{};var t,r,i=function(o,a){if(o==null)return{};var l={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(a.indexOf(c)>=0)continue;l[c]=o[c]}return l}(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function ni(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}class b1{constructor(){E(this,"browserShadowBlurConstant",1),E(this,"DPI",96),E(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),E(this,"perfLimitSizeTotal",2097152),E(this,"maxCacheSideLimit",4096),E(this,"minCacheSideLimit",256),E(this,"disableStyleCopyPaste",!1),E(this,"enableGLFiltering",!0),E(this,"textureSize",4096),E(this,"forceGLPutImageData",!1),E(this,"cachesBoundsOfCurve",!1),E(this,"fontPaths",{}),E(this,"NUM_FRACTION_DIGITS",4)}}const pe=new class extends b1{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=O(O({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new b1,t=(n==null?void 0:n.reduce((r,i)=>(r[i]=e[i],r),{}))||e;this.configure(t)}},qs=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[n]("fabric",...t)};let Hr=class extends Error{constructor(e,t){super("fabric: ".concat(e),t)}};class Hz extends Hr{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class Uz{}class Vz extends Uz{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),i=e.createShader(e.FRAGMENT_SHADER);return!!i&&(e.shaderSource(i,r),e.compileShader(i),!!e.getShaderParameter(i,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),t.getExtension("WEBGL_lose_context").loseContext(),qs("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const Gz={};let x1;const Xr=()=>x1||(x1={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new Vz,dispose(){},copyPasteData:Gz}),ql=()=>Xr().document,gg=()=>Xr().window,uM=()=>{var n;return Math.max((n=pe.devicePixelRatio)!==null&&n!==void 0?n:gg().devicePixelRatio,1)},zc=new class{constructor(){E(this,"charWidthsCache",{}),E(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:r}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const i=this.charWidthsCache[e],s="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return i[s]||(i[s]={}),i[s]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=pe,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},B0="6.7.1";function Ud(){}const th=Math.PI/2,Rf=2*Math.PI,ib=Math.PI/180,Gt=Object.freeze([1,0,0,1,0,0]),sb=16,Qi=.4477152502,ue="center",ye="left",hn="top",z0="bottom",qe="right",dn="none",ob=/\r?\n/,hM="moving",mg="scaling",dM="rotating",ab="rotate",fM="skewing",Eu="resizing",qz="modifyPoly",Yz="modifyPath",Pf="changed",yg="scale",gn="scaleX",Jn="scaleY",Yl="skewX",Kl="skewY",ht="fill",fn="stroke",Df="modified",va="json",jm="svg",Y=new class{constructor(){this[va]=new Map,this[jm]=new Map}has(n){return this[va].has(n)}getClass(n){const e=this[va].get(n);if(!e)throw new Hr("No class registered for ".concat(n));return e}setClass(n,e){e?this[va].set(e,n):(this[va].set(n.type,n),this[va].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[jm].get(n)}setSVGClass(n,e){this[jm].set(e??n.type.toLowerCase(),n)}},Nf=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var r;return t.target===n||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};class Kz{constructor(){E(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[i,s]=r;this.on(i,s)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(i=>{let[s,o]=i;r.push(this.once(s,o))}),()=>r.forEach(i=>i())}if(t){const r=this.on(e,function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];t.call(this,...s),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],i=r.indexOf(t);i>-1&&r.splice(i,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[i,s]=r;this._removeEventListener(i,s)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const i=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(i)for(let s=0;s<i.length;s++)i[s].call(this,t||{})}}const Oa=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},Ri=n=>{if(n===0)return 1;switch(Math.abs(n)/th){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},Pi=n=>{if(n===0)return 0;const e=n/th,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};class A{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new A(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new A(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new A(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new A(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new A(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new A(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new A(this.x/e.x,this.y/e.y)}scalarDivide(e){return new A(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new A(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new A(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new A(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new A(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lb;const r=Pi(e),i=Ri(e),s=this.subtract(t);return new A(s.x*i-s.y*r,s.x*r+s.y*i).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new A(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const lb=new A(0,0),Vd=n=>!!n&&Array.isArray(n._objects);function pM(n){class e extends n{constructor(){super(...arguments),E(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];const o=this._objects.push(...i);return i.forEach(a=>this._onObjectAdded(a)),o}insertAt(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return this._objects.splice(r,0,...s),s.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const r=this._objects,i=[];for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return o.forEach(l=>{const c=r.indexOf(l);c!==-1&&(r.splice(c,1),i.push(l),this._onObjectRemoved(l))}),i}forEachObject(r){this.getObjects().forEach((i,s,o)=>r(i,s,o))}getObjects(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...i))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,i){return!!this._objects.includes(r)||!!i&&this._objects.some(s=>s instanceof e&&s.contains(r,!0))}complexity(){return this._objects.reduce((r,i)=>r+=i.complexity?i.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(Oa(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(Oa(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,i){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==0){const o=this.findNewLowerIndex(r,s,i);return Oa(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,i){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==this._objects.length-1){const o=this.findNewUpperIndex(r,s,i);return Oa(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,i){return r!==this._objects[i]&&(Oa(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,i,s){let o;if(s){o=i;for(let a=i-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=i-1;return o}findNewUpperIndex(r,i,s){let o;if(s){o=i;for(let a=i+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=i+1;return o}collectObjects(r){let{left:i,top:s,width:o,height:a}=r,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=[],u=new A(i,s),h=u.add(new A(o,a));for(let d=this._objects.length-1;d>=0;d--){const f=this._objects[d];f.selectable&&f.visible&&(l&&f.intersectsWithRect(u,h)||f.isContainedWithinRect(u,h)||l&&f.containsPoint(u)||l&&f.containsPoint(h))&&c.push(f)}return c}}return e}class gM extends Kz{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function Gd(n){return gg().requestAnimationFrame(n)}function Xz(n){return gg().cancelAnimationFrame(n)}let Jz=0;const Ys=()=>Jz++,Di=()=>{const n=ql().createElement("canvas");if(!n||n.getContext===void 0)throw new Hr("Failed to create `canvas` element");return n},Qz=()=>ql().createElement("img"),Qn=n=>{const e=Di();return e.width=n.width,e.height=n.height,e},mM=(n,e,t)=>n.toDataURL("image/".concat(e),t),yM=(n,e,t)=>new Promise((r,i)=>{n.toBlob(r,"image/".concat(e),t)}),Ke=n=>n*ib,Ni=n=>n/ib,Zz=n=>n.every((e,t)=>e===Gt[t]),nn=(n,e,t)=>new A(n).transform(e,t),wr=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:r,y:i}=new A(n[4],n[5]).transform(t,!0);return t[4]=-r,t[5]=-i,t},Ct=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],cb=(n,e)=>n.reduceRight((t,r)=>r&&t?Ct(r,t,e):r||t,void 0)||Gt.concat(),vM=n=>{let[e,t]=n;return Math.atan2(t,e)},If=n=>{const e=vM(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(t),i=(n[0]*n[3]-n[2]*n[1])/r,s=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:Ni(e),scaleX:r,scaleY:i,skewX:Ni(s),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},nh=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Xl(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Ke(n),i=Ri(r),s=Pi(r);return[i,s,-s,i,e?e-(i*e-s*t):0,t?t-(s*e+i*t):0]}const ub=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},wM=n=>Math.tan(Ke(n)),bM=n=>[1,0,wM(n),1,0,0],xM=n=>[1,wM(n),0,1,0,0],vg=n=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:i=!1,skewX:s=0,skewY:o=0}=n,a=ub(r?-e:e,i?-t:t);return s&&(a=Ct(a,bM(s),!0)),o&&(a=Ct(a,xM(o),!0)),a},e5=n=>{const{translateX:e=0,translateY:t=0,angle:r=0}=n;let i=nh(e,t);r&&(i=Ct(i,Xl({angle:r})));const s=vg(n);return Zz(s)||(i=Ct(i,s)),i},qd=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,i){if(e&&e.aborted)return i(new Hz("loadImage"));const s=Qz();let o;e&&(o=function(l){s.src="",i(l)},e.addEventListener("abort",o,{once:!0}));const a=function(){s.onload=s.onerror=null,o&&(e==null||e.removeEventListener("abort",o)),r(s)};n?(s.onload=a,s.onerror=function(){o&&(e==null||e.removeEventListener("abort",o)),i(new Hr("Error loading ".concat(s.src)))},t&&(s.crossOrigin=t),s.src=n):a()})},Ou=function(n){let{signal:e,reviver:t=Ud}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,i)=>{const s=[];e&&e.addEventListener("abort",i,{once:!0}),Promise.all(n.map(o=>Y.getClass(o.type).fromObject(o,{signal:e}).then(a=>(t(o,a),s.push(a),a)))).then(r).catch(o=>{s.forEach(a=>{a.dispose&&a.dispose()}),i(o)}).finally(()=>{e&&e.removeEventListener("abort",i)})})},wg=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const i=[];e&&e.addEventListener("abort",r,{once:!0});const s=Object.values(n).map(a=>a&&a.type&&Y.has(a.type)?Ou([a],{signal:e}).then(l=>{let[c]=l;return i.push(c),c}):a),o=Object.keys(n);Promise.all(s).then(a=>a.reduce((l,c,u)=>(l[o[u]]=c,l),{})).then(t).catch(a=>{i.forEach(l=>{l.dispose&&l.dispose()}),r(a)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},Jl=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},hb=(n,e)=>Object.keys(n).reduce((t,r)=>(e(n[r],r,n)&&(t[r]=n[r]),t),{}),ke=(n,e)=>parseFloat(Number(n).toFixed(e)),Mu=n=>"matrix("+n.map(e=>ke(e,pe.NUM_FRACTION_DIGITS)).join(" ")+")",zn=n=>!!n&&n.toLive!==void 0,S1=n=>!!n&&typeof n.toObject=="function",C1=n=>!!n&&n.offsetX!==void 0&&"source"in n,fo=n=>!!n&&"multiSelectionStacking"in n;function SM(n){const e=n&&mr(n);let t=0,r=0;if(!n||!e)return{left:t,top:r};let i=n;const s=e.documentElement,o=e.body||{scrollLeft:0,scrollTop:0};for(;i&&(i.parentNode||i.host)&&(i=i.parentNode||i.host,i===e?(t=o.scrollLeft||s.scrollLeft||0,r=o.scrollTop||s.scrollTop||0):(t+=i.scrollLeft||0,r+=i.scrollTop||0),i.nodeType!==1||i.style.position!=="fixed"););return{left:t,top:r}}const mr=n=>n.ownerDocument||null,CM=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},kM=function(n,e,t){let{width:r,height:i}=t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=i,s>1&&(n.setAttribute("width",(r*s).toString()),n.setAttribute("height",(i*s).toString()),e.scale(s,s))},$0=(n,e)=>{let{width:t,height:r}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function k1(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=dn,n}class TM{constructor(e){E(this,"_originalCanvasStyle",void 0),E(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&ql().getElementById(e)||Di();var r;if(t.hasAttribute("data-fabric"))throw new Hr("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:i}=this.lower;i.classList.remove("lower-canvas"),i.removeAttribute("data-fabric"),i.setAttribute("width","".concat(t)),i.setAttribute("height","".concat(r)),i.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:i}=this.lower;kM(r,i,e,t)}setCSSDimensions(e){$0(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&mr(e),i={left:0,top:0};if(!r)return i;const s=((t=CM(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};i.left+=parseInt(s.borderLeftWidth,10)||0,i.top+=parseInt(s.borderTopWidth,10)||0,i.left+=parseInt(s.paddingLeft,10)||0,i.top+=parseInt(s.paddingTop,10)||0;let o={left:0,top:0};const a=r.documentElement;e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect());const l=SM(e);return{left:o.left+l.left-(a.clientLeft||0)+i.left,top:o.top+l.top-(a.clientTop||0)+i.top}}(this.lower.el)}dispose(){Xr().dispose(this.lower.el),delete this.lower}}const t5={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...Gt]};class rh extends pM(gM){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return rh.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new TM(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];const s=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(qs("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?uM():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const i=O({width:this.width,height:this.height},e);this.elements.setDimensions(i,this.getRetinaScaling()),this.hasLostContext=!0,this.width=i.width,this.height=i.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,i=[...this.viewportTransform],s=nn(e,wr(i));i[0]=t,i[3]=t;const o=nn(s,i);i[4]+=r.x-o.x,i[5]+=r.y-o.y,this.setViewportTransform(i)}setZoom(e){this.zoomToPoint(new A(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new A(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Gd(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=wr(this.viewportTransform),i=nn({x:0,y:0},r),s=nn({x:e,y:t},r),o=i.min(s),a=i.max(s);return this.vptCoords={tl:o,tr:new A(a.x,o.y),bl:new A(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(Xz(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,i=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),i&&(i._set("canvas",this),i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,i)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,i=t.length;r<i;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],i=this["".concat(t,"Image")],s=this.viewportTransform,o=this["".concat(t,"Vpt")];if(!r&&!i)return;const a=zn(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?r.toLive(e):r,o&&e.transform(...s),a){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const l=r.gradientTransform||r.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(i){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&e.transform(...s),i.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new A(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new A(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new A(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new A(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new A(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return nn(this.getCenterPoint(),wr(this.viewportTransform))}_centerObject(e,t){e.setXY(t,ue,ue),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,i=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return O(O(O({version:B0},Jl(this,t)),{},{objects:this._objects.filter(s=>!s.excludeFromExport).map(s=>this._toObject(s,e,t))},this.__serializeBgOverlay(e,t)),i?{clipPath:i}:null)}_toObject(e,t,r){let i;this.includeDefaultValues||(i=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!i),s}__serializeBgOverlay(e,t){const r={},i=this.backgroundImage,s=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return zn(o)?o.excludeFromExport||(r.background=o.toObject(t)):o&&(r.background=o),zn(a)?a.excludeFromExport||(r.overlay=a.toObject(t)):a&&(r.overlay=a),i&&!i.excludeFromExport&&(r.backgroundImage=this._toObject(i,e,t)),s&&!s.excludeFromExport&&(r.overlayImage=this._toObject(s,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),i=t.height||"".concat(this.height),s=pe.NUM_FRACTION_DIGITS,o=t.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;a='viewBox="'.concat(ke(-l[4]/l[0],s)," ").concat(ke(-l[5]/l[3],s)," ").concat(ke(this.width/l[0],s)," ").concat(ke(this.height/l[3],s),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',i,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",B0,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(Ys()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(zn(t)){const r=this["".concat(e,"Vpt")],i=this.viewportTransform,s={isType:()=>!1,width:this.width/(r?i[0]:1),height:this.height/(r?i[3]:1)};return t.toSVG(s,{additionalTransform:r?Mu(i):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=pe.fontPaths;this._objects.forEach(function s(o){e.push(o),Vd(o)&&o._objects.forEach(s)}),e.forEach(s=>{if(!(o=s)||typeof o._renderText!="function")return;var o;const{styles:a,fontFamily:l}=s;!t[l]&&r[l]&&(t[l]=!0,a&&Object.values(a).forEach(c=>{Object.values(c).forEach(u=>{let{fontFamily:h=""}=u;!t[h]&&r[h]&&(t[h]=!0)})}))});const i=Object.keys(t).map(s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(r[s],`');
		}
`)).join("");return i?`	<style type="text/css"><![CDATA[
`.concat(i,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const i=this[t];i&&!i.excludeFromExport&&i.toSVG&&e.push(i.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(zn(r)){const i=r.repeat||"",s=this.width,o=this.height,a=this["".concat(t,"Vpt")]?Mu(wr(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(s/2,",").concat(o/2,')" x="').concat(r.offsetX-s/2,'" y="').concat(r.offsetY-o/2,'" width="').concat(i!=="repeat-y"&&i!=="no-repeat"||!C1(r)?s:r.source.width,'" height="').concat(i!=="repeat-x"&&i!=="no-repeat"||!C1(r)?o:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Hr("`json` is undefined"));const i=typeof e=="string"?JSON.parse(e):e,{objects:s=[],backgroundImage:o,background:a,overlayImage:l,overlay:c,clipPath:u}=i,h=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Ou(s,{reviver:t,signal:r}),wg({backgroundImage:o,backgroundColor:a,overlayImage:l,overlayColor:c,clipPath:u},{signal:r})]).then(d=>{let[f,p]=d;return this.clear(),this.add(...f),this.set(i),this.set(p),this.renderOnAddRemove=h,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=Qn(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:i=1,enableRetinaScaling:s=!1}=e,o=i*(s?this.getRetinaScaling():1);return mM(this.toCanvasElement(o,e),t,r)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:i=1,enableRetinaScaling:s=!1}=e,o=i*(s?this.getRetinaScaling():1);return yM(this.toCanvasElement(o,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:i,top:s,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,l=(r||this.height)*e,c=this.getZoom(),u=this.width,h=this.height,d=this.skipControlsDrawing,f=c*e,p=this.viewportTransform,g=[f,0,0,f,(p[4]-(i||0))*e,(p[5]-(s||0))*e],m=this.enableRetinaScaling,y=Qn({width:a,height:l}),v=o?this._objects.filter(w=>o(w)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=g,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(y.getContext("2d"),v),this.viewportTransform=p,this.width=u,this.height=h,this.calcViewportBoundaries(),this.enableRetinaScaling=m,this.skipControlsDrawing=d,y}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Nf.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}E(rh,"ownDefaults",t5);const n5=["touchstart","touchmove","touchend"],r5=n=>{const e=SM(n.target),t=function(r){const i=r.changedTouches;return i&&i[0]?i[0]:r}(n);return new A(t.clientX+e.left,t.clientY+e.top)},H0=n=>n5.includes(n.type)||n.pointerType==="touch",T1=n=>{n.preventDefault(),n.stopPropagation()},Ci=n=>{let e=0,t=0,r=0,i=0;for(let s=0,o=n.length;s<o;s++){const{x:a,y:l}=n[s];(a>r||!s)&&(r=a),(a<e||!s)&&(e=a),(l>i||!s)&&(i=l),(l<t||!s)&&(t=l)}return{left:e,top:t,width:r-e,height:i-t}},i5=["translateX","translateY","scaleX","scaleY"],s5=(n,e)=>jf(n,Ct(e,n.calcOwnMatrix())),jf=(n,e)=>{const t=If(e),{translateX:r,translateY:i,scaleX:s,scaleY:o}=t,a=Ne(t,i5),l=new A(r,i);n.flipX=!1,n.flipY=!1,Object.assign(n,a),n.set({scaleX:s,scaleY:o}),n.setPositionByOrigin(l,ue,ue)},o5=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},_M=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),db=(n,e,t)=>{const r=n/2,i=e/2,s=[new A(-r,-i),new A(r,-i),new A(-r,i),new A(r,i)].map(a=>a.transform(t)),o=Ci(s);return new A(o.width,o.height)},bg=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Gt;return Ct(wr(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gt),n)},ol=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gt;return n.transform(bg(e,t))},a5=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gt;return n.transform(bg(e,t),!0)},l5=(n,e,t)=>{const r=bg(e,t);return jf(n,Ct(r,n.calcOwnMatrix())),r},EM=(n,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(n),O(O({},e),{},{target:r})),r.fire(n,e)},c5={left:-.5,top:-.5,center:0,bottom:.5,right:.5},et=n=>typeof n=="string"?c5[n]:n-.5,Lf="not-allowed";function OM(n){return et(n.originX)===et(ue)&&et(n.originY)===et(ue)}function _1(n){return .5-et(n)}const kr=(n,e)=>n[e],MM=(n,e,t,r)=>({e:n,transform:e,pointer:new A(t,r)});function AM(n,e){const t=n.getTotalAngle()+Ni(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function fb(n,e,t,r,i){var s;let{target:o,corner:a}=n;const l=o.controls[a],c=((s=o.canvas)===null||s===void 0?void 0:s.getZoom())||1,u=o.padding/c,h=function(d,f,p,g){const m=d.getRelativeCenterPoint(),y=p!==void 0&&g!==void 0?d.translateToGivenOrigin(m,ue,ue,p,g):new A(d.left,d.top);return(d.angle?f.rotate(-Ke(d.angle),m):f).subtract(y)}(o,new A(r,i),e,t);return h.x>=u&&(h.x-=u),h.x<=-u&&(h.x+=u),h.y>=u&&(h.y-=u),h.y<=u&&(h.y+=u),h.x-=l.offsetX,h.y-=l.offsetY,h}const u5=(n,e,t,r)=>{const{target:i,offsetX:s,offsetY:o}=e,a=t-s,l=r-o,c=!kr(i,"lockMovementX")&&i.left!==a,u=!kr(i,"lockMovementY")&&i.top!==l;return c&&i.set(ye,a),u&&i.set(hn,l),(c||u)&&EM(hM,MM(n,e,t,r)),c||u},E1={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Lm=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),O1=(n,e,t,r)=>{n/=255,e/=255,t/=255;const i=Math.max(n,e,t),s=Math.min(n,e,t);let o,a;const l=(i+s)/2;if(i===s)o=a=0;else{const c=i-s;switch(a=l>.5?c/(2-i-s):c/(i+s),i){case n:o=(e-t)/c+(e<t?6:0);break;case e:o=(t-n)/c+2;break;case t:o=(n-e)/c+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),r]},M1=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},Hh=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),A1=n=>{let[e,t,r,i=1]=n;const s=Math.round(.3*e+.59*t+.11*r);return[s,s,s,i]};class me{constructor(e){if(E(this,"isUnrecognised",!1),e)if(e instanceof me)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,i,s=1]=e;this.setSource([t,r,i,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in E1&&(e=E1[e]),e==="transparent"?[255,255,255,0]:me.sourceFromHex(e)||me.sourceFromRgb(e)||me.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=O1(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,i]=O1(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(i,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,i]=this.getSource();return"".concat(Hh(e)).concat(Hh(t)).concat(Hh(r)).concat(Hh(Math.round(255*i)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(A1(this.getSource())),this}toBlackWhite(e){const[t,,,r]=A1(this.getSource()),i=t<(e||127)?0:255;return this.setSource([i,i,i,r]),this}overlayWith(e){e instanceof me||(e=new me(e));const t=this.getSource(),r=e.getSource(),[i,s,o]=t.map((a,l)=>Math.round(.5*a+.5*r[l]));return this.setSource([i,s,o,t[3]]),this}static fromRgb(e){return me.fromRgba(e)}static fromRgba(e){return new me(me.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[r,i,s]=t.slice(1,4).map(o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a});return[r,i,s,M1(t[4])]}}static fromHsl(e){return me.fromHsla(e)}static fromHsla(e){return new me(me.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(me.parseAngletoDegrees(t[1])%360+360)%360/360,i=parseFloat(t[2])/100,s=parseFloat(t[3])/100;let o,a,l;if(i===0)o=a=l=s;else{const c=s<=.5?s*(i+1):s+i-s*i,u=2*s-c;o=Lm(u,c,r+1/3),a=Lm(u,c,r),l=Lm(u,c,r-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*l),M1(t[4])]}static fromHex(e){return new me(me.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(l=>l+l):t.match(/.{2}/g);const[i,s,o,a=255]=r.map(l=>parseInt(l,16));return[i,s,o,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?Ni(r):t.includes("turn")?360*r:r}}const al=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sb;const t=/\D{0,2}$/.exec(n),r=parseFloat(n),i=pe.DPI;switch(t==null?void 0:t[0]){case"mm":return r*i/25.4;case"cm":return r*i/2.54;case"in":return r*i;case"pt":return r*i/72;case"pc":return r*i/72*12;case"em":return r*e;default:return r}},h5=n=>{const[e,t]=n.trim().split(" "),[r,i]=(s=e)&&s!==dn?[s.slice(1,4),s.slice(5,8)]:s===dn?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:t||"meet",alignX:r,alignY:i}},Au=function(n,e){let t,r,i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const s=new me(e),o=s.getAlpha();t=s.toRgb(),o!==1&&(r=o.toString())}else t="none";return i?"".concat(n,": ").concat(t,"; ").concat(r?"".concat(n,"-opacity: ").concat(r,"; "):""):"".concat(n,'="').concat(t,'" ').concat(r?"".concat(n,'-opacity="').concat(r,'" '):"")};class RM{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):dn,s=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=this.opacity!==void 0?this.opacity:"1",u=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),d=Au(ht,this.fill);return[Au(fn,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",t,"; ","opacity: ",c,";",h,u].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),i='transform="'.concat(Mu(r));return"".concat(i).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=i,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:i,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=i?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=l&&l.absolutePositioned,h=this.stroke,d=this.fill,f=this.shadow,p=[],g=e.indexOf("COMMON_PARTS");let m;l&&(l.clipPathId="CLIPPATH_".concat(Ys()),m='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(r),`</clipPath>
`)),u&&p.push("<g ",a,this.getSvgCommons(),` >
`),p.push("<g ",this.getSvgTransform(!1),u?"":a+this.getSvgCommons(),` >
`);const y=[o,c,t?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[g]=y,zn(d)&&p.push(d.toSVG(this)),zn(h)&&p.push(h.toSVG(this)),f&&p.push(f.toSVG(this)),l&&p.push(m),p.push(e.join("")),p.push(`</g>
`),u&&p.push(`</g>
`),r?r(p.join("")):p.join("")}addPaintOrder(){return this.paintFirst!==ht?' paint-order="'.concat(this.paintFirst,'" '):""}}function xg(n){return new RegExp("^("+n.join("|")+")\\b","i")}const Xo="textDecorationThickness",PM=["fontSize","fontWeight","fontFamily","fontStyle"],DM=["underline","overline","linethrough"],NM=[...PM,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],IM=[...NM,...DM,"textBackgroundColor","direction",Xo],d5=[...PM,...DM,fn,"strokeWidth",ht,"deltaY","textBackgroundColor",Xo],f5={_reNewline:ob,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:ye,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:ye,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[Xo]:66.667},zr="justify",Ff="justify-left",$c="justify-right",Hc="justify-center";var R1,P1,D1;const br=String.raw(R1||(R1=ni(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),Fm=String.raw(P1||(P1=ni(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),p5=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+br+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+br+"))?\\s+(.*)"),g5={cx:ye,x:ye,r:"radius",cy:hn,y:hn,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":Xo},Wm="font-size",Bm="clip-path";xg(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);xg(["symbol","image","marker","pattern","view","svg"]);const N1=xg(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(D1||(D1=ni(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),br,Fm,br,Fm,br,Fm,br));const m5=new A(1,0),jM=new A,LM=(n,e)=>n.rotate(e),U0=(n,e)=>new A(e).subtract(n),V0=n=>n.distanceFrom(jM),G0=(n,e)=>Math.atan2(Uc(n,e),v5(n,e)),y5=n=>G0(m5,n),pb=n=>n.eq(jM)?n:n.scalarDivide(V0(n)),FM=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return pb(new A(-n.y,n.x).scalarMultiply(e?1:-1))},Uc=(n,e)=>n.x*e.y-n.y*e.x,v5=(n,e)=>n.x*e.x+n.y*e.y,I1=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const r=Uc(e,t),i=Uc(e,n),s=Uc(t,n);return r>=0?i>=0&&s<=0:!(i<=0&&s>=0)},j1="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",L1=new RegExp("(?:\\s|^)"+j1+j1+"("+br+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Yr{constructor(e){const t=typeof e=="string"?Yr.parseShadow(e):e;Object.assign(this,Yr.ownDefaults,t),this.id=Ys()}static parseShadow(e){const t=e.trim(),[,r=0,i=0,s=0]=(L1.exec(t)||[]).map(o=>parseFloat(o)||0);return{color:(t.replace(L1,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:i,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=LM(new A(this.offsetX,this.offsetY),Ke(-e.angle)),r=new me(this.color);let i=40,s=40;return e.width&&e.height&&(i=100*ke((Math.abs(t.x)+this.blur)/e.width,pe.NUM_FRACTION_DIGITS)+20,s=100*ke((Math.abs(t.y)+this.blur)/e.height,pe.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(i,'%" width="').concat(100+2*i,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(ke(this.blur?this.blur/2:0,pe.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(ke(t.x,pe.NUM_FRACTION_DIGITS),'" dy="').concat(ke(t.y,pe.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=Yr.ownDefaults;return this.includeDefaultValues?e:hb(e,(r,i)=>r!==t[i])}static async fromObject(e){return new this(e)}}E(Yr,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),E(Yr,"type","shadow"),Y.setClass(Yr,"shadow");const Al=(n,e,t)=>Math.max(n,Math.min(e,t)),w5=[hn,ye,gn,Jn,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Yl,Kl],Li=[ht,fn,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],b5={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:ye,originY:hn,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:ht,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},x5=(n,e,t,r)=>-t*Math.cos(n/r*th)+t+e,S5=()=>!1;class gb{constructor(e){let{startValue:t,byValue:r,duration:i=500,delay:s=0,easing:o=x5,onStart:a=Ud,onChange:l=Ud,onComplete:c=Ud,abort:u=S5,target:h}=e;E(this,"_state","pending"),E(this,"durationProgress",0),E(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=i,this.delay=s,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=c,this._abort=u,this.target=h,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Gd(e),this.delay):Gd(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:i,valueProgress:s}=this.calculate(r);this.value=Object.freeze(i),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Gd(this.tick)))}register(){Nf.push(this)}unregister(){Nf.remove(this)}abort(){this._state="aborted",this.unregister()}}const C5=["startValue","endValue"];class k5 extends gb{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(O(O({},Ne(e,C5)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const T5=["startValue","endValue"];class _5 extends gb{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(O(O({},Ne(e,T5)),{},{startValue:t,byValue:r.map((i,s)=>i-t[s])}))}calculate(e){const t=this.startValue.map((r,i)=>this.easing(e,r,this.byValue[i],this.duration,i));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const E5=["startValue","endValue","easing","onChange","onComplete","abort"],O5=(n,e,t,r)=>e+t*(1-Math.cos(n/r*th)),zm=n=>n&&((e,t,r)=>n(new me(e).toRgba(),t,r));class M5 extends gb{constructor(e){let{startValue:t,endValue:r,easing:i=O5,onChange:s,onComplete:o,abort:a}=e,l=Ne(e,E5);const c=new me(t).getSource(),u=new me(r).getSource();super(O(O({},l),{},{startValue:c,byValue:u.map((h,d)=>h-c[d]),easing:i,onChange:zm(s),onComplete:zm(o),abort:zm(a)}))}calculate(e){const[t,r,i,s]=this.startValue.map((a,l)=>this.easing(e,a,this.byValue[l],this.duration,l)),o=[...[t,r,i].map(Math.round),Al(0,s,1)];return{value:o,valueProgress:o.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}}function WM(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new _5(n):new k5(n);return e.start(),e}function A5(n){const e=new M5(n);return e.start(),e}class Ie{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(i=>!this.includes(i))),this}static isPointContained(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(i||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(i||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const s=U0(t,r),o=U0(t,e).divide(s);return i?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(e,t){const r=new A(e).setX(Math.min(e.x-1,...t.map(s=>s.x)));let i=0;for(let s=0;s<t.length;s++){const o=this.intersectSegmentSegment(t[s],t[(s+1)%t.length],e,r);if(o.includes(e))return!0;i+=+(o.status==="Intersection")}return i%2==1}static intersectLineLine(e,t,r,i){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=t.x-e.x,l=t.y-e.y,c=i.x-r.x,u=i.y-r.y,h=e.x-r.x,d=e.y-r.y,f=c*d-u*h,p=a*d-l*h,g=u*a-c*l;if(g!==0){const m=f/g,y=p/g;return(s||0<=m&&m<=1)&&(o||0<=y&&y<=1)?new Ie("Intersection").append(new A(e.x+m*a,e.y+m*l)):new Ie}if(f===0||p===0){const m=s||o||Ie.isPointContained(e,r,i)||Ie.isPointContained(t,r,i)||Ie.isPointContained(r,e,t)||Ie.isPointContained(i,e,t);return new Ie(m?"Coincident":void 0)}return new Ie("Parallel")}static intersectSegmentLine(e,t,r,i){return Ie.intersectLineLine(e,t,r,i,!1,!0)}static intersectSegmentSegment(e,t,r,i){return Ie.intersectLineLine(e,t,r,i,!1,!1)}static intersectLinePolygon(e,t,r){let i=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new Ie,o=r.length;for(let a,l,c,u=0;u<o;u++){if(a=r[u],l=r[(u+1)%o],c=Ie.intersectLineLine(e,t,a,l,i,!1),c.status==="Coincident")return c;s.append(...c.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,t,r){return Ie.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new Ie,i=e.length,s=[];for(let o=0;o<i;o++){const a=e[o],l=e[(o+1)%i],c=Ie.intersectSegmentPolygon(a,l,t);c.status==="Coincident"?(s.push(c),r.append(a,l)):r.append(...c.points)}return s.length>0&&s.length===e.length?new Ie("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const i=t.min(r),s=t.max(r),o=new A(s.x,i.y),a=new A(i.x,s.y);return Ie.intersectPolygonPolygon(e,[i,o,s,a])}}class R5 extends gM{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?nn(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=nn(e,wr(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new A(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:i}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,t,r,i];if(this.group){const o=this.group.calcTransformMatrix();return s.map(a=>nn(a,o))}return s}intersectsWithRect(e,t){return Ie.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Ie.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:i,width:s,height:o}=this.getBoundingRect();return r>=e.x&&r+s<=t.x&&i>=e.y&&i+o<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Ie.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return Ci(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(gn,e),this._set(Jn,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Ni(vM(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||Gt.concat()}calcACoords(){const e=Xl({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),i=nh(t,r),s=Ct(i,e),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:nn({x:-a,y:-l},s),tr:nn({x:a,y:-l},s),bl:nn({x:-a,y:l},s),br:nn({x:a,y:l},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,et(this.originX),et(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),i=this.matrixCache;return i&&i.key.every((s,o)=>s===r[o])?i.value:(this.group&&(t=Ct(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),i={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=e5(i);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new A(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=O({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let i=r,s=0;this.strokeUniform&&(i=0,s=r);const o=t.width+i,a=t.height+i;let l;return l=t.skewX===0&&t.skewY===0?new A(o*t.scaleX,a*t.scaleY):db(o,a,vg(t)),l.scalarAdd(s)}translateToGivenOrigin(e,t,r,i,s){let o=e.x,a=e.y;const l=et(i)-et(t),c=et(s)-et(r);if(l||c){const u=this._getTransformedDimensions();o+=l*u.x,a+=c*u.y}return new A(o,a)}translateToCenterPoint(e,t,r){if(t===ue&&r===ue)return e;const i=this.translateToGivenOrigin(e,t,r,ue,ue);return this.angle?i.rotate(Ke(this.angle),e):i}translateToOriginPoint(e,t,r){const i=this.translateToGivenOrigin(e,ue,ue,t,r);return this.angle?i.rotate(Ke(this.angle),e):i}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?nn(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new A(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const i=this.translateToCenterPoint(e,t,r),s=this.translateToOriginPoint(i,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),ye,hn)}}const P5=["type"],D5=["extraParam"];let li=class Yd extends R5{static getDefaults(){return Yd.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){qs("warn","Setting type has no effect",e)}constructor(e){super(),E(this,"_cacheContext",null),Object.assign(this,Yd.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=Di(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,i=pe.maxCacheSideLimit,s=pe.minCacheSideLimit;if(t<=i&&r<=i&&t*r<=pe.perfLimitSizeTotal)return t<s&&(e.width=s),r<s&&(e.height=s),e;const o=t/r,[a,l]=zc.limitDimsByArea(o),c=Al(s,a,i),u=Al(s,l,i);return t>c&&(e.zoomX/=t/c,e.width=c,e.capped=!0),r>u&&(e.zoomY/=r/u,e.height=u,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,i=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(i+2),zoomX:e.x,zoomY:e.y,x:r,y:i}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:i,zoomX:s,zoomY:o,x:a,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),c=r!==e.width||i!==e.height,u=this.zoomX!==s||this.zoomY!==o;if(!e||!t)return!1;if(c||u){r!==e.width||i!==e.height?(e.width=r,e.height=i):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const h=a/2,d=l/2;return this.cacheTranslationX=Math.round(e.width/2-h)+h,this.cacheTranslationY=Math.round(e.height/2-d)+d,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(s,o),this.zoomX=s,this.zoomY=o,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new A(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=If(this.calcTransformMatrix());return new A(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==gn&&e!==Jn||(t=this._constrainScale(t)),e===gn&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof Yr||(t=new Yr(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:i,cacheTranslationY:s}=this,{width:o,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:i,cacheTranslationY:s,width:o,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===fn&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const i=this.fill,s=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=i,this.stroke=s}createClipPathLayer(e,t){const r=Qn(t),i=r.getContext("2d");if(i.translate(t.cacheTranslationX,t.cacheTranslationY),i.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(s=>{s.transform(i)}),t.parentClipPaths.push(e),e.absolutePositioned){const s=wr(this.calcTransformMatrix());i.transform(s[0],s[1],s[2],s[3],s[4],s[5])}return e.transform(i),e.drawObject(i,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const i=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,i)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,zn(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(zn(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,i=this.getCanvasRetinaScaling(),[s,,,o]=(r==null?void 0:r.viewportTransform)||Gt,a=s*i,l=o*i,c=t.nonScaling?new A(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*pe.browserShadowBlurConstant*(a+l)*(c.x+c.y)/4,e.shadowOffsetX=t.offsetX*a*c.x,e.shadowOffsetY=t.offsetY*l*c.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!zn(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,i=-this.width/2+t.offsetX||0,s=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,i,s):e.transform(1,0,0,1,i,s),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:i,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===fn?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const i=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),o=i.x/this.scaleX/s,a=i.y/this.scaleY/s,l=Qn({width:Math.ceil(o),height:Math.ceil(a)}),c=l.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(o,0),c.lineTo(o,a),c.lineTo(0,a),c.closePath(),c.translate(o/2,a/2),c.scale(i.zoomX/this.scaleX/s,i.zoomY/this.scaleY/s),this._applyPatternGradientTransform(c,t),c.fillStyle=t.toLive(e),c.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/i.zoomX,s*this.scaleY/i.zoomY),e.strokeStyle=(r=c.createPattern(l,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new A(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(Y.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=_M(this),r=this.group,i=this.shadow,s=Math.abs,o=e.enableRetinaScaling?uM():1,a=(e.multiplier||1)*o,l=e.canvasProvider||(v=>new rh(v,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&o5(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&l5(this,this.getViewportTransform()),this.setCoords();const c=Di(),u=this.getBoundingRect(),h=this.shadow,d=new A;if(h){const v=h.blur,w=h.nonScaling?new A(1,1):this.getObjectScaling();d.x=2*Math.round(s(h.offsetX)+v)*s(w.x),d.y=2*Math.round(s(h.offsetY)+v)*s(w.y)}const f=u.width+d.x,p=u.height+d.y;c.width=Math.ceil(f),c.height=Math.ceil(p);const g=l(c);e.format==="jpeg"&&(g.backgroundColor="#fff"),this.setPositionByOrigin(new A(g.width/2,g.height/2),ue,ue);const m=this.canvas;g._objects=[this],this.set("canvas",g),this.setCoords();const y=g.toCanvasElement(a||1,e);return this.set("canvas",m),this.shadow=i,r&&(this.group=r),this.set(t),this.setCoords(),g._objects=[],g.destroy(),y}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return mM(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return yM(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:i}=this;if(t){const{x:s,y:o}=this.getRelativeCenterPoint();this.originX=ue,this.originY=ue,this.left=s,this.top=o}if(this.set("angle",e),t){const{x:s,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,i);this.left=s,this.top=o,this.originX=r,this.originY=i}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Nf.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Xr().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((r,i)=>{let[s,o]=i;return r[s]=this._animate(s,o,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.split("."),s=this.constructor.colorProperties.includes(i[i.length-1]),{abort:o,startValue:a,onChange:l,onComplete:c}=r,u=O(O({},r),{},{target:this,startValue:a??i.reduce((h,d)=>h[d],this),endValue:t,abort:o==null?void 0:o.bind(this),onChange:(h,d,f)=>{i.reduce((p,g,m)=>(m===i.length-1&&(p[g]=h),p[g]),this),l&&l(h,d,f)},onComplete:(h,d,f)=>{this.setCoords(),c&&c(h,d,f)}});return s?A5(u):WM(u)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let i,s=0;s<t.length;s++){if(i=t[s],i===e)return{fork:[this,...t.slice(0,s)],otherFork:[],common:t.slice(s)};for(let o=0;o<r.length;o++){if(this===r[o])return{fork:[],otherFork:[e,...r.slice(0,o)],common:[this,...t]};if(i===r[o])return{fork:[this,...t.slice(0,s)],otherFork:[e,...r.slice(0,o)],common:t.slice(s)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const i=t.fork.pop(),s=t.otherFork.pop(),o=r._objects.indexOf(i),a=r._objects.indexOf(s);return o>-1&&o>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Yd.customProperties,this.constructor.customProperties||[]);let t;const r=pe.NUM_FRACTION_DIGITS,{clipPath:i,fill:s,stroke:o,shadow:a,strokeDashArray:l,left:c,top:u,originX:h,originY:d,width:f,height:p,strokeWidth:g,strokeLineCap:m,strokeDashOffset:y,strokeLineJoin:v,strokeUniform:w,strokeMiterLimit:x,scaleX:S,scaleY:C,angle:T,flipX:_,flipY:M,opacity:P,visible:$,backgroundColor:N,fillRule:H,paintFirst:D,globalCompositeOperation:V,skewX:U,skewY:G}=this;i&&!i.excludeFromExport&&(t=i.toObject(e.concat("inverted","absolutePositioned")));const R=z=>ke(z,r),I=O(O({},Jl(this,e)),{},{type:this.constructor.type,version:B0,originX:h,originY:d,left:R(c),top:R(u),width:R(f),height:R(p),fill:S1(s)?s.toObject():s,stroke:S1(o)?o.toObject():o,strokeWidth:R(g),strokeDashArray:l&&l.concat(),strokeLineCap:m,strokeDashOffset:y,strokeLineJoin:v,strokeUniform:w,strokeMiterLimit:R(x),scaleX:R(S),scaleY:R(C),angle:R(T),flipX:_,flipY:M,opacity:R(P),shadow:a&&a.toObject(),visible:$,backgroundColor:N,fillRule:H,paintFirst:D,globalCompositeOperation:V,skewX:R(U),skewY:R(G)},t?{clipPath:t}:null);return this.includeDefaultValues?I:this._removeDefaultValues(I)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return hb(e,(i,s)=>{if(s===ye||s===hn||s==="type")return!0;const o=r[s];return i!==o&&!(Array.isArray(i)&&Array.isArray(o)&&i.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Ne(e,P5),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:i}=r,s=Ne(r,D5);return wg(t,s).then(o=>i?(delete o[i],new this(t[i],o)):new this(o))}static fromObject(e,t){return this._fromObject(e,t)}};E(li,"stateProperties",w5),E(li,"cacheProperties",Li),E(li,"ownDefaults",b5),E(li,"type","FabricObject"),E(li,"colorProperties",[ht,fn,"backgroundColor"]),E(li,"customProperties",[]),Y.setClass(li),Y.setClass(li,"object");const Ql=(n,e,t)=>(r,i,s,o)=>{const a=e(r,i,s,o);return a&&EM(n,O(O({},MM(r,i,s,o)),t)),a};function Zl(n){return(e,t,r,i)=>{const{target:s,originX:o,originY:a}=t,l=s.getRelativeCenterPoint(),c=s.translateToOriginPoint(l,o,a),u=n(e,t,r,i);return s.setPositionByOrigin(c,t.originX,t.originY),u}}const F1=Ql(Eu,Zl((n,e,t,r)=>{const i=fb(e,e.originX,e.originY,t,r);if(et(e.originX)===et(ue)||et(e.originX)===et(qe)&&i.x<0||et(e.originX)===et(ye)&&i.x>0){const{target:s}=e,o=s.strokeWidth/(s.strokeUniform?s.scaleX:1),a=OM(e)?2:1,l=s.width,c=Math.abs(i.x*a/s.scaleX)-o;return s.set("width",Math.max(c,1)),l!==s.width}return!1}));function N5(n,e,t,r,i){r=r||{};const s=this.sizeX||r.cornerSize||i.cornerSize,o=this.sizeY||r.cornerSize||i.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:i.transparentCorners,l=a?fn:ht,c=!a&&(r.cornerStrokeColor||i.cornerStrokeColor);let u,h=e,d=t;n.save(),n.fillStyle=r.cornerColor||i.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||i.cornerStrokeColor||"",s>o?(u=s,n.scale(1,o/s),d=t*s/o):o>s?(u=o,n.scale(s/o,1),h=e*o/s):u=s,n.beginPath(),n.arc(h,d,u/2,0,Rf,!1),n[l](),c&&n.stroke(),n.restore()}function I5(n,e,t,r,i){r=r||{};const s=this.sizeX||r.cornerSize||i.cornerSize,o=this.sizeY||r.cornerSize||i.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:i.transparentCorners,l=a?fn:ht,c=!a&&(r.cornerStrokeColor||i.cornerStrokeColor),u=s/2,h=o/2;n.save(),n.fillStyle=r.cornerColor||i.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||i.cornerStrokeColor||"",n.translate(e,t);const d=i.getTotalAngle();n.rotate(Ke(d)),n["".concat(l,"Rect")](-u,-h,s,o),c&&n.strokeRect(-u,-h,s,o),n.restore()}class ar{constructor(e){E(this,"visible",!0),E(this,"actionName",yg),E(this,"angle",0),E(this,"x",0),E(this,"y",0),E(this,"offsetX",0),E(this,"offsetY",0),E(this,"sizeX",0),E(this,"sizeY",0),E(this,"touchSizeX",0),E(this,"touchSizeY",0),E(this,"cursorStyle","crosshair"),E(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,i){var s;let{tl:o,tr:a,br:l,bl:c}=i;return((s=t.canvas)===null||s===void 0?void 0:s.getActiveObject())===t&&t.isControlVisible(e)&&Ie.isPointInPolygon(r,[o,a,l,c])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,i;return(r=(i=e._controlsVisibility)===null||i===void 0?void 0:i[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,i){return new A(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,i,s,o){const a=cb([nh(r,i),Xl({angle:e}),ub((s?this.touchSizeX:this.sizeX)||t,(s?this.touchSizeY:this.sizeY)||t)]);return{tl:new A(-.5,-.5).transform(a),tr:new A(.5,-.5).transform(a),br:new A(.5,.5).transform(a),bl:new A(-.5,.5).transform(a)}}render(e,t,r,i,s){((i=i||{}).cornerStyle||s.cornerStyle)==="circle"?N5.call(this,e,t,r,i,s):I5.call(this,e,t,r,i,s)}}const j5=(n,e,t)=>t.lockRotation?Lf:e.cursorStyle,L5=Ql(dM,Zl((n,e,t,r)=>{let{target:i,ex:s,ey:o,theta:a,originX:l,originY:c}=e;const u=i.translateToOriginPoint(i.getRelativeCenterPoint(),l,c);if(kr(i,"lockRotation"))return!1;const h=Math.atan2(o-u.y,s-u.x),d=Math.atan2(r-u.y,t-u.x);let f=Ni(d-h+a);if(i.snapAngle&&i.snapAngle>0){const g=i.snapAngle,m=i.snapThreshold||g,y=Math.ceil(f/g)*g,v=Math.floor(f/g)*g;Math.abs(f-v)<m?f=v:Math.abs(f-y)<m&&(f=y)}f<0&&(f=360+f),f%=360;const p=i.angle!==f;return i.angle=f,p}));function BM(n,e){const t=e.canvas,r=n[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function zM(n,e,t){const r=kr(n,"lockScalingX"),i=kr(n,"lockScalingY");if(r&&i||!e&&(r||i)&&t||r&&e==="x"||i&&e==="y")return!0;const{width:s,height:o,strokeWidth:a}=n;return s===0&&a===0&&e!=="y"||o===0&&a===0&&e!=="x"}const F5=["e","se","s","sw","w","nw","n","ne","e"],Tc=(n,e,t)=>{const r=BM(n,t);if(zM(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return Lf;const i=AM(t,e);return"".concat(F5[i],"-resize")};function mb(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=e.target,o=i.by,a=BM(n,s);let l,c,u,h,d,f;if(zM(s,o,a))return!1;if(e.gestureScale)c=e.scaleX*e.gestureScale,u=e.scaleY*e.gestureScale;else{if(l=fb(e,e.originX,e.originY,t,r),d=o!=="y"?Math.sign(l.x||e.signX||1):1,f=o!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=d),e.signY||(e.signY=f),kr(s,"lockScalingFlip")&&(e.signX!==d||e.signY!==f))return!1;if(h=s._getTransformedDimensions(),a&&!o){const m=Math.abs(l.x)+Math.abs(l.y),{original:y}=e,v=m/(Math.abs(h.x*y.scaleX/s.scaleX)+Math.abs(h.y*y.scaleY/s.scaleY));c=y.scaleX*v,u=y.scaleY*v}else c=Math.abs(l.x*s.scaleX/h.x),u=Math.abs(l.y*s.scaleY/h.y);OM(e)&&(c*=2,u*=2),e.signX!==d&&o!=="y"&&(e.originX=_1(e.originX),c*=-1,e.signX=d),e.signY!==f&&o!=="x"&&(e.originY=_1(e.originY),u*=-1,e.signY=f)}const p=s.scaleX,g=s.scaleY;return o?(o==="x"&&s.set(gn,c),o==="y"&&s.set(Jn,u)):(!kr(s,"lockScalingX")&&s.set(gn,c),!kr(s,"lockScalingY")&&s.set(Jn,u)),p!==s.scaleX||g!==s.scaleY}const Uh=Ql(mg,Zl((n,e,t,r)=>mb(n,e,t,r))),W5=Ql(mg,Zl((n,e,t,r)=>mb(n,e,t,r,{by:"x"}))),B5=Ql(mg,Zl((n,e,t,r)=>mb(n,e,t,r,{by:"y"}))),z5=["target","ex","ey","skewingSide"],$m={x:{counterAxis:"y",scale:gn,skew:Yl,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Jn,skew:Kl,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},$5=["ns","nesw","ew","nwse"],H5=(n,e,t)=>{if(e.x!==0&&kr(t,"lockSkewingY")||e.y!==0&&kr(t,"lockSkewingX"))return Lf;const r=AM(t,e)%4;return"".concat($5[r],"-resize")};function $M(n,e,t,r,i){const{target:s}=t,{counterAxis:o,origin:a,lockSkewing:l,skew:c,flip:u}=$m[n];if(kr(s,l))return!1;const{origin:h,flip:d}=$m[o],f=et(t[h])*(s[d]?-1:1),p=-Math.sign(f)*(s[u]?-1:1),g=.5*-((s[c]===0&&fb(t,ue,ue,r,i)[n]>0||s[c]>0?1:-1)*p)+.5;return Ql(fM,Zl((y,v,w,x)=>function(S,C,T){let{target:_,ex:M,ey:P,skewingSide:$}=C,N=Ne(C,z5);const{skew:H}=$m[S],D=T.subtract(new A(M,P)).divide(new A(_.scaleX,_.scaleY))[S],V=_[H],U=N[H],G=Math.tan(Ke(U)),R=S==="y"?_._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:_._getTransformedDimensions({scaleX:1,scaleY:1}).y,I=2*D*$/Math.max(R,1)+G,z=Ni(Math.atan(I));_.set(H,z);const ee=V!==_[H];if(ee&&S==="y"){const{skewX:X,scaleX:ie}=_,te=_._getTransformedDimensions({skewY:V}),_e=_._getTransformedDimensions(),Re=X!==0?te.x/_e.x:1;Re!==1&&_.set(gn,Re*ie)}return ee}(n,v,new A(w,x))))(e,O(O({},t),{},{[a]:g,skewingSide:p}),r,i)}const U5=(n,e,t,r)=>$M("x",n,e,t,r),V5=(n,e,t,r)=>$M("y",n,e,t,r);function Sg(n,e){return n[e.canvas.altActionKey]}const Vh=(n,e,t)=>{const r=Sg(n,t);return e.x===0?r?Yl:Jn:e.y===0?r?Kl:gn:""},Ya=(n,e,t)=>Sg(n,t)?H5(0,e,t):Tc(n,e,t),W1=(n,e,t,r)=>Sg(n,e.target)?V5(n,e,t,r):W5(n,e,t,r),B1=(n,e,t,r)=>Sg(n,e.target)?U5(n,e,t,r):B5(n,e,t,r),HM=()=>({ml:new ar({x:-.5,y:0,cursorStyleHandler:Ya,actionHandler:W1,getActionName:Vh}),mr:new ar({x:.5,y:0,cursorStyleHandler:Ya,actionHandler:W1,getActionName:Vh}),mb:new ar({x:0,y:.5,cursorStyleHandler:Ya,actionHandler:B1,getActionName:Vh}),mt:new ar({x:0,y:-.5,cursorStyleHandler:Ya,actionHandler:B1,getActionName:Vh}),tl:new ar({x:-.5,y:-.5,cursorStyleHandler:Tc,actionHandler:Uh}),tr:new ar({x:.5,y:-.5,cursorStyleHandler:Tc,actionHandler:Uh}),bl:new ar({x:-.5,y:.5,cursorStyleHandler:Tc,actionHandler:Uh}),br:new ar({x:.5,y:.5,cursorStyleHandler:Tc,actionHandler:Uh}),mtr:new ar({x:0,y:-.5,actionHandler:L5,cursorStyleHandler:j5,offsetY:-40,withConnection:!0,actionName:ab})}),G5=()=>({mr:new ar({x:.5,y:0,actionHandler:F1,cursorStyleHandler:Ya,actionName:Eu}),ml:new ar({x:-.5,y:0,actionHandler:F1,cursorStyleHandler:Ya,actionName:Eu})}),q5=()=>O(O({},HM()),G5());class Ru extends li{static getDefaults(){return O(O({},super.getDefaults()),Ru.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Ru.ownDefaults),this.setOptions(e)}static createControls(){return{controls:HM()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,i=t.action;if(this===r&&i&&i.startsWith(yg))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let i=r.length-1;i>=0;i--){const[s,o]=r[i],a=this.controls[s];if(a.shouldActivate(s,this,e,t?o.touchCorner:o.corner))return this.__corner=s,{key:s,control:a,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=nh(t.x,t.y),i=Xl({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=Ct(r,i),o=Ct(e,s),a=Ct(o,[1/e[0],0,0,1/e[3],0,0]),l=this.group?If(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const c=this._calculateCurrentDimensions(l),u={};return this.forEachControl((h,d)=>{const f=h.positionHandler(c,a,this,h);u[d]=Object.assign(f,this._calcCornerCoords(h,f))}),u}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),i=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/i[0],1/i[3]),e.rotate(Ke(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=O({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=i.borderColor,this._setLineDash(e,i.borderDashArray),this.strokeBorders(e,t),i.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:i}=this,s=O({hasBorders:r,hasControls:i},t),o=this.getViewportTransform(),a=s.hasBorders,l=s.hasControls,c=Ct(o,this.calcTransformMatrix()),u=If(c);e.save(),e.translate(u.translateX,u.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(u.angle-=180),e.rotate(Ke(this.group?u.angle:this.angle)),a&&this.drawBorders(e,u,t),l&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let i;if(r&&r.forActiveSelection||this.group){const s=db(this.width,this.height,vg(t)),o=this.isStrokeAccountedForInDimensions()?lb:(this.strokeUniform?new A().scalarAdd(this.canvas?this.canvas.getZoom():1):new A(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);i=s.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else i=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,i,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((i,s)=>{i.withConnection&&i.getVisibility(this,s)&&(r=!0,e.moveTo(i.x*t.x,i.y*t.y),e.lineTo(i.x*t.x+i.offsetX,i.y*t.y+i.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:s,cornerColor:o}=this,a=O({cornerStrokeColor:i,cornerDashArray:s,cornerColor:o},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((l,c)=>{if(l.getVisibility(this,c)){const u=this.oCoords[c];l.render(e,u.x,u.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,i]=t;return this.setControlVisible(r,i)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const i=this.width+4,s=this.height+4;return t.clearRect(-i/2,-s/2,i,s),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function UM(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),n}E(Ru,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class It extends Ru{}UM(It,[RM]),Y.setClass(It),Y.setClass(It,"object");const Y5=(n,e,t,r)=>{const i=2*(r=Math.round(r))+1,{data:s}=n.getImageData(e-r,t-r,i,i);for(let o=3;o<s.length;o+=4)if(s[o]>0)return!1;return!0};class VM{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new A(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new A(1/this.options.scaleX,1/this.options.scaleY):new A(1,1)}createSideVector(e,t){const r=U0(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new A(e);return t.y+=t.x*Math.tan(Ke(this.options.skewY)),t.x+=t.y*Math.tan(Ke(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const K5=new A;class ll extends VM{static getOrthogonalRotationFactor(e,t){const r=t?G0(e,t):y5(e);return Math.abs(r)<th?-1:1}constructor(e,t,r,i){super(i),E(this,"AB",void 0),E(this,"AC",void 0),E(this,"alpha",void 0),E(this,"bisector",void 0),this.A=new A(e),this.B=new A(t),this.C=new A(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=G0(this.AB,this.AC),this.bisector=pb(LM(this.AB.eq(K5)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t),s=FM(i),o=ll.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,r*o)}projectBevel(){const e=[];return(this.alpha%Rf==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),i=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),s=this.options.strokeUniform?V0(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return V0(i)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(i))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],i=new A(ll.getOrthogonalRotationFactor(this.bisector),ll.getOrthogonalRotationFactor(new A(this.bisector.y,this.bisector.x)));return[new A(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i),new A(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i)].forEach(s=>{I1(s,e,t)&&r.push(this.A.add(s))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:i,skewY:s,scaleX:o,scaleY:a,strokeUniform:l}=this.options,c=new A(Math.tan(Ke(i)),Math.tan(Ke(s))),u=this.strokeProjectionMagnitude,h=l?u/a/Math.sqrt(1/a**2+1/o**2*c.y**2):u/Math.sqrt(1+c.y**2),d=new A(Math.sqrt(Math.max(u**2-h**2,0)),h),f=l?u/Math.sqrt(1+c.x**2*(1/a)**2/(1/o+1/o*c.x*c.y)**2):u/Math.sqrt(1+c.x**2/(1+c.x*c.y)**2),p=new A(f,Math.sqrt(Math.max(u**2-f**2,0)));return[p,p.scalarMultiply(-1),d,d.scalarMultiply(-1)].map(g=>this.applySkew(l?g.multiply(this.strokeUniformScalar):g)).forEach(g=>{I1(g,e,t)&&r.push(this.applySkew(this.A).add(g))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%Rf==0,r=this.applySkew(this.A),i=e[t?0:2].subtract(r),s=e[t?1:0].subtract(r),o=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=Uc(i,o)>0,l=a?i:s,c=a?s:i;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,c)):e.push(...this.projectRoundNoSkew(l,c)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class z1 extends VM{constructor(e,t,r){super(r),this.A=new A(e),this.T=new A(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t);return this.scaleUnitVector(FM(i),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new A(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new ll(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new A(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(pb(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),i=this.A.add(r);e.push(i.add(t),i.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const X5=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(n.length===0)return r;const i=n.reduce((s,o)=>(s[s.length-1].eq(o)||s.push(new A(o)),s),[new A(n[0])]);if(i.length===1)t=!0;else if(!t){const s=i[0],o=((a,l)=>{for(let c=a.length-1;c>=0;c--)if(l(a[c],c,a))return c;return-1})(i,a=>!a.eq(s));i.splice(o+1)}return i.forEach((s,o,a)=>{let l,c;o===0?(c=a[1],l=t?s:a[a.length-1]):o===a.length-1?(l=a[o-1],c=t?s:a[0]):(l=a[o-1],c=a[o+1]),t&&a.length===1?r.push(...new z1(s,s,e).project()):!t||o!==0&&o!==a.length-1?r.push(...new ll(s,l,c,e).project()):r.push(...new z1(s,o===0?c:l,e).project())}),r},yb=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(r=>{e[t][r]=O({},n[t][r])})}),e},J5=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let mc;const vb=n=>{if(mc||mc||(mc="Intl"in gg()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),mc){const e=mc.segment(n);return Array.from(e).map(t=>{let{segment:r}=t;return r})}return Q5(n)},Q5=n=>{const e=[];for(let t,r=0;r<n.length;r++)(t=Z5(n,r))!==!1&&e.push(t);return e},Z5=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const i=n.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},wb=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textDecorationThickness!==e.textDecorationThickness||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},e$=(n,e)=>{const t=e.split(`
`),r=[];let i=-1,s={};n=yb(n);for(let o=0;o<t.length;o++){const a=vb(t[o]);if(n[o])for(let l=0;l<a.length;l++){i++;const c=n[o][l];c&&Object.keys(c).length>0&&(wb(s,c,!0)?r.push({start:i,end:i+1,style:c}):r[r.length-1].end++),s=c||{}}else i+=a.length,s={}}return r},t$=(n,e)=>{if(!Array.isArray(n))return yb(n);const t=e.split(ob),r={};let i=-1,s=0;for(let o=0;o<t.length;o++){const a=vb(t[o]);for(let l=0;l<a.length;l++)i++,n[s]&&n[s].start<=i&&i<n[s].end&&(r[o]=r[o]||{},r[o][l]=O({},n[s].style),i===n[s].end-1&&s++)}return r},eo=["display","transform",ht,"fill-opacity","fill-rule","opacity",fn,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function $1(n,e){const t=n.nodeName,r=n.getAttribute("class"),i=n.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+t,"i"),e=e.replace(o,""),i&&e.length&&(o=new RegExp("#"+i+s,"i"),e=e.replace(o,"")),r&&e.length){const a=r.split(" ");for(let l=a.length;l--;)o=new RegExp("\\."+a[l]+s,"i"),e=e.replace(o,"")}return e.length===0}function n$(n,e){let t=!0;const r=$1(n,e.pop());return r&&e.length&&(t=function(i,s){let o,a=!0;for(;i.parentElement&&i.parentElement.nodeType===1&&s.length;)a&&(o=s.pop()),a=$1(i=i.parentElement,o);return s.length===0}(n,e)),r&&t&&e.length===0}const r$=n=>{var e;return(e=g5[n])!==null&&e!==void 0?e:n},i$=new RegExp("(".concat(br,")"),"gi"),s$=n=>n.replace(i$," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var H1,U1,V1,G1,q1,Y1,K1;const Ht="(".concat(br,")"),o$=String.raw(H1||(H1=ni(["(skewX)(",")"],["(skewX)\\(","\\)"])),Ht),a$=String.raw(U1||(U1=ni(["(skewY)(",")"],["(skewY)\\(","\\)"])),Ht),l$=String.raw(V1||(V1=ni(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Ht,Ht,Ht),c$=String.raw(G1||(G1=ni(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Ht,Ht),u$=String.raw(q1||(q1=ni(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Ht,Ht),h$=String.raw(Y1||(Y1=ni(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Ht,Ht,Ht,Ht,Ht,Ht),bb="(?:".concat(h$,"|").concat(u$,"|").concat(l$,"|").concat(c$,"|").concat(o$,"|").concat(a$,")"),d$="(?:".concat(bb,"*)"),f$=String.raw(K1||(K1=ni(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),d$),p$=new RegExp(f$),g$=new RegExp(bb),m$=new RegExp(bb,"g");function q0(n){const e=[];if(!(n=s$(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!p$.test(n))return[...Gt];for(const t of n.matchAll(m$)){const r=g$.exec(t[0]);if(!r)continue;let i=Gt;const s=r.filter(p=>!!p),[,o,...a]=s,[l,c,u,h,d,f]=a.map(p=>parseFloat(p));switch(o){case"translate":i=nh(l,c);break;case ab:i=Xl({angle:l},{x:c,y:u});break;case yg:i=ub(l,c);break;case Yl:i=bM(l);break;case Kl:i=xM(l);break;case"matrix":i=[l,c,u,h,d,f]}e.push(i)}return cb(e)}function y$(n,e,t,r){const i=Array.isArray(e);let s,o=e;if(n!==ht&&n!==fn||e!==dn){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")o=e===dn?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")o=t&&t.transformMatrix?Ct(t.transformMatrix,q0(e)):q0(e);else if(n==="visible")o=e!==dn&&e!=="hidden",t&&t.visible===!1&&(o=!1);else if(n==="opacity")o=parseFloat(e),t&&t.opacity!==void 0&&(o*=t.opacity);else if(n==="textAnchor")o=e==="start"?ye:e==="end"?qe:ue;else if(n==="charSpacing"||n===Xo)s=al(e,r)/r*1e3;else if(n==="paintFirst"){const a=e.indexOf(ht),l=e.indexOf(fn);o=ht,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(o=fn)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";s=i?e.map(al):al(e,r)}}else o="";return!i&&isNaN(s)?o:s}function v$(n,e){const t=n.match(p5);if(!t)return;const r=t[1],i=t[3],s=t[4],o=t[5],a=t[6];r&&(e.fontStyle=r),i&&(e.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),s&&(e.fontSize=al(s)),a&&(e.fontFamily=a),o&&(e.lineHeight=o==="normal"?1:o)}function w$(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[r,i]=t.split(":");e[r.trim().toLowerCase()]=i.trim()})}function b$(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?w$(t,e):function(r,i){Object.entries(r).forEach(s=>{let[o,a]=s;a!==void 0&&(i[o.toLowerCase()]=a)})}(t,e)),e}const x$={stroke:"strokeOpacity",fill:"fillOpacity"};function Fi(n,e,t){if(!n)return{};let r,i={},s=sb;n.parentNode&&N1.test(n.parentNode.nodeName)&&(i=Fi(n.parentElement,e,t),i.fontSize&&(r=s=al(i.fontSize)));const o=O(O(O({},e.reduce((c,u)=>{const h=n.getAttribute(u);return h&&(c[u]=h),c},{})),function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h={};for(const d in u)n$(c,d.split(" "))&&(h=O(O({},h),u[d]));return h}(n,t)),b$(n));o[Bm]&&n.setAttribute(Bm,o[Bm]),o[Wm]&&(r=al(o[Wm],s),o[Wm]="".concat(r));const a={};for(const c in o){const u=r$(c),h=y$(u,o[c],i,r);a[u]=h}a&&a.font&&v$(a.font,a);const l=O(O({},i),a);return N1.test(n.nodeName)?l:function(c){const u=It.getDefaults();return Object.entries(x$).forEach(h=>{let[d,f]=h;if(c[f]===void 0||c[d]==="")return;if(c[d]===void 0){if(!u[d])return;c[d]=u[d]}if(c[d].indexOf("url(")===0)return;const p=new me(c[d]);c[d]=p.setAlpha(ke(p.getAlpha()*c[f],2)).toRgba()}),c}(l)}const S$=["left","top","width","height","visible"],GM=["rx","ry"];class Wr extends It{static getDefaults(){return O(O({},super.getDefaults()),Wr.ownDefaults)}constructor(e){super(),Object.assign(this,Wr.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,i=-t/2,s=-r/2,o=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,r/2):0,l=o!==0||a!==0;e.beginPath(),e.moveTo(i+o,s),e.lineTo(i+t-o,s),l&&e.bezierCurveTo(i+t-Qi*o,s,i+t,s+Qi*a,i+t,s+a),e.lineTo(i+t,s+r-a),l&&e.bezierCurveTo(i+t,s+r-Qi*a,i+t-Qi*o,s+r,i+t-o,s+r),e.lineTo(i+o,s+r),l&&e.bezierCurveTo(i+Qi*o,s+r,i,s+r-Qi*a,i,s+r-a),e.lineTo(i,s+a),l&&e.bezierCurveTo(i,s+Qi*a,i+Qi*o,s,i+o,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...GM,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:i}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(i,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const i=Fi(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:o=0,width:a=0,height:l=0,visible:c=!0}=i,u=Ne(i,S$);return new this(O(O(O({},t),u),{},{left:s,top:o,width:a,height:l,visible:!!(c&&a&&l)}))}}E(Wr,"type","Rect"),E(Wr,"cacheProperties",[...Li,...GM]),E(Wr,"ownDefaults",{rx:0,ry:0}),E(Wr,"ATTRIBUTE_NAMES",[...eo,"x","y","rx","ry","width","height"]),Y.setClass(Wr),Y.setSVGClass(Wr);const wi="initialization",Wf="added",xb="removed",Bf="imperative",qM=(n,e)=>{const{strokeUniform:t,strokeWidth:r,width:i,height:s,group:o}=e,a=o&&o!==n?bg(o.calcTransformMatrix(),n.calcTransformMatrix()):null,l=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),c=!e.isStrokeAccountedForInDimensions(),u=t&&c?a5(new A(r,r),void 0,n.calcTransformMatrix()):lb,h=!t&&c?r:0,d=db(i+h,s+h,cb([a,e.calcOwnMatrix()],!0)).add(u).scalarDivide(2);return[l.subtract(d),l.add(d)]};class Cg{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:i}=e;return t===wi||t===Bf||!!r&&i!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==wi&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:i}=t;if(r===Bf&&t.overrides)return t.overrides;if(e.length===0)return;const{left:s,top:o,width:a,height:l}=Ci(e.map(h=>qM(i,h)).reduce((h,d)=>h.concat(d),[])),c=new A(a,l),u=new A(s,o).add(c.scalarDivide(2));if(r===wi){const h=this.getInitialSize(t,{size:c,center:u});return{center:u,relativeCorrection:new A(0,0),size:h}}return{center:u.transform(i.calcOwnMatrix()),size:c}}}E(Cg,"type","strategy");class Y0 extends Cg{shouldPerformLayout(e){return!0}}E(Y0,"type","fit-content"),Y.setClass(Y0);const C$=["strategy"],k$=["target","strategy","bubbles","prevStrategy"],YM="layoutManager";class Pu{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Y0;E(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=O(O({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[Df,hM,Eu,dM,mg,fM,Pf,qz,Yz].map(i=>e.on(i,s=>this.performLayout(i===Df?{type:"object_modified",trigger:i,e:s,target:r}:{type:"object_modifying",trigger:i,e:s,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:i}=t;if(r===wi||r===Wf?this.subscribeTargets(e):r===xb&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),i&&i.fire("object:layout:before",{target:t,context:e}),r===Bf&&e.deep){const s=Ne(e,C$);t.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(O(O({},s),{},{bubbles:!1,target:o})))}}getLayoutResult(e){const{target:t,strategy:r,type:i}=e,s=r.calcLayoutResult(e,t.getObjects());if(!s)return;const o=i===wi?new A:t.getRelativeCenterPoint(),{center:a,correction:l=new A,relativeCorrection:c=new A}=s,u=o.subtract(a).add(l).transform(i===wi?Gt:wr(t.calcOwnMatrix()),!0).add(c);return{result:s,prevCenter:o,nextCenter:a,offset:u}}commitLayout(e,t){const{target:r}=e,{result:{size:i},nextCenter:s}=t;var o,a;r.set({width:i.x,height:i.y}),this.layoutObjects(e,t),e.type===wi?r.set({left:(o=e.x)!==null&&o!==void 0?o:s.x+i.x*et(r.originX),top:(a=e.y)!==null&&a!==void 0?a:s.y+i.y*et(r.originY)}):(r.setPositionByOrigin(s,ue,ue),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(i=>{i.group===r&&this.layoutObject(e,t,i)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:i}=t;r.set({left:r.left+i.x,top:r.top+i.y})}onAfterLayout(e,t){const{target:r,strategy:i,bubbles:s,prevStrategy:o}=e,a=Ne(e,k$),{canvas:l}=r;r.fire("layout:after",{context:e,result:t}),l&&l.fire("object:layout:after",{context:e,result:t,target:r});const c=r.parent;s&&c!=null&&c.layoutManager&&((a.path||(a.path=[])).push(r),c.layoutManager.performLayout(O(O({},a),{},{target:c}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(r=>r())),e.clear()}toObject(){return{type:YM,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}Y.setClass(Pu,YM);const T$=["type","objects","layoutManager"];class _$ extends Pu{performLayout(){}}class Fo extends pM(It){static getDefaults(){return O(O({},super.getDefaults()),Fo.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),E(this,"_activeObjects",[]),E(this,"__objectSelectionTracker",void 0),E(this,"__objectSelectionDisposer",void 0),Object.assign(this,Fo.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(i=>{this.enterGroup(i,!1)}),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new Pu,this.layoutManager.performLayout({type:wi,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(qs("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(qs("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,i)=>this.canEnterGroup(t)&&i.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const i=this._filterObjectsBeforeEnteringGroup(t),s=super.add(...i);return this._onAfterObjectsChange(Wf,i),s}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];const s=this._filterObjectsBeforeEnteringGroup(r),o=super.insertAt(e,...s);return this._onAfterObjectsChange(Wf,s),o}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(xb,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach(i=>{i._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const i=this._activeObjects;if(e)i.push(r),this._set("dirty",!0);else if(i.length>0){const s=i.indexOf(r);s>-1&&(i.splice(s,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&jf(e,Ct(wr(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(jf(e,Ct(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=It.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let s=0;s<this._objects.length;s++){var i;const o=this._objects[s];(i=this.canvas)!==null&&i!==void 0&&i.preserveObjectStacking&&o.group!==this?(e.save(),e.transform(...wr(this.calcTransformMatrix())),o.render(e),e.restore()):o.group===this&&o.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(O({target:this,type:Bf},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(i){return!i.excludeFromExport}).map(function(i){const s=i.includeDefaultValues;i.includeDefaultValues=r;const o=i[e||"toObject"](t);return i.includeDefaultValues=s,o})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return O(O(O({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Wr.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const i=t.join("");return e?e(i):i}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let i=0;i<this._objects.length;i++)t.push("		",this._objects[i].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let i=0;i<this._objects.length;i++)t.push("	",this._objects[i].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:i=[],layoutManager:s}=e,o=Ne(e,T$);return Promise.all([Ou(i,t),wg(o,t)]).then(a=>{let[l,c]=a;const u=new this(l,O(O(O({},o),c),{},{layoutManager:new _$}));if(s){const h=Y.getClass(s.type),d=Y.getClass(s.strategy);u.layoutManager=new h(new d)}else u.layoutManager=new Pu;return u.layoutManager.subscribeTargets({type:wi,target:u,targets:u.getObjects()}),u.setCoords(),u})}}E(Fo,"type","Group"),E(Fo,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),Y.setClass(Fo);const E$=(n,e)=>Math.min(e.width/n.width,e.height/n.height),O$=(n,e)=>Math.max(e.width/n.width,e.height/n.height),K0="\\s*,?\\s*",yc="".concat(K0,"(").concat(br,")"),M$="".concat(yc).concat(yc).concat(yc).concat(K0,"([01])").concat(K0,"([01])").concat(yc).concat(yc),A$={m:"l",M:"L"},R$=(n,e,t,r,i,s,o,a,l,c,u)=>{const h=Ri(n),d=Pi(n),f=Ri(e),p=Pi(e),g=t*i*f-r*s*p+o,m=r*i*f+t*s*p+a;return["C",c+l*(-t*i*d-r*s*h),u+l*(-r*i*d+t*s*h),g+l*(t*i*p+r*s*f),m+l*(r*i*p-t*s*f),g,m]},X1=(n,e,t,r)=>{const i=Math.atan2(e,n),s=Math.atan2(r,t);return s>=i?s-i:2*Math.PI-(i-s)};function J1(n,e,t,r,i,s,o,a){let l;if(pe.cachesBoundsOfCurve&&(l=[...arguments].join(),zc.boundsOfCurveCache[l]))return zc.boundsOfCurveCache[l];const c=Math.sqrt,u=Math.abs,h=[],d=[[0,0],[0,0]];let f=6*n-12*t+6*i,p=-3*n+9*t-9*i+3*o,g=3*t-3*n;for(let x=0;x<2;++x){if(x>0&&(f=6*e-12*r+6*s,p=-3*e+9*r-9*s+3*a,g=3*r-3*e),u(p)<1e-12){if(u(f)<1e-12)continue;const M=-g/f;0<M&&M<1&&h.push(M);continue}const S=f*f-4*g*p;if(S<0)continue;const C=c(S),T=(-f+C)/(2*p);0<T&&T<1&&h.push(T);const _=(-f-C)/(2*p);0<_&&_<1&&h.push(_)}let m=h.length;const y=m,v=KM(n,e,t,r,i,s,o,a);for(;m--;){const{x,y:S}=v(h[m]);d[0][m]=x,d[1][m]=S}d[0][y]=n,d[1][y]=e,d[0][y+1]=o,d[1][y+1]=a;const w=[new A(Math.min(...d[0]),Math.min(...d[1])),new A(Math.max(...d[0]),Math.max(...d[1]))];return pe.cachesBoundsOfCurve&&(zc.boundsOfCurveCache[l]=w),w}const P$=(n,e,t)=>{let[r,i,s,o,a,l,c,u]=t;const h=((d,f,p,g,m,y,v)=>{if(p===0||g===0)return[];let w=0,x=0,S=0;const C=Math.PI,T=v*ib,_=Pi(T),M=Ri(T),P=.5*(-M*d-_*f),$=.5*(-M*f+_*d),N=p**2,H=g**2,D=$**2,V=P**2,U=N*H-N*D-H*V;let G=Math.abs(p),R=Math.abs(g);if(U<0){const _t=Math.sqrt(1-U/(N*H));G*=_t,R*=_t}else S=(m===y?-1:1)*Math.sqrt(U/(N*D+H*V));const I=S*G*$/R,z=-S*R*P/G,ee=M*I-_*z+.5*d,X=_*I+M*z+.5*f;let ie=X1(1,0,(P-I)/G,($-z)/R),te=X1((P-I)/G,($-z)/R,(-P-I)/G,(-$-z)/R);y===0&&te>0?te-=2*C:y===1&&te<0&&(te+=2*C);const _e=Math.ceil(Math.abs(te/C*2)),Re=[],de=te/_e,Bi=8/3*Math.sin(de/4)*Math.sin(de/4)/Math.sin(de/2);let Rn=ie+de;for(let _t=0;_t<_e;_t++)Re[_t]=R$(ie,Rn,M,_,G,R,ee,X,Bi,w,x),w=Re[_t][5],x=Re[_t][6],ie=Rn,Rn+=de;return Re})(c-n,u-e,i,s,a,l,o);for(let d=0,f=h.length;d<f;d++)h[d][1]+=n,h[d][2]+=e,h[d][3]+=n,h[d][4]+=e,h[d][5]+=n,h[d][6]+=e;return h},D$=n=>{let e=0,t=0,r=0,i=0;const s=[];let o,a=0,l=0;for(const c of n){const u=[...c];let h;switch(u[0]){case"l":u[1]+=e,u[2]+=t;case"L":e=u[1],t=u[2],h=["L",e,t];break;case"h":u[1]+=e;case"H":e=u[1],h=["L",e,t];break;case"v":u[1]+=t;case"V":t=u[1],h=["L",e,t];break;case"m":u[1]+=e,u[2]+=t;case"M":e=u[1],t=u[2],r=u[1],i=u[2],h=["M",e,t];break;case"c":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t,u[5]+=e,u[6]+=t;case"C":a=u[3],l=u[4],e=u[5],t=u[6],h=["C",u[1],u[2],a,l,e,t];break;case"s":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"S":o==="C"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[3],t=u[4],h=["C",a,l,u[1],u[2],e,t],a=h[3],l=h[4];break;case"q":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"Q":a=u[1],l=u[2],e=u[3],t=u[4],h=["Q",a,l,e,t];break;case"t":u[1]+=e,u[2]+=t;case"T":o==="Q"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[1],t=u[2],h=["Q",a,l,e,t];break;case"a":u[6]+=e,u[7]+=t;case"A":P$(e,t,u).forEach(d=>s.push(d)),e=u[6],t=u[7];break;case"z":case"Z":e=r,t=i,h=["Z"]}h?(s.push(h),o=h[0]):o=""}return s},zf=(n,e,t,r)=>Math.sqrt((t-n)**2+(r-e)**2),KM=(n,e,t,r,i,s,o,a)=>l=>{const c=l**3,u=(f=>3*f**2*(1-f))(l),h=(f=>3*f*(1-f)**2)(l),d=(f=>(1-f)**3)(l);return new A(o*c+i*u+t*h+n*d,a*c+s*u+r*h+e*d)},XM=n=>n**2,JM=n=>2*n*(1-n),QM=n=>(1-n)**2,N$=(n,e,t,r,i,s,o,a)=>l=>{const c=XM(l),u=JM(l),h=QM(l),d=3*(h*(t-n)+u*(i-t)+c*(o-i)),f=3*(h*(r-e)+u*(s-r)+c*(a-s));return Math.atan2(f,d)},I$=(n,e,t,r,i,s)=>o=>{const a=XM(o),l=JM(o),c=QM(o);return new A(i*a+t*l+n*c,s*a+r*l+e*c)},j$=(n,e,t,r,i,s)=>o=>{const a=1-o,l=2*(a*(t-n)+o*(i-t)),c=2*(a*(r-e)+o*(s-r));return Math.atan2(c,l)},Q1=(n,e,t)=>{let r=new A(e,t),i=0;for(let s=1;s<=100;s+=1){const o=n(s/100);i+=zf(r.x,r.y,o.x,o.y),r=o}return i},L$=(n,e)=>{let t,r=0,i=0,s={x:n.x,y:n.y},o=O({},s),a=.01,l=0;const c=n.iterator,u=n.angleFinder;for(;i<e&&a>1e-4;)o=c(r),l=r,t=zf(s.x,s.y,o.x,o.y),t+i>e?(r-=a,a/=2):(s=o,r+=a,i+=t);return O(O({},o),{},{angle:u(l)})},ZM=n=>{let e,t,r=0,i=0,s=0,o=0,a=0;const l=[];for(const c of n){const u={x:i,y:s,command:c[0],length:0};switch(c[0]){case"M":t=u,t.x=o=i=c[1],t.y=a=s=c[2];break;case"L":t=u,t.length=zf(i,s,c[1],c[2]),i=c[1],s=c[2];break;case"C":e=KM(i,s,c[1],c[2],c[3],c[4],c[5],c[6]),t=u,t.iterator=e,t.angleFinder=N$(i,s,c[1],c[2],c[3],c[4],c[5],c[6]),t.length=Q1(e,i,s),i=c[5],s=c[6];break;case"Q":e=I$(i,s,c[1],c[2],c[3],c[4]),t=u,t.iterator=e,t.angleFinder=j$(i,s,c[1],c[2],c[3],c[4]),t.length=Q1(e,i,s),i=c[3],s=c[4];break;case"Z":t=u,t.destX=o,t.destY=a,t.length=zf(i,s,o,a),i=o,s=a}r+=t.length,l.push(t)}return l.push({length:r,x:i,y:s}),l},F$=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ZM(n),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const i=t[r],s=e/i.length,o=n[r];switch(i.command){case"M":return{x:i.x,y:i.y,angle:0};case"Z":return O(O({},new A(i.x,i.y).lerp(new A(i.destX,i.destY),s)),{},{angle:Math.atan2(i.destY-i.y,i.destX-i.x)});case"L":return O(O({},new A(i.x,i.y).lerp(new A(o[1],o[2]),s)),{},{angle:Math.atan2(o[2]-i.y,o[1]-i.x)});case"C":case"Q":return L$(i,e)}},W$=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Z1=new RegExp(M$,"g"),B$=new RegExp(br,"gi"),z$={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},$$=n=>{var e;const t=[],r=(e=n.match(W$))!==null&&e!==void 0?e:[];for(const i of r){const s=i[0];if(s==="z"||s==="Z"){t.push([s]);continue}const o=z$[s.toLowerCase()];let a=[];if(s==="a"||s==="A"){Z1.lastIndex=0;for(let l=null;l=Z1.exec(i);)a.push(...l.slice(1))}else a=i.match(B$)||[];for(let l=0;l<a.length;l+=o){const c=new Array(o),u=A$[s];c[0]=l>0&&u?u:s;for(let h=0;h<o;h++)c[h+1]=parseFloat(a[l+h]);t.push(c)}}return t},H$=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=new A(n[0]),r=new A(n[1]),i=1,s=0;const o=[],a=n.length,l=a>2;let c;for(l&&(i=n[2].x<r.x?-1:n[2].x===r.x?0:1,s=n[2].y<r.y?-1:n[2].y===r.y?0:1),o.push(["M",t.x-i*e,t.y-s*e]),c=1;c<a;c++){if(!t.eq(r)){const u=t.midPointFrom(r);o.push(["Q",t.x,t.y,u.x,u.y])}t=n[c],c+1<n.length&&(r=n[c+1])}return l&&(i=t.x>n[c-2].x?1:t.x===n[c-2].x?0:-1,s=t.y>n[c-2].y?1:t.y===n[c-2].y?0:-1),o.push(["L",t.x+i*e,t.y+s*e]),o},eA=(n,e)=>n.map(t=>t.map((r,i)=>i===0||e===void 0?r:ke(r,e)).join(" ")).join(" ");function X0(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(r=>{let[i,s]=r;return t.setProperty(i,s)}))}class U$ extends TM{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),E(this,"upper",void 0),E(this,"container",void 0);const{el:i}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(i,{allowTouchScrolling:t}),this.applyCanvasStyle(s,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(r),i.parentNode&&i.parentNode.replaceChild(o,i),o.append(i,s),this.container=o}createUpperCanvas(){const{el:e}=this.lower,t=Di();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=ql().createElement("div");return e.setAttribute("data-fabric","wrapper"),X0(e,{position:"relative"}),k1(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:i}=t;X0(e,O(O({},r),{},{"touch-action":i?"manipulation":dn})),k1(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:i}=this.upper;kM(r,i,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),$0(this.upper.el,e),$0(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:i}=this.upper;super.cleanupDOM(e),t.removeChild(i),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),Xr().dispose(this.upper.el),delete this.upper,delete this.container}}class kg extends rh{constructor(){super(...arguments),E(this,"targets",[]),E(this,"_hoveredTargets",[]),E(this,"_objectsToRender",void 0),E(this,"_currentTransform",null),E(this,"_groupSelector",null),E(this,"contextTopDirty",!1)}static getDefaults(){return O(O({},super.getDefaults()),kg.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new U$(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const i=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-t+i,-r+i),s.transform(...this.viewportTransform);const o=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=o,s.restore();const a=Math.round(i*this.getRetinaScaling());return Y5(s,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),i=this._activeObject;return!!(!t||t&&i&&r.length>1&&r.indexOf(t)===-1&&i!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&i&&i!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let i;return t===yg||t===gn||t===Jn||t===Eu?i=this.centeredScaling||e.centeredScaling:t===ab&&(i=this.centeredRotation||e.centeredRotation),i?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=qe:["mr","tr","br"].includes(t)&&(r.x=ye),["tl","mt","tr"].includes(t)?r.y=z0:["bl","mb","br"].includes(t)&&(r.y=hn)),r}_setupCurrentTransform(e,t,r){var i;const s=t.group?ol(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:o="",control:a}=t.getActiveControl()||{},l=r&&a?(i=a.getActionHandler(e,t,a))===null||i===void 0?void 0:i.bind(a):u5,c=((f,p,g,m)=>{if(!p||!f)return"drag";const y=m.controls[p];return y.getActionName(g,y,m)})(r,o,e,t),u=e[this.centeredKey],h=this._shouldCenterTransform(t,c,u)?{x:ue,y:ue}:this._getOriginFromCorner(t,o),d={target:t,action:c,actionHandler:l,actionPerformed:!1,corner:o,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:s.x-t.left,offsetY:s.y-t.top,originX:h.x,originY:h.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:Ke(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:u,original:O(O({},_M(t)),{},{originX:h.x,originY:h.y})};this._currentTransform=d,this.fire("before:transform",{e,transform:d})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:i,deltaY:s}=this._groupSelector,o=new A(t,r).transform(this.viewportTransform),a=new A(t+i,r+s).transform(this.viewportTransform),l=this.selectionLineWidth/2;let c=Math.min(o.x,a.x),u=Math.min(o.y,a.y),h=Math.max(o.x,a.x),d=Math.max(o.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(c,u,h-c,d-u)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,c+=l,u+=l,h-=l,d-=l,It.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(c,u,h-c,d-u))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,i=this.getActiveObjects();if(this.targets=[],r&&i.length>=1){if(r.findControl(t,H0(e))||i.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&o&&o!==r?(this.targets=s,r):o}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const i=this.getZoom(),s=e.padding/i;if(s){const[o,a,l,c]=r,u=Math.atan2(a.y-o.y,a.x-o.x),h=Ri(u)*s,d=Pi(u)*s,f=h+d,p=h-d;r=[new A(o.x-p,o.y-f),new A(a.x+f,a.y-p),new A(l.x+p,l.y+f),new A(c.x-f,c.y+p)]}return Ie.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,ol(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const i=e[r];if(this._checkTarget(i,t)){if(Vd(i)&&i.subTargetCheck){const s=this._searchPossibleTargets(i._objects,t);s&&this.targets.push(s)}return i}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&Vd(r)&&r.interactive&&this.targets[0]){const i=this.targets;for(let s=i.length-1;s>0;s--){const o=i[s];if(!Vd(o)||!o.interactive)return o}return i[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,i=r.getBoundingClientRect();let s=r5(e),o=i.width||0,a=i.height||0;o&&a||(hn in i&&z0 in i&&(a=Math.abs(i.top-i.bottom)),qe in i&&ye in i&&(o=Math.abs(i.right-i.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,t||(s=ol(s,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(s.x/=l,s.y/=l);const c=o===0||a===0?new A(1,1):new A(r.width/o,r.height/a);return s.multiply(c)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Di(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return fo(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,i=!1;const s=this.getActiveObjects(),o=[],a=[];e.forEach(l=>{s.includes(l)||(r=!0,l.fire("deselected",{e:t,target:l}),a.push(l))}),s.forEach(l=>{e.includes(l)||(r=!0,l.fire("selected",{e:t,target:l}),o.push(l))}),e.length>0&&s.length>0?(i=!0,r&&this.fire("selection:updated",{e:t,selected:o,deselected:a})):s.length>0?(i=!0,this.fire("selection:created",{e:t,selected:o})):e.length>0&&(i=!0,this.fire("selection:cleared",{e:t,deselected:a})),i&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),i=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),i}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,fo(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),fo(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const i=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),i}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,i={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",i),r.fire(Df,i))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;fo(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const i=this._realizeGroupTransformOnObject(e),s=super._toObject(e,t,r);return e.set(i),s}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&fo(t)&&this._activeObject===t){const r=Jl(e,["angle","flipX","flipY",ye,gn,Jn,Yl,Kl,hn]);return s5(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const i=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(i)}}E(kg,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class V${constructor(e){E(this,"targets",[]),E(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:i}=e.getActiveObject()||{};i&&i.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),Oa(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const G$=["target","oldTarget","fireCanvas","e"],yn={passive:!1},wa=(n,e)=>{const t=n.getViewportPoint(e),r=n.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},Zi=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.addEventListener(...t)},Dn=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.removeEventListener(...t)},q$={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class J0 extends kg{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),E(this,"_isClick",void 0),E(this,"textEditingManager",new V$(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(Zi,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,i=this._getEventPrefix();e(CM(r),"resize",this._onResize),e(r,i+"down",this._onMouseDown),e(r,"".concat(i,"move"),this._onMouseMove,yn),e(r,"".concat(i,"out"),this._onMouseOut),e(r,"".concat(i,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"click",this._onClick),e(r,"dblclick",this._onClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,yn)}removeListeners(){this.addOrRemove(Dn,"remove");const e=this._getEventPrefix(),t=mr(this.upperCanvasEl);Dn(t,"".concat(e,"up"),this._onMouseUp),Dn(t,"touchend",this._onTouchEnd,yn),Dn(t,"".concat(e,"move"),this._onMouseMove,yn),Dn(t,"touchmove",this._onMouseMove,yn),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=O({e},wa(this,e));this.fire("mouse:out",O(O({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",O({},r)),this._hoveredTargets.forEach(i=>{this.fire("mouse:out",O(O({},r),{},{target:i})),i&&i.fire("mouseout",O({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",O({e},wa(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void Zi(this.upperCanvasEl,"drag",this._onDragProgress)}T1(e)}_renderDragEffects(e,t,r){let i=!1;const s=this._dropTarget;s&&s!==t&&s!==r&&(s.clearContextTop(),i=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),t&&(o.save(),t.transform(o),t.renderDragSourceEffect(e),o.restore(),i=!0),r&&(o.save(),r.transform(o),r.renderDropTargetEffect(e),o.restore(),i=!0),o.restore(),i&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==dn,r=t?this._activeObject:void 0,i={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};Dn(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",i),this._dragSource&&this._dragSource.fire("dragend",i),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:i}=this.findDragTargets(e),s=this._dragSource,o={e,target:r,subTargets:i,dragSource:s,canDrop:!1,dropTarget:void 0};let a;this.fire(t,o),this._fireEnterLeaveEvents(r,o),r&&(r.canDrop(e)&&(a=r),r.fire(t,o));for(let l=0;l<i.length;l++){const c=i[l];c.canDrop(e)&&(a=c),c.fire(t,o)}this._renderDragEffects(e,s,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),i={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",i),this._fireEnterLeaveEvents(t,i)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),i=this._basicEventHandler("drop:before",O({e,target:t,subTargets:r,dragSource:this._dragSource},wa(this,e)));i.didDrop=!1,i.dropTarget=void 0,this._basicEventHandler("drop",i),this.fire("drop:after",i)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],i=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&T1(e),this._basicEventHandler("contextmenu",i),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),t==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),t==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const i=this.upperCanvasEl,s=this._getEventPrefix(),o=mr(i);Zi(o,"touchend",this._onTouchEnd,yn),t&&Zi(o,"touchmove",this._onMouseMove,yn),Dn(i,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();Dn(t,"".concat(r,"move"),this._onMouseMove,yn);const i=mr(t);Zi(i,"".concat(r,"up"),this._onMouseUp),Zi(i,"".concat(r,"move"),this._onMouseMove,yn)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=mr(this.upperCanvasEl);Dn(r,"touchend",this._onTouchEnd,yn),Dn(r,"touchmove",this._onMouseMove,yn),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Zi(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const i=mr(this.upperCanvasEl);Dn(i,"".concat(r,"up"),this._onMouseUp),Dn(i,"".concat(r,"move"),this._onMouseMove,yn),Zi(t,"".concat(r,"move"),this._onMouseMove,yn)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,i=this._isClick,s=this._target,{button:o}=e;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,l,c=!1;if(r&&(this._finalizeCurrentTransform(e),c=r.actionPerformed),!i){const u=s===this._activeObject;this.handleSelection(e),c||(c=this._shouldRender(s)||!u&&s===this._activeObject)}if(s){const u=s.findControl(this.getViewportPoint(e),H0(e)),{key:h,control:d}=u||{};if(l=h,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,e),c=!0;else if(d){const f=d.getMouseUpHandler(e,s,d);f&&(a=this.getScenePoint(e),f.call(d,e,r,a.x,a.y))}s.isMoving=!1}if(r&&(r.target!==s||r.corner!==l)){const u=r.target&&r.target.controls[r.corner],h=u&&u.getMouseUpHandler(e,r.target,u);a=a||this.getScenePoint(e),h&&h.call(u,e,r,a.x,a.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),c?this.requestRenderAll():i||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:i=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let s=0;s<i.length;s++)i[s]!==r&&i[s].fire(e,t);return t}_handleEvent(e,t,r){const i=this._target,s=this.targets||[],o=O(O(O({e,target:i,subTargets:s},wa(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),t==="down:before"||t==="down"?r:{});this.fire("mouse:".concat(t),o),i&&i.fire("mouse".concat(t),o);for(let a=0;a<s.length;a++)s[a]!==i&&s[a].fire("mouse".concat(t),o)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,r=!!t&&t===this._activeObject;const{button:i}=e;if(i)return(this.fireMiddleClick&&i===1||this.fireRightClick&&i===2)&&this._handleEvent(e,"down",{alreadySelected:r}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let s=this._shouldRender(t),o=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,o=!0,s=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const a=this.getScenePoint(e);this._groupSelector={x:a.x,y:a.y,deltaY:0,deltaX:0}}if(r=!!t&&t===this._activeObject,t){t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const a=t.findControl(this.getViewportPoint(e),H0(e));if(t===this._activeObject&&(a||!o)){this._setupCurrentTransform(e,t,r);const l=a?a.control:void 0,c=this.getScenePoint(e),u=l&&l.getMouseDownHandler(e,t,l);u&&u.call(l,e,this._currentTransform,c.x,c.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:r}),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=ol(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,i=this._hoveredTargets,s=this.targets,o=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("mouse",{e,target:s[a],oldTarget:i[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,i=this._hoveredTargets,s=this.targets,o=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("drag",O(O({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",O(O({},t),{},{target:s[a],oldTarget:i[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:i,fireCanvas:s,e:o}=t,a=Ne(t,G$);const{targetIn:l,targetOut:c,canvasIn:u,canvasOut:h}=q$[e],d=i!==r;if(i&&d){const f=O(O({},a),{},{e:o,target:i,nextTarget:r},wa(this,o));s&&this.fire(h,f),i.fire(c,f)}if(r&&d){const f=O(O({},a),{},{e:o,target:r,previousTarget:i},wa(this,o));s&&this.fire(u,f),r.fire(l,f)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,i=r.target,s=i.group?ol(t,void 0,i.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,s),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:i,actionHandler:s,target:o}=t,a=!!s&&s(e,t,r.x,r.y);a&&o.setCoords(),i==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const i=fo(this._activeObject)?this._activeObject:null,s=(!i||t.group!==i)&&t.findControl(this.getViewportPoint(e));if(s){const o=s.control;this.setCursor(o.cursorStyleHandler(e,o,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(o=>{r=o.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,i=fo(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||i)&&(i||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(i){const s=r.getObjects();if(t===r){const o=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(s,o)||this.searchPossibleTargets(this._objects,o))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(s,e)}else{r.isEditing&&r.exitEditing();const s=new(Y.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(r,t),this._hoveredTarget=s,this._setActiveObject(s,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:i,deltaY:s}=this._groupSelector,o=new A(t,r),a=o.add(new A(i,s)),l=o.min(a),c=o.max(a).subtract(l),u=this.collectObjects({left:l.x,top:l.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),h=o.eq(a)?u[0]?[u[0]]:[]:u.length>1?u.filter(d=>!d.onSelect({e})).reverse():u;if(h.length===1)this.setActiveObject(h[0],e);else if(h.length>1){const d=Y.getClass("ActiveSelection");this.setActiveObject(new d(h,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const tA={x1:0,y1:0,x2:0,y2:0},Y$=O(O({},tA),{},{r1:0,r2:0}),Ka=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,K$=/^(\d+\.\d+)%|(\d+)%$/;function nA(n){return n&&K$.test(n)}function rA(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(nA(n)?100:1):NaN;return Al(0,Ka(t,e),1)}const X$=/\s*;\s*/,J$=/\s*:\s*/;function Q$(n,e){let t,r;const i=n.getAttribute("style");if(i){const o=i.split(X$);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,c]=o[a].split(J$).map(u=>u.trim());l==="stop-color"?t=c:l==="stop-opacity"&&(r=c)}}const s=new me(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:rA(n.getAttribute("offset"),0),color:s.toRgb(),opacity:Ka(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*s.getAlpha()*e}}function Z$(n,e){const t=[],r=n.getElementsByTagName("stop"),i=rA(e,1);for(let s=r.length;s--;)t.push(Q$(r[s],i));return t}function iA(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function sA(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function ir(n,e){return n.getAttribute(e)}function e3(n,e){return function(t,r){let i,{width:s,height:o,gradientUnits:a}=r;return Object.keys(t).reduce((l,c)=>{const u=t[c];return u==="Infinity"?i=1:u==="-Infinity"?i=0:(i=typeof u=="string"?parseFloat(u):u,typeof u=="string"&&nA(u)&&(i*=.01,a==="pixels"&&(c!=="x1"&&c!=="x2"&&c!=="r2"||(i*=s),c!=="y1"&&c!=="y2"||(i*=o)))),l[c]=i,l},{})}(iA(n)==="linear"?function(t){return{x1:ir(t,"x1")||0,y1:ir(t,"y1")||0,x2:ir(t,"x2")||"100%",y2:ir(t,"y2")||0}}(n):function(t){return{x1:ir(t,"fx")||ir(t,"cx")||"50%",y1:ir(t,"fy")||ir(t,"cy")||"50%",r1:0,x2:ir(t,"cx")||"50%",y2:ir(t,"cy")||"50%",r2:ir(t,"r")||"50%"}}(n),O(O({},e),{},{gradientUnits:sA(n)}))}class Gh{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:i={},colorStops:s=[],offsetX:o=0,offsetY:a=0,gradientTransform:l,id:c}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:O(O({},t==="radial"?Y$:tA),i),colorStops:s,offsetX:o,offsetY:a,gradientTransform:l,id:c?"".concat(c,"_").concat(Ys()):Ys()})}addColorStop(e){for(const t in e){const r=new me(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return O(O({},Jl(this,e)),{},{type:this.type,coords:O({},this.coords),colorStops:this.colorStops.map(t=>O({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],i=this.gradientTransform?this.gradientTransform.concat():Gt.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(h=>O({},h)).sort((h,d)=>h.offset-d.offset);let a=-this.offsetX,l=-this.offsetY;var c;s==="objectBoundingBox"?(a/=e.width,l/=e.height):(a+=e.width/2,l+=e.height/2),(c=e)&&typeof c._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,l-=e.pathOffset.y),i[4]-=a,i[5]-=l;const u=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Mu(i),'"'),""].join(" ");if(this.type==="linear"){const{x1:h,y1:d,x2:f,y2:p}=this.coords;r.push("<linearGradient ",u,' x1="',h,'" y1="',d,'" x2="',f,'" y2="',p,`">
`)}else if(this.type==="radial"){const{x1:h,y1:d,x2:f,y2:p,r1:g,r2:m}=this.coords,y=g>m;r.push("<radialGradient ",u,' cx="',y?h:f,'" cy="',y?d:p,'" r="',y?g:m,'" fx="',y?f:h,'" fy="',y?p:d,`">
`),y&&(o.reverse(),o.forEach(w=>{w.offset=1-w.offset}));const v=Math.min(g,m);if(v>0){const w=v/Math.max(g,m);o.forEach(x=>{x.offset+=w*(1-x.offset)})}}return o.forEach(h=>{let{color:d,offset:f,opacity:p}=h;r.push("<stop ",'offset="',100*f+"%",'" style="stop-color:',d,p!==void 0?";stop-opacity: "+p:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:i,y2:s,r1:o,r2:a}=this.coords,l=this.type==="linear"?e.createLinearGradient(t,r,i,s):e.createRadialGradient(t,r,o,i,s,a);return this.colorStops.forEach(c=>{let{color:u,opacity:h,offset:d}=c;l.addColorStop(d,h!==void 0?new me(u).setAlpha(h).toRgba():u)}),l}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(O(O({},e),{},{colorStops:t?t.map(i=>O({},i)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const i=sA(e),s=t._findCenterFromElement();return new this(O({id:e.getAttribute("id")||void 0,type:iA(e),coords:e3(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:Z$(e,r.opacity),gradientUnits:i,gradientTransform:q0(e.getAttribute("gradientTransform")||"")},i==="pixels"?{offsetX:t.width/2-s.x,offsetY:t.height/2-s.y}:{offsetX:0,offsetY:0}))}}E(Gh,"type","Gradient"),Y.setClass(Gh,"gradient"),Y.setClass(Gh,"linear"),Y.setClass(Gh,"radial");const t3=["type","source","patternTransform"];class Hm{get type(){return"pattern"}set type(e){qs("warn","Setting type has no effect",e)}constructor(e){E(this,"repeat","repeat"),E(this,"offsetX",0),E(this,"offsetY",0),E(this,"crossOrigin",""),this.id=Ys(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return O(O({},Jl(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:ke(this.offsetX,pe.NUM_FRACTION_DIGITS),offsetY:ke(this.offsetY,pe.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:i,repeat:s,id:o}=this,a=Ka(this.offsetX/t,0),l=Ka(this.offsetY/r,0),c=s==="repeat-y"||s==="no-repeat"?1+Math.abs(a||0):Ka(i.width/t,0),u=s==="repeat-x"||s==="no-repeat"?1+Math.abs(l||0):Ka(i.height/r,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(l,'" width="').concat(c,'" height="').concat(u,'">'),'<image x="0" y="0" width="'.concat(i.width,'" height="').concat(i.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:i,patternTransform:s}=e,o=Ne(e,t3);const a=await qd(i,O(O({},t),{},{crossOrigin:o.crossOrigin}));return new this(O(O({},o),{},{patternTransform:s&&s.slice(0),source:a}))}}E(Hm,"type","Pattern"),Y.setClass(Hm),Y.setClass(Hm,"pattern");class n3{constructor(e){E(this,"color","rgb(0, 0, 0)"),E(this,"width",1),E(this,"shadow",null),E(this,"strokeLineCap","round"),E(this,"strokeLineJoin","round"),E(this,"strokeMiterLimit",10),E(this,"strokeDashArray",null),E(this,"limitedToCanvasSize",!1),this.canvas=e}_setBrushStyles(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])}_saveAndTransform(e){const t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}needsFullRender(){return new me(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const e=this.canvas,t=this.shadow,r=e.contextTop,i=e.getZoom()*e.getRetinaScaling();r.shadowColor=t.color,r.shadowBlur=t.blur*i,r.shadowOffsetX=t.offsetX*i,r.shadowOffsetY=t.offsetY*i}_resetShadow(){const e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0}_isOutSideCanvas(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}const r3=["path","left","top"],i3=["d"];class fs extends It{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:i,top:s}=t,o=Ne(t,r3);super(),Object.assign(this,fs.ownDefaults),this.setOptions(o),this._setPath(e||[],!0),typeof i=="number"&&this.set(ye,i),typeof s=="number"&&this.set(hn,s)}_setPath(e,t){this.path=D$(Array.isArray(e)?e:$$(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new A(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const i of this.path)switch(i[0]){case"L":e.lineTo(i[1]+t,i[2]+r);break;case"M":e.moveTo(i[1]+t,i[2]+r);break;case"C":e.bezierCurveTo(i[1]+t,i[2]+r,i[3]+t,i[4]+r,i[5]+t,i[6]+r);break;case"Q":e.quadraticCurveTo(i[1]+t,i[2]+r,i[3]+t,i[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return O(O({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=eA(this.path,pe.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=pe.NUM_FRACTION_DIGITS;return" translate(".concat(ke(-this.pathOffset.x,e),", ").concat(ke(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:i}=this._calcDimensions();this.set({width:t,height:r,pathOffset:i}),e&&this.setPositionByOrigin(i,ue,ue)}_calcBoundsFromPath(){const e=[];let t=0,r=0,i=0,s=0;for(const o of this.path)switch(o[0]){case"L":i=o[1],s=o[2],e.push({x:t,y:r},{x:i,y:s});break;case"M":i=o[1],s=o[2],t=i,r=s;break;case"C":e.push(...J1(i,s,o[1],o[2],o[3],o[4],o[5],o[6])),i=o[5],s=o[6];break;case"Q":e.push(...J1(i,s,o[1],o[2],o[1],o[2],o[3],o[4])),i=o[3],s=o[4];break;case"Z":i=t,s=r}return Ci(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return O(O({},e),{},{pathOffset:new A(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const i=Fi(e,this.ATTRIBUTE_NAMES,r),{d:s}=i;return new this(s,O(O(O({},Ne(i,i3)),t),{},{left:void 0,top:void 0}))}}E(fs,"type","Path"),E(fs,"cacheProperties",[...Li,"path","fillRule"]),E(fs,"ATTRIBUTE_NAMES",[...eo,"d"]),Y.setClass(fs),Y.setSVGClass(fs);class $f extends n3{constructor(e){super(e),E(this,"decimate",.4),E(this,"drawStraightLine",!1),E(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(e,t,r){const i=t.midPointFrom(r);return e.quadraticCurveTo(t.x,t.y,i.x,i.y),i}onMouseDown(e,t){let{e:r}=t;this.canvas._isMainEvent(r)&&(this.drawStraightLine=!!this.straightLineKey&&r[this.straightLineKey],this._prepareForDrawing(e),this._addPoint(e),this._render())}onMouseMove(e,t){let{e:r}=t;if(this.canvas._isMainEvent(r)&&(this.drawStraightLine=!!this.straightLineKey&&r[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(e))&&this._addPoint(e)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const i=this._points,s=i.length,o=this.canvas.contextTop;this._saveAndTransform(o),this.oldEnd&&(o.beginPath(),o.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=$f.drawSegment(o,i[s-2],i[s-1]),o.stroke(),o.restore()}}onMouseUp(e){let{e:t}=e;return!this.canvas._isMainEvent(t)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(e){this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)}_addPoint(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop,t=this._points[0],r=this._points[1];if(this._saveAndTransform(e),e.beginPath(),this._points.length===2&&t.x===r.x&&t.y===r.y){const i=this.width/1e3;t.x-=i,r.x+=i}e.moveTo(t.x,t.y);for(let i=1;i<this._points.length;i++)$f.drawSegment(e,t,r),t=this._points[i],r=this._points[i+1];e.lineTo(t.x,t.y),e.stroke(),e.restore()}convertPointsToSVGPath(e){const t=this.width/1e3;return H$(e,t)}createPath(e){const t=new fs(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new Yr(this.shadow)),t}decimatePoints(e,t){if(e.length<=2)return e;let r,i=e[0];const s=this.canvas.getZoom(),o=Math.pow(t/s,2),a=e.length-1,l=[i];for(let c=1;c<a-1;c++)r=Math.pow(i.x-e[c].x,2)+Math.pow(i.y-e[c].y,2),r>=o&&(i=e[c],l.push(i));return l.push(e[a]),l}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const e=this.convertPointsToSVGPath(this._points);if(function(r){return eA(r)==="M 0 0 Q 0 0 0 0 L 0 0"}(e))return void this.canvas.requestRenderAll();const t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}}const s3=["left","top","radius"],oA=["radius","startAngle","endAngle","counterClockwise"];class pi extends It{static getDefaults(){return O(O({},super.getDefaults()),pi.ownDefaults)}constructor(e){super(),Object.assign(this,pi.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Ke(this.startAngle),Ke(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(gn)}getRadiusY(){return this.get("radius")*this.get(Jn)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...oA,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=Ke(this.startAngle),i=Ke(this.endAngle),s=Ri(r)*t,o=Pi(r)*t,a=Ri(i)*t,l=Pi(i)*t,c=e>180?1:0,u=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(o," A ").concat(t," ").concat(t," 0 ").concat(c," ").concat(u," ").concat(a," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const i=Fi(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:o=0,radius:a=0}=i;return new this(O(O({},Ne(i,s3)),{},{radius:a,left:s-a,top:o-a}))}static fromObject(e){return super._fromObject(e)}}E(pi,"type","Circle"),E(pi,"cacheProperties",[...Li,...oA]),E(pi,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),E(pi,"ATTRIBUTE_NAMES",["cx","cy","r",...eo]),Y.setClass(pi),Y.setSVGClass(pi);const o3=["x1","y1","x2","y2"],a3=["x1","y1","x2","y2"],Q0=["x1","x2","y1","y2"];class po extends It{constructor(){let[e,t,r,i]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,po.ownDefaults),this.setOptions(s),this.x1=e,this.x2=r,this.y1=t,this.y2=i,this._setWidthHeight();const{left:o,top:a}=s;typeof o=="number"&&this.set(ye,o),typeof a=="number"&&this.set(hn,a)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:i}=this;this.width=Math.abs(r-e),this.height=Math.abs(i-t);const{left:s,top:o,width:a,height:l}=Ci([{x:e,y:t},{x:r,y:i}]),c=new A(s+a/2,o+l/2);this.setPositionByOrigin(c,ue,ue)}_set(e,t){return super._set(e,t),Q0.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var i;zn(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(i=this.stroke)!==null&&i!==void 0?i:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new A((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return O(O({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:i,width:s,height:o}=this,a=e<=t?-1:1,l=r<=i?-1:1;return{x1:a*s/2,x2:a*-s/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:i}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(i,`" />
`)]}static async fromElement(e,t,r){const i=Fi(e,this.ATTRIBUTE_NAMES,r),{x1:s=0,y1:o=0,x2:a=0,y2:l=0}=i;return new this([s,o,a,l],Ne(i,o3))}static fromObject(e){let{x1:t,y1:r,x2:i,y2:s}=e,o=Ne(e,a3);return this._fromObject(O(O({},o),{},{points:[t,r,i,s]}),{extraParam:"points"})}}E(po,"type","Line"),E(po,"cacheProperties",[...Li,...Q0]),E(po,"ATTRIBUTE_NAMES",eo.concat(Q0)),Y.setClass(po),Y.setSVGClass(po);class xo extends It{static getDefaults(){return O(O({},super.getDefaults()),xo.ownDefaults)}constructor(e){super(),Object.assign(this,xo.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}E(xo,"type","Triangle"),E(xo,"ownDefaults",{width:100,height:100}),Y.setClass(xo),Y.setSVGClass(xo);const aA=["rx","ry"];class gi extends It{static getDefaults(){return O(O({},super.getDefaults()),gi.ownDefaults)}constructor(e){super(),Object.assign(this,gi.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(gn)}getRy(){return this.get("ry")*this.get(Jn)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...aA,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,Rf,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const i=Fi(e,this.ATTRIBUTE_NAMES,r);return i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,new this(i)}}function l3(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}E(gi,"type","Ellipse"),E(gi,"cacheProperties",[...Li,...aA]),E(gi,"ownDefaults",{rx:0,ry:0}),E(gi,"ATTRIBUTE_NAMES",[...eo,"cx","cy","rx","ry"]),Y.setClass(gi),Y.setSVGClass(gi);const c3=["left","top"],lA={exactBoundingBox:!1};class fr extends It{static getDefaults(){return O(O({},super.getDefaults()),fr.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),E(this,"strokeDiff",void 0),Object.assign(this,fr.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:i}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(ye,r),typeof i=="number"&&this.set(hn,i)}isOpen(){return!0}_projectStrokeOnPoints(e){return X5(this.points,e,this.isOpen())}_calcDimensions(e){e=O({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(c=>c.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new A,strokeOffset:new A,strokeDiff:new A};const r=Ci(t),i=vg(O(O({},e),{},{scaleX:1,scaleY:1})),s=Ci(this.points.map(c=>nn(c,i,!0))),o=new A(this.scaleX,this.scaleY);let a=r.left+r.width/2,l=r.top+r.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(Ke(this.skewX)),l-=a*Math.tan(Ke(this.skewY))),O(O({},r),{},{pathOffset:new A(a,l),strokeOffset:new A(s.left,s.top).subtract(new A(r.left,r.top)).multiply(o),strokeDiff:new A(r.width,r.height).subtract(new A(s.width,s.height)).multiply(o)})}_findCenterFromElement(){const e=Ci(this.points);return new A(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:i,height:s,pathOffset:o,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:i,height:s,pathOffset:o,strokeOffset:a,strokeDiff:l}),e&&this.setPositionByOrigin(new A(t+i/2,r+s/2),ue,ue)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new A(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var t,r;const{width:a,height:l}=this._calcDimensions(e);o=new A((t=e.width)!==null&&t!==void 0?t:a,(r=e.height)!==null&&r!==void 0?r:l)}else{var i,s;o=new A((i=e.width)!==null&&i!==void 0?i:this.width,(s=e.height)!==null&&s!==void 0?s:this.height)}return o.multiply(new A(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,i=super._set(e,t);return this.exactBoundingBox&&r&&((e===gn||e===Jn)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),i}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return O(O({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:r,y:i}=t;return{x:r,y:i}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,i=pe.NUM_FRACTION_DIGITS;for(let s=0,o=this.points.length;s<o;s++)e.push(ke(this.points[s].x-t,i),",",ke(this.points[s].y-r,i)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,i=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-i);for(let s=0;s<t;s++){const o=this.points[s];e.lineTo(o.x-r,o.y-i)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(l3(e.getAttribute("points")),O(O({},Ne(Fi(e,this.ATTRIBUTE_NAMES,r),c3)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}E(fr,"ownDefaults",lA),E(fr,"type","Polyline"),E(fr,"layoutProperties",[Yl,Kl,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),E(fr,"cacheProperties",[...Li,"points"]),E(fr,"ATTRIBUTE_NAMES",[...eo]),Y.setClass(fr),Y.setSVGClass(fr);class qh extends fr{isOpen(){return!1}}E(qh,"ownDefaults",lA),E(qh,"type","Polygon"),Y.setClass(qh),Y.setSVGClass(qh);class cA extends It{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const i in t[r])for(const s in t[r][i])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const i in r)for(const s in r[i])if(r[i][s][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,i,s=0,o=!0,a=0;for(const l in t){r=0;for(const c in t[l]){const u=t[l][c]||{};s++,u[e]!==void 0?(i?u[e]!==i&&(o=!1):i=u[e],u[e]===this[e]&&delete u[e]):o=!1,Object.keys(u).length!==0?r++:delete t[l][c]}r===0&&delete t[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&s===a&&(this[e]=i,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,i,s;for(i in t){for(s in r=t[i],r)delete r[s][e],Object.keys(r[s]).length===0&&delete r[s];Object.keys(r).length===0&&delete t[i]}}_extendStyles(e,t){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const s=hb(O(O({},this._getStyleDeclaration(r,i)),t),o=>o!==void 0);this._setStyleDeclaration(r,i,s)}getSelectionStyles(e,t,r){const i=[];for(let s=e;s<(t||e);s++)i.push(this.getStyleAtPosition(s,r));return i}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,i):this._getStyleDeclaration(r,i)}setSelectionStyles(e,t,r){for(let i=t;i<(r||t);i++)this._extendStyles(i,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const i=this.styles&&this.styles[e];return i&&(r=i[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return O(O({},Jl(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}E(cA,"_styleProperties",d5);const u3=/  +/g,h3=/"/g;function Um(n,e,t,r,i){return"		".concat(function(s,o){let{left:a,top:l,width:c,height:u}=o,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pe.NUM_FRACTION_DIGITS;const d=Au(ht,s,!1),[f,p,g,m]=[a,l,c,u].map(y=>ke(y,h));return"<rect ".concat(d,' x="').concat(f,'" y="').concat(p,'" width="').concat(g,'" height="').concat(m,'"></rect>')}(n,{left:e,top:t,width:r,height:i}),`
`)}const d3=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Vm;class zt extends cA{static getDefaults(){return O(O({},super.getDefaults()),zt.ownDefaults)}constructor(e,t){super(),E(this,"__charBounds",[]),Object.assign(this,zt.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=ZM(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(zr)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,i,s,o,a;for(let l=0,c=this._textLines.length;l<c;l++)if((this.textAlign===zr||l!==c-1&&!this.isEndOfWrapping(l))&&(i=0,s=this._textLines[l],t=this.getLineWidth(l),t<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){r=a.length,e=(this.width-t)/r;for(let u=0;u<=s.length;u++)o=this.__charBounds[l][u],this._reSpaceAndTab.test(s[u])?(o.width+=e,o.kernedWidth+=e,o.left+=i,i+=e):o.left+=i}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let i;for(i=0;i<r.length;i++){if(e<=r[i].length)return{lineIndex:i,charIndex:e};e-=r[i].length+this.missingNewlineOffset(i,t)}return{lineIndex:i-1,charIndex:r[i-1].length<e?r[i-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===fn?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case ue:e.textBaseline="middle";break;case"ascender":e.textBaseline=hn;break;case"descender":e.textBaseline=z0}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const i=this.getLineWidth(t);i>e&&(e=i)}return e}_renderTextLine(e,t,r,i,s,o){this._renderChars(e,t,r,i,s,o)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let i=this._getTopOffset();for(let s=0,o=this._textLines.length;s<o;s++){const a=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){i+=a;continue}const l=this._textLines[s].length,c=this._getLineLeftOffset(s);let u,h,d=0,f=0,p=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let g=0;g<l;g++){const m=this.__charBounds[s][g];h=this.getValueOfPropertyAt(s,g,"textBackgroundColor"),this.path?(e.save(),e.translate(m.renderLeft,m.renderTop),e.rotate(m.angle),e.fillStyle=h,h&&e.fillRect(-m.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),m.width,a/this.lineHeight),e.restore()):h!==p?(u=r+c+f,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=p,p&&e.fillRect(u,i,d,a/this.lineHeight),f=m.left,d=m.width,p=h):d+=m.kernedWidth}h&&!this.path&&(u=r+c+f,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=h,e.fillRect(u,i,d,a/this.lineHeight)),i+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,i){const s=zc.getFontCache(t),o=this._getFontDeclaration(t),a=r+e,l=r&&o===this._getFontDeclaration(i),c=t.fontSize/this.CACHE_FONT_SIZE;let u,h,d,f;if(r&&s[r]!==void 0&&(d=s[r]),s[e]!==void 0&&(f=u=s[e]),l&&s[a]!==void 0&&(h=s[a],f=h-d),u===void 0||d===void 0||h===void 0){const p=function(){return Vm||(Vm=Qn({width:0,height:0}).getContext("2d")),Vm}();this._setTextStyles(p,t,!0),u===void 0&&(f=u=p.measureText(e).width,s[e]=u),d===void 0&&l&&r&&(d=p.measureText(r).width,s[r]=d),l&&h===void 0&&(h=p.measureText(a).width,s[a]=h,f=h-d)}return{width:u*c,kernedWidth:f*c}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,i=0;const s=this.pathSide===qe,o=this.path,a=this._textLines[e],l=a.length,c=new Array(l);this.__charBounds[e]=c;for(let u=0;u<l;u++){const h=a[u];r=this._getGraphemeBox(h,e,u,t),c[u]=r,i+=r.kernedWidth,t=h}if(c[l]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let u=0;const h=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case ye:u=s?h-i:0;break;case ue:u=(h-i)/2;break;case qe:u=s?0:h-i}u+=this.pathStartOffset*(s?-1:1);for(let d=s?l-1:0;s?d>=0:d<l;s?d--:d++)r=c[d],u>h?u%=h:u<0&&(u+=h),this._setGraphemeOnPath(u,r),u+=r.kernedWidth}return{width:i,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,i=this.path,s=F$(i.path,r,i.segmentsInfo);t.renderLeft=s.x-i.pathOffset.x,t.renderTop=s.y-i.pathOffset.y,t.angle=s.angle+(this.pathSide===qe?Math.PI:0)}_getGraphemeBox(e,t,r,i,s){const o=this.getCompleteStyleDeclaration(t,r),a=i?this.getCompleteStyleDeclaration(t,r-1):{},l=this._measureChar(e,o,i,a);let c,u=l.kernedWidth,h=l.width;this.charSpacing!==0&&(c=this._getWidthOfCharSpacing(),h+=c,u+=c);const d={width:h,left:0,height:o.fontSize,kernedWidth:u,deltaY:o.deltaY};if(r>0&&!s){const f=this.__charBounds[t][r-1];d.left=f.left+f.width+l.kernedWidth-l.width}return d}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,i=this._textLines[e].length;r<i;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,i=this._textLines.length;r<i;r++)e=this.getHeightOfLine(r),t+=r===i-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const i=this._getLeftOffset(),s=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++){const l=this.getHeightOfLine(o),c=l/this.lineHeight,u=this._getLineLeftOffset(o);this._renderTextLine(t,e,this._textLines[o],i+u,s+r+c,o),r+=l}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(ht))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,i,s,o){const a=this.getHeightOfLine(o),l=this.textAlign.includes(zr),c=this.path,u=!l&&this.charSpacing===0&&this.isEmptyStyles(o)&&!c,h=this.direction==="ltr",d=this.direction==="ltr"?1:-1,f=t.direction;let p,g,m,y,v,w="",x=0;if(t.save(),f!==this.direction&&(t.canvas.setAttribute("dir",h?"ltr":"rtl"),t.direction=h?"ltr":"rtl",t.textAlign=h?ye:qe),s-=a*this._fontSizeFraction/this.lineHeight,u)return this._renderChar(e,t,o,0,r.join(""),i,s),void t.restore();for(let S=0,C=r.length-1;S<=C;S++)y=S===C||this.charSpacing||c,w+=r[S],m=this.__charBounds[o][S],x===0?(i+=d*(m.kernedWidth-m.width),x+=m.width):x+=m.kernedWidth,l&&!y&&this._reSpaceAndTab.test(r[S])&&(y=!0),y||(p=p||this.getCompleteStyleDeclaration(o,S),g=this.getCompleteStyleDeclaration(o,S+1),y=wb(p,g,!1)),y&&(c?(t.save(),t.translate(m.renderLeft,m.renderTop),t.rotate(m.angle),this._renderChar(e,t,o,S,w,-x/2,0),t.restore()):(v=i,this._renderChar(e,t,o,S,w,v,s)),w="",p=g,i+=d*x,x=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,i=Qn({width:t,height:r}),s=i.getContext("2d");return i.width=t,i.height=r,s.beginPath(),s.moveTo(0,0),s.lineTo(t,0),s.lineTo(t,r),s.lineTo(0,r),s.closePath(),s.translate(t/2,r/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(i,"no-repeat")}handleFiller(e,t,r){let i,s;return zn(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(i=-this.width/2,s=-this.height/2,e.translate(i,s),e[t]=this._applyPatternGradientTransformText(r),{offsetX:i,offsetY:s}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:i}=t;return e.lineWidth=i,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,i,s,o,a){const l=this._getStyleDeclaration(r,i),c=this.getCompleteStyleDeclaration(r,i),u=e==="fillText"&&c.fill,h=e==="strokeText"&&c.stroke&&c.strokeWidth;if(h||u){if(t.save(),t.font=this._getFontDeclaration(c),l.textBackgroundColor&&this._removeShadow(t),l.deltaY&&(a+=l.deltaY),u){const d=this._setFillStyles(t,c);t.fillText(s,o-d.offsetX,a-d.offsetY)}if(h){const d=this._setStrokeStyles(t,c);t.strokeText(s,o-d.offsetX,a-d.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const i=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),o=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),a={fontSize:s*r.size,deltaY:o+s*r.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,i=this.textAlign,s=this.direction,o=this.isEndOfWrapping(e);let a=0;return i===zr||i===Hc&&!o||i===$c&&!o||i===Ff&&!o?0:(i===ue&&(a=r/2),i===qe&&(a=r),i===Hc&&(a=r/2),i===$c&&(a=r),s==="rtl"&&(i===qe||i===zr||i===$c?a=0:i===ye||i===Ff?a=-r:i!==ue&&i!==Hc||(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var i;return(i=this._getStyleDeclaration(e,t)[r])!==null&&i!==void 0?i:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const i=this._getLeftOffset(),s=this.path,o=this._getWidthOfCharSpacing(),a=t==="linethrough"?.5:t==="overline"?1:0,l=this.offsets[t];for(let c=0,u=this._textLines.length;c<u;c++){const h=this.getHeightOfLine(c);if(!this[t]&&!this.styleHas(t,c)){r+=h;continue}const d=this._textLines[c],f=h/this.lineHeight,p=this._getLineLeftOffset(c);let g=0,m=0,y=this.getValueOfPropertyAt(c,0,t),v=this.getValueOfPropertyAt(c,0,ht),w=this.getValueOfPropertyAt(c,0,Xo),x=y,S=v,C=w;const T=r+f*(1-this._fontSizeFraction);let _=this.getHeightOfChar(c,0),M=this.getValueOfPropertyAt(c,0,"deltaY");for(let N=0,H=d.length;N<H;N++){const D=this.__charBounds[c][N];x=this.getValueOfPropertyAt(c,N,t),S=this.getValueOfPropertyAt(c,N,ht),C=this.getValueOfPropertyAt(c,N,Xo);const V=this.getHeightOfChar(c,N),U=this.getValueOfPropertyAt(c,N,"deltaY");if(s&&x&&S){const G=this.fontSize*C/1e3;e.save(),e.fillStyle=v,e.translate(D.renderLeft,D.renderTop),e.rotate(D.angle),e.fillRect(-D.kernedWidth/2,l*V+U-a*G,D.kernedWidth,G),e.restore()}else if((x!==y||S!==v||V!==_||C!==w||U!==M)&&m>0){const G=this.fontSize*w/1e3;let R=i+p+g;this.direction==="rtl"&&(R=this.width-R-m),y&&v&&w&&(e.fillStyle=v,e.fillRect(R,T+l*_+M-a*G,m,G)),g=D.left,m=D.width,y=x,w=C,v=S,_=V,M=U}else m+=D.kernedWidth}let P=i+p+g;this.direction==="rtl"&&(P=this.width-P-m),e.fillStyle=S;const $=this.fontSize*C/1e3;x&&S&&C&&e.fillRect(P,T+l*_+M-a*$,m-o,$),r+=h}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:i=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const o=e.includes("'")||e.includes('"')||e.includes(",")||zt.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(s?this.CACHE_FONT_SIZE:i,"px"),o].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return vb(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),i=[`
`];let s=[];for(let o=0;o<t.length;o++)r[o]=this.graphemeSplit(t[o]),s=s.concat(r[o],i);return s.pop(),{_unwrappedLines:r,lines:t,graphemeText:s,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return O(O({},super.toObject([...IM,...e])),{},{styles:e$(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let i=!1,s=!1;if(typeof e=="object")for(const o in e)o==="path"&&this.setPathInfo(),i=i||r.includes(o),s=s||o==="path";else i=r.includes(e),s=e==="path";return s&&this.setPathInfo(),i&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const i=Fi(e,zt.ATTRIBUTE_NAMES,r),s=O(O({},t),i),{textAnchor:o=ye,textDecoration:a="",dx:l=0,dy:c=0,top:u=0,left:h=0,fontSize:d=sb,strokeWidth:f=1}=s,p=Ne(s,d3),g=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),O({left:h+l,top:u+c,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:d},p)),m=g.getScaledHeight()/g.height,y=((g.height+g.strokeWidth)*g.lineHeight-g.height)*m,v=g.getScaledHeight()+y;let w=0;return o===ue&&(w=g.getScaledWidth()/2),o===qe&&(w=g.getScaledWidth()),g.set({left:g.left-w,top:g.top-(v-g.fontSize*(.07+g._fontSizeFraction))/g.lineHeight,strokeWidth:f}),g}static fromObject(e){return this._fromObject(O(O({},e),{},{styles:t$(e.styles||{},e.text)}),{extraParam:"text"})}}E(zt,"textLayoutProperties",NM),E(zt,"cacheProperties",[...Li,...IM]),E(zt,"ownDefaults",f5),E(zt,"type","Text"),E(zt,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),E(zt,"ATTRIBUTE_NAMES",eo.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),UM(zt,[class extends RM{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0}),t=this.path;return t?e+t._createBaseSVGMarkup(t._toSVG(),{reviver:n,withShadow:!0,additionalTransform:Mu(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(h3,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],r=[];let i,s=n;this.backgroundColor&&r.push(...Um(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)i=this._getLineLeftOffset(o),this.direction==="rtl"&&(i+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(r,o,e+i,s),this._setSVGTextLineText(t,o,e+i,s),s+=this.getHeightOfLine(o);return{textSpans:t,textBgRects:r}}_createTextCharSpan(n,e,t,r,i){const s=pe.NUM_FRACTION_DIGITS,o=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(u3)),a=o?'style="'.concat(o,'"'):"",l=e.deltaY,c=l?' dy="'.concat(ke(l,s),'" '):"",{angle:u,renderLeft:h,renderTop:d,width:f}=i;let p="";if(h!==void 0){const g=f/2;u&&(p=' rotate="'.concat(ke(Ni(u),s),'"'));const m=Xl({angle:Ni(u)});m[4]=h,m[5]=d;const y=new A(-g,0).transform(m);t=y.x,r=y.y}return'<tspan x="'.concat(ke(t,s),'" y="').concat(ke(r,s),'" ').concat(c).concat(p).concat(a,">").concat(J5(n),"</tspan>")}_setSVGTextLineText(n,e,t,r){const i=this.getHeightOfLine(e),s=this.textAlign.includes(zr),o=this._textLines[e];let a,l,c,u,h,d="",f=0;r+=i*(1-this._fontSizeFraction)/this.lineHeight;for(let p=0,g=o.length-1;p<=g;p++)h=p===g||this.charSpacing||this.path,d+=o[p],c=this.__charBounds[e][p],f===0?(t+=c.kernedWidth-c.width,f+=c.width):f+=c.kernedWidth,s&&!h&&this._reSpaceAndTab.test(o[p])&&(h=!0),h||(a=a||this.getCompleteStyleDeclaration(e,p),l=this.getCompleteStyleDeclaration(e,p+1),h=wb(a,l,!0)),h&&(u=this._getStyleDeclaration(e,p),n.push(this._createTextCharSpan(d,u,t,r,c)),d="",a=l,this.direction==="rtl"?t-=f:t+=f,f=0)}_setSVGTextLineBg(n,e,t,r){const i=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight;let o,a=0,l=0,c=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let u=0;u<i.length;u++){const{left:h,width:d,kernedWidth:f}=this.__charBounds[e][u];o=this.getValueOfPropertyAt(e,u,"textBackgroundColor"),o!==c?(c&&n.push(...Um(c,t+l,r,a,s)),l=h,a=d,c=o):a+=f}o&&n.push(...Um(c,t+l,r,a,s))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," text-decoration-thickness: ").concat(ke(this.textDecorationThickness*this.getObjectScaling().y/10,pe.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:r,stroke:i,fill:s,fontSize:o,fontStyle:a,fontWeight:l,deltaY:c,textDecorationThickness:u,linethrough:h,overline:d,underline:f}=n,p=this.getSvgTextDecoration({underline:f??this.underline,overline:d??this.overline,linethrough:h??this.linethrough}),g=u||this.textDecorationThickness;return[i?Au(fn,i):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",p?"text-decoration: ".concat(p,"; text-decoration-thickness: ").concat(ke(g*this.getObjectScaling().y/10,pe.NUM_FRACTION_DIGITS),"%; "):"",s?Au(ht,s):"",c?"baseline-shift: ".concat(-c,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),Y.setClass(zt),Y.setSVGClass(zt);class f3{constructor(e){E(this,"target",void 0),E(this,"__mouseDownInPlace",!1),E(this,"__dragStartFired",!1),E(this,"__isDraggingOver",!1),E(this,"__dragStartSelection",void 0),E(this,"__dragImageDisposer",void 0),E(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:i,selectionEnd:s}=t;const o=this.target,a=o.canvas,l=new A(o.flipX?-1:1,o.flipY?-1:1),c=o._getCursorBoundaries(i),u=new A(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(o.calcTransformMatrix()),h=a.getScenePoint(e).subtract(u),d=o.getCanvasRetinaScaling(),f=o.getBoundingRect(),p=u.subtract(new A(f.left,f.top)),g=a.viewportTransform,m=p.add(h).transform(g,!0),y=o.backgroundColor,v=yb(o.styles);o.backgroundColor="";const w={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(w,0,i),o.setSelectionStyles(w,s,o.text.length),o.dirty=!0;const x=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=y,o.styles=v,o.dirty=!0,X0(x,{position:"fixed",left:"".concat(-x.width,"px"),border:dn,width:"".concat(x.width/d,"px"),height:"".concat(x.height/d,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{x.remove()},mr(e.target||this.target.hiddenTextarea).body.appendChild(x),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(x,m.x,m.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const i=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},s=t._text.slice(i.selectionStart,i.selectionEnd).join(""),o=O({text:t.text,value:s},i);e.dataTransfer.setData("text/plain",s),e.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:t.getSelectionStyles(i.selectionStart,i.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,o)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,i=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let s=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(s&&!i){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(r);const{styles:c}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},u=s[Math.max(0,s.length-1)],h=0;if(this.__dragStartSelection){const d=this.__dragStartSelection.selectionStart,f=this.__dragStartSelection.selectionEnd;l>d&&l<=f?l=d:l>f&&(l-=f-d),o.removeChars(d,f),delete this.__dragStartSelection}o._reNewline.test(u)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=o,o.insertChars(s,c,l),a.setActiveObject(o),o.enterEditing(r),o.selectionStart=Math.min(l+h,o._text.length),o.selectionEnd=Math.min(o.selectionStart+s.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(Pf,{index:l+h,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const i=this.target,s=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||dn;l===dn?(i.selectionStart=o,i.selectionEnd=a,i._updateTextarea(),i.hiddenTextarea.focus()):(i.clearContextTop(),l==="move"&&(i.removeChars(o,a),i.selectionStart=i.selectionEnd=o,i.hiddenTextarea&&(i.hiddenTextarea.value=i.text),i._updateTextarea(),i.fire(Pf,{index:o,action:"dragend"}),s.fire("text:changed",{target:i}),s.requestRenderAll()),i.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const eC=/[ \n\.,;!\?\-]/;class p3 extends zt{constructor(){super(...arguments),E(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:i,onComplete:s}=e;return WM({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:i,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let i=e>0&&this._reSpace.test(r[e])&&(t===-1||!ob.test(r[e-1]))?e-1:e,s=r[i];for(;i>0&&i<r.length&&!eC.test(s);)i+=t,s=r[i];return t===-1&&eC.test(s)&&i++,i}selectWord(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const r=this.searchWordBoundary(e,-1),i=Math.max(r,this.searchWordBoundary(e,1));this.selectionStart=r,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const r=this.findLineBoundaryLeft(e),i=this.findLineBoundaryRight(e);this.selectionStart=r,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;mr(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),i=this.selectionStart,s=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&i!==s||i!==r&&s!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const i=r.slice(0,e),s=this.graphemeSplit(i).length;if(e===t)return{selectionStart:s,selectionEnd:s};const o=r.slice(e,t);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(e,t,r){const i=r.slice(0,e).join("").length;return e===t?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),i=r.lineIndex,s=r.charIndex,o=this.getValueOfPropertyAt(i,s,"fontSize")*this.lineHeight,a=t.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,u=c.width/l,h=c.height/l,d=u-o,f=h-o,p=new A(t.left+a,t.top+t.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new A(c.clientWidth/u,c.clientHeight/h));return p.x<0&&(p.x=0),p.x>d&&(p.x=d),p.y<0&&(p.y=0),p.y>f&&(p.y=f),p.x+=this.canvas._offset.left,p.y+=this.canvas._offset.top,{left:"".concat(p.x,"px"),top:"".concat(p.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(Df),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:o}=this.get2DCursorLocation(t,!0);if(r!==s){if(this.styles[r])for(let a=i;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[s])for(let a=o;a<this._unwrappedTextLines[s].length;a++){const l=this.styles[s][a];l&&(this.styles[r]||(this.styles[r]={}),this.styles[r][i+a-o]=l)}for(let a=r+1;a<=s;a++)delete this.styles[a];this.shiftLineStyles(s,r-s)}else if(this.styles[r]){const a=this.styles[r],l=o-i;for(let c=i;c<o;c++)delete a[c];for(const c in this.styles[r]){const u=parseInt(c,10);u>=o&&(a[u-l]=a[c],delete a[c])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const i in this.styles){const s=parseInt(i,10);s>e&&(this.styles[s+t]=r[s],r[s-t]||delete this.styles[s])}}insertNewlineStyleObject(e,t,r,i){const s={},o=this._unwrappedTextLines[e].length,a=o===t;let l=!1;r||(r=1),this.shiftLineStyles(e,r);const c=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const h in this.styles[e]){const d=parseInt(h,10);d>=t&&(l=!0,s[d-t]=this.styles[e][h],a&&t===0||delete this.styles[e][h])}let u=!1;for(l&&!a&&(this.styles[e+r]=s,u=!0),(u||o>t)&&r--;r>0;)i&&i[r-1]?this.styles[e+r]={0:O({},i[r-1])}:c?this.styles[e+r]={0:O({},c)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,i){this.styles||(this.styles={});const s=this.styles[e],o=s?O({},s):{};r||(r=1);for(const l in o){const c=parseInt(l,10);c>=t&&(s[c+r]=o[c],o[c-r]||delete s[c])}if(this._forceClearCache=!0,i){for(;r--;)Object.keys(i[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=O({},i[r]));return}if(!s)return;const a=s[t?t-1:1];for(;a&&r--;)this.styles[e][t+r]=O({},a)}insertNewStyleBlock(e,t,r){const i=this.get2DCursorLocation(t,!0),s=[0];let o,a=0;for(let l=0;l<e.length;l++)e[l]===`
`?(a++,s[a]=0):s[a]++;for(s[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,s[0],r),r=r&&r.slice(s[0]+1)),a&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+s[0],a),o=1;o<a;o++)s[o]>0?this.insertCharStyleObject(i.lineIndex+o,0,s[o],r):r&&this.styles[i.lineIndex+o]&&r[0]&&(this.styles[i.lineIndex+o][0]=r[0]),r=r&&r.slice(s[o]+1);s[o]>0&&this.insertCharStyleObject(i.lineIndex+o,0,s[o],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;i>r&&this.removeStyleFromTo(r,i);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,r,t),this._text=[...this._text.slice(0,r),...s,...this._text.slice(i)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=ye:this._selectionDirection===qe&&(this._selectionDirection=ye,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===qe?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=qe:this._selectionDirection===ye&&(this._selectionDirection=qe,this.selectionStart=t),this.selectionEnd=r)}}class g3 extends p3{initHiddenTextarea(){const e=this.canvas&&mr(this.canvas.getElement())||ql(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[a,l]=o;return t.setAttribute(a,l)});const{top:r,left:i,fontSize:s}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(i,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[a,l]=o;return t.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:r,selectionStart:i,selectionEnd:s}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const o=()=>{this.updateFromTextArea(),this.fire(Pf),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void o();const a=this._splitTextIntoLines(r).graphemeText,l=this._text.length,c=a.length,u=this.selectionStart,h=this.selectionEnd,d=u!==h;let f,p,g,m,y=c-l;const v=this.fromStringToGraphemeSelection(i,s,r),w=u>v.selectionStart;d?(p=this._text.slice(u,h),y+=h-u):c<l&&(p=w?this._text.slice(h+y,h):this._text.slice(u,u-y));const x=a.slice(v.selectionEnd-y,v.selectionEnd);if(p&&p.length&&(x.length&&(f=this.getSelectionStyles(u,u+1,!1),f=x.map(()=>f[0])),d?(g=u,m=h):w?(g=h-p.length,m=h):(g=h,m=h+p.length),this.removeStyleFromTo(g,m)),x.length){const{copyPasteData:S}=Xr();t&&x.join("")===S.copiedText&&!pe.disableStyleCopyPaste&&(f=S.copiedTextStyle),this.insertNewStyleBlock(x,u,f)}o()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:i}=t;this.compositionStart=r,this.compositionEnd=i,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Xr();e.copiedText=this.getSelectedText(),pe.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,i=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],i+=r.left+r.width),i}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(r),s=i.lineIndex;if(s===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const o=i.charIndex,a=this._getWidthBeforeCursor(s,o),l=this._getIndexOnLine(s+1,a);return this._textLines[s].slice(o).length+l+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(r),s=i.lineIndex;if(s===0||e.metaKey||e.keyCode===33)return-r;const o=i.charIndex,a=this._getWidthBeforeCursor(s,o),l=this._getIndexOnLine(s-1,a),c=this._textLines[s].slice(0,o),u=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+l-c.length+(1-u)}_getIndexOnLine(e,t){const r=this._textLines[e];let i,s,o=this._getLineLeftOffset(e),a=0;for(let l=0,c=r.length;l<c;l++)if(i=this.__charBounds[e][l].width,o+=i,o>t){s=!0;const u=o-i,h=o,d=Math.abs(u-t);a=Math.abs(h-t)<d?l:l-1;break}return s||(a=r.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===qe);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const i=this.text.length;this.selectionStart=Al(0,this.selectionStart,i),this.selectionEnd=Al(0,this.selectionEnd,i),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===ye?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let i;if(e.altKey)i=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;i=this["findLineBoundary".concat(r)](this[t])}return i!==void 0&&this[t]!==i&&(this[t]=i,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=ye,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===qe&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=ye,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===ye&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=qe,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=qe,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const tC=n=>!!n.button;class m3 extends g3{constructor(){super(...arguments),E(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new f3(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:r}=e;this.canvas&&this.editable&&!tC(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),r&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=r||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:r}=e;const i=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||tC(t)||i||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,i=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,i,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(wr(this.calcTransformMatrix())).add(new A(-this._getLeftOffset(),-this._getTopOffset()));let r=0,i=0,s=0;for(let c=0;c<this._textLines.length&&r<=t.y;c++)r+=this.getHeightOfLine(c),s=c,c>0&&(i+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));let o=Math.abs(this._getLineLeftOffset(s));const a=this._textLines[s].length,l=this.__charBounds[s];for(let c=0;c<a;c++){const u=o+l[c].kernedWidth;if(t.x<=u){Math.abs(t.x-u)<=Math.abs(t.x-o)&&i++;break}o=u,i++}return Math.min(this.flipX?a-i:i,this._text.length)}}const Yh="moveCursorUp",Kh="moveCursorDown",Xh="moveCursorLeft",Jh="moveCursorRight",Qh="exitEditing",nC=(n,e)=>{const t=e.getRetinaScaling();n.setTransform(t,0,0,t,0,0);const r=e.viewportTransform;n.transform(r[0],r[1],r[2],r[3],r[4],r[5])},y3=O({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Qh,27:Qh,33:Yh,34:Kh,35:Jh,36:Xh,37:Xh,38:Yh,39:Jh,40:Kh},keysMapRtl:{9:Qh,27:Qh,33:Yh,34:Kh,35:Xh,36:Jh,37:Jh,38:Yh,39:Xh,40:Kh},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class bi extends m3{static getDefaults(){return O(O({},super.getDefaults()),bi.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,O(O({},bi.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof J0&&this.canvas.textEditingManager.remove(this),t instanceof J0&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),r=this.findAncestorsWithClipPath(),i=r.length>0;let s,o=e;if(i){s=Qn(e.canvas),o=s.getContext("2d"),nC(o,this.canvas);const a=this.calcTransformMatrix();o.transform(a[0],a[1],a[2],a[3],a[4],a[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(o,t):this.renderCursor(o,t),i)for(const a of r){const l=a.clipPath,c=Qn(e.canvas),u=c.getContext("2d");if(nC(u,this.canvas),!l.absolutePositioned){const h=a.calcTransformMatrix();u.transform(h[0],h[1],h[2],h[3],h[4],h[5])}l.transform(u),l.drawObject(u,!0,{}),this.drawClipPathOnCache(o,l,c)}i&&(e.setTransform(1,0,0,1,0,0),e.drawImage(s,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),i=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,t);return{left:r,top:i,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:i,lineIndex:s}=this.get2DCursorLocation(e);for(let c=0;c<s;c++)t+=this.getHeightOfLine(c);const o=this._getLineLeftOffset(s),a=this.__charBounds[s][i];a&&(r=a.left),this.charSpacing!==0&&i===this._textLines[s].length&&(r-=this._getWidthOfCharSpacing());const l={top:t,left:o+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===qe||this.textAlign===zr||this.textAlign===$c?l.left*=-1:this.textAlign===ye||this.textAlign===Ff?l.left=o-(r>0?r:0):this.textAlign!==ue&&this.textAlign!==Hc||(l.left=o-(r>0?r:0))),l}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),i=r.lineIndex,s=r.charIndex>0?r.charIndex-1:0,o=this.getValueOfPropertyAt(i,s,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/a,c=this.getValueOfPropertyAt(i,s,"deltaY"),u=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(i,s,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-l/2,top:u+t.top+c,width:l,height:o}}_renderCursor(e,t,r){const{color:i,opacity:s,left:o,top:a,width:l,height:c}=this.getCursorRenderingData(r,t);e.fillStyle=i,e.globalAlpha=s,e.fillRect(o,a,l,c)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const i=t.selectionStart,s=t.selectionEnd,o=this.textAlign.includes(zr),a=this.get2DCursorLocation(i),l=this.get2DCursorLocation(s),c=a.lineIndex,u=l.lineIndex,h=a.charIndex<0?0:a.charIndex,d=l.charIndex<0?0:l.charIndex;for(let f=c;f<=u;f++){const p=this._getLineLeftOffset(f)||0;let g=this.getHeightOfLine(f),m=0,y=0,v=0;if(f===c&&(y=this.__charBounds[c][h].left),f>=c&&f<u)v=o&&!this.isEndOfWrapping(f)?this.width:this.getLineWidth(f)||5;else if(f===u)if(d===0)v=this.__charBounds[u][d].left;else{const T=this._getWidthOfCharSpacing();v=this.__charBounds[u][d-1].left+this.__charBounds[u][d-1].width-T}m=g,(this.lineHeight<1||f===u&&this.lineHeight>1)&&(g/=this.lineHeight);let w=r.left+p+y,x=g,S=0;const C=v-y;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",x=1,S=g):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===qe||this.textAlign===zr||this.textAlign===$c?w=this.width-w-C:this.textAlign===ye||this.textAlign===Ff?w=r.left+p-v:this.textAlign!==ue&&this.textAlign!==Hc||(w=r.left+p-v)),e.fillRect(w,r.top+r.topOffset+S,C,x),r.topOffset+=m}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,ht)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}E(bi,"ownDefaults",y3),E(bi,"type","IText"),Y.setClass(bi),Y.setClass(bi,"i-text");class So extends bi{static getDefaults(){return O(O({},super.getDefaults()),So.ownDefaults)}constructor(e,t){super(e,O(O({},So.ownDefaults),t))}static createControls(){return{controls:q5()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(zr)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,i=0;const s={};for(let o=0;o<e.graphemeLines.length;o++)e.graphemeText[i]===`
`&&o>0?(r=0,i++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[i])&&o>0&&(r++,i++),s[o]={line:t,offset:r},i+=e.graphemeLines[o].length,r+=e.graphemeLines[o].length;return s}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,i=e+1,s=!1;const o=this._styleMap[e],a=this._styleMap[e+1];o&&(e=o.line,r=o.offset),a&&(i=a.line,s=i===e,t=a.offset);const l=e===void 0?this.styles:{line:this.styles[e]};for(const c in l)for(const u in l[c]){const h=parseInt(u,10);if(h>=r&&(!s||h<t))for(const d in l[c][u])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const i=this._styleMap[e];super._setStyleDeclaration(i.line,i.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),i=[];for(let s=0;s<r.wordsData.length;s++)i.push(...this._wrapLine(s,t,r));return this.isWrapping=!1,i}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let i=0;return{wordsData:e.map((s,o)=>{let a=0;const l=t?this.graphemeSplit(s):this.wordSplit(s);return l.length===0?[{word:[],width:0}]:l.map(c=>{const u=t?[c]:this.graphemeSplit(c),h=this._measureWord(u,o,a);return i=Math.max(h,i),a+=u.length+r.length,{word:u,width:h}})}),largestWordWidth:i}}_measureWord(e,t){let r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let o=0,a=e.length;o<a;o++)s+=this._getGraphemeBox(e[o],t,o+i,r,!0).kernedWidth,r=e[o];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:i,wordsData:s}=r,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,c=[],u=l?"":" ";let h=0,d=[],f=0,p=0,g=!0;t-=o;const m=Math.max(t,i,this.dynamicMinWidth),y=s[e];let v;for(f=0,v=0;v<y.length;v++){const{word:w,width:x}=y[v];f+=w.length,h+=p+x-a,h>m&&!g?(c.push(d),d=[],h=x,g=!0):h+=a,g||l||d.push(u),d=d.concat(w),p=l?0:this._measureWord([u],e,f),f++,g=!1}return v&&c.push(d),i+o>this.dynamicMinWidth&&(this.dynamicMinWidth=i-a+o),c}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),i=new Array(r.length);for(let s=0;s<r.length;s++)i[s]=r[s].join("");return t.lines=i,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const i=this._styleMap[t].line;e.set("".concat(i),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}E(So,"type","Textbox"),E(So,"textLayoutProperties",[...bi.textLayoutProperties,"width"]),E(So,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),Y.setClass(So);class rC extends Cg{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:i,group:s}=r;if(!i||!this.shouldPerformLayout(e))return;const{width:o,height:a}=Ci(qM(r,i)),l=new A(o,a);if(i.absolutePositioned)return{center:ol(i.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:l};{const c=i.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:u=new A,correction:h=new A}=this.calcBoundingBox(t,e)||{};return{center:u.add(c),correction:h.subtract(c),size:l}}return{center:r.getRelativeCenterPoint().add(c),size:l}}}}E(rC,"type","clip-path"),Y.setClass(rC);class iC extends Cg{getInitialSize(e,t){let{target:r}=e,{size:i}=t;return new A(r.width||i.x,r.height||i.y)}}E(iC,"type","fixed"),Y.setClass(iC);class v3 extends Pu{subscribeTargets(e){const t=e.target;e.targets.reduce((r,i)=>(i.parent&&r.add(i.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((i,s)=>(s.parent&&i.add(s.parent),i),new Set).forEach(i=>{!r.some(s=>s.parent===i)&&i.layoutManager.unsubscribeTargets({target:i,targets:[t]})})}}class Co extends Fo{static getDefaults(){return O(O({},super.getDefaults()),Co.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Co.ownDefaults),this.setOptions(t);const{left:r,top:i,layoutManager:s}=t;this.groupInit(e,{left:r,top:i,layoutManager:s??new v3})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(i=>{const s=this._objects.findIndex(a=>a.isInFrontOf(i)),o=s===-1?this.size():s;this.insertAt(o,i)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(qs("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(i=>{const{parent:s}=i;s&&r.add(s)}),e===xb?r.forEach(i=>{i._onAfterObjectsChange(Wf,t)}):r.forEach(i=>{i._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const i=O(O({hasControls:!1},r),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,i);super._renderControls(e,t),e.restore()}}E(Co,"type","ActiveSelection"),E(Co,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),Y.setClass(Co),Y.setClass(Co,"activeSelection");class w3{constructor(){E(this,"resources",{})}applyFilters(e,t,r,i,s){const o=s.getContext("2d");if(!o)return;o.drawImage(t,0,0,r,i);const a={sourceWidth:r,sourceHeight:i,imageData:o.getImageData(0,0,r,i),originalEl:t,originalImageData:o.getImageData(0,0,r,i),canvasEl:s,ctx:o,filterBackend:this};e.forEach(c=>{c.applyTo(a)});const{imageData:l}=a;return l.width===r&&l.height===i||(s.width=l.width,s.height=l.height),o.putImageData(l,0,0),a}}class uA{constructor(){let{tileSize:e=pe.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};E(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),E(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=Qn({width:e,height:t}),i=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});i&&(i.clearColor(0,0,0,0),this.canvas=r,this.gl=i)}applyFilters(e,t,r,i,s,o){const a=this.gl,l=s.getContext("2d");if(!a||!l)return;let c;o&&(c=this.getCachedTexture(o,t));const u={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:i,destinationWidth:r,destinationHeight:i,context:a,sourceTexture:this.createTexture(a,r,i,c?void 0:t),targetTexture:this.createTexture(a,r,i),originalTexture:c||this.createTexture(a,r,i,c?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},h=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,h),e.forEach(d=>{d&&d.applyTo(u)}),function(d){const f=d.targetCanvas,p=f.width,g=f.height,m=d.destinationWidth,y=d.destinationHeight;p===m&&g===y||(f.width=m,f.height=y)}(u),this.copyGLTo2D(a,u),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(u.sourceTexture),a.deleteTexture(u.targetTexture),a.deleteFramebuffer(h),l.setTransform(1,0,0,1,0,0),u}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,i,s){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:u,TEXTURE_MAG_FILTER:h,TEXTURE_MIN_FILTER:d,TEXTURE_WRAP_S:f,TEXTURE_WRAP_T:p}=e,g=e.createTexture();return e.bindTexture(a,g),e.texParameteri(a,h,s||o),e.texParameteri(a,d,s||o),e.texParameteri(a,f,u),e.texParameteri(a,p,u),i?e.texImage2D(a,0,l,l,c,i):e.texImage2D(a,0,l,t,r,0,l,c,null),g}getCachedTexture(e,t,r){const{textureCache:i}=this;if(i[e])return i[e];{const s=this.createTexture(this.gl,t.width,t.height,t,r);return s&&(i[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,i=t.targetCanvas,s=i.getContext("2d");if(!s)return;s.translate(0,i.height),s.scale(1,-1);const o=r.height-i.height;s.drawImage(r,0,o,i.width,i.height,0,0,i.width,i.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),i=t.destinationWidth,s=t.destinationHeight,o=i*s*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,i,s,e.RGBA,e.UNSIGNED_BYTE,a);const c=new ImageData(l,i,s);r.putImageData(c,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const i=e.getParameter(r.UNMASKED_RENDERER_WEBGL),s=e.getParameter(r.UNMASKED_VENDOR_WEBGL);i&&(t.renderer=i.toLowerCase()),s&&(t.vendor=s.toLowerCase())}return this.gpuInfo=t,t}}let Gm;function b3(){const{WebGLProbe:n}=Xr();return n.queryWebGL(Di()),pe.enableGLFiltering&&n.isSupported(pe.textureSize)?new uA({tileSize:pe.textureSize}):new w3}function qm(){return!Gm&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Gm=b3()),Gm}const x3=["filters","resizeFilter","src","crossOrigin","type"],hA=["cropX","cropY"];class Ln extends It{static getDefaults(){return O(O({},super.getDefaults()),Ln.ownDefaults)}constructor(e,t){super(),E(this,"_lastScaleX",1),E(this,"_lastScaleY",1),E(this,"_filterScalingX",1),E(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Ln.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(Ys()),this.setElement(typeof e=="string"?(this.canvas&&mr(this.canvas.getElement())||ql()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(r),(t=e.classList)===null||t===void 0||t.add(Ln.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=qm(!1);t instanceof uA&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Xr().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),O(O({},super.toObject([...hA,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,i=-this.height/2;let s=[],o=[],a="",l="";if(!t)return[];if(this.hasCrop()){const c=Ys();s.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+r+'" y="'+i+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(i-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(l).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const c=this.fill;this.fill=null,o=['	<rect x="'.concat(r,'" y="').concat(i,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=c}return s=this.paintFirst!==ht?s.concat(o,e):s.concat(e,o),s}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return qd(e,{crossOrigin:t,signal:r}).then(i=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(i)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),i=r.x,s=r.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||i>t&&s>t)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=s);const a=Qn(o),{width:l,height:c}=o;this._element=a,this._lastScaleX=e.scaleX=i,this._lastScaleY=e.scaleY=s,qm().applyFilters([e],o,l,c,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(s=>s&&!s.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,i=t.naturalHeight||t.height;if(this._element===this._originalElement){const s=Qn({width:r,height:i});this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,i),this._lastScaleX=1,this._lastScaleY=1);qm().applyFilters(e,this._originalElement,r,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,i=this._filterScalingY,s=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=t.naturalWidth||t.width,u=t.naturalHeight||t.height,h=a*r,d=l*i,f=Math.min(s*r,c-h),p=Math.min(o*i,u-d),g=-s/2,m=-o/2,y=Math.min(s,c/r-a),v=Math.min(o,u/i-l);t&&e.drawImage(t,h,d,f,p,g,m,y,v)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=h5(this.preserveAspectRatio||""),t=this.width,r=this.height,i={width:t,height:r};let s,o=this._element.width,a=this._element.height,l=1,c=1,u=0,h=0,d=0,f=0;return!e||e.alignX===dn&&e.alignY===dn?(l=t/o,c=r/a):(e.meetOrSlice==="meet"&&(l=c=E$(this._element,i),s=(t-o*l)/2,e.alignX==="Min"&&(u=-s),e.alignX==="Max"&&(u=s),s=(r-a*c)/2,e.alignY==="Min"&&(h=-s),e.alignY==="Max"&&(h=s)),e.meetOrSlice==="slice"&&(l=c=O$(this._element,i),s=o-t/l,e.alignX==="Mid"&&(d=s/2),e.alignX==="Max"&&(d=s),s=a-r/c,e.alignY==="Mid"&&(f=s/2),e.alignY==="Max"&&(f=s),o=t/l,a=r/c)),{width:o,height:a,scaleX:l,scaleY:c,offsetLeft:u,offsetTop:h,cropX:d,cropY:f}}static fromObject(e,t){let{filters:r,resizeFilter:i,src:s,crossOrigin:o,type:a}=e,l=Ne(e,x3);return Promise.all([qd(s,O(O({},t),{},{crossOrigin:o})),r&&Ou(r,t),i&&Ou([i],t),wg(l,t)]).then(c=>{let[u,h=[],[d]=[],f={}]=c;return new this(u,O(O({},l),{},{src:s,filters:h,resizeFilter:d},f))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return qd(e,{crossOrigin:t,signal:r}).then(s=>new this(s,i))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const i=Fi(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(i["xlink:href"]||i.href,t,i).catch(s=>(qs("log","Unable to parse Image",s),null))}}E(Ln,"type","Image"),E(Ln,"cacheProperties",[...Li,...hA]),E(Ln,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),E(Ln,"CSS_CANVAS","canvas-img"),E(Ln,"ATTRIBUTE_NAMES",[...eo,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),Y.setClass(Ln),Y.setSVGClass(Ln);xg(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Tg=n=>n.webgl!==void 0,Sb="precision highp float",S3=`
    `.concat(Sb,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),C3=["type"],k3=["type"],T3=new RegExp(Sb,"g");class dt{get type(){return this.constructor.type}constructor(){let e=Ne(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C3);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return S3}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:i="highp"}}=Xr();i!=="highp"&&(t=t.replace(T3,Sb.replace("highp",i)));const s=e.createShader(e.VERTEX_SHADER),o=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!s||!o||!a)throw new Hr("Vertex, fragment shader or program creation error");if(e.shaderSource(s,r),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new Hr("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new Hr("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.attachShader(a,s),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Hr('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:l}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,i={};for(let s=0;s<r.length;s++)i[r[s]]=e.getUniformLocation(t,r[s]);return i}sendAttributeData(e,t,r){const i=t.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,i=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===i||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,i)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){Tg(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,i=Qn({width:t,height:r});e.helpLayer=i}}toObject(){const e=Object.keys(this.constructor.defaults||{});return O({type:this.type},e.reduce((t,r)=>(t[r]=this[r],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Ne(e,k3))}}E(dt,"type","BaseFilter"),E(dt,"uniformLocations",[]);const _3={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Zh extends dt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(_3[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new me(this.color).getSource(),i=this.alpha,s=r[0]*i,o=r[1]*i,a=r[2]*i,l=1-i;for(let c=0;c<t.length;c+=4){const u=t[c],h=t[c+1],d=t[c+2];let f,p,g;switch(this.mode){case"multiply":f=u*s/255,p=h*o/255,g=d*a/255;break;case"screen":f=255-(255-u)*(255-s)/255,p=255-(255-h)*(255-o)/255,g=255-(255-d)*(255-a)/255;break;case"add":f=u+s,p=h+o,g=d+a;break;case"difference":f=Math.abs(u-s),p=Math.abs(h-o),g=Math.abs(d-a);break;case"subtract":f=u-s,p=h-o,g=d-a;break;case"darken":f=Math.min(u,s),p=Math.min(h,o),g=Math.min(d,a);break;case"lighten":f=Math.max(u,s),p=Math.max(h,o),g=Math.max(d,a);break;case"overlay":f=s<128?2*u*s/255:255-2*(255-u)*(255-s)/255,p=o<128?2*h*o/255:255-2*(255-h)*(255-o)/255,g=a<128?2*d*a/255:255-2*(255-d)*(255-a)/255;break;case"exclusion":f=s+u-2*s*u/255,p=o+h-2*o*h/255,g=a+d-2*a*d/255;break;case"tint":f=s+u*l,p=o+h*l,g=a+d*l}t[c]=f,t[c+1]=p,t[c+2]=g}}sendUniformData(e,t){const r=new me(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}E(Zh,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),E(Zh,"type","BlendColor"),E(Zh,"uniformLocations",["uColor"]),Y.setClass(Zh);const E3={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},O3=["type","image"];class ed extends dt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return E3[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:i},filterBackend:{resources:s}}=e;const o=this.image;s.blendImage||(s.blendImage=Di());const a=s.blendImage,l=a.getContext("2d");a.width!==r||a.height!==i?(a.width=r,a.height=i):l.clearRect(0,0,r,i),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,r,i);const c=l.getImageData(0,0,r,i).data;for(let u=0;u<t.length;u+=4){const h=t[u],d=t[u+1],f=t[u+2],p=t[u+3],g=c[u],m=c[u+1],y=c[u+2],v=c[u+3];switch(this.mode){case"multiply":t[u]=h*g/255,t[u+1]=d*m/255,t[u+2]=f*y/255,t[u+3]=p*v/255;break;case"mask":t[u+3]=v}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return O(O({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:i}=e,s=Ne(e,O3);return Ln.fromObject(i,t).then(o=>new this(O(O({},s),{},{image:o})))}}E(ed,"type","BlendImage"),E(ed,"defaults",{mode:"multiply",alpha:1}),E(ed,"uniformLocations",["uTransformMatrix","uImage"]),Y.setClass(ed);class td extends dt{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(e){Tg(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:r,height:i}}=e;this.aspectRatio=r/i,this.horizontal=!0;let s=this.getBlurValue()*r;const o=new Uint8ClampedArray(t),a=15,l=4*r;for(let c=0;c<t.length;c+=4){let u=0,h=0,d=0,f=0,p=0;const g=c-c%l,m=g+l;for(let y=-14;y<a;y++){const v=y/a,w=4*Math.floor(s*v),x=1-Math.abs(v);let S=c+w;S<g?S=g:S>m&&(S=m);const C=t[S+3]*x;u+=t[S]*C,h+=t[S+1]*C,d+=t[S+2]*C,f+=C,p+=x}o[c]=u/f,o[c+1]=h/f,o[c+2]=d/f,o[c+3]=f/p}this.horizontal=!1,s=this.getBlurValue()*i;for(let c=0;c<o.length;c+=4){let u=0,h=0,d=0,f=0,p=0;const g=c%l,m=o.length-l+g;for(let y=-14;y<a;y++){const v=y/a,w=Math.floor(s*v)*l,x=1-Math.abs(v);let S=c+w;S<g?S=g:S>m&&(S=m);const C=o[S+3]*x;u+=o[S]*C,h+=o[S+1]*C,d+=o[S+2]*C,f+=C,p+=x}t[c]=u/f,t[c+1]=h/f,t[c+2]=d/f,t[c+3]=f/p}}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:r}=this;return t?r>1&&(e=1/r):r<1&&(e=r),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}E(td,"type","Blur"),E(td,"defaults",{blur:0}),E(td,"uniformLocations",["uDelta"]),Y.setClass(td);class nd extends dt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let i=0;i<t.length;i+=4)t[i]+=r,t[i+1]+=r,t[i+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}E(nd,"type","Brightness"),E(nd,"defaults",{brightness:0}),E(nd,"uniformLocations",["uBrightness"]),Y.setClass(nd);const dA={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Xa extends dt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,i=this.colorsOnly;for(let s=0;s<t.length;s+=4){const o=t[s],a=t[s+1],l=t[s+2];if(t[s]=o*r[0]+a*r[1]+l*r[2]+255*r[4],t[s+1]=o*r[5]+a*r[6]+l*r[7]+255*r[9],t[s+2]=o*r[10]+a*r[11]+l*r[12]+255*r[14],!i){const c=t[s+3];t[s]+=c*r[3],t[s+1]+=c*r[8],t[s+2]+=c*r[13],t[s+3]=o*r[15]+a*r[16]+l*r[17]+c*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,i=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],s=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,i),e.uniform4fv(t.uConstants,s)}toObject(){return O(O({},super.toObject()),{},{matrix:[...this.matrix]})}}function oa(n,e){var t;const r=(E(t=class extends Xa{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),E(t,"defaults",{colorsOnly:!1,matrix:e}),t);return Y.setClass(r,n),r}E(Xa,"type","ColorMatrix"),E(Xa,"defaults",dA),E(Xa,"uniformLocations",["uColorMatrix","uConstants"]),Y.setClass(Xa);oa("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);oa("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);oa("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);oa("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);oa("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);oa("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);oa("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class sC extends dt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){Tg(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>Y.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}E(sC,"type","Composed"),Y.setClass(sC);class rd extends dt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),i=259*(r+255)/(255*(259-r));for(let s=0;s<t.length;s+=4)t[s]=i*(t[s]-128)+128,t[s+1]=i*(t[s+1]-128)+128,t[s+2]=i*(t[s+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}E(rd,"type","Contrast"),E(rd,"defaults",{contrast:0}),E(rd,"uniformLocations",["uContrast"]),Y.setClass(rd);const M3={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class id extends dt{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return M3[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,i=this.matrix,s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),a=t.width,l=t.height,c=e.ctx.createImageData(a,l),u=c.data,h=this.opaque?1:0;let d,f,p,g,m,y,v,w,x,S,C,T,_;for(C=0;C<l;C++)for(S=0;S<a;S++){for(m=4*(C*a+S),d=0,f=0,p=0,g=0,_=0;_<s;_++)for(T=0;T<s;T++)v=C+_-o,y=S+T-o,v<0||v>=l||y<0||y>=a||(w=4*(v*a+y),x=i[_*s+T],d+=r[w]*x,f+=r[w+1]*x,p+=r[w+2]*x,h||(g+=r[w+3]*x));u[m]=d,u[m+1]=f,u[m+2]=p,u[m+3]=h?r[m+3]:g}e.imageData=c}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return O(O({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}E(id,"type","Convolute"),E(id,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),E(id,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),Y.setClass(id);const fA="Gamma";class sd extends dt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,i=1/r[0],s=1/r[1],o=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,i),a.g[l]=255*Math.pow(l/255,s),a.b[l]=255*Math.pow(l/255,o);for(let l=0;l<t.length;l+=4)t[l]=a.r[t[l]],t[l+1]=a.g[t[l+1]],t[l+2]=a.b[t[l+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:fA,gamma:this.gamma.concat()}}}E(sd,"type",fA),E(sd,"defaults",{gamma:[1,1,1]}),E(sd,"uniformLocations",["uGamma"]),Y.setClass(sd);const A3={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class od extends dt{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,i=0;i<t.length;i+=4){const s=t[i],o=t[i+1],a=t[i+2];switch(this.mode){case"average":r=(s+o+a)/3;break;case"lightness":r=(Math.min(s,o,a)+Math.max(s,o,a))/2;break;case"luminosity":r=.21*s+.72*o+.07*a}t[i+2]=t[i+1]=t[i]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return A3[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}E(od,"type","Grayscale"),E(od,"defaults",{mode:"average"}),E(od,"uniformLocations",["uMode"]),Y.setClass(od);const R3=O(O({},dA),{},{rotation:0});class Ym extends Xa{calculateMatrix(){const e=this.rotation*Math.PI,t=Ri(e),r=Pi(e),i=1/3,s=Math.sqrt(i)*r,o=1-t;this.matrix=[t+o/3,i*o-s,i*o+s,0,0,i*o+s,t+i*o,i*o-s,0,0,i*o-s,i*o+s,t+i*o,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}E(Ym,"type","HueRotation"),E(Ym,"defaults",R3),Y.setClass(Ym);class ad extends dt{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}E(ad,"type","Invert"),E(ad,"defaults",{alpha:!1,invert:!0}),E(ad,"uniformLocations",["uInvert","uAlpha"]),Y.setClass(ad);class ld extends dt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let i=0;i<t.length;i+=4){const s=(.5-Math.random())*r;t[i]+=s,t[i+1]+=s,t[i+2]+=s}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}E(ld,"type","Noise"),E(ld,"defaults",{noise:0}),E(ld,"uniformLocations",["uNoise","uSeed"]),Y.setClass(ld);class cd extends dt{applyTo2d(e){let{imageData:{data:t,width:r,height:i}}=e;for(let s=0;s<i;s+=this.blocksize)for(let o=0;o<r;o+=this.blocksize){const a=4*s*r+4*o,l=t[a],c=t[a+1],u=t[a+2],h=t[a+3];for(let d=s;d<Math.min(s+this.blocksize,i);d++)for(let f=o;f<Math.min(o+this.blocksize,r);f++){const p=4*d*r+4*f;t[p]=l,t[p+1]=c,t[p+2]=u,t[p+3]=h}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}E(cd,"type","Pixelate"),E(cd,"defaults",{blocksize:4}),E(cd,"uniformLocations",["uBlocksize"]),Y.setClass(cd);class ud extends dt{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,i=new me(this.color).getSource(),s=[i[0]-r,i[1]-r,i[2]-r],o=[i[0]+r,i[1]+r,i[2]+r];for(let a=0;a<t.length;a+=4){const l=t[a],c=t[a+1],u=t[a+2];l>s[0]&&c>s[1]&&u>s[2]&&l<o[0]&&c<o[1]&&u<o[2]&&(t[a+3]=0)}}sendUniformData(e,t){const r=new me(this.color).getSource(),i=this.distance,s=[0+r[0]/255-i,0+r[1]/255-i,0+r[2]/255-i,1],o=[r[0]/255+i,r[1]/255+i,r[2]/255+i,1];e.uniform4fv(t.uLow,s),e.uniform4fv(t.uHigh,o)}}E(ud,"type","RemoveColor"),E(ud,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),E(ud,"uniformLocations",["uLow","uHigh"]),Y.setClass(ud);class hd extends dt{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),i=new Array(r);for(let s=1;s<=r;s++)i[s-1]=e(s*t);return i}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,i)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(i,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(i,`];
              sum += 2.0 * uTaps[`).concat(i,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){Tg(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,i=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/i;const s=t.width,o=t.height,a=Math.round(s*r),l=Math.round(o*i);let c;c=this.resizeType==="sliceHack"?this.sliceByTwo(e,s,o,a,l):this.resizeType==="hermite"?this.hermiteFastResize(e,s,o,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,s,o,a,l):this.resizeType==="lanczos"?this.lanczosResize(e,s,o,a,l):new ImageData(a,l),e.imageData=c}sliceByTwo(e,t,r,i,s){const o=e.imageData,a=.5;let l=!1,c=!1,u=t*a,h=r*a;const d=e.filterBackend.resources;let f=0,p=0;const g=t;let m=0;d.sliceByTwo||(d.sliceByTwo=Di());const y=d.sliceByTwo;(y.width<1.5*t||y.height<r)&&(y.width=1.5*t,y.height=r);const v=y.getContext("2d");for(v.clearRect(0,0,1.5*t,r),v.putImageData(o,0,0),i=Math.floor(i),s=Math.floor(s);!l||!c;)t=u,r=h,i<Math.floor(u*a)?u=Math.floor(u*a):(u=i,l=!0),s<Math.floor(h*a)?h=Math.floor(h*a):(h=s,c=!0),v.drawImage(y,f,p,t,r,g,m,u,h),f=g,p=m,m+=h;return v.getImageData(f,p,i,s)}lanczosResize(e,t,r,i,s){const o=e.imageData.data,a=e.ctx.createImageData(i,s),l=a.data,c=this.lanczosCreate(this.lanczosLobes),u=this.rcpScaleX,h=this.rcpScaleY,d=2/this.rcpScaleX,f=2/this.rcpScaleY,p=Math.ceil(u*this.lanczosLobes/2),g=Math.ceil(h*this.lanczosLobes/2),m={},y={x:0,y:0},v={x:0,y:0};return function w(x){let S,C,T,_,M,P,$,N,H,D,V;for(y.x=(x+.5)*u,v.x=Math.floor(y.x),S=0;S<s;S++){for(y.y=(S+.5)*h,v.y=Math.floor(y.y),M=0,P=0,$=0,N=0,H=0,C=v.x-p;C<=v.x+p;C++)if(!(C<0||C>=t)){D=Math.floor(1e3*Math.abs(C-y.x)),m[D]||(m[D]={});for(let U=v.y-g;U<=v.y+g;U++)U<0||U>=r||(V=Math.floor(1e3*Math.abs(U-y.y)),m[D][V]||(m[D][V]=c(Math.sqrt(Math.pow(D*d,2)+Math.pow(V*f,2))/1e3)),T=m[D][V],T>0&&(_=4*(U*t+C),M+=T,P+=T*o[_],$+=T*o[_+1],N+=T*o[_+2],H+=T*o[_+3]))}_=4*(S*i+x),l[_]=P/M,l[_+1]=$/M,l[_+2]=N/M,l[_+3]=H/M}return++x<i?w(x):a}(0)}bilinearFiltering(e,t,r,i,s){let o,a,l,c,u,h,d,f,p,g,m,y,v,w=0;const x=this.rcpScaleX,S=this.rcpScaleY,C=4*(t-1),T=e.imageData.data,_=e.ctx.createImageData(i,s),M=_.data;for(d=0;d<s;d++)for(f=0;f<i;f++)for(u=Math.floor(x*f),h=Math.floor(S*d),p=x*f-u,g=S*d-h,v=4*(h*t+u),m=0;m<4;m++)o=T[v+m],a=T[v+4+m],l=T[v+C+m],c=T[v+C+4+m],y=o*(1-p)*(1-g)+a*p*(1-g)+l*g*(1-p)+c*p*g,M[w++]=y;return _}hermiteFastResize(e,t,r,i,s){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),c=Math.ceil(a/2),u=e.imageData.data,h=e.ctx.createImageData(i,s),d=h.data;for(let f=0;f<s;f++)for(let p=0;p<i;p++){const g=4*(p+f*i);let m=0,y=0,v=0,w=0,x=0,S=0,C=0;const T=(f+.5)*a;for(let _=Math.floor(f*a);_<(f+1)*a;_++){const M=Math.abs(T-(_+.5))/c,P=(p+.5)*o,$=M*M;for(let N=Math.floor(p*o);N<(p+1)*o;N++){let H=Math.abs(P-(N+.5))/l;const D=Math.sqrt($+H*H);D>1&&D<-1||(m=2*D*D*D-3*D*D+1,m>0&&(H=4*(N+_*t),C+=m*u[H+3],v+=m,u[H+3]<255&&(m=m*u[H+3]/250),w+=m*u[H],x+=m*u[H+1],S+=m*u[H+2],y+=m))}}d[g]=w/y,d[g+1]=x/y,d[g+2]=S/y,d[g+3]=C/v}return h}}E(hd,"type","Resize"),E(hd,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),E(hd,"uniformLocations",["uDelta","uTaps"]),Y.setClass(hd);class dd extends dt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let i=0;i<t.length;i+=4){const s=t[i],o=t[i+1],a=t[i+2],l=Math.max(s,o,a);t[i]+=l!==s?(l-s)*r:0,t[i+1]+=l!==o?(l-o)*r:0,t[i+2]+=l!==a?(l-a)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}E(dd,"type","Saturation"),E(dd,"defaults",{saturation:0}),E(dd,"uniformLocations",["uSaturation"]),Y.setClass(dd);class fd extends dt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let i=0;i<t.length;i+=4){const s=t[i],o=t[i+1],a=t[i+2],l=Math.max(s,o,a),c=(s+o+a)/3,u=2*Math.abs(l-c)/255*r;t[i]+=l!==s?(l-s)*u:0,t[i+1]+=l!==o?(l-o)*u:0,t[i+2]+=l!==a?(l-a)*u:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}E(fd,"type","Vibrance"),E(fd,"defaults",{vibrance:0}),E(fd,"uniformLocations",["uVibrance"]),Y.setClass(fd);const P3=()=>{const n=k.useRef(null),[e,t]=k.useState(null),[r,i]=k.useState("#000000"),[s,o]=k.useState("draw"),a=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFFFFF"];k.useEffect(()=>{if(!n.current)return;const c=new J0(n.current,{width:500,height:350,backgroundColor:"#ffffff"});return c.freeDrawingBrush=new $f(c),c.freeDrawingBrush.color=r,c.freeDrawingBrush.width=3,c.isDrawingMode=!0,t(c),()=>{c.dispose()}},[]),k.useEffect(()=>{e&&(e.isDrawingMode=!0,e.freeDrawingBrush&&(e.freeDrawingBrush.color=s==="erase"?"#ffffff":r,e.freeDrawingBrush.width=s==="erase"?20:3))},[s,r,e]);const l=()=>{e&&(e.clear(),e.backgroundColor="#ffffff",e.renderAll(),vr.success("Canvas cleared!"))};return b.jsxs("div",{className:"flex flex-col gap-2",children:[b.jsxs("div",{className:"win95-border-inset bg-muted p-2 flex gap-2 items-center flex-wrap",children:[b.jsx("button",{onClick:()=>o("draw"),className:`win95-border p-1.5 ${s==="draw"?"win95-border-inset bg-muted":"bg-card hover:bg-muted"}`,title:"Pencil",children:b.jsx(lj,{className:"w-4 h-4"})}),b.jsx("button",{onClick:()=>o("erase"),className:`win95-border p-1.5 ${s==="erase"?"win95-border-inset bg-muted":"bg-card hover:bg-muted"}`,title:"Eraser",children:b.jsx(XI,{className:"w-4 h-4"})}),b.jsx("div",{className:"w-px h-6 bg-border mx-1"}),b.jsx("button",{onClick:l,className:"win95-border bg-card hover:bg-muted p-1.5",title:"Clear",children:b.jsx(pj,{className:"w-4 h-4"})}),b.jsx("div",{className:"w-px h-6 bg-border mx-1"}),a.map(c=>b.jsx("button",{onClick:()=>i(c),className:`win95-border w-6 h-6 ${r===c?"win95-border-inset":""}`,style:{backgroundColor:c},title:c},c))]}),b.jsx("div",{className:"win95-border-inset",children:b.jsx("canvas",{ref:n,className:"pixelated"})})]})},D3="modulepreload",N3=function(n){return"/"+n},oC={},ih=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=N3(l),l in oC)return;oC[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":D3,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((d,f)=>{h.addEventListener("load",d),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},I3=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ih(async()=>{const{default:r}=await Promise.resolve().then(()=>ec);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Cb extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class aC extends Cb{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class lC extends Cb{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class cC extends Cb{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Z0;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Z0||(Z0={}));var j3=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class L3{constructor(e,{headers:t={},customFetch:r,region:i=Z0.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=I3(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return j3(this,arguments,void 0,function*(t,r={}){var i;try{const{headers:s,method:o,body:a,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const h=new URL(`${this.url}/${t}`);u&&u!=="any"&&(c["x-region"]=u,h.searchParams.set("forceFunctionRegion",u));let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(c["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(c["Content-Type"]="application/json",d=JSON.stringify(a)));const f=yield this.fetch(h.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:d,signal:l}).catch(y=>{throw y.name==="AbortError"?y:new aC(y)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new lC(f);if(!f.ok)throw new cC(f);let g=((i=f.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),m;return g==="application/json"?m=yield f.json():g==="application/octet-stream"?m=yield f.blob():g==="text/event-stream"?m=f:g==="multipart/form-data"?m=yield f.formData():m=yield f.text(),{data:m,error:null,response:f}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new aC(s)}:{data:null,error:s,response:s instanceof cC||s instanceof lC?s.context:void 0}}})}}var sn={},kb={},_g={},sh={},Eg={},Og={},F3=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Rl=F3();const W3=Rl.fetch,pA=Rl.fetch.bind(Rl),gA=Rl.Headers,B3=Rl.Request,z3=Rl.Response,ec=Object.freeze(Object.defineProperty({__proto__:null,Headers:gA,Request:B3,Response:z3,default:pA,fetch:W3},Symbol.toStringTag,{value:"Module"})),$3=tT(ec);var Mg={};Object.defineProperty(Mg,"__esModule",{value:!0});let H3=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Mg.default=H3;var mA=Yn&&Yn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Og,"__esModule",{value:!0});const U3=mA($3),V3=mA(Mg);let G3=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=U3.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l,c;let u=null,h=null,d=null,f=s.status,p=s.statusText;if(s.ok){if(this.method!=="HEAD"){const v=await s.text();v===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=v:h=JSON.parse(v))}const m=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),y=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");m&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,d=null,f=406,p="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const m=await s.text();try{u=JSON.parse(m),Array.isArray(u)&&s.status===404&&(h=[],u=null,f=200,p="OK")}catch{s.status===404&&m===""?(f=204,p="No Content"):u={message:m}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,p="OK"),u&&this.shouldThrowOnError)throw new V3.default(u)}return{error:u,data:h,count:d,status:f,statusText:p}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};Og.default=G3;var q3=Yn&&Yn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Eg,"__esModule",{value:!0});const Y3=q3(Og);let K3=class extends Y3.default{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Eg.default=K3;var X3=Yn&&Yn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(sh,"__esModule",{value:!0});const J3=X3(Eg);let Q3=class extends J3.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};sh.default=Q3;var Z3=Yn&&Yn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(_g,"__esModule",{value:!0});const vc=Z3(sh);let e4=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=i}select(e,t){const{head:r=!1,count:i}=t??{},s=r?"HEAD":"GET";let o=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),i&&this.headers.append("Prefer",`count=${i}`),new vc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var i;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new vc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new vc.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var r;const i="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new vc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new vc.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};_g.default=e4;var yA=Yn&&Yn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(kb,"__esModule",{value:!0});const t4=yA(_g),n4=yA(sh);let r4=class vA{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new t4.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new vA(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:s}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;r||i?(a=r?"HEAD":"GET",Object.entries(t).filter(([h,d])=>d!==void 0).map(([h,d])=>[h,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([h,d])=>{l.searchParams.append(h,d)})):(a="POST",c=t);const u=new Headers(this.headers);return s&&u.set("Prefer",`count=${s}`),new n4.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};kb.default=r4;var tc=Yn&&Yn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(sn,"__esModule",{value:!0});sn.PostgrestError=sn.PostgrestBuilder=sn.PostgrestTransformBuilder=sn.PostgrestFilterBuilder=sn.PostgrestQueryBuilder=sn.PostgrestClient=void 0;const wA=tc(kb);sn.PostgrestClient=wA.default;const bA=tc(_g);sn.PostgrestQueryBuilder=bA.default;const xA=tc(sh);sn.PostgrestFilterBuilder=xA.default;const SA=tc(Eg);sn.PostgrestTransformBuilder=SA.default;const CA=tc(Og);sn.PostgrestBuilder=CA.default;const kA=tc(Mg);sn.PostgrestError=kA.default;var i4=sn.default={PostgrestClient:wA.default,PostgrestQueryBuilder:bA.default,PostgrestFilterBuilder:xA.default,PostgrestTransformBuilder:SA.default,PostgrestBuilder:CA.default,PostgrestError:kA.default};const{PostgrestClient:s4,PostgrestQueryBuilder:BK,PostgrestFilterBuilder:zK,PostgrestTransformBuilder:$K,PostgrestBuilder:HK,PostgrestError:UK}=i4;class o4{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const a4="2.75.0",l4=`realtime-js/${a4}`,c4="1.0.0",ev=1e4,u4=1e3,h4=100;var Vc;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Vc||(Vc={}));var ot;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ot||(ot={}));var pr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(pr||(pr={}));var tv;(function(n){n.websocket="websocket"})(tv||(tv={}));var go;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(go||(go={}));class d4{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class TA{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ce;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ce||(Ce={}));const uC=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=f4(o,n,e,i),s),{}):{}},f4=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i==null?void 0:i.type,o=t[n];return s&&!r.includes(s)?_A(s,o):nv(o)},_A=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return y4(e,t)}switch(n){case Ce.bool:return p4(e);case Ce.float4:case Ce.float8:case Ce.int2:case Ce.int4:case Ce.int8:case Ce.numeric:case Ce.oid:return g4(e);case Ce.json:case Ce.jsonb:return m4(e);case Ce.timestamp:return v4(e);case Ce.abstime:case Ce.date:case Ce.daterange:case Ce.int4range:case Ce.int8range:case Ce.money:case Ce.reltime:case Ce.text:case Ce.time:case Ce.timestamptz:case Ce.timetz:case Ce.tsrange:case Ce.tstzrange:return nv(e);default:return nv(e)}},nv=n=>n,p4=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},g4=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},m4=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},y4=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>_A(e,a))}return n},v4=n=>typeof n=="string"?n.replace(" ","T"):n,EA=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Km{constructor(e,t,r={},i=ev){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var hC;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(hC||(hC={}));class Gc{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gc.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Gc.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Gc.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=s[c];if(h){const d=u.map(m=>m.presence_ref),f=h.map(m=>m.presence_ref),p=u.filter(m=>f.indexOf(m.presence_ref)<0),g=h.filter(m=>d.indexOf(m.presence_ref)<0);p.length>0&&(a[c]=p),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const h=e[a].map(f=>f.presence_ref),d=u.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var dC;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(dC||(dC={}));var qc;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(qc||(qc={}));var hi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(hi||(hi={}));class Tb{constructor(e,t={config:{}},r){var i,s;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=ot.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Km(this,pr.join,this.params,this.timeout),this.rejoinTimer=new TA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ot.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ot.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Gc(this),this.broadcastEndpointURL=EA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ot.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[qc.PRESENCE]&&this.bindings[qc.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},d={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(hi.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(hi.CLOSED)),this.updateJoinPayload(Object.assign({config:d},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){e==null||e(hi.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,m=(p=g==null?void 0:g.length)!==null&&p!==void 0?p:0,y=[];for(let v=0;v<m;v++){const w=g[v],{filter:{event:x,schema:S,table:C,filter:T}}=w,_=f&&f[v];if(_&&_.event===x&&_.schema===S&&_.table===C&&_.filter===T)y.push(Object.assign(Object.assign({},w),{id:_.id}));else{this.unsubscribe(),this.state=ot.errored,e==null||e(hi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(hi.SUBSCRIBED);return}}).receive("error",f=>{this.state=ot.errored,e==null||e(hi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(hi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===ot.joined&&e===qc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ot.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Km(this,pr.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ot.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Km(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>h4){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=pr;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let d=this._onMessage(o,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,g,m;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((m=(g=f.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(f=>f.callback(d,r)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var p,g,m,y,v,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const x=f.id,S=(p=f.filter)===null||p===void 0?void 0:p.event;return x&&((g=t.ids)===null||g===void 0?void 0:g.includes(x))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const x=(v=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return x==="*"||x===((w=t==null?void 0:t.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:g,table:m,commit_timestamp:y,type:v,errors:w}=p;d=Object.assign(Object.assign({},{schema:g,table:m,commit_timestamp:y,eventType:v,new:{},old:{},errors:w}),this._getPayloadRecords(p))}f.callback(d,r)})}_isClosed(){return this.state===ot.closed}_isJoined(){return this.state===ot.joined}_isJoining(){return this.state===ot.joining}_isLeaving(){return this.state===ot.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Tb.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(pr.close,{},e)}_onError(e){this._on(pr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ot.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=uC(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=uC(e.columns,e.old_record)),t}}const Xm=()=>{},pd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},w4=[1e3,2e3,5e3,1e4],b4=1e4,x4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class S4{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ev,this.transport=null,this.heartbeatIntervalMs=pd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Xm,this.ref=0,this.reconnectTimer=null,this.logger=Xm,this.conn=null,this.sendBuffer=[],this.serializer=new d4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>ih(async()=>{const{default:a}=await Promise.resolve().then(()=>ec);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${tv.websocket}`,this.httpEndpoint=EA(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=o4.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:c4}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Vc.connecting:return go.Connecting;case Vc.open:return go.Open;case Vc.closing:return go.Closing;default:return go.Closed}}isConnected(){return this.connectionState()===go.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Tb(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(u4,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},pd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=t,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(pr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([x4],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:l4};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(pr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new TA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},pd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,s,o,a,l,c,u;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:ev,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:pd.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Xm,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:h=>w4[h-1]||b4,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,d)=>d(JSON.stringify(h)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class _b extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ze(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class C4 extends _b{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rv extends _b{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var k4=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const OA=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ih(async()=>{const{default:r}=await Promise.resolve().then(()=>ec);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},T4=()=>k4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ih(()=>Promise.resolve().then(()=>ec),void 0)).Response:Response}),iv=n=>{if(Array.isArray(n))return n.map(t=>iv(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=iv(r)}),e},_4=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var aa=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Jm=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),E4=(n,e,t)=>aa(void 0,void 0,void 0,function*(){const r=yield T4();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{const s=n.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new C4(Jm(i),s,o))}).catch(i=>{e(new rv(Jm(i),i))}):e(new rv(Jm(n),n))}),O4=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?i:(_4(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function oh(n,e,t,r,i,s){return aa(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,O4(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>E4(l,a,r))})})}function Hf(n,e,t,r){return aa(this,void 0,void 0,function*(){return oh(n,"GET",e,t,r)})}function Pr(n,e,t,r,i){return aa(this,void 0,void 0,function*(){return oh(n,"POST",e,r,i,t)})}function sv(n,e,t,r,i){return aa(this,void 0,void 0,function*(){return oh(n,"PUT",e,r,i,t)})}function M4(n,e,t,r){return aa(this,void 0,void 0,function*(){return oh(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function MA(n,e,t,r,i){return aa(this,void 0,void 0,function*(){return oh(n,"DELETE",e,r,i,t)})}var A4=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class R4{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return A4(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}}var P4=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class D4{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new R4(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return P4(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}}var en=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const N4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class I4{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=OA(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return en(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},fC),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),h=yield(e=="PUT"?sv:Pr)(this.fetch,`${this.url}/object/${u}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}upload(e,t,r){return en(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return en(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:fC.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield sv(this.fetch,a.toString(),l,{headers:u});return{data:{path:s,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return en(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield Pr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new _b("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}update(e,t,r){return en(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return en(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}copy(e,t,r){return en(this,void 0,void 0,function*(){try{return{data:{path:(yield Pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return en(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Pr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return en(this,void 0,void 0,function*(){try{const i=yield Pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>Hf(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new D4(l,this.shouldThrowOnError)}info(e){return en(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Hf(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:iv(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}exists(e){return en(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield M4(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r)&&r instanceof rv){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return en(this,void 0,void 0,function*(){try{return{data:yield MA(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}list(e,t,r){return en(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},N4),t),{prefix:e||""});return{data:yield Pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}listV2(e,t){return en(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Pr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const j4="2.75.0",L4={"X-Client-Info":`storage-js/${j4}`};var ba=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class F4{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},L4),t),this.fetch=OA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ba(this,void 0,void 0,function*(){try{return{data:yield Hf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}getBucket(e){return ba(this,void 0,void 0,function*(){try{return{data:yield Hf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}createBucket(e){return ba(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield Pr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return ba(this,void 0,void 0,function*(){try{return{data:yield sv(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ba(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ba(this,void 0,void 0,function*(){try{return{data:yield MA(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}}class W4 extends F4{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new I4(this.url,this.headers,e,this.fetch)}}const B4="2.75.0";let _c="";typeof Deno<"u"?_c="deno":typeof document<"u"?_c="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_c="react-native":_c="node";const z4={"X-Client-Info":`supabase-js-${_c}/${B4}`},$4={headers:z4},H4={schema:"public"},U4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},V4={};var G4=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const q4=n=>{let e;return n?e=n:typeof fetch>"u"?e=pA:e=fetch,(...t)=>e(...t)},Y4=()=>typeof Headers>"u"?gA:Headers,K4=(n,e,t)=>{const r=q4(t),i=Y4();return(s,o)=>G4(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};var X4=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function J4(n){return n.endsWith("/")?n:n+"/"}function Q4(n,e){var t,r;const{db:i,auth:s,realtime:o,global:a}=n,{db:l,auth:c,realtime:u,global:h}=e,d={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>X4(this,void 0,void 0,function*(){return""})};return n.accessToken?d.accessToken=n.accessToken:delete d.accessToken,d}function Z4(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(J4(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const AA="2.75.0",Ma=30*1e3,ov=3,Qm=ov*Ma,eH="http://localhost:9999",tH="supabase.auth.token",nH={"X-Client-Info":`gotrue-js/${AA}`},av="X-Supabase-Api-Version",RA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},rH=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,iH=10*60*1e3;class Du extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Z(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class sH extends Du{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function oH(n){return Z(n)&&n.name==="AuthApiError"}class mo extends Du{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class to extends Du{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class rs extends to{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function aH(n){return Z(n)&&n.name==="AuthSessionMissingError"}class xa extends to{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gd extends to{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class md extends to{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function lH(n){return Z(n)&&n.name==="AuthImplicitGrantRedirectError"}class pC extends to{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lv extends to{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Zm(n){return Z(n)&&n.name==="AuthRetryableFetchError"}class gC extends to{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class cv extends to{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Uf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),mC=` 	
\r=`.split(""),cH=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<mC.length;e+=1)n[mC[e].charCodeAt(0)]=-2;for(let e=0;e<Uf.length;e+=1)n[Uf[e].charCodeAt(0)]=e;return n})();function yC(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Uf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Uf[r]),e.queuedBits-=6}}function PA(n,e,t){const r=cH[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function vC(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{dH(o,r,t)};for(let o=0;o<n.length;o+=1)PA(n.charCodeAt(o),i,s);return e.join("")}function uH(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function hH(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}uH(r,e)}}function dH(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function cl(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)PA(n.charCodeAt(i),t,r);return new Uint8Array(e)}function fH(n){const e=[];return hH(n,t=>e.push(t)),new Uint8Array(e)}function ko(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>yC(i,t,r)),yC(null,t,r),e.join("")}function pH(n){return Math.round(Date.now()/1e3)+n}function gH(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const wn=()=>typeof window<"u"&&typeof document<"u",oo={tested:!1,writable:!1},DA=()=>{if(!wn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(oo.tested)return oo.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),oo.tested=!0,oo.writable=!0}catch{oo.tested=!0,oo.writable=!1}return oo.writable};function mH(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const NA=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ih(async()=>{const{default:r}=await Promise.resolve().then(()=>ec);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},yH=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Aa=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ao=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},es=async(n,e)=>{await n.removeItem(e)};class Ag{constructor(){this.promise=new Ag.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ag.promiseConstructor=Promise;function ey(n){const e=n.split(".");if(e.length!==3)throw new cv("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!rH.test(e[r]))throw new cv("JWT not in base64url format");return{header:JSON.parse(vC(e[0])),payload:JSON.parse(vC(e[1])),signature:cl(e[2]),raw:{header:e[0],payload:e[1]}}}async function vH(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function wH(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function bH(n){return("0"+n.toString(16)).substr(-2)}function xH(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,bH).join("")}async function SH(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function CH(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await SH(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sa(n,e,t=!1){const r=xH();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await Aa(n,`${e}-code-verifier`,i);const s=await CH(r);return[s,r===s?"plain":"s256"]}const kH=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function TH(n){const e=n.headers.get(av);if(!e||!e.match(kH))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function _H(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function EH(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const OH=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ca(n){if(!OH.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ty(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wC(n){return JSON.parse(JSON.stringify(n))}var MH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const ho=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),AH=[502,503,504];async function bC(n){var e;if(!yH(n))throw new lv(ho(n),0);if(AH.includes(n.status))throw new lv(ho(n),n.status);let t;try{t=await n.json()}catch(s){throw new mo(ho(s),s)}let r;const i=TH(n);if(i&&i.getTime()>=RA["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new gC(ho(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new rs}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new gC(ho(t),n.status,t.weak_password.reasons);throw new sH(ho(t),n.status||500,r)}const RH=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function re(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[av]||(s[av]=RA["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await PH(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function PH(n,e,t,r,i,s){const o=RH(e,r,i,s);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new lv(ho(l),0)}if(a.ok||await bC(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await bC(l)}}function or(n){var e;let t=null;IH(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=pH(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function xC(n){const e=or(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function ps(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function DH(n){return{data:n,error:null}}function NH(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=MH(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function SC(n){return n}function IH(n){return n.access_token&&n.refresh_token&&n.expires_in}const ny=["global","local","others"];var jH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class LH{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=NA(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=ny[0]){if(ny.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ny.join(", ")}`);try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ps})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=jH(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:NH,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Z(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ps})}catch(t){if(Z(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:SC});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(p.split(";")[1].split("=")[1]);c[`${m}Page`]=g}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Z(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Ca(e);try{return await re(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ps})}catch(t){if(Z(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ca(e);try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ps})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Ca(e);try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ps})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ca(e.userId);try{const{data:t,error:r}=await re(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(Z(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ca(e.userId),Ca(e.id);try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await re(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:SC});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(p.split(";")[1].split("=")[1]);c[`${m}Page`]=g}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Z(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await re(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Z(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await re(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Z(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await re(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Z(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await re(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Z(t))return{data:null,error:t};throw t}}}function CC(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const ka={debug:!!(globalThis&&DA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class IA extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class FH extends IA{}async function WH(n,e,t){ka.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ka.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ka.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{ka.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw ka.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new FH(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ka.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function BH(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function jA(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function zH(n){return parseInt(n,16)}function $H(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function HH(n){var e;const{chainId:t,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:h,version:d}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(d!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const f=jA(n.address),p=u?`${u}://${r}`:r,g=n.statement?`${n.statement}
`:"",m=`${p} wants you to sign in with your Ethereum account:
${f}

${g}`;let y=`URI: ${h}
Version: ${d}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),a&&(y+=`
Not Before: ${a.toISOString()}`),l&&(y+=`
Request ID: ${l}`),c){let v=`
Resources:`;for(const w of c){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);v+=`
- ${w}`}y+=v}return`${m}
${y}`}class Qe extends Error{constructor({message:e,code:t,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=t}}class Vf extends Qe{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function UH({error:n,options:e}){var t,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Qe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=s.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Qe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Qe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Qe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Qe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Qe({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Qe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Qe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(FA(o)){if(s.rp.id!==o)return new Qe({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Qe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Qe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Qe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Qe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function VH({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Qe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Qe({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(FA(r)){if(t.rpId!==r)return new Qe({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Qe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Qe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Qe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var LA=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class GH{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const qH=new GH;function YH(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,i=LA(n,["challenge","user","excludeCredentials"]),s=cl(e).buffer,o=Object.assign(Object.assign({},t),{id:cl(t.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:cl(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function KH(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=LA(n,["challenge","allowCredentials"]),i=cl(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(t&&t.length>0){s.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const a=t[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:cl(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function XH(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:ko(new Uint8Array(n.response.attestationObject)),clientDataJSON:ko(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function JH(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:ko(new Uint8Array(i.authenticatorData)),clientDataJSON:ko(new Uint8Array(i.clientDataJSON)),signature:ko(new Uint8Array(i.signature)),userHandle:i.userHandle?ko(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function FA(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function kC(){var n,e;return!!(wn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function QH(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vf("Browser returned unexpected credential type",e)}:{data:null,error:new Vf("Empty credential response",e)}}catch(e){return{data:null,error:UH({error:e,options:n})}}}async function ZH(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vf("Browser returned unexpected credential type",e)}:{data:null,error:new Vf("Empty credential response",e)}}catch(e){return{data:null,error:VH({error:e,options:n})}}}const eU={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},tU={userVerification:"preferred",hints:["security-key"]};function Gf(...n){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of n)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(t(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=Gf(a,o):r[s]=Gf(o)}else r[s]=o}return r}function nU(n,e){return Gf(eU,n,e||{})}function rU(n,e){return Gf(tU,n,e||{})}class iU{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:a};const l=i??qH.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=nU(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:u,error:h}=await QH({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const c=rU(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:u,error:h}=await ZH(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(o){return Z(o)?{data:null,error:o}:{data:null,error:new mo("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!t)return{data:null,error:new Du("rpId is required for WebAuthn authentication")};try{if(!kC())return{data:null,error:new mo("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:t,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return Z(o)?{data:null,error:o}:{data:null,error:new mo("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!t)return{data:null,error:new Du("rpId is required for WebAuthn registration")};try{if(!kC())return{data:null,error:new mo("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(d=>d.factor_type==="webauthn"&&d.friendly_name===e&&d.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:t,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return Z(o)?{data:null,error:o}:{data:null,error:new mo("Unexpected error in register",o)}}}}BH();const sU={url:eH,storageKey:tH,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nH,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function TC(n,e,t){return await t()}const Ta={};class Nu{get jwks(){var e,t;return(t=(e=Ta[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Ta[this.storageKey]=Object.assign(Object.assign({},Ta[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Ta[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ta[this.storageKey]=Object.assign(Object.assign({},Ta[this.storageKey]),{cachedAt:e})}constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Nu.nextInstanceID,Nu.nextInstanceID+=1,this.instanceID>0&&wn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},sU),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new LH({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=NA(i.fetch),this.lock=i.lock||TC,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:wn()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=WH:this.lock=TC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new iU(this)},this.persistSession?(i.storage?this.storage=i.storage:DA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=CC(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=CC(this.memoryStorage)),wn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${AA}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=mH(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),wn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),lH(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Z(t)?{error:t}:{error:new mo("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const s=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:or}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Z(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,i;try{let s;if("email"in e){const{email:u,password:h,options:d}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Sa(this.storage,this.storageKey)),s=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:u,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:p},xform:or})}else if("phone"in e){const{phone:u,password:h,options:d}=e;s=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:or})}else throw new gd("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Z(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:xC})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:xC})}else throw new gd("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new xa}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(Z(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,i,s,o,a,l,c,u,h,d;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:g,wallet:m,statement:y,options:v}=e;let w;if(wn())if(typeof m=="object")w=m;else{const M=window;if("ethereum"in M&&typeof M.ethereum=="object"&&"request"in M.ethereum&&typeof M.ethereum.request=="function")w=M.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=m}const x=new URL((t=v==null?void 0:v.url)!==null&&t!==void 0?t:window.location.href),S=await w.request({method:"eth_requestAccounts"}).then(M=>M).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=jA(S[0]);let T=(r=v==null?void 0:v.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!T){const M=await w.request({method:"eth_chainId"});T=zH(M)}const _={domain:x.host,address:C,statement:y,uri:x.href,version:"1",chainId:T,nonce:(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=HH(_),p=await w.request({method:"personal_sign",params:[$H(f),C]})}try{const{data:g,error:m}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:p},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:or});if(m)throw m;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new xa}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:m})}catch(g){if(Z(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSolana(e){var t,r,i,s,o,a,l,c,u,h,d,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:m,wallet:y,statement:v,options:w}=e;let x;if(wn())if(typeof y=="object")x=y;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))x=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=y}const S=new URL((t=w==null?void 0:w.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in x&&x.signIn){const C=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),v?{statement:v}:null));let T;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")T=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)T=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)p=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),g=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${S.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(i=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const C=await x.signMessage(new TextEncoder().encode(p),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:m,error:y}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:ko(g)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:or});if(y)throw y;return!m||!m.session||!m.user?{data:{user:null,session:null},error:new xa}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:Object.assign({},m),error:y})}catch(m){if(Z(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await ao(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:s,error:o}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:or});if(await es(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new xa}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(Z(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:s,nonce:o}=e,a=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:or}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new xa}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(Z(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Sa(this.storage,this.storageKey));const{error:h}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new gd("You must provide either an email or phone number.")}catch(a){if(Z(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:or});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Z(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Sa(this.storage,this.storageKey)),await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:DH})}catch(s){if(Z(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new rs;const{error:i}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Z(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await re(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await re(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new gd("You must provide either an email or phone number and a type")}catch(t){if(Z(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ao(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Qm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await ao(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=ty()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ps}):await this._useSession(async t=>{var r,i,s;const{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rs}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:ps})})}catch(t){if(Z(t))return aH(t)&&(await this._removeSession(),await es(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new rs;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Sa(this.storage,this.storageKey));const{data:c,error:u}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:ps});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new rs;const t=Date.now()/1e3;let r=t,i=!0,s=null;const{payload:o}=ey(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Z(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new rs;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Z(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!wn())throw new md("No browser detected.");if(e.error||e.error_description||e.error_code)throw new md(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new pC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new md("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new pC("No code detected.");const{data:v,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new md("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let d=u+h;l&&(d=parseInt(l));const f=d-u;f*1e3<=Ma&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const p=d-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,u);const{data:g,error:m}=await this._getUser(s);if(m)throw m;const y={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:d,refresh_token:o,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(Z(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ao(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(oH(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await es(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=gH(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Sa(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Z(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,u;const{data:h,error:d}=s;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return wn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Z(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:i,data:{session:s}}=t;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,h=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:or}),{data:d,error:f}=h;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new xa}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),{data:d,error:f})}catch(i){if(Z(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)throw o;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(Z(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await wH(async i=>(i>0&&await vH(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:or})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Zm(s)&&Date.now()+o-r<Ma})}catch(r){if(this._debug(t,"error",r),Z(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),wn()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ao(this.storage,this.storageKey);if(i&&this.userStorage){let o=await ao(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Aa(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:ty()}else if(i&&!i.user&&!i.user){const o=await ao(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await es(this.storage,this.storageKey+"-user"),await Aa(this.storage,this.storageKey,i)):i.user=ty()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Qm;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Qm}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Zm(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new rs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ag;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new rs;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),Z(s)){const o={data:null,error:s};return Zm(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Aa(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const s=wC(i);await Aa(this.storage,this.storageKey,s)}else{const i=wC(t);await Aa(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await es(this.storage,this.storageKey),await es(this.storage,this.storageKey+"-code-verifier"),await es(this.storage,this.storageKey+"-user"),this.userStorage&&await es(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&wn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ma);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Ma);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ma}ms, refresh threshold is ${ov} ticks`),i<=ov&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof IA)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!wn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Sa(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await re(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Z(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await re(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(Z(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?XH(e.webauthn.credential_response):JH(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(t){if(Z(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const o=await re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:YH(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:KH(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Z(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ey(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+iH>i)return r;const{data:s,error:o}=await re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=ey(r);t!=null&&t.allowExpired||_H(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!c){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:s,header:i,signature:o},error:null}}const u=EH(i.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,fH(`${a}.${l}`)))throw new cv("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}}}Nu.nextInstanceID=0;const oU=Nu;class aU extends oU{constructor(e){super(e)}}var lU=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class cU{constructor(e,t,r){var i,s,o;this.supabaseUrl=e,this.supabaseKey=t;const a=Z4(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:H4,realtime:V4,auth:Object.assign(Object.assign({},U4),{storageKey:l}),global:$4},u=Q4(r??{},c);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=K4(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new s4(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new W4(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new L3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return lU(this,void 0,void 0,function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:o,flowType:a,lock:l,debug:c},u,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new aU({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,flowType:a,lock:l,debug:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new S4(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const uU=(n,e,t)=>new cU(n,e,t);function hU(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}hU()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const dU="https://owinjxnvrtzriwlfwudi.supabase.co",fU="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im93aW5qeG52cnR6cml3bGZ3dWRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2Njg4NjQsImV4cCI6MjA3NjI0NDg2NH0.B6eJZU_rYMD0TsdfYP6DICelCQXmOmV-fYRnJFww2qY",Ur=uU(dU,fU),pU=["","","","","","","","","",""],gU=()=>{const[n,e]=k.useState([]),[t,r]=k.useState(""),[i,s]=k.useState("Anon"),[o,a]=k.useState(!0),l=k.useRef(null),c=k.useRef(null),u=()=>{var g;(g=l.current)==null||g.scrollIntoView({behavior:"smooth"})};k.useEffect(()=>{u()},[n]),k.useEffect(()=>(h(),d(),()=>{c.current&&Ur.removeChannel(c.current)}),[]);const h=async()=>{try{const{data:g,error:m}=await Ur.from("chat_messages").select("*").order("created_at",{ascending:!0}).limit(100);if(m)throw m;e(g||[])}catch(g){console.error("Error fetching messages:",g),vr.error("Failed to load messages")}finally{a(!1)}},d=()=>{c.current=Ur.channel("chat_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},g=>{e(m=>[...m,g.new])}).subscribe()},f=async g=>{if(g.preventDefault(),!!t.trim())try{const{error:m}=await Ur.from("chat_messages").insert([{username:i.trim()||"Anon",message:t.trim()}]);if(m)throw m;r(""),vr.success("Message sent!")}catch(m){console.error("Error sending message:",m),vr.error("Failed to send message")}},p=g=>{r(t+g)};return b.jsxs("div",{className:"flex flex-col gap-2 h-[400px]",children:[b.jsxs("div",{className:"win95-border-inset bg-white flex-1 overflow-y-auto p-2 font-mono text-xs",children:[o?b.jsx("div",{className:"text-center text-muted-foreground py-4",children:"Loading messages..."}):n.length===0?b.jsx("div",{className:"text-center text-muted-foreground py-4",children:"No messages yet. Start the conversation! "}):n.map(g=>b.jsxs("div",{className:"mb-1",children:[b.jsxs("span",{className:"text-muted-foreground",children:["[",new Date(g.created_at).toLocaleTimeString(),"]"]})," ",b.jsxs("span",{className:"font-bold text-primary",children:[g.username,":"]})," ",b.jsx("span",{className:"text-foreground",children:g.message})]},g.id)),b.jsx("div",{ref:l})]}),b.jsx("div",{className:"win95-border-inset bg-muted p-1 flex gap-1 flex-wrap",children:pU.map(g=>b.jsx("button",{onClick:()=>p(g),className:"win95-border bg-card hover:bg-muted-foreground/10 px-2 py-1 text-sm",children:g},g))}),b.jsxs("form",{onSubmit:f,className:"flex gap-2",children:[b.jsx("input",{type:"text",value:i,onChange:g=>s(g.target.value),className:"win95-border-inset bg-input px-2 py-1 w-24 text-sm",placeholder:"Name"}),b.jsx("input",{type:"text",value:t,onChange:g=>r(g.target.value),className:"win95-border-inset bg-input px-2 py-1 flex-1 text-sm",placeholder:"Say something..."}),b.jsx("button",{type:"submit",className:"win95-border bg-card hover:bg-muted px-3 py-1 active:win95-border-inset",children:b.jsx(dj,{className:"w-4 h-4"})})]})]})},mU=()=>b.jsxs("div",{className:"win95-border-inset bg-white p-4 space-y-4 max-h-[500px] overflow-y-auto",children:[b.jsx("div",{className:"text-center",children:b.jsx("h2",{className:"text-2xl font-bold text-primary mb-2",children:"Mariana Meireles"})}),b.jsxs("div",{className:"win95-border bg-muted p-3 space-y-3 text-sm",children:[b.jsx("p",{children:"I strive to live poetically, compassionately and fearlessly."}),b.jsx("p",{children:"In my career, the ideal expression of this is to broadly improve the lives of all beings."}),b.jsx("p",{children:"Previously, I worked with software in the open-source and open-science ecosystems, contributing to projects like Firefox, Jupyter Notebooks, and Conda."}),b.jsx("p",{children:"As a researcher, I've worked at CHAI at UC Berkeley, the Max Planck and at the University of Bonn."})]}),b.jsxs("div",{className:"win95-border bg-card p-3",children:[b.jsx("h3",{className:"font-bold text-sm mb-2",children:"Connect"}),b.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[b.jsxs("a",{href:"https://github.com/marimeireles/",target:"_blank",rel:"noopener noreferrer",className:"win95-border bg-muted hover:bg-muted-foreground/10 p-2 flex items-center gap-2 text-xs",children:[b.jsx(ZI,{className:"w-4 h-4"}),"GitHub"]}),b.jsxs("a",{href:"https://www.linkedin.com/in/mariana-meireles/",target:"_blank",rel:"noopener noreferrer",className:"win95-border bg-muted hover:bg-muted-foreground/10 p-2 flex items-center gap-2 text-xs",children:[b.jsx(ij,{className:"w-4 h-4"}),"LinkedIn"]}),b.jsxs("a",{href:"mailto:marianameireles@protonmail.com",className:"win95-border bg-muted hover:bg-muted-foreground/10 p-2 flex items-center gap-2 text-xs",children:[b.jsx(VE,{className:"w-4 h-4"}),"Email"]}),b.jsxs("a",{href:"https://calendar.app.google/TxR1iiyEriso6AqL9",target:"_blank",rel:"noopener noreferrer",className:"win95-border bg-muted hover:bg-muted-foreground/10 p-2 flex items-center gap-2 text-xs",children:[b.jsx(mj,{className:"w-4 h-4"}),"Book a Call"]})]})]}),b.jsxs("div",{className:"win95-border bg-card p-3",children:[b.jsx("h3",{className:"font-bold text-sm mb-2",children:"Links"}),b.jsx("div",{className:"space-y-1",children:b.jsxs("a",{href:"https://marimeireles.com/cv.pdf",target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-primary hover:underline",children:[b.jsx(QI,{className:"w-3 h-3 inline mr-1"}),"CV"]})})]})]}),yU=()=>{const n={behance:"https://www.behance.net/marianameireles",deviantart:"https://www.deviantart.com/marimeireles/gallery",toes:"https://github.com/marimeireles/touchdesigner-toes/tree/master"},e=[{id:1,title:"Tattoo Art",description:"",color:"bg-gradient-to-br from-orange-400 to-pink-500",url:n.deviantart},{id:2,title:"VJ",description:"",color:"bg-gradient-to-br from-blue-400 to-cyan-300",url:n.toes}];return b.jsxs("div",{className:"space-y-3",children:[b.jsx("div",{className:"win95-border bg-muted p-2 text-sm font-bold flex items-center justify-between",children:b.jsx("span",{children:" My Art Gallery"})}),b.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.map(t=>b.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":`${t.title}  opens external link`,className:"win95-border bg-white p-2 hover:bg-muted/50 cursor-pointer group block focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",children:[b.jsx("div",{className:`${t.color} w-full h-24 win95-border-inset mb-2 transition-transform group-hover:scale-105`}),b.jsxs("div",{className:"text-xs",children:[b.jsx("p",{className:"font-bold underline group-hover:no-underline",children:t.title}),b.jsx("p",{className:"text-muted-foreground",children:t.description||""})]})]},t.id))})]})},vU=()=>{const[n,e]=k.useState([]),[t,r]=k.useState(""),[i,s]=k.useState(""),[o,a]=k.useState(!0);k.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:u,error:h}=await Ur.from("guestbook").select("*").order("created_at",{ascending:!1});if(h)throw h;e(u||[])}catch(u){console.error("Error fetching guestbook entries:",u),vr.error("Failed to load guestbook entries")}finally{a(!1)}},c=async u=>{if(u.preventDefault(),!(!t.trim()||!i.trim()))try{const{data:h,error:d}=await Ur.from("guestbook").insert([{name:t.trim(),message:i.trim()}]).select().single();if(d)throw d;e([h,...n]),r(""),s(""),vr.success("Thanks for signing the guestbook! ")}catch(h){console.error("Error adding guestbook entry:",h),vr.error("Failed to add entry. Please try again.")}};return b.jsxs("div",{className:"space-y-3",children:[b.jsx("div",{className:"win95-border bg-muted p-2 text-sm font-bold",children:" Sign My Guestbook"}),b.jsxs("form",{onSubmit:c,className:"win95-border-inset bg-muted p-3 space-y-2",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-bold block mb-1",children:"Name:"}),b.jsx("input",{type:"text",value:t,onChange:u=>r(u.target.value),className:"w-full win95-border-inset bg-input px-2 py-1 text-sm",placeholder:"Your name",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-bold block mb-1",children:"Message:"}),b.jsx("textarea",{value:i,onChange:u=>s(u.target.value),className:"w-full win95-border-inset bg-input px-2 py-1 text-sm resize-none",rows:3,placeholder:"Leave a message...",required:!0})]}),b.jsx("button",{type:"submit",className:"win95-border bg-card hover:bg-muted px-4 py-1 text-sm font-bold active:win95-border-inset",children:"Sign Guestbook"})]}),b.jsx("div",{className:"win95-border-inset bg-white p-2 max-h-60 overflow-y-auto space-y-2",children:o?b.jsx("div",{className:"text-center text-sm text-muted-foreground py-4",children:"Loading..."}):n.length===0?b.jsx("div",{className:"text-center text-sm text-muted-foreground py-4",children:"No entries yet. Be the first to sign! "}):n.map(u=>b.jsxs("div",{className:"win95-border bg-muted p-2 text-sm",children:[b.jsxs("div",{className:"flex justify-between items-start mb-1",children:[b.jsx("span",{className:"font-bold text-primary",children:u.name}),b.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(u.created_at).toLocaleDateString()})]}),b.jsx("p",{className:"text-xs",children:u.message})]},u.id))})]})},wU=({blogName:n})=>{const t={Software:{emoji:"",content:b.jsxs("div",{className:"space-y-3 text-sm",children:[b.jsx("p",{children:"I've worked as a software engineer with a focus on scientific development for several years. All of this work was within open-source organizations."}),b.jsx("p",{children:"I'm a core contributor to projects such as Jupyter, Firefox, Mamba, Conda Forge, Farama's Zoo, PyScript, PySide, Mozilla Webcompat, Qt, and others."}),b.jsx("p",{children:"Currently I'm affiliated with the Open Knowledge Foundation as an Expert."}),b.jsxs("p",{children:["In the past, I served as a member of the Jupyter technical committee, as a member of the DISC NumFOCUS steering committee, as a Max Planck Insitute Open Science Ambassator and as a Subject Matter Expert for NASA, developing a ",b.jsx("a",{href:"https://www.nasa.gov/news-release/new-course-from-nasa-helps-build-open-inclusive-science-community/",target:"_blank",className:"text-primary hover:underline",children:"course"})," aimed at providing guidance for scientists on practicing open science."]}),b.jsxs("p",{children:["I've also taught open science and software classes to graduate students at Harvard through the LSSTC-DSFP program and at ",b.jsx("a",{href:"http://github.com/marimeireles/talks",target:"_blank",className:"text-primary hover:underline",children:"several other"})," conferences, meetups, and groups. I'm also grateful for the Jupyter community having recognized me as a ",b.jsx("a",{href:"https://blog.jupyter.org/congratulations-distinguished-contributors-bc349fa60d68",target:"_blank",className:"text-primary hover:underline",children:"distinguished contributor"})," in early 2022."]})]})},Research:{emoji:"",content:b.jsxs("div",{className:"space-y-3 text-sm",children:[b.jsx("p",{children:"As a researcher I'm interested in understanding what are the underlying characteristics that are important for fostering cooperation among different intelligences and creating a bright future for human and AIs alike."}),b.jsxs("div",{className:"win95-border bg-muted p-2",children:[b.jsx("h4",{className:"font-bold mb-1",children:"Focus Areas"}),b.jsxs("ul",{className:"space-y-1 text-xs",children:[b.jsx("li",{children:" Coordination & cooperative AI"}),b.jsx("li",{children:" Evolutionary biology & teleology"}),b.jsx("li",{children:" Reinforcement learning"}),b.jsx("li",{children:" Complex systems"}),b.jsx("li",{children:" Ethics"})]})]}),b.jsx("p",{className:"text-xs",children:b.jsx("a",{href:"https://github.com/marimeireles/talks/",target:"_blank",className:"text-primary hover:underline",children:"Academic work "})})]})},Community:{emoji:"",content:b.jsxs("div",{className:"space-y-3 text-sm",children:[b.jsxs("p",{children:["I flourish by having the support, serendipity and positive feedback loops that a community brings. Do you want to learn or practice something together? Send me a message! If you want, you can also send me anonymous feedback ",b.jsx("a",{href:"https://www.admonymous.co/marimeireles",target:"_blank",className:"text-primary hover:underline",children:"here"}),"."]}),b.jsxs("div",{className:"win95-border bg-muted p-2",children:[b.jsx("h4",{className:"font-bold mb-1",children:"Activities"}),b.jsxs("ul",{className:"space-y-2 text-xs",children:[b.jsxs("li",{children:[" ",b.jsx("b",{children:"Supper and salon"}),': I host vegan dinners and salons in Berlin. Themes we talked about in the past include "The limits of free speech", "Spirituality and rituals", "Rethinking future socio-economic structures and institutions", "How to be moral", etc. If you are a Berliner or a passer-by and would like to join we welcome first-timers, just send me an email!',b.jsx("ul",{className:"ml-4 mt-1",children:b.jsxs("li",{children:[" If we're on a 1:1 I'm happy to have discussions that abide to the ",b.jsx("a",{href:"https://www.lesswrong.com/w/crockers-rules",target:"_blank",className:"text-primary hover:underline",children:"Crocker's Rules"}),"."]})})]}),b.jsxs("li",{children:[" ",b.jsx("b",{children:"Buddhism and meditation"}),": I practice Dzogchen Tibetan Buddhism. That said, I was a part of many religious traditions in the past and I enjoy very much learning about all kinds of different cults and spiritual communities. I'm part of an ",b.jsx("a",{href:"https://aroencyclopaedia.org/shared/text/i/information_in_01_introduction_eng.php",target:"_blank",className:"text-primary hover:underline",children:"Aro"})," sangha in Berlin and you're welcome to join us if you're interested and respectful, the sangha is religious. I'm interested in meditating with others and sharing curious states of consciousness (non-related with drug-usage as I do my best to follow the ",b.jsx("a",{href:"https://www.parallax.org/mindfulnessbell/article/dharma-talk-five-wonderful-precepts/",target:"_blank",className:"text-primary hover:underline",children:"five precepts"}),")."]}),b.jsxs("li",{children:[" ",b.jsx("b",{children:"Literature"}),": I really enjoy learning through reading and exploring new worlds through text. I try to keep an up-to-date ",b.jsx("a",{href:"/reading-list.html",target:"_blank",className:"text-primary hover:underline",children:"reading list"}),", maybe we can chill in a cafe or park and talk about ideas we had after reading together. I also write or post short texts or poems I like ",b.jsx("a",{href:"https://lettersfortheevanescents.mataroa.blog/",target:"_blank",className:"text-primary hover:underline",children:"here"}),"."]}),b.jsxs("li",{children:[" ",b.jsx("b",{children:"Multimedia Artist"}),": It's really fun to be the girl taking care of lights at events. I've built my own DMX controller, and I'm somewhat versed in being scrappy with electronics. I also try to be artsy with Touch Designer, I mainly focus on interactive art. Check some of my ",b.jsx("a",{href:"https://github.com/marimeireles/touchdesigner-toes/tree/master",target:"_blank",className:"text-primary hover:underline",children:"toes"}),". Here's a ",b.jsx("a",{href:"https://www.behance.net/marianameireles",target:"_blank",className:"text-primary hover:underline",children:"link"})," for a portfolio I'm building. I'm open for hire and to collaborate in this kind of work."]}),b.jsxs("li",{children:[" ",b.jsx("b",{children:"Drawing"}),": I'm a ",b.jsx("a",{href:"https://www.deviantart.com/marimeireles/gallery",target:"_blank",className:"text-primary hover:underline",children:"beginner tattoo artist"}),". Tattoing is a very special practice to me, something I consider truly sacred and ritualistic. I'm open to tattooing new people, if you're interested, send me an email. I'm looking to get a Sak Yant done, please let me know if you know anyone in Europe or the US that is able to bless it. I tattoo myself and friends. I also know the basics of painting with spray, and I want to learn more, I would very much like to learn together. I also want to improve in watercolor and drawing, for that I like to go out on small friend dates and paint city/landscapes."]}),b.jsxs("li",{children:[" ",b.jsx("b",{children:"AI Art*"}),": In the past, I've experimented with ",b.jsx("a",{href:"https://colab.research.google.com/drive/1hcUHPLk98zN_V89Z0U5nMUhabPjWk05k?userstoinvite=zeynepsatir35%40gmail.com&actionButton=1",target:"_blank",className:"text-primary hover:underline",children:"GANs"})," and created some ",b.jsx("a",{href:"https://www.deviantart.com/marimeireles/gallery/82011542/gan-designs-2021",target:"_blank",className:"text-primary hover:underline",children:"cool tattoo designs"}),". I've also worked with story telling and agent-based modeling LLMs. Would love to collaborate with artists as a software engineer! For more of my AI projects check my ",b.jsx("a",{href:"https://www.behance.net/marianameireles",target:"_blank",className:"text-primary hover:underline",children:"Behance"}),"."]}),b.jsxs("li",{children:[" ",b.jsx("b",{children:"Music"}),": Music theory, music producing (mainly electronic but also interested in analog jams), djing, foxdot(and similar shenanigans). I play the guitar and sing a bit, trying to be better at my Bossa Nova. Also looking for riot grrrls to play some punk rock with."]}),b.jsxs("li",{children:[" ",b.jsx("b",{children:"Flow"}),": Dragon staff, hula-hoop, fire flow, yoga. Anything flowey, I'm always looking for people to share these practices with."]}),b.jsxs("li",{children:[" ",b.jsx("b",{children:"Sports"}),": I am practicing calisthenics mixed in with some free weight lifting. I think it's fun to practice with friends, as we can teach each other stuff. I go to a nearby calisthenics park, but open to travel for a calisthenics date. I also really like bouldering and am member at a cool climbing gym! If interested, ask me which."]})]})]})]})},Activism:{emoji:"",content:b.jsxs("div",{className:"space-y-3 text-sm",children:[b.jsxs("p",{children:["I support several causes: ",b.jsx("a",{href:"https://ethicalsource.dev/",target:"_blank",className:"text-primary hover:underline",children:"ethical open source"}),", ",b.jsx("a",{href:"https://en.wikipedia.org/wiki/Animal_Liberation_(book)",target:"_blank",className:"text-primary hover:underline",children:"animal liberation"}),", the ",b.jsx("a",{href:"https://ourworldindata.org/environmental-impacts-of-food?insight=differences-carbon-footprint-foods#key-insights-on-the-environmental-impacts-of-food",target:"_blank",className:"text-primary hover:underline",children:"decrease"})," in animal-based products consumption, investing in carbon offsets to decrease my CO2 footprint, leveraging democracy through ",b.jsx("a",{href:"https://pol.is/home",target:"_blank",className:"text-primary hover:underline",children:"open democratic practices"}),", ",b.jsx("a",{href:"https://postmeritocracy.org/",target:"_blank",className:"text-primary hover:underline",children:"post meritocracy"})," in my engineering work context, combating disinformation on the Web, ",b.jsx("a",{href:"https://80000hours.org/problem-profiles/artificial-intelligence/",target:"_blank",className:"text-primary hover:underline",children:"AI alignment"}),", ",b.jsx("a",{href:"https://ia600605.us.archive.org/15/items/GuerillaOpenAccessManifesto/Goamjuly2008.pdf",target:"_blank",className:"text-primary hover:underline",children:"open access to knowledge"}),", empowering people to overcome poverty using a) ",b.jsx("a",{href:"https://marimeireles.notion.site/Poverty-alleviation-6cc16e6e2e3e49d19ed9112aec79d5cf?pvs=4",target:"_blank",className:"text-primary hover:underline",children:"non-traditional methods of pedagogy"}),", b) ",b.jsx("a",{href:"https://marimeireles.notion.site/Poverty-alleviation-6cc16e6e2e3e49d19ed9112aec79d5cf?pvs=4",target:"_blank",className:"text-primary hover:underline",children:"land redistribution coupled with permaculture"})," and community building in rural contexts c) offering OSS opportunities through ",b.jsx("a",{href:"https://marimeireles.notion.site/Poverty-alleviation-6cc16e6e2e3e49d19ed9112aec79d5cf?pvs=4",target:"_blank",className:"text-primary hover:underline",children:"internships"})," and ",b.jsx("a",{href:"https://marimeireles.com/mentorship.html",target:"_blank",className:"text-primary hover:underline",children:"mentoring"})," d) respecting people's agency over their own economical future through ",b.jsx("a",{href:"https://www.givedirectly.org/",target:"_blank",className:"text-primary hover:underline",children:"donating money directly"})," to them."]}),b.jsxs("div",{className:"win95-border bg-muted p-2",children:[b.jsx("h4",{className:"font-bold mb-1",children:"Projects I Support"}),b.jsxs("ul",{className:"space-y-1 text-xs",children:[b.jsxs("li",{children:[" ",b.jsx("a",{href:"https://www.linkedin.com/company/84894279/",target:"_blank",className:"text-primary hover:underline",children:"Women of Color Code"})]}),b.jsxs("li",{children:[" ",b.jsx("a",{href:"https://www.redi-school.org/",target:"_blank",className:"text-primary hover:underline",children:"ReDI School"})]}),b.jsxs("li",{children:[" ",b.jsx("a",{href:"https://berlin.pyladies.com/",target:"_blank",className:"text-primary hover:underline",children:"PyLadies Berlin"})]}),b.jsxs("li",{children:[" ",b.jsx("a",{href:"https://www.frauenloop.org/",target:"_blank",className:"text-primary hover:underline",children:"Frauen Loop"})]})]})]}),b.jsx("p",{className:"text-xs",children:"I believe women have the right to have full control over their own bodies:"}),b.jsx("div",{className:"win95-border bg-muted p-2",children:b.jsxs("ul",{className:"space-y-1 text-xs",children:[b.jsxs("li",{children:[" ",b.jsx("a",{href:"https://fragdenstaat.de/aktionen/219a/",target:"_blank",className:"text-primary hover:underline",children:"Frag Den Staat"}),": Doctors in Germany are not allowed to post factual information on abortions on their websites. This organization is currently providing resources on the subject in German, English, and Turkish."]}),b.jsxs("li",{children:[" ",b.jsx("a",{href:"https://www.womenonwaves.org/en/",target:"_blank",className:"text-primary hover:underline",children:"Women on Waves"}),": A Dutch NGO bringing reproductive health services to women in countries with restrictive abortion laws. If the value of their products is inaccessible to you, I want to help, send me an email."]})]})})]})}}[n];return t?b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{className:"win95-border bg-gradient-to-r from-primary/10 to-accent/20 p-3 text-center",children:[b.jsx("div",{className:"text-3xl mb-2",children:t.emoji}),b.jsx("h2",{className:"text-lg font-bold text-primary",children:n})]}),b.jsx("div",{className:"win95-border-inset bg-white p-3 max-h-[400px] overflow-y-auto",children:t.content})]}):b.jsx("div",{className:"win95-border-inset bg-white p-4 text-center",children:b.jsx("p",{className:"text-muted-foreground",children:"Content not found"})})},bU=`Name,Status,Type,Author,Notes
Alcibiades,Read,philosophy,Plato
The Vital Question,Want to read,biology;teleology,
The Player of Games,Read,sci-fi,Ian Banks
The Wisdom of Insecurity,Read,buddhism,Allan Watts
The Dark Forest,Read,sci-fi,Cixin Liu
The dynamic world of Ukiyo-e,Want to read,art,Kuniyoshi
Ulysses,Reading,fiction,James Joyce
King Lear,Read,fiction,Shakespeare
Introduction to Topological Manifolds,Want to read,math,John M. Lee
Mathematical Structure of Syntactic Merge,Want to read,math;language,Matilda
Why Greatness Cannot Be Planned,Reading,philosophy,Kenneth O. Stanley and Joel Lehman
Population Games and Evolutionary Dynamics,Reading,math;game-theory;evolution,Sandholm
Magic Science and Religion and the Scope of Rationality,Reading,anthropology;religion;history,Stanley Jeyaraja Tambiah
The Calculus of Selfishness,Reading,math;game-theory,Sigmund
The Essential Rilke,Read,poetry,Rilse
The Rebel,Want to read,fiction;philosophy,Camus
Ode to a Nightingale,Want to read,poetry,John Keats
Who Gets What and Why,Want to read,economics,Alvin E. Roth
1q94,Want to read,fiction,Murakami
Small Moral Works,Want to read,philosophy,Giacomo Leopardi
Ramayana,Reading,religion;hinduism,Valmiki
Essays on the Gita,Want to read,religion;hinduism,Aurobindo
The Feeling of Life Itself,Want to read,consciousness,Koch
High Weirdness,Want to read,drugs;magic,Philip K. Dick Terence McKenna and Robert Anton Wilson
Wild Swans: Three Daughters of China,Want to read,history;biography,Jung Chang
Wild Geese,Want to read,poetry,Mary Oliver
Shadows of the mind,Want to read,consciousness,Penrose
Letters to a Young Poet,Read,poetry,Rainer Maria Rilke 
Spacetime and Geometry: An Introduction to General Relativity,Want to read,physics, Sean Carroll
Philebus,Want to read,philosophy,Plato
Gorgias,Want to read,philosophy,Plato
Science and the Modern World,Reading,philosophy;physics,Whitehead
Terra Ignota,Want to read,sci-fi,Palmer
Always Coming Home,Want to read,sci-fi,Le Guin
God is a verb,Reading,judaism;magic,David A. Cooper
An Enquiry Concerning Human Understanding,Abandoned,philosophy,Hume
The Couple's Guide to Thriving with ADHD,Read,psychology,Melissa Orlov and Nancie Kohlenberger
The Unbearable Lightness of Being,Read,fiction;philosophy,Milan Kundera
Ant Architecture,Reading,biology,Walter R Tschinkel
Shadows at Noon,Reading,history,Joya Chatterji
The Computer and the Brain,Read,neuroscience;computer-science,Von Neumann
Spectrum of Ecstasy,Reading,buddhism,Khandro Dechen and Ngakpa Chogyam
Distress,Want to read,sci-fi,Greg Egan
Picturing Quantum Processes,Want to read,physics,Bob Coecke and Stefano Gogioso
Invisible Cities,Want to read,fiction,Italo Calvino
Narciss and Goldmund,Want to read,fiction,Hesse
The Perennial Philosophy,Want to read,philosophy,Huxley
What it is like to be a Bat,Want to read,philosophy,Thomas Nagel
On Certainty,Want to read,philosophy,Wittgenstein
Embodied Mind: Cognitive Science and Human Experience,Want to read,psychology;philosophy,Francisco Varela
Reinventing the sacred: A new view of science reason and religion,Want to read,philosophy,Stuart Kauffman
The tao is silent,Reading,buddhism;philosophy,Raymon Smullyan
The Autobiography of a Super-Tramp,Read,autobiography,H. W. Davis
Jung's Map of the Soul,Read,psychology,
Learn Physics with Functional Programming,Want to read,physics,Scott N. Walck
An Introduction to Automata Theory Languages and Computation,Want to read,computer-science,Hopcroft
Structure and Interpretation of Classical Mechanics,Want to read,physics,Sussman
On Virtue Ethics,Want to read,philosophy,Rosalind Hursthouse
Surprised by Joy: The Shape of My Early Life,Want to read,biography;christianity,C.S. Lewis
Consider Phlebas,Stalled,sci-fi,Iain M. Banks
Opression and liberty,Reading,philosophy;economics,Simone Weil
How to Know a Person: The Art of Seeing Others Deeply and Being Deeply Seen,Want to read,psychology,David Brooks
Living With Complexity,Want to read,complexity,Donald A. Norman
Modern Man in Search of a Soul,Read,psicology,Jung
The Heroic Heart,Read,buddhism,Jetsunma Tenzin Palmo
River Out of Eden,Want to read,evolution;history,Richard Dawkins
Karmamudra: The Yoga of Bliss,Reading,buddhism;sex,Nida Chenagtsang
My Spiritual Autobiography,Read,biography;buddhism,Dalai Lama
Broke: Fixing Britains poverty crisis,Reading,economics,Tom Clark
I Want to Keep Smashing Myself Until I Am Whole,Want to read,philosophy,Elias Canetti and Joshua Cohen
Why Greatness Cannot Be Planned,Want to read,computer-science;psychology,Kenneth O. Stanley and Joel Lehman
Models of My Life,Want to read,philosophy;economics,Herbert Simon
The Complex World,Want to read,complex-systems,Krakauer
The Democracy Project,Want to read,history;anthropology;economics,David Graeber
A Book of Noises,Want to read,music,Caspar Henderson
The Moment of Complexity,Want to read,complex-systems,Mike Taylor
Cooperation: A Political Economic and Social Theory,Want to read,coordination;game-theory,Harcourt
The Tyranny of the Ideal,Want to read,philosophy,Gerald F Gaus
Post-scarcity Anarchism,Want to read,anarchism;economics,Murray Bookchin
The Problem of Induction,Want to read,philosophy,Hume
The Usefulness of Useless Knowledge,Want to read,philosophy,Abraham Flexner and Robbert Dijkgraaf
Chaos,Reading,physics;complex-systems,James Gleick
Emotional Intelligence,Read,psychology,Daniel Goleman
Good Economics for Hard Times,Reading,economics,Abhijit and Duflo
Factfulness,Read,economics;philosophy,Hans Rosling
Dynamical Systems in Neuroscience,Want to read,neuroscience,Eugene M. M Izhikevich
The Cyberiad,Read,sci-fi,Stanisaw Lem
The Age of Em,Reading,futurism,Robin Hanson,
How Asia Works,Read,economics;history,Joe Studwell,
Norwegian Wood,Stalled,fiction,Haruki Murakami,
Tudo  rio,Read,fiction,Carla Madeira,
The Language Instinct,Want to read,psychology;evolution;consciousness,Steven Pinker
The Society of Mind,Reading,consciousness;computer-science,Marvin Minsky
Logicomix,Want to read,comics,Apostolos Doxiadis
The Miracle of Mindfulness,Read,buddhism,Thich Nhat Hanh
Deschooling Society,Want to read,education,Ivan Illich
Free schools,Want to read,education,Jonathan Kozol
The Ignorant Schoolmaster,Want to read,education,Jacques Rancire
Cognitive Science An Introduction to the Science of the Mind,Want to read,psychology;neuroscience,Jose Luis Bermudez
Macroeconomics,Want to read,economics,Mankiw
Algebra,Want to read,math,Serge Lang
The Theory of Groups and Quantum Mechanics,Want to read,math;physics,Weyl
Representation Theory A First Course,Want to read,math,Fulton & Harris
Introduction to Statistical Inference,Want to read,math,Kiefer
Data Analysis A Bayesian Tutorial,Want to read,math,Skilling & Sivia
Bishop's Pattern Recognition and Machine Learning,Want to read,computer-science,Christopher M. Bishop 
Salinsky & Frances-White's The Improv Handbook,Want to read,comedy,Tom Salinsky and Deborah Frances-White 
Does Altruism Exist? Culture Genes and the Welfare of Others,Read,evolution;philosophy,David Sloan Wilson
This View of Life: Completing the Darwinian Revolution,Want to read,coordination;evolution,David Sloan Wilson
Right Concentration,Reference,buddhism,Leigh Brasington
The Three-Body Problem,Read,sci-fi,Ken Liu
At Home in Mitford,Want to read,fiction,Jan Karon
Good Omens,Abandoned,fiction, Terry Pratchett and Neil Gaiman
Good Sex: Getting Off Without Checking Out,Read,buddhism;sex,Jessica Graham
Orthodox Chinese Buddhism,Read,buddhism,Sheng-yen
Union of Mahamudra and Dzogchen,Want to read,buddhism,Chkyi Nyima Rinpoche
The Science of Enlightenment: How Meditation Works,Read,buddhism,Shinzen Young
Wild Ivy: The Spiritual Autobiography of Zen Master Hakuin,Want to read,buddhism; biography,Hakuin
Zen Mind Beginner's Mind,Read,buddhism,Shunry Suzuki
Diversity and Complexity,Stalled,complex-systems,Scott E. Page
Handbook of Computational Economics,Want to read,agent-based-modelling;economics,Leigh Tesfatsion
Radical Markets,Want to read,economics,Glen Weil
The Hitchhiker's Guide to the Galaxy,Read,sci-fi,Douglas Adams,
The Restaurant at the End of the Universe,Read,sci-fi,Douglas Adams,
Life the Universe and Everything,Read,sci-fi,Douglas Adams,
So Long and Thanks for All the Fish,Read,sci-fi,Douglas Adams,
Mostly Harmless,Read,sci-fi,Douglas Adams,
How to Travel with a Salmon: and Other Stories,Read,fiction,Umberto Eco
Snowcrash,Read,sci-fi,Neal Stephenson,
Neuromancer,Read,sci-fi
The Rise and Fall of American Growth,Want to read,history,Robert J. Gordon
Men Machines and Modern Times,Want to read,history,Elting E. Morison
Commoning as a Transformative Social Paradigm,Want to read,anarchism;urbanism,David Bollier
You Are Here,Read,buddhism,Thich Nhat Hanh
The Art Of Living,Read,buddhism,Thich Nhat Hanh
The Art of Mindful Living,Read,buddhism,Thich Nhat Hanh
Call Me By My True Names,Want to read,buddhism;poetry,Thich Nhat Hanh
Peace Is Every Step,Read,buddhism,Thich Nhat Hanh
Shambhala: The Sacred Path of the Warrior,Abandoned,buddhism;magic,Chogyam Trungpa,
Cutting Through Spiritual Materialism,Want to read,buddhism,Chogyam Trungpa
On Having No Head,Read,buddhism,Douglas Edison Harding
Cooperative Game Theory and Applications,Want to read,game-theory;coordination,Imma Curiel
Micromotives and Macrobehavior,Want to read,agent-based-modelling,Schelling
Difficult Conversations,Want to read,psychology,Douglas Stone et al.
The Book of Joy,Read,buddhism,Dalai Lama and Desmond Tutu
A Guide to the Good Life,Read,philosophy; psychology,William Irvine
Consciousness Explained,Reading,consciousness,Daniel C. Dennet
The Knowledge Machine,Want to read,philosophy,Michael Strevens
Social Engineering,Want to read,psychology,Robert W. Gehl & Sean T. Lawson
What is Truth,Want to read,philosophy,Peter Vardy
The Logic of Scientific Discovery,Stalled,philosophy,Popper
The Other Significant Others,Read,psychology,,Not a lot of content, unfortunately.
A Treatise of Human Nature,Want to read,philosophy,Hume,
Phenomenology of Perception,Want to read,philosophy,Maurice Merleau-Ponty,
Philosophical Investigations,Reading,philosophy,Wittgenstein,
Secrets of Divine Love: A Spiritual Journey into the Heart of Islam,Want to read,philosophy; islam,Helwa,
From Darkness Into Light,Want to read,philosophy; islam,Helwa,
Zen and the Art of Motorcycles,Read,philosophy,Robert Pirsig,
The Wisdom of Insecurity,Read,philosophy,Alan Watts,
The Social Instinct: How Cooperation Shaped the World,Want to read,psychology; biology,Nichola Raihani,
Walden Two,Want to read,fiction; philosophy,B.F. Skinner,
Beyond Freedom and Dignity,Want to read,philosophy,B.F. Skinner,
The Emergence of Organizations and Markets,Want to read,economics; history,John F. Padgett & Walter W. Powell,
Seeing Like a State: How Certain Schemes to Improve the Human Condition Have Failed,Read,history; economics; urbanism,James C. Scott,Great and unexpected insights against communism coming from the far-left.
Famine Affluence and Morality,Read,philosophy,Peter Singer,
The Art of Statistics: How to Learn from Data,Reading,math,David Spiegelhalter,
If You're an Egalitarian How Come You're So Rich?,Want to read,economics; philosophy,G.A. Cohen,
Supercooperators: The Mathematics of Evolution Altruism and Human Behaviour,Want to read,coordination; evolution,Martin Nowak,
The Nature of Computation,Reading,computer-science; math,Cristopher Moore & Stephan Mertens,
Category Theory for the Sciences,Want to read,math,David I. Spivak,
A Mathematician's Apology,Want to read,math; philosophy,G.H. Hardy,
Evolutionary Dynamics: Exploring the Equations of Life,Want to read,evolution; biology; math,Martin Nowak,
Dilla Time,Want to read,biography,Dan Charnas,
Foundryside,Want to read,sci-fi,Robert Jackson Bennett,
The Long Way to a Small Angry Planet,Read,sci-fi,Becky Chambers,
Beyond,Want to read,game-theory; philosophy; psychology,Martin Nowak,
Finite and Infinite Games,Want to read,philosophy; psychology,James P. Carse,
I Am a Strange Loop,Read,philosophy; math; biography,Douglas R. Hofstadter,
Gathering Moss,Want to read,biology,Robin Wall Kimmerer,
Reading Lessons,Want to read,education,Carol Atherton,
What Capitalism Needs Forgotten Lessons of Great Economists,Want to read,economics,John L Campbell John A. Hall,
Lyapunov Exponents,Want to read,complex-systems; physics,Arkady Pikovsky,
All the Mathematics You Missed,Want to read,math,,
Chaotic dynamics,Want to read,complex-systems; physics,,
Chaos in dynamical systems,Want to read,complex-systems; physics,Edward Ott,
Foundations of Complex-system Theories,Want to read,complex-systems,Sunny Auyang,
Intellectual Curiosity and the Scientific Revolution,Want to read,history,Toby Huff,
Tales of Japan,Want to read,fiction,,
Cognition in the Wild,Want to read,neuroscience,Edwin Hutchins,
The Economy of Cities,Want to read,economics; urbanism,Jane Jacobs,
Green Development: Environment and sustainability in the Third World,Want to read,agroecology,,
Finding the Mother Tree,Want to read,agroecology,,
Organic Manifesto: How Organic Farming Can Heal Our Planet Feed the World and Keep Us Safe,Want to read,agroecology; economics,,
A Networked Self: Identity Community and Culture on Social Network Sites,Want to read,anarchism; computer-science; psychology,,
Ethics: Origin and Development,Want to read,anarchism; philosophy,Peter Kropotkin,
Squatting in Europe,Want to read,anarchism; urbanism,,
The Mushroom at the End of the World,Want to read,anthropology,,
Moral Tribes: Emotion Reason and the Gap Between Us and Them,Want to read,anthropology,,
The Evolution of Civilizations,Want to read,anthropology,,
African Fractals,Want to read,anthropology; art,,
The Secret of Our Success: How Culture Is Driving Human Evolution; Domesticating Our Species; and Making Us Smarter,Want to read,anthropology; behaviorism; evolution; history; psychology,Joseph Henrich,
A Billion Wicked Thoughts: What the Internet Tells Us About Sexual Relationships,Want to read,anthropology; computer-science,,
Technology of the Oppressed: Inequity and the Digital Mundane in Favelas of Brazil,Want to read,anthropology; computer-science,,
Discipline and Punish: The Birth of the Prison,Read,philosophy;history,Foucault,Like every Foucault book this could have been a couple of pages long paper couldn't it?
The Collapse of Complex Societies,Want to read,anthropology; coordination; economics; history,Joseph A. Tainter,
On Human Nature,Want to read,anthropology; evolution; philosophy; psychology,E. O. Wilson,
War and Peace and War: The Rise and Fall of Empires,Want to read,anthropology; history,Peter Turchin,
Ultrasociety,Want to read,anthropology; history; systems-theory,Peter Turchin,
A Brief History of Everyone Who Ever Lived: The Stories in Our Genes,Want to read,anthropology; neuroscience,,
Cosmos,Want to read,anthropology; physics; history,Carl Sagan,
Cybernetics Art and Ideas,Want to read,art,,
10 PRINT CHR$(205.5+RND(1)); : GOTO 10,Want to read,art; computer-science; history,,
Genetics and Analysis of Quantitative Traits,Want to read,behaviorism; evolution,,
The Bell Curve: Intelligence and Class Structure in American Life,Want to read,behaviorism; psychology; questionable-research,Herrnstein,
The Confessions,Want to read,biography,,
The Book of Margery Kempe,Want to read,biography,,
Essays,Want to read,biography,Augustine,
Grace Abounding,Want to read,biography,Michel de Montaigne,
The Narrative of the Captivity and Restoration,Want to read,biography,,
The Autobiography of Benjamin Franklin,Want to read,biography,,
Narrative of the Life of Frederick Douglass,Want to read,biography,,
Incidents in the Life of a Slave Girl,Want to read,biography,,
Little House on the Prairie,Want to read,biography,,
The Road from Coorain,Want to read,biography,,
Black Boy,Want to read,biography,Richard Wright,
The Autobiography of Malcolm X,Want to read,biography,,
Hunger of Memory,Want to read,biography,,
The Year of Magical Thinking,Want to read,biography,,
LSD My Problem Child,Want to read,biography; drugs,Albert Hofmann,
My View of the World,Want to read,biography; philosophy,Schroedigner,
The Song of the Cell: An Exploration of Medicine and the New Human,Want to read,biology,,
Master Builder: How the New Science of the Cell is Rewriting the Story of Life,Want to read,biology; evolution,,
Why Buddhism Is True,Abandoned,buddhism,Bachelor,Very introductory to buddhist practices.
Regenesis: Feeding the World Without Devouring the Planet,Want to read,climate,,
All We Can Save: Truth; Courage and Solutions for the Climate Crisis,Want to read,climate,,
Complex Ecology,Want to read,climate; complex-systems,,
What If,Want to read,comics; computer-science; math; physics,Munroe,
Ghost in the Shell,Want to read,comics; fiction,,
Akira,Want to read,comics; fiction,,
The World of Eden,Want to read,comics; fiction,Moebius,
When the Wind Blows,Want to read,comics; fiction,Raymond Briggs,
The Primacy of Doubt: From Quantum Physics to Climate Change,Want to read,complex-systems,Tim Palmer,
Complex Population Dynamics: A Theoretical/Empirical Synthesis,Want to read,complex-systems; coordination,Peter Turchin,
Systems Thinking for Social Change,Want to read,complex-systems; coordination,,
Out of Control,Want to read,complex-systems; coordination; psychology,Kevin Kelly,
The Age of Prediction: Algorithms and the Shifting Shadow of Risk,Want to read,computer-science,,
The Essence of Software,Want to read,computer-science,Daniel Jackson,
Refactoring,Want to read,computer-science,Martin Fowler,
The Pragmatic Programmer: From Journeyman to Master,Want to read,computer-science,Andy Hunt; Dave Thomas,
Artificial Intelligence: A Modern Approach,Want to read,computer-science,Russel Norvig,
Staff Engineer: Leadership Beyond the Management Track,Want to read,computer-science,Will Larson,
Code,Want to read,computer-science,Charles Petzold,
Web Assembly in Action,Want to read,computer-science,,
Compilers: Principles Techniques and Tools,Want to read,computer-science,,
Waltzing With Bears: Managing Risk on Software Projects,Want to read,computer-science,,
Fairness and Machine Learning: Limitations and Opportunities,Want to read,computer-science,Solon Barcas Moritz Hardt and Narayana,
The Alignment Problem Machine Learning and Human Values,Want to read,computer-science; philosophy,,
Code: Version 2.0,Want to read,computer-science; governance,,
Curl,Want to read,computer-science; governance,Guy that made curl,
The Revolt of The Public and the Crisis of Authority in the New Millennium,Want to read,computer-science; governance,Martin Gurri Arnold Kling,
The Stack: On Software and Sovereignty ,Want to read,computer-science; governance,,
Democracy in the Information Age,Want to read,computer-science; governance,Elaine Kamarck; Joseph Nye,
Accelerating Democracy: Transforming Governance Through Technology,Want to read,computer-science; governance,,
@ is for Activism: Dissent Resistance and Rebellion in a Digital Culture,Want to read,computer-science; governance,,
#Republic: Divided Democracy in the Age of Social Media,Want to read,computer-science; governance,Sunstein,
The Crowdfunding Revolution: Social Networking Meets Venture Financing,Want to read,computer-science; governance; economics,Lawton Marom,
Abolish Silicon Valley,Want to read,computer-science; governance; economics,,
A World Without Work,Want to read,computer-science; governance; economics,,
Active Measures,Want to read,computer-science; disinformation,,
Geekonomics: The Real Cost of Insecure Software,Want to read,computer-science; economics; info-sec,,
Art of Doing Science and Engineering: Learning to Learn,Want to read,computer-science; education,,
A Madman Dreams of Turing Machines,Want to read,computer-science; history,,
A Computer Called Leo,Want to read,computer-science; history,,
A Brief History of the Future: From Radio Days to Internet Years in a Lifetime,Want to read,computer-science; history,,
A Brief History of Computing,Want to read,computer-science; history,,
@War: The Rise of the Military-Internet Complex,Want to read,computer-science; history,,
Quantum Computing Since Democritus,Want to read,computer-science; history; math; physics,Scott Aaronson,
The Nature of Mathematical Modeling,Want to read,computer-science; math,Neil Geshenfeld,
An Introduction to Statistical Learning: With Applications in R,Want to read,computer-science; math,,
Computers and Intractability: A Guide to the Theory of NP-Completeness,Want to read,computer-science; math,,
Principles of Computational Modelling in Neuroscience,Want to read,computer-science; neuroscience,,
Fundamentals of Computational Neuroscience,Want to read,computer-science; neuroscience,Trappenberg,
The Computer and the Brain,Want to read,computer-science; neuroscience; systems-theory,Von Neumann,
Moral AI: And How We Get There,Want to read,computer-science; philosophy,Jana Schalch Borg,
Hackers & Painters: Big Ideas from the Computer Age,Want to read,computer-science; philosophy,Paul Graham,
A Gift of Fire: Social Legal and Ethical Issues for Computing Technology,Want to read,computer-science; philosophy,,
A Dangerous Master: How to Keep Technology from Slipping Beyond Our Control,Want to read,computer-science; philosophy,,
A Crowd of One: The Future of Individual Identity,Want to read,computer-science; philosophy; psychology,,
Algorithms to Live By,Want to read,computer-science; psychology,,
The Conscious Mind: In Search of a Fundamental Theory,Want to read,consciousness; philosophy,David Chalmers,
The Elephant in the Brain,Want to read,consciousness,,
Thoughtfulness and the Rule of Law,Want to read,governance,Jeremy Waldron,
End Times: Elites Counter-Elites and the Path of Political Disintegration,Want to read,governance,Peter Turchin,
Where There Is No Government,Want to read,governance,Joireman,
Patterns of Democracy,Want to read,governance,Arend Lijphart,
The Death and Life of Great American Cities,Want to read,governance;urbanism,,
Governing the Commons,Read,governance;game-theory,Elinor Ostrom,
Systems Thinking for Social Change,Want to read,governance,,
Regenerative Leadership,Want to read,governance,Giles Hutchins & Laura Storm,
The End of Poverty,Want to read,economics; economics,Sach,
How the World Really Works,Want to read,economics,Vaclav Smil,
Controlling Corruption,Want to read,governance; economics,,
The Great Transformation,Want to read,governance; economics; history,Karl Polanyi,
Knowledge And Decisions,Want to read,governance; economics; philosophy,Thomas Sowell,
The Myth of the Rational Voter: Why Democracies Choose Bad Policies,Want to read,governance; economics; psychology,Bryan Caplan,
Another Now: Dispatches from an Alternative Present,Want to read,governance; fiction,Yanis Varoufakis,Kind of like Postcapitalism but better(?)
Democracy in America,Want to read,governance; history,Tocqueville,
Collapse: How Societies Choose to Fail or Succeed ,Want to read,governance; history,Jared Diamond,
Our Political Nature: The Evolutionary Origins of What Divides Us,Want to read,governance; history; psychology,Avi Tuschman,
Open Development: Networked Innovations in International Development,Want to read,governance; open-source,,
Why We're Polarized,Want to read,governance; philosophy,Ezra Klein,
Economics of Good and Evil,Want to read,economics,,Similar to Poor Economics
The Persistency of Poverty ,Want to read,economics,,
The New Economics: A Manifesto,Want to read,economics,Steve Keen,
Mission Economy,Want to read,economics,Mariana Mazzucato,
Everything for Everyone,Want to read,economics,,
Ours to Hack and to Own,Want to read,economics,Schneider,
Good Capitalism; Bad Capitalism; and the Economics of Growth and Prosperity,Want to read,economics,,
Basic Economics: A Common Sense Guide to the Economy,Want to read,economics,,
On Classical Economics,Want to read,economics,Thomas Sowell,
The Times Complete History of the World,Want to read,economics,Richard Overy,
The Thank You Economy,Want to read,economics,,
Doing Economics: A Guide to Understanding and Carrying Out Economic Research,Want to read,economics,,
How Markets Fail: The Logic of Economic Calamities,Want to read,economics,,
The Trouble with Markets: Saving Capitalism from Itself,Want to read,economics,,
Capitalism Socialism and Democracy,Want to read,economics;governance,,
Building a Sustainable and Desirable Economy-in-Society-in-Nature,Want to read,economics,,
Understanding Capital: Marx's Economic Theory,Want to read,economics;history,,
Grassroots and Nonprofit Leadership: A Guide for Organizations in Changing Times,Want to read,economics,,
Imperialism in the Twenty-First Century: Globalization Super-Exploitation and Capitalism's Final Crisis,Want to read,economics;history,,
Rethinking Money: How New Currencies Turn Scarcity into Prosperity,Want to read,economics,,
The Looting Machine: Warlords Oligarchs Corporations Smugglers and the Theft of Africa's Wealth,Want to read,economics,,
Inequality: What Can Be Done?,Want to read,economics,,
Politics Is for Power: How to Move Beyond Political Hobbyism Take Action and Make Real Change,Want to read,economics,,
Small Is Beautiful: Economics as if People Mattered,Want to read,economics,,
Common Wealth: Economics for a Crowded Planet,Want to read,economics,,
Social Justice Handbook: Small Steps for a Better World,Want to read,economics,,
The Local Economy Solution,Want to read,economics,,
Beyond Growth: The Economics of Sustainable Development,Want to read,economics,,
The Good Society: The Humane Agenda,Want to read,economics,,
Local Is Our Future: Steps to an Economics of Happiness,Want to read,economics,,
Moral Politics: How Liberals and Conservatives Think,Want to read,economics,,
Social Entrepreneurship: What Everyone Needs to Know,Want to read,economics;governance,,
Manifesto of the Free People's Union,Want to read,economics,,
Cities and the Wealth of Nations,Want to read,economics;urbanism,,
Wikinomics: How Mass Collaboration Changes Everything,Want to read,economics,,
Creating a Learning Society: A New Approach to Growth Development and Social Progress,Want to read,economics,,
The Wealth of Nations/The Theory of Moral Sentiments,Want to read,economics,,
Merchants of Doub,Want to read,economics,,
You Can't Be Neutral on a Moving Train: A Personal History of Our Times,Want to read,economics,,
Why Nations Fail,Want to read,economics,Daron Acemoglu and James A. Robinson,
Inventing the Future: Postcapitalism and a World Without Work,Want to read,economics; anarchism;governance,,
The Case Against Education: Why the Education System Is a Waste of Time and Money,Want to read,economics; education,Bryan Caplan,
Atlas Shrugged,Want to read,economics; fiction,Ayn Rand,
Analyzing Politics,Want to read,economics; game-theory, Kenneth A Shepsle,
Understanding Power: The Indispensable Chomsky,Want to read,economics; history,,
The Revolution Will Not be Funded,Want to read,economics; philosophy,,
The Wisdom of Crowds,Want to read,economics; psychology,James Surowiecki,
Nudge,Want to read,economics; questionable-research,Sunstein,
The Tipping Point: How Little Things Can Make a Big Difference,Want to read,economics; questionable-research,Malcolm Gladwell,
Blind Spots: Why We Fail to Do What's Right and What to Do about It,Want to read,economics; questionable-research,,
Blindness,Abandoned,fiction,Saramago,So incredibly boring.
Animal Spirits: How Human Psychology Drives the Economy and Why It Matters for Global Capitalism,Want to read,economics; questionable-research,,
The Educated Mind,Want to read,education,,
Seven Complex Lessons in Education for the Future,Want to read,education,Edgar Morin,
Pedagogy of Freedom,Want to read,education,Paulo Freire,
Pedagogia do Oprimido,Want to read,education,Paulo Freire,
How We Learn: The New Science of Education and the Brain,Want to read,education; neuroscience,,
Power Sex Suicide: Mitochondria and the Meaning of Life,Want to read,evolution,Nick Lane,
The Selfish Gene,Want to read,evolution,Dawkins,
Consilience,Want to read,evolution,E. O. Wilson,
The Origins of Species,Want to read,evolution,,
The Machinery of Life,Want to read,evolution; biology,David S. Goodsell,
Evolution and the Theory of Games,Want to read,evolution; math; systems-theory,John Maynard Smith,
A History of the Human Brain: From the Sea Sponge to CRISPR; How Our Brain Evolved,Want to read,evolution; neuroscience,Bret Stekta,
How to Travel with a Salmon: And Other Essays,Read,fiction,Umberto Eco,
Fahrenheit 451,Want to read,fiction,,
The Sound and the Fury,Want to read,fiction,William Faulkner
The High King,Want to read,fiction,,
Taran Wanderer,Want to read,fiction,,
Solenoid,Want to read,fiction,Mircea Crtrescu,
Gilead,Want to read,fiction,,
The Ballad of Black Tom,Want to read,fiction,,
I Wonder What Human Flesh Tastes Like,Want to read,fiction,,
Jade City,Want to read,fiction,Fonda Lee,
Mistborn,Want to read,fiction,Brandon Sanderson,
Another Now: Dispatches from an Alternative Present,Want to read,fiction,Yanis Varoufakis,
Foucault's Pendulum,Want to read,fiction,Umberto Eco,
The Grail Quest,Want to read,fiction,Bernard Cornwell,
Into the Wild,Want to read,fiction,,
The Sound and Fury,Want to read,fiction,,
Howls Moving Castle,Want to read,fiction,,
David Copperfield,Want to read,fiction,,
Oliver Twist,Want to read,fiction,,
The Call of the Wild,Read,fiction,,
And Then There Were None,Want to read,fiction,,
The Girl With the Dragon Tattoo,Want to read,fiction,,
Dungeon Crawler Karl,Want to read,fiction,,
A Wizard of Earthsea Rimbaud,Want to read,fiction,,
Lolita,Want to read,fiction,Vladimir Nabokov,
Mans Search for Meaning,Want to read,biography; philosophy,Viktor Frankl,
Waves,Want to read,fiction,Virginia Woolf,
Mrs Dalloway,Want to read,fiction,Virginia Woolf,
The Decameron,Want to read,fiction,Boccaccio,
O Guarani,Want to read,fiction,,
O Ateneu,Want to read,fiction,,
Sagarana,Want to read,fiction,,
The Gambler,Want to read,fiction,Dostoevsky,
Moby Dick,Want to read,fiction,,
Don Quixote,Want to read,fiction,,
The Return of the Native,Want to read,fiction,,
Madame Bovary,Want to read,fiction,,
Huckleberry Finn,Want to read,fiction,,
The Portrait of a Lady,Want to read,fiction,,
Red Badge of Courage,Want to read,fiction,,
Seize the Day,Want to read,fiction,,
One Hundred Years of Solitude,Want to read,fiction,,
If On A Winters Night A Traveler,Want to read,fiction,,
Beloved,Want to read,fiction,,
Heart of Darkness,Want to read,fiction,,
The Things They Carried,Want to read,fiction,,
The House of Mirth,Want to read,fiction,,
Mrs. Dalloway,Want to read,fiction,,
Native Son,Want to read,fiction,,
Jane Eyre,Want to read,fiction,,
Uncle Tom's Cabin,Want to read,fiction,,
The Scarlet Letter,Want to read,fiction,,
Pilgrims Progress,Want to read,fiction,,
Agamemnon,Want to read,fiction,Aeschylus,
Oedipus Rex,Want to read,fiction,Sophocles,
Hippolytus,Want to read,fiction,Euripides,
The Comedy of Error,Want to read,fiction,William Shakespeare,
Richard II,Want to read,fiction,William Shakespeare,
The Spanish Tragedy,Want to read,fiction,Thomas Kyd,
Doctor Faustus,Want to read,fiction,Christopher Marlowe,
Life Is a Dream,Want to read,fiction,Pedro Calderon de la Barca,
Hedda Gabler,Want to read,fiction,Henrik Ibsen,
The Cherry Orchard,Want to read,fiction,Anton Chekhov,
Major Barbara,Want to read,fiction,George Bernard Shaw,
Six Characters in Search of an Author,Want to read,fiction,Luigi Pirandello,
Mother Courage and Her Children,Want to read,fiction,Bertolt Brecht,
Death of a Salesman,Want to read,fiction,Arthur Miller,
Waiting for Godot,Want to read,fiction,Samuel Beckett,
The Fall,Want to read,fiction; philosophy,Camus,
Dancing in the Glory of Monsters: The Collapse of the Congo and the Great War of Africa,Want to read,history,,
The Gulag Archipelago,Want to read,history,,
The White Pill: A Tale of Good and Evil,Want to read,history,,
Human Accomplishment,Want to read,history,Charles Murray,
Slavery and Social Death,Want to read,history,,
1491: New Revelations of the Americas Before Columbus,Want to read,history,Charles C. Mann,
The Strange Death of Europe: Immigration Identity Islam,Want to read,history,Douglas Murray,
How Europe Underdeveloped Africa,Want to read,history,Walter Rodney,
Histories,Want to read,history,Herodotus,
The Peloponnesian War,Want to read,history,Thucydides,
The Power of Geography,Want to read,history;,,
Common Sense,Want to read,history; philosophy,Thomas Paine,
The Federalist Papers,Want to read,history; philosophy,,
The Wretched of the Earth,Want to read,history; philosophy,Frantz Fanon,
Quantum: Einstein Bohr and the Great Debate about the Nature of Reality,Want to read,history; physics,Kumar,
The Matter of Everything: How Curiosity Physics and Improbable Experiments Changed the World,Want to read,history; physics,Suzie Sheehy,
Mild Children,Want to read,history; sci-fi,Hand Moravec,
A Myriad of Tongues,Want to read,language,,
The Case Against Reality,Want to read,magic;questionable-research,Donald Hoffman,
Existential Kink,Read,magic;questionable-research,,
Doing Bayesian Data Analysis: A Tutorial with R JAGS and Stan,Want to read,math,,
Proof and the Art of Mathematics,Want to read,math,Hamkins,
Mathematics: Its Content Methods and Meaning,Want to read,math,Aleksandrov and Kolmogorov,
The Fractal Geometry of Nature   The Fractal Geometry of Nature ,Want to read,math,Mandelbrot,
Linear Algebra and Its Applications,Want to read,math,Gilbert Strang,
Categories for the Working Mathematician,Want to read,math,Saunders Mac Lane,
Gdel's Proof,Want to read,math,,
Div Grad Curl and All That: An Informal Text on Vector Calculus,Want to read,math,Harry Schey,
Linear Algebra and Its Applications,Want to read,math,Gilbert Strang,
Concrete Mathematics: A Foundation for Computer Science,Want to read,math; computer-science,,
The Road to Reality,Want to read,math; philosophy; physics,,
The Theoretical Minimum: What You Need to Know to Start Doing Physics,Want to read,math; physics,Leonard Susskind,
Theoretical Neuroscience: Computational and Mathematical Modeling of Neural Systems,Want to read,neuroscience,Peter Dayan and Abbott,
Cognition in Practice: Mind Mathematics and Culture in Everyday Life,Want to read,neuroscience,,
Metamagical Themas: Questing for the Essence of Mind and Pattern,Want to read,neuroscience; coordination; computer-science; game-theory,David Hofstadter,
How We Learn: Why Brains Learn Better Than Any Machine . . . for Now,Want to read,neuroscience; psychology,,
Models of the Mind: How Physics Engineering and Mathematics Have Shaped Our Understanding of the Brain,Want to read,neuroscience; psychology,Grace Lindsay,
Why Zebras Don't Get Ulcers,Want to read,neuroscience; psychology,Sapolsky,
The Elephant in the Brain,Want to read,neuroscience; psychology,,
Why We Sleep,Want to read,neuroscience; questionable-research,Matthew Walker,
Open Sources: Voices from the Open Source Revolution,Want to read,open-source,,
Free Software Free Society,Want to read,open-source,Stallman,
On the Shortness of Life,Want to read,philosophy,Seneca,
Popper Selections,Want to read,philosophy,David Miller,
Tractatus Logico-Philosophicus,Want to read,philosophy,,
The Skeptics' Guide to the Universe: How to Know What's Really Real in a World Increasingly Full of Fake,Want to read,philosophy,Steven Novella,
After Virtue,Want to read,philosophy,,
Consider the Lobster: And Other Essays,Want to read,philosophy,David Foster Wallace,
Waking Up: A Guide to Spirituality Without Religion,Want to read,philosophy,Sam Harris,
The Trouble with Being Born,Want to read,philosophy,Emil Cioran,
Letters to a Young Contrarian,Want to read,philosophy,Christopher Hitchens,
The Open Society and Its Enemies,Want to read,philosophy,Karl Popper,
After Virtue,Want to read,philosophy,,
Nausea,Want to read,philosophy,Sartre,
Animal Rights: A Very Short Introduction,Want to read,philosophy,,
Epistemic Risk and the Demands of Rationality,Want to read,philosophy,,
Being and Time,Want to read,philosophy,Heidegger,
The Sofist,Want to read,philosophy,,
Consilience: The Unity of Knowledge ,Want to read,philosophy; evolution,E. O. Wilson,
Mind-body Problem,Want to read,philosophy; fiction,Rebecca Goldstein,
What Is Life? with Mind and Matter and Autobiographical Sketches,Want to read,philosophy; physics; biology,Erwin Schrdinger,
Rationality and the Reflective Mind,Want to read,philosophy; psychology,Stanovich,
Science Fictions: The Epidemic of Fraud Bias Negligence and Hype in Science,Want to read,philosophy; psychology,Stuart Ritchie,
Spacetime and Geometry: An Introduction to General Relativity ,Want to read,physics,Sean Carroll,
How to Make an Apple Pie from Scratch,Reading,physics,Harry Cliff,
Einstein's Universe,Want to read,physics,Nigel Calder,
Parallel Worlds: A Journey through Creation Higher Dimensions and the Future of the Cosmos,Want to read,physics,Michio Kaku,
String of Beads,Want to read,poetry,Shikishi,
Unforgotten Dreams,Want to read,poetry,Shotetsu,
Poemas Malditos Gostosos e Gozosos,Want to read,poetry,,
The Gold Cell,Want to read,poetry,Sharon Olds,
26 poetas hoje,Want to read,poetry,,
Pale Fire,Want to read,poetry,Nabokov,
The Iliad,Want to read,poetry,Homer,
The Odyssey,Want to read,poetry,Homer,
Sappho,Want to read,poetry,Sappho,
The Aeneid,Want to read,poetry,Virgil,
Canterbury Tales,Want to read,poetry,Geoffrey Chaucer,
Sonnets,Want to read,poetry,William Shakespeare,
Paradise Lost,Want to read,poetry,John Milton,
The Rape of the Lock,Want to read,poetry, Alexander Pope,
The Prelude,Want to read,poetry,William Wordsworth,
Leaves of Grass,Want to read,poetry,Walt Whitman,
Middlemarch,Want to read,poetry,George Eliot,
The Waste Land,Want to read,poetry,T.S. Eliot,
The Love Song of J. Alfred Prufrock,Want to read,poetry,T.S. Eliot,
Four Quartets,Want to read,poetry,T.S. Eliot,
The Dream Songs,Want to read,poetry,John Berryman,
Flow: The Psychology of Optimal Experience,Want to read,psychology,,
The Body Keeps the Score: Brain Mind and Body in the Healing of Trauma,Want to read,psychology,Kolk,
How Emotions Are Made: The Secret Life of the Brain,Want to read,psychology,,
The Red Book,Reading,psychology,Jung,
The Anxiety and Depression Work Book,Want to read,psychology,,
Nonviolent Communication: A Language of Life,Want to read,psychology,,
Inadequate Equilibria,Want to read,psychology,Eliezer Yudkowsky,
How We Change,Want to read,psychology,Polan,
Radical Acceptance,Want to read,psychology,Tara Brach,
The Paradox of Choice,Want to read,psychology,,
Stumbling on Happiness,Want to read,psychology,,
Predictably Irrational: The Hidden Forces That Shape Our Decisions,Want to read,psychology; economics,,
The Shape of Thought: How Mental Adaptations Evolve,Want to read,psychology; evolution,H. Clark Barrett,
Children of Time,Want to read,sci-fi,,
Enders Game,Want to read,sci-fi,,
Stories of Your Life and Others,Read,sci-fi,Ted Chiang,
Hyperion,Read,sci-fi,Dan Simmons,
Blindsight,Want to read,sci-fi,Peter Watts,
Sword & Citadel,Want to read,sci-fi,Gene Wolf,
The Peace War,Want to read,sci-fi,Vernor Vinge,
Permutation City,Read,sci-fi,Greg Egan,
Diaspora,Read,sci-fi,Greg Egan,
Cryptonomicon,Want to read,sci-fi,,
A Fire Upon the Deep,Read,sci-fi,Vernor Vinge,
Island,Want to read,sci-fi,Asimov,
Linked: How Everything Is Connected to Everything Else,Want to read,systems-theory,,
Nonlinear Dynamics and Chaos,Want to read,systems-theory; complex-systems; physics,Strogatz Steven H.,
Deep Simplicity: Bringing Order to Chaos and Complexity ,Want to read,systems-theory; complex-systems; physics,John Gribbin,
Sync: The Emerging Science of Spontaneous Order ,Want to read,systems-theory; history,,
The (Mis)Behavior of Markets,Want to read,systems-theory; math; economics,Mandelbrot,
A First Course in Chaotic Dynamical Systems: Theory and Experiment ,Want to read,systems-theory; physics,,
Does God Play Dice?: The New Mathematics of Chaos ,Want to read,systems-theory; physics; math,,
Dream States,Want to read,urbanism,,
Gdel Escher Bach: An Eternal Golden Braid,Stalled,computer-science;math;physics;Hofstadter,,
Crime and Punishment,Stalled,fiction,,
The Ministry for the Future,Stalled,sci-fi,Kim Stanley,
The Omnivores Dilemma ,Stalled,agroecology; anthropology,,
Rules Without Rulers,Stalled,anarchism,,
Anarcho-syndicalism: Theory and Practice,Stalled,anarchism,,
On Anarchism,Stalled,anarchism,Chomsky,
Ferramentas para Autonomia,Stalled,anarchism; governance,,
Markets Not Capitalism,Stalled,anarchism; economics,,
A Queda do Cu,Stalled,anthropology,,
Behave,Stalled,anthropology; behaviorism; neuroscience; psychology; questionable-research,,
You Are an Artist: Assignments to Spark Creation,Stalled,art,,
Active Inference,Reading,neuroscience; computer-science; math,Thomas Parr,
Wir Kindern vom Zoo Bahnhof,Stalled,biography,Christiane F.,
Memories Dreams Reflections,Stalled,biography,Jung,
Entering the Heart of Sun and Moon,Stalled,buddhism,,
Complexity: A Guided Tour,Stalled,complex-systems,Mitchell,
Which Side Are You On?,Stalled,governance,Thomas Geoghegan,
Postcapitalism,Stalled,governance; economics,,
The Origins of Political Order,Stalled,governance; economics; history,Fukuyama,
The Digital Party,Stalled,governance; open-source,,
Antifragile,Stalled,coordination; questionable-research,,
Thinking in Systems,Stalled,coordination; systems-theory,Donella Meadows,
Pihkal: A Chemical Love Story,Stalled,drugs,,
Sacred Economics,Stalled,economics; magic,,
How to Solve It: A New Aspect of Mathematical Method,Stalled,education; math,Polya,
Infinite Jest,Reading,fiction,David Foster Wallace,
Ficciones,Stalled,fiction,Jorge Luis Borges,
Der Mann mit der Ledertasche,Stalled,fiction,Bukowski,
The Plague,Stalled,fiction,,
War and Peace,Stalled,fiction,,
13th Age,Reference,games,,
Mathematical Proofs: A transition to advanced mathematics,Stalled,math,,
The Joy of Abstraction ,Stalled,math; systems-theory,Cheng,
Surfing Uncertainty,Stalled,neuroscience;consciousness,Clarke,
The Nichomachean Ethics,Read,philosophy,Aristotle,
Being and Nothingness,Stalled,philosophy,Sartre,
Meditations,Stalled,philosophy,Marcus Aurelius,
Geneology of Morals,Stalled,philosophy,Nietzsche,
Being and Time,Stalled,philosophy,,
Causation Prediction and Search,Stalled,philosophy; math,,
Boitempo ,Stalled,poetry,Drummond ,
Thinking Fast and Slow,Stalled,psychology,Daniel Kahneman Patrick Egan et al.,
Monalisa Overdrive,Stalled,sci-fi,,
On Writing Well,Stalled,writing,,
Reinforcement Learning: An Introduction,Reference,computer-science,Sutton & Richard S.,
The Beginning of Infinity,Read,physics,David Deutsch,
Agent Based Models of Geographical Systems,Reference,agent-based-modelling,,
Color and Light,Reference,art,,
Images of Enlightenment,Reference,buddhism,,
The Mind Illuminated,Reference,buddhism,Culadasa,
Worlds of Transformation,Reference,buddhism; art,,
The Theory of Complex Systems,Reference,complex-systems; computer-science; math,,
Cellular Automata And Complexity: Collected Papers,Reference,complex-systems; computer-science; math; systems-theory,Wolfram,
Architecture Patterns With Python,Reference,computer-science,,
Robust Python,Reference,computer-science,,
Machine Learning: A Probabilistic Perspective,Reference,computer-science,Kevin Murphy,
Deep Learning,Reference,computer-science,,
The Rust Programming Language,Reference,computer-science,,
Algorithms,Reference,computer-science,Sedwick,
Essential TypeScript,Reference,computer-science,Adam Freeman,
Effective Modern C++,Reference,computer-science,Meyers,
Introduction to Algorithms,Reference,computer-science,Cormen,
Web Assembly the Definitive Guide,Reference,computer-science,,
Fluent Python,Reference,computer-science,,
Test Driven Development ,Reference,computer-science,Kant Beck,
Hands-On Machine Learning with Scikit-Learn and TensorFlow,Reference,computer-science,,
Python for Data Analysis,Reference,computer-science; math,,
A New Kind of Science,Reference,computer-science; math,Wolfram,
Cellular Automata and Complexity,Reference,computer-science; math; systems-theory,Wolfram,
Game Theory: An Introduction,Reference,game-theory,Tadelis,
Essentials of Game Theory,Reference,game-theory,Yoav Shoham Kevin Leyton-Brown,
Multiagent systems: algorithmic game-theoretic and logical foundations,Reference,game-theory; agent-based-modelling,Yoav Shoham Kevin Leyton-Brown,
Behavioral Game Theory: Experiments in Strategic Interaction,Reference,game-theory; behaviorism,Colin Camerer,
A History of Western Philosophy,Reference,history; philosophy,Bertrand Russel,
All of Statistics,Reference,math,,
Introduction to Probability,Reference,math,Joseph K. Blitzstein,
Probability Theory: The Logic of Science,Reference,math,E.T. Jaynes,
Calculus,Reference,math,James Stewart,
Um Curso de Geometria Analitica e Algebra Linear,Reference,math,Reginaldo,
On Numbers and Games,Reference,math; systems-theory,Conway,
The Problems of Philosophy,Reference,philosophy,Bertrand Russel,
The Art of Electronics,Reference,physics,Paul Horowitz,
Introduction to Graph Theory,Reference,systems-theory,Richard Trudeau,
Frankenstein,Read,fiction,Mary Shelley,
How to Be Compassionate,Read,buddhism,Dalai Lama,
The Topmost Yoga System,Read,anthropology; questionable-research,,
Essential Yoga,Read,sport; buddhism,,
Multiagent Systems: A Modern Approach to Distributed Artificial Intelligence,Read,agent-based-modelling,,
Modeling Social Behavior Mathematical and Agent-Based,Read,agent-based-modelling,Smaldino,
The One-Straw Revolution,Read,agroecology,,
Technological Slavery,Read,anarchism,,
Steal This Book,Read,anarchism,,
Walden,Read,anarchism; biography; climate,,
Plunder of the Commons,Read,anarchism; climate; governance; economics,Guy Standing,
V for Vendetta,Read,anarchism; comics; fiction,,
Community Rules,Read,anarchism; governance; open-source,,
Banqueiro Anarquista,Read,anarchism; economics; fiction,,
The Social Conquest of Earth,Read,anthropology; evolution,E. O. Wilson,
Mitos e Lendas Nrdicas,Read,anthropology; fiction,,
Guns Germs and Steel,Read,anthropology; history; questionable-research,,
The Dawn of Everything,Read,anthropology; philosophy,,
The Righteous Mind,Read,anthropology; philosophy; questionable-research,,
Charles Evans Pocket Book to Watercolor Artists,Read,art,,
Asterios Polyp,Read,art; comics; fiction,,
The Design of Everyday Things,Read,art; computer-science; psychology,,
Surely You're Joking Mr. Feynman!,Read,biography,,
What Do You Care What Other People Think,Read,biography,,
Deep Thinking,Read,biography,Kasparov,
Ludwig Wittgenstein: The Duty of Genius,Read,biography,Ray Monk,
Persepolis,Read,biography; comics,,
Maus,Read,biography; comics; history,,
The Man Who Knew Infinity: A Life of the Genius Ramanujan,Read,biography; math,,
Roaring Silence,Read,buddhism,,
Buddha,Read,buddhism; comics,,
Demian,Read,buddhism; fiction,Hesse,
Siddharta,Read,buddhism; fiction,,
The Art of Sexual Ecstasy,Read,buddhism; magic;sex,,
Tao Te Ching,Read,buddhism; philosophy,,
Alone with Others,Read,buddhism; philosophy,,
The Internal Game of Tennis,Read,buddhism; psychology; sports,,
O Evangelho Segundo O Espiritismo,Read,christianity,Allan Kardec,
Violetas na Janela,Read,christianity,,
Livro dos Espritos,Read,christianity,Allan Kardec,
O Grande Amigo de Deus,Read,christianity; fiction,Caldwell,
Servos de Deus,Read,christianity; fiction,Caldwell,
Medico de Homens e de Almas,Read,christianity; fiction,Caldwell,
Every Species is a Masterpiece,Read,climate,E. O. Wilson,
Billions and Billions,Read,climate; philosophy,Carl Sagan,
Pale Blue Dot,Read,climate; physics,,
Sabrina,Read,comics,,
The Best We Could Do,Read,comics; biography,,
Heaven No Hell,Read,comics; fiction,Michael Deforge,
100 Bullets,Read,comics; fiction,,
Jerusalem,Read,comics; fiction,,
Batman: The Killing Joke,Read,comics; fiction,,
Batman: Year One,Read,comics; fiction,,
The Dark Knight Returns,Read,comics; fiction,,
Elektra Dead or Alive,Read,comics; fiction,,
Sin City,Read,comics; fiction,,
Ronin,Read,comics; fiction,Miller,
Vagabond,Read,comics; fiction,Takehiko Inoue,
The Walking Dead,Read,comics; fiction,Robert Kirkman,
Blade of the Immortal,Read,comics; fiction,Hiroaki Samura,
Crisis on Infinite Earths,Read,comics; fiction,,
300,Read,comics; fiction,,
Swamp Thing,Read,comics; fiction,,
Black Hole,Read,comics; fiction,,
Death Note,Read,comics; fiction,,
Scott Pilgrim,Read,comics; fiction,,
Y; The Last Man,Read,comics; fiction,,
Batman: Year One,Read,comics; fiction,,
Preacher,Read,comics; fiction,,
Sweet Tooth,Read,comics; fiction,,
Blankets,Read,comics; fiction,,
Transmetropolitan,Read,comics; fiction,,
Habibi,Read,comics; fiction,,
Conan of Cimmeria,Read,comics; fiction,Robert E. Howard,
Sandman Series,Read,comics; fiction,,
Watchmen Series,Read,comics; fiction,,
The Incal,Read,comics; fiction,Jodorowsky,
The Incal,Read,comics; sci-fi,,
Making Things Work: Solving Complex Problems in a Complex World,Read,complex-systems; coordination,Yaneer Bar-Yam,
The Evolution of Cooperation,Read,complex-systems; coordination; game-theory,Axelrod,
Mastering Python High Performance,Read,computer-science,Fernando Doglio,
Python High Performance,Read,computer-science,Gabriele Lanaro,
Effective Python: 90 Specific Ways to Write Better Python,Read,computer-science,,
A Philosophy of Software Design,Read,computer-science,,
Developer Hegemony,Read,computer-science,,
C++: How to Program,Read,computer-science,Deitel,
C++ for Programmers,Read,computer-science,Deitel,
Algoritmos e Estrutura de Dados,Read,computer-science,Ziviani,
Clean Architecture,Read,computer-science,,
Surveillance Capitalism,Read,computer-science,,
Mindstorms: Children Computers And Powerful Ideas,Read,computer-science; education,,
The Book of Why,Read,computer-science; math; philosophy,Judea Pearl ,
The Art of Community,Read,computer-science; open-source,Bacon,
Working in Public,Read,computer-science; open-source; questionable-research,,
Utopia,Read,governance,Thomas More,
The Handbook for Radical Local Democracy,Read,governance; economics,,
Poor Economics,Read,economics,Abhijit Banerjee; Esther Duflo,
Greenpilled,Read,economics; questionable-research,,
Producing Open Source Software,Read,computer-science; open-source,Karl Fogel,
The Prince,Read,governance; philosophy,,
Vier Tage Woche,Read,psychology,,
The Pragmatist's Guide to Governance,Read,governance; questionable-research,,
The Doors of Perception,Read,drugs; philosophy,Albert Hofmann,
Debt,Read,economics,,
Who Rules the World,Read,economics,,
Manufacturing Consent,Read,economics,,
Utopia for Realists: And How We Can Get There,Read,economics,Rutger Bregman,
Poverty by America,Read,economics,Matthew Desmond,
The Origin of Wealth,Read,economics,,
Capital and Ideology ,Read,economics; history,Piketty ,
Doughnut Economics,Read,economics; history; questionable-research,,
The Wealth of Networks,Read,economics; open-source,,
The Well Educated Mind,Read,education; questionable-research,Susan Wise Bauer,
The Castle of Llyr,Read,fiction,,
The Black Cauldron,Read,fiction,,
The Book of Three,Read,fiction,,
The Man in the High Castle,Read,fiction,,
Maktub,Read,fiction,,
Brida,Read,fiction,,
Memorias de Emilia,Read,fiction,,
Tonico e Carnica,Read,fiction,,
Garra de Campeo,Read,fiction,,
Comedias para Se Ler na Escola,Read,fiction,Verissimo,
Sozinha no Mundo,Read,fiction,,
O Menino do Dedo Verde,Read,fiction,,
A Ilha Perdida,Read,fiction,,
O Escaravelho do Diabo,Read,fiction,,
As Aventuras de Xisto,Read,fiction,,
The Sorcerer of the North,Read,fiction,,
The Battle for Skandia,Read,fiction,,
The Icebound Land,Read,fiction,,
The Burning Bridge,Read,fiction,,
The Ruins of Gorlan,Read,fiction,,
Sharpe's Fortress,Read,fiction,,
Sharpes Triumph,Read,fiction,,
Sharpes Tiger,Read,fiction,,
Saxon Stories: The Lords of the North,Read,fiction,,
Saxon Stories: The Pale Horseman,Read,fiction,,
Saxon Stories: The Last Kingdom,Read,fiction,,
Roverandom,Read,fiction,Tolkien,
The Idiot,Read,fiction,Dostoevsky,
Overstory,Read,fiction,Richard Powers,
Os Sete Gatinhos,Read,fiction,Nelson Rodrigues,
No Se Pode Amar e Ser Feliz ao Mesmo Tempo,Read,fiction,Nelson Rodrigues,
A Vida Como Ela ,Read,fiction,Nelson Rodrigues,
Poliana Moa,Read,fiction,,
Poliana,Read,fiction,,
A Series of Unfortunate Events,Read,fiction,,
The Arabian Nights,Read,fiction,,
The Lost Symbol,Read,fiction,,
The Ring of the Nibelung,Read,fiction,,
Beowulf,Read,fiction,,
Hamlet,Read,fiction,,
The Three Musketeers,Read,fiction,,
Wuthering Heights,Read,fiction,,
O Cortio,Read,fiction,,
O Homem de Cabea de Papelo,Read,fiction,,
The Archer's Tale,Read,fiction,Bernard Cornwell,
The Old Man and the Sea,Read,fiction,,
The Call of Cthulhu,Read,fiction,,
Necronomicon,Read,fiction,,
The Mists of Avalon,Read,fiction,,
Running With Wolves,Read,fiction,,
Faust,Read,fiction,,
The Sorrows of Young Werther,Read,fiction,,
Romeo and Juliet,Read,fiction,,
The Little Prince,Read,fiction,,
The Wise Man's Fear,Read,fiction,,
Ranger's Apprentice Series,Read,fiction,,
Name of the Wind,Read,fiction,,
At the Mountains of Madness,Read,fiction,Lovecraft,
Eragon,Read,fiction,,
Harry Potter e o Prisioneiro de Azkaban,Read,fiction,,
Harry Potter e a Camara Secre,Read,fiction,,
Harry Potter e a Pedra Filosofal,Read,fiction,,
Gulliver's Travels,Read,fiction,,
Digital Fortress,Read,fiction,,
Angels and Demons,Read,fiction,,
Da Vinci Code,Read,fiction,,
A Sala De mbar,Read,fiction,,
I Ching,Reference,magic,,
The Sun Also Rises,Read,fiction,,
Kholstomer,Read,fiction,Tolstoi,
Fight Club,Read,fiction,Bukowski,
The Hobbit,Read,fiction,Tolkien,
Breaking Dawn,Read,fiction,,
Twilight Saga,Read,fiction,,
Dracula,Read,fiction,,
Pride and Prejudice,Read,fiction,Jane Austen,
The Sky is Falling,Read,fiction,Sydney Sheldon,
The Pilgrimage,Read,fiction,Paulo Coelho,
If Tomorrow Comes,Read,fiction,Sydney Sheldon,
Memories of Midnight,Read,fiction,Sydney Sheldon,
A Strange in the Mirror,Read,fiction,Sydney Sheldon,
Carrie,Read,fiction,Stephan King,
 Espera de um Milagre,Read,fiction,Stephan King,
The Shining,Read,fiction,Stephan King,
The Earth is the Lord's,Read,fiction,Caldwell,
The Valley of Horses,Read,fiction,,
The Clan of the Cave Bear,Read,fiction,,
Inferno,Read,fiction,,
Quincas Borba,Read,fiction,Machado de Assis,
Ensaion Sobre a Lucidez,Read,fiction,,
Animal Farm,Read,fiction,Orwell,
The Catcher in the Rye,Read,fiction,Paulo Coelho,
Veronika Decide Morrer,Read,fiction,,
Metamorphosis,Read,fiction,Paulo Coelho,
O Alquimista,Read,fiction,Paulo Coelho,
Estrela da Manh,Read,fiction,Lispector,
Memrias de um Sargento de Milcia,Read,fiction,,
So Bernardo,Read,fiction,Graciliano Ramos,
Vidas Secas,Read,fiction,Graciliano Ramos,
Noite na Taverna,Read,fiction,Alvares de Azevedo,
Morte e Vida Severina,Read,fiction,,
Grande Serto Veredas,Abandoned,fiction,Joo Guimares Rosa,
A Paixo Segundo G.H,Read,fiction,,
Uma Aprendizagem ou O Livro dos Prazeres,Read,fiction,,
A Hora da Estrela,Read,fiction,,
The Death of Ivan Illych,Read,fiction,,
Dead Souls,Read,fiction,Gogol,
O Fazedor de Velhos,Read,fiction,,
Lord of the Flies,Read,fiction,,
O Cortio,Read,fiction,,
Memrias Pstumas de Brs Cubas,Read,fiction,,
Alices Adventures in Wonderland,Read,fiction,,
Moreninha,Read,fiction,,
The Picture of Dorian Gray,Read,fiction,,
Dracula,Read,fiction,,
Iracema,Read,fiction,,
Triste Fim de Policarpo Quaresma,Read,fiction,,
Nine Princess in Amber,Read,fiction,,
Lord of the Rings,Read,fiction,,
The Call of Cthulhu and Other Weird Stories,Read,fiction,,
The Brothers Karamazov,Read,fiction,,
Anna Karenina,Read,fiction,,
Candide,Read,fiction; philosophy,Voltaire,
The Stranger,Read,fiction; philosophy,,
The Age of Reason,Read,fiction; philosophy,Sartre,
Angstia,Read,fiction; psychology,Graciliano Ramos,
White Nights,Read,fiction; psychology,,
Steppenwolf,Read,fiction; psychology,,
Notes from the Underground,Read,fiction; psychology,,
Go for Beginners,Reading,games,,
The Way to Go,Read,games,,
Tormenta,Read,games,,
Tagmar,Read,games,,
Fiasco,Read,games,,
Changeling: The Lost,Read,games,,
Mage: The Awakening,Read,games,,
Dungeon World,Read,games,,
Numenera,Read,games,,
Mage: The Ascension,Read,games,,
World of Darkness,Read,games,,
Vampire the Masquerade,Read,games,,
Pathfinder,Read,games,,
Savage Worlds,Read,games,,
Fate,Read,games,,
Cyberpunk 2020,Read,games,,
GURPS 2,Read,games,,
Dungeon and Dragons 5,Read,games,,
Dungeon and Dragons 3.5,Read,games,,
Dungeon and Dragons 2,Read,games,,
Dungeon and Dragons 3,Read,games,,
On Tennis,Read,games; biography,David Foster Wallace,
Shadowrun,Read,games; sci-fi,,
GURPS Cyberpunk,Read,games; sci-fi,,
Star Wars: Edge of the Empire,Read,games; sci-fi,,
Star Wars Roleplaying Game,Read,games; sci-fi,,
Eclipse Phase,Read,games; sci-fi,,
1808,Read,history,,
Quilombos: Resistncia ao Escravismo,Read,history,,
Casa-Grande Senzala,Read,history,Gilberto Freyre,
Between the World and Me,Read,history,,
The Road to Serfdom,Read,history,von Hayek,
On Tyranny,Read,history,Timothy Snyder,
The Origins of Totalitarianism,Read,history;,Hannah Arendt,
The Secret,Read,magic,,
The Prophet,Read,magic,Khalil,
The Book of Five Rings,Read,magic; philosophy,,
You Are the One Youve Been Waiting For,Read,magic; psychology,,
99 Variations on a Proof,Read,math,,
How to Change Your Mind,Stalled,neuroscience; psychology; drugs,Michael Pollan,
The Cathedral and the Bazaar,Read,open-source,,
The Coproduction of Open Source Software by Volunteers and Big Tech Firms,Read,open-source,,
The Art of Logic,Read,philosophy,Cheng,
80000 Hours,Read,philosophy,,
A Little History of Philosophy,Read,philosophy,,
On the Genealogy of Morality,Read,philosophy,Nietzsche,
The Republic,Read,philosophy,Plato,
The Art of War,Read,philosophy,,
The Myth of Sisyphus,Read,philosophy,Camus,
Symposium,Read,philosophy,Plato,
Fedon,Read,philosophy,Plato,
Thus Spoke Zarathustra,Read,philosophy,,
50 Philosophy Ideas,Read,philosophy,,
What We Owe the Future,Read,philosophy,William MacASkill,
Superintelligence,Read,philosophy,Nick Bostrom,
The Life You Can Save,Read,philosophy,Peter Singer,
Leviathan,Read,philosophy,Thomas Hobbes,
The Daily Stoic,Read,philosophy,,
How to Be Perfect,Read,philosophy; questionable-research,,
Howl,Read,poetry,Ginsberg,
Bagagem,Read,poetry,Adelia Prado,
Antologia Poetica,Read,poetry,Cecilia Meireles,
Toda Poesia,Read,poetry,Paulo Leminski,
Morte e Vida Severina,Read,poetry,,
Eu,Read,poetry,Augusto dos Anjos,
Antologia Potica,Read,poetry,Vinicius de Morais,
Veinte poemas de amor y una cancin desesperada,Read,poetry,,
Poesia de Fernando Pessoa,Read,poetry,,
A Rosa do Povo,Read,poetry,Carlos Drummond de Andrade,
Sim: Existo Dentro do Meu Corpo,Read,poetry,,
O Livro do Desassossego,Read,psychology,,
All About Love,Read,psychology,Bell Hooks,
Chatter: The Voice in Our Head Why It Matters and How to Harness It ,Read,psychology,,
Man and His Symbols,Read,psychology; magic,Jung and others,
The Archetypes and the Collective Unconscious,Read,psychology; magic,Jung,
Atomic Habits,Read,psychology; questionable-research,,
Deep Work,Read,psychology; questionable-research,,
How to Win Friends and Influence People,Read,psychology; questionable-research,,
I Have No Mouth and I Must Scream,Read,sci-fi,,
The Bicentennial Man,Read,sci-fi,Isaac Asimov,
The Dispossessed: An Ambiguous Utopia,Read,sci-fi,,
Hitchhiker's Guide Collection,Read,sci-fi,Douglas Adams,
Dune Messiah,Read,sci-fi,Frank Herbert,
I; Robot,Read,sci-fi,Asimov,
2001: Space Odyssey,Read,sci-fi,,
Foundation,Read,sci-fi,Asimov,
Do Androids Dream of Electric Sheep?,Read,sci-fi,,
The Naked Sun,Read,sci-fi,Asimov,
The Caves of Steel,Read,sci-fi,,
Project Hail Mary,Read,sci-fi,,
1984,Read,sci-fi,Orwell,
Dune,Read,sci-fi,,
Brave New World,Read,sci-fi,,
Red Mars,Read,sci-fi,Kim Stanley,
Practical Programming for Strength Training,Read,sports,,
Starting Strength,Read,sports,,
Complex Adaptive Systems,Read,systems-theory; complex-systems,John H. Miller,
Data Science from Scratch,Read,computer-science,,
Ishmael,Abandoned,anthropology; fiction; questionable-research,,
Sapiens,Abandoned,anthropology; questionable-research,Yuval Noah Harari,
The Creative Act,Abandoned,art,,
A Guide to the Bodhisattva Way,Reading,buddhism,,
Spawn ,Abandoned,comics; fiction,,
In a Flight of Starlings,Abandoned,complex-systems; biography,Giorgio Parisi,
Grokking Deep Learning,Abandoned,computer-science,,
Structure and Interpretation of Computer Programs,Abandoned,computer-science,,
Clean Code: A Handbook of Agile Software Craftsmanship,Abandoned,computer-science,,
Think Bayes,Abandoned,computer-science; math,,
Invisible Women,Abandoned,computer-science; philosophy,,
Superforcasting,Abandoned,psychology,,
The Relevance of the Communist Manifesto,Abandoned,economics,iek,
Enlightenment Now,Abandoned,economics; questionable-research,Steven Pinker,
By the River Piedra I Sat Down and Wept,Abandoned,fiction,,
Sharpe's Prey,Abandoned,fiction,,
Saxon Stories: Sword Song,Abandoned,fiction,,
Harry Potter e o Calice de Fogo,Abandoned,fiction,,
The Adventures of Sherlock Holmes,Abandoned,fiction,,
Game of Thrones,Abandoned,fiction,,
Gone With the Wind,Abandoned,fiction,,
The Chronicles of Narnia,Abandoned,fiction,,
The Name of the Rose,Abandoned,fiction,,
The Trial,Abandoned,fiction,,
The Count of Monte Cristo,Abandoned,fiction,,
Don Quixote,Abandoned,fiction,,
Invisible Man,Abandoned,fiction,,
O Tempo e o Vento,Abandoned,fiction,,
Lucola,Abandoned,fiction,,
The Invisible Man,Abandoned,fiction,Ralph Ellinson,
The Silmarillon,Abandoned,fiction,,
3d&t,Abandoned,games,,
After Tamerlane,Abandoned,history,,
The Feynman Lectures on Physics,Abandoned,math; physics,,
Critique of Pure Reason,Abandoned,philosophy,,
The World as Will and Representation,Abandoned,philosophy,,
On the Freedom of the Will,Abandoned,philosophy,,
The Second Sex,Abandoned,philosophy,,
Beyond Good and Evil,Abandoned,philosophy,,
The Courage to Be Disliked,Abandoned,psychology,,
Walkaway,Abandoned,sci-fi,,
Complex Population Dynamics,Abandoned,systems-theory,Peter Turchin`,xU=()=>bU.split(`
`).slice(1).map(n=>{const e=[];let t="",r=!1;for(let c=0;c<n.length;c++){const u=n[c];u==='"'?r=!r:u===","&&!r?(e.push(t.trim()),t=""):t+=u}e.push(t.trim());const[i="",s="",o="",a="",l=""]=e;return{Name:i,Status:s,Type:o,Author:a,Notes:l}}).filter(n=>n.Name),SU=n=>{const e={fiction:"bg-pink-200 text-pink-800","sci-fi":"bg-purple-200 text-purple-800",poetry:"bg-rose-200 text-rose-800",comics:"bg-yellow-200 text-yellow-800",biography:"bg-orange-200 text-orange-800",autobiography:"bg-orange-100 text-orange-700",philosophy:"bg-indigo-200 text-indigo-800",math:"bg-blue-200 text-blue-800",physics:"bg-cyan-200 text-cyan-800",biology:"bg-green-200 text-green-800",neuroscience:"bg-teal-200 text-teal-800",psychology:"bg-violet-200 text-violet-800","computer-science":"bg-slate-200 text-slate-800",history:"bg-amber-200 text-amber-800",economics:"bg-emerald-200 text-emerald-800",anthropology:"bg-lime-200 text-lime-800",buddhism:"bg-yellow-100 text-yellow-700",christianity:"bg-blue-100 text-blue-700",islam:"bg-green-100 text-green-700",hinduism:"bg-orange-100 text-orange-700",magic:"bg-purple-100 text-purple-700",art:"bg-fuchsia-200 text-fuchsia-800",games:"bg-red-200 text-red-800",education:"bg-sky-200 text-sky-800",governance:"bg-stone-200 text-stone-800",anarchism:"bg-red-300 text-red-900",climate:"bg-green-300 text-green-900",drugs:"bg-purple-300 text-purple-900"},t=n.toLowerCase().trim();return e[t]||"bg-gray-200 text-gray-800"},CU=n=>{const e={read:"bg-green-200 text-green-800",reading:"bg-blue-200 text-blue-800","want to read":"bg-amber-200 text-amber-800",stalled:"bg-gray-200 text-gray-800",abandoned:"bg-red-200 text-red-800",reference:"bg-purple-200 text-purple-800"},t=n.toLowerCase().trim();return e[t]||"bg-gray-200 text-gray-800"},kU=()=>{const[n,e]=k.useState(""),[t,r]=k.useState(""),[i,s]=k.useState(null),[o,a]=k.useState("asc"),[l,c]=k.useState("idle"),u=k.useMemo(()=>xU(),[]),h=p=>{i===p?a(o==="asc"?"desc":"asc"):(s(p),a("asc"))},d=k.useMemo(()=>{let p=u.filter(g=>Object.values(g).some(m=>m.toLowerCase().includes(n.toLowerCase())));return i&&(p=[...p].sort((g,m)=>{const y=g[i].toLowerCase(),v=m[i].toLowerCase(),w=y.localeCompare(v);return o==="asc"?w:-w})),p},[u,n,i,o]),f=async p=>{if(p.preventDefault(),!!t.trim()){c("loading");try{(await fetch("https://formspree.io/f/xjvndedd",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookName:t})})).ok?(c("success"),r(""),setTimeout(()=>c("idle"),3e3)):(c("error"),setTimeout(()=>c("idle"),3e3))}catch(g){console.error("Error submitting form:",g),c("error"),setTimeout(()=>c("idle"),3e3)}}};return b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{className:"win95-border bg-muted p-3",children:[b.jsxs("form",{onSubmit:f,className:"flex gap-2 items-center flex-wrap",children:[b.jsx("label",{htmlFor:"bookName",className:"text-sm font-bold",children:"Recommend a book:"}),b.jsx("input",{type:"text",id:"bookName",name:"bookName",value:t,onChange:p=>r(p.target.value),className:"win95-border-inset bg-input px-2 py-1 text-sm flex-1 min-w-[200px]",placeholder:"type...",disabled:l==="loading"}),b.jsx("button",{type:"submit",className:"win95-border bg-card hover:bg-muted px-3 py-1 text-sm font-bold active:win95-border-inset disabled:opacity-50 disabled:cursor-not-allowed",disabled:l==="loading",children:l==="loading"?"sending...":"send"})]}),l==="success"&&b.jsx("div",{className:"mt-2 text-sm text-green-700 bg-green-100 border border-green-300 px-2 py-1 rounded",children:"Thank you! Your book recommendation has been sent."}),l==="error"&&b.jsx("div",{className:"mt-2 text-sm text-red-700 bg-red-100 border border-red-300 px-2 py-1 rounded",children:"Oops! Something went wrong. Please try again."})]}),b.jsx("div",{className:"flex justify-end",children:b.jsx("input",{type:"text",value:n,onChange:p=>e(p.target.value),className:"win95-border-inset bg-input px-3 py-1 text-sm w-1/3",placeholder:"search..."})}),b.jsx("div",{className:"win95-border-inset bg-white p-2 max-h-[400px] overflow-y-auto",children:b.jsxs("table",{className:"w-full text-sm",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"border-b border-border",children:[b.jsxs("th",{className:"text-left py-2 px-2 font-bold",children:["Name"," ",b.jsx("span",{className:"cursor-pointer",onClick:()=>h("Name"),children:""}),b.jsx("span",{className:"cursor-pointer",onClick:()=>h("Name"),children:""})]}),b.jsxs("th",{className:"text-left py-2 px-2 font-bold",children:["Status"," ",b.jsx("span",{className:"cursor-pointer",onClick:()=>h("Status"),children:""}),b.jsx("span",{className:"cursor-pointer",onClick:()=>h("Status"),children:""})]}),b.jsxs("th",{className:"text-left py-2 px-2 font-bold",children:["Type"," ",b.jsx("span",{className:"cursor-pointer",onClick:()=>h("Type"),children:""}),b.jsx("span",{className:"cursor-pointer",onClick:()=>h("Type"),children:""})]}),b.jsx("th",{className:"text-left py-2 px-2 font-bold",children:"Author"}),b.jsx("th",{className:"text-left py-2 px-2 font-bold",children:"Notes"})]})}),b.jsx("tbody",{children:d.length===0?b.jsx("tr",{children:b.jsx("td",{colSpan:5,className:"text-center py-4 text-muted-foreground",children:"No books found"})}):d.map((p,g)=>b.jsxs("tr",{className:"border-b border-border/50 hover:bg-accent/10",children:[b.jsx("td",{className:"py-2 px-2",children:p.Name}),b.jsx("td",{className:"py-2 px-2",children:b.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium mr-1 mb-1 ${CU(p.Status)}`,children:p.Status})}),b.jsx("td",{className:"py-2 px-2",children:p.Type.split(";").map((m,y)=>b.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium mr-1 mb-1 ${SU(m.trim())}`,children:m.trim()},y))}),b.jsx("td",{className:"py-2 px-2",children:p.Author}),b.jsx("td",{className:"py-2 px-2",children:p.Notes})]},g))})]})})]})},TU=()=>b.jsxs("div",{className:"win95-border-inset bg-white p-4 space-y-4",children:[b.jsx("div",{className:"text-center space-y-2",children:b.jsxs("div",{className:"flex items-center justify-center gap-2",children:[b.jsx(O0,{className:"w-5 h-5 text-pink-500"}),b.jsx("h2",{className:"text-xl font-bold text-primary",children:"Looking for Opportunities!"}),b.jsx(O0,{className:"w-5 h-5 text-pink-500"})]})}),b.jsxs("div",{className:"win95-border p-3 space-y-3 text-sm bg-gradient-to-br from-pink-50 to-pink-50",children:[b.jsxs("p",{className:"font-semibold text-center text-pink-500",children:["I'm currently seeking ",b.jsx("strong",{children:"in-person opportunities in the Bay Area"}),"!"]}),b.jsx("p",{className:"text-center text-pink-500",children:"If you're excited about my interests and you think I could be a good fit:"})]}),b.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[b.jsxs("a",{href:"https://calendar.app.google/TxR1iiyEriso6AqL9",target:"_blank",rel:"noopener noreferrer",className:"win95-border p-3 flex items-center justify-center gap-2 text-sm font-bold active:win95-border-inset transition-all hover:brightness-110",style:{background:"linear-gradient(90deg, hsl(180, 75%, 75%))"},children:[b.jsx(KI,{className:"w-4 h-4"}),"Schedule a Time"]}),b.jsxs("a",{href:"mailto:marianameireles@protonmail.com",className:"win95-border p-3 flex items-center justify-center gap-2 text-sm font-bold active:win95-border-inset transition-all hover:brightness-110",style:{background:"linear-gradient(90deg,hsl(330, 75%, 75%))"},children:[b.jsx(VE,{className:"w-4 h-4"}),"Send me an Email"]})]})]}),_U=()=>{const n=k.useRef(null);return k.useEffect(()=>{const e=n.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const r=()=>{e.width=window.innerWidth,e.height=window.innerHeight};r(),window.addEventListener("resize",r);const i=[[["#FFB6D9","#D4A5FF"],["#D4A5FF","#A5D8FF"],["#A5D8FF","#FFE5A5"],["#FFE5A5","#FFB6D9"],["#FFA5C7","#D4A5FF"]],[["#FF9CEE","#C9A0FF"],["#C9A0FF","#A0E7FF"],["#A0E7FF","#FFD4A3"],["#FFD4A3","#FF94B3"],["#FF94B3","#FF9CEE"]],[["#E5B8F4","#C9E4FF"],["#C9E4FF","#FFE4B5"],["#FFE4B5","#FFB8E6"],["#FFB8E6","#D4B5FF"],["#D4B5FF","#E5B8F4"]],[["#FFC4E1","#E8B5FF"],["#E8B5FF","#B5E8FF"],["#B5E8FF","#FFEAA7"],["#FFEAA7","#FFB8D1"],["#FFB8D1","#FFC4E1"]],[["#FFD1F0","#E0C3FF"],["#E0C3FF","#C3E8FF"],["#C3E8FF","#FFF4C4"],["#FFF4C4","#FFD1E3"],["#FFD1E3","#FFD1F0"]]],s=i[Math.floor(Math.random()*i.length)],o=[],a=40+Math.floor(Math.random()*30);for(let u=0;u<a;u++){const h=s[Math.floor(Math.random()*s.length)],d=.3+Math.random()*1.2;o.push({x:Math.random()*e.width,y:Math.random()*e.height,radius:50+Math.random()*200,color:h[Math.floor(Math.random()*2)],vx:(Math.random()-.5)*d,vy:(Math.random()-.5)*d,opacity:.4+Math.random()*.5,phase:Math.random()*Math.PI*2,speed:d})}let l=0;const c=()=>{t.clearRect(0,0,e.width,e.height),l+=.01,o.forEach(u=>{u.phase+=.02;const h=Math.sin(u.phase)*2,d=Math.cos(u.phase*.7)*2;u.x+=u.vx+h,u.y+=u.vy+d,u.x<-u.radius&&(u.x=e.width+u.radius),u.x>e.width+u.radius&&(u.x=-u.radius),u.y<-u.radius&&(u.y=e.height+u.radius),u.y>e.height+u.radius&&(u.y=-u.radius);const f=u.opacity+Math.sin(l+u.phase)*.1;t.save();const p=t.createRadialGradient(u.x,u.y,0,u.x,u.y,u.radius),g=Math.max(.2,Math.min(.9,f));p.addColorStop(0,u.color+Math.round(g*255).toString(16).padStart(2,"0")),p.addColorStop(.5,u.color+Math.round(g*.6*255).toString(16).padStart(2,"0")),p.addColorStop(1,u.color+"00"),t.fillStyle=p,t.beginPath(),t.arc(u.x,u.y,u.radius*1.5,0,Math.PI*2),t.fill(),t.restore()}),requestAnimationFrame(c)};return c(),()=>{window.removeEventListener("resize",r)}},[]),b.jsx("canvas",{ref:n,className:"fixed top-0 left-0 w-full h-full pointer-events-none",style:{opacity:.8,zIndex:0}})},EU=()=>{const[n,e]=k.useState(new Set(["about","jobPopup"])),[t,r]=k.useState([{id:"software-1",name:"Software"},{id:"research-1",name:"Research"}]),[i,s]=k.useState(!1),[o,a]=k.useState({about:13,"software-1":11,"research-1":12,jobPopup:20}),[l,c]=k.useState(20),[u,h]=k.useState({}),d=C=>{e(new Set(n).add(C)),m(C)},f=C=>{const T=new Set(n);T.delete(C),e(T);const _={...o};delete _[C],a(_)},p=C=>{const T=t.find(_=>_.name===C);if(T)m(T.id);else{const _=Date.now().toString();r([...t,{id:_,name:C}]),m(_)}},g=C=>{r(t.filter(_=>_.id!==C));const T={...o};delete T[C],a(T)},m=C=>{const T=l+1;c(T),a({...o,[C]:T})},y={paint:{title:"Paint",icon:""},chat:{title:"Chat Room",icon:""},about:{title:"About Mariana Meireles",icon:""},gallery:{title:"My Art Gallery",icon:""},guestbook:{title:"Guestbook",icon:""},readingList:{title:"Reading List",icon:""},jobPopup:{title:"Looking for Opportunities!",icon:""}},v={Software:"",Research:"",Community:"",Activism:""},w=[...Array.from(n).map(C=>({id:C,title:y[C].title,icon:y[C].icon})),...t.map(C=>({id:C.id,title:C.name,icon:v[C.name]||""}))],x=C=>{u[C]&&h({...u,[C]:!1}),m(C)},S=(C,T)=>{h({...u,[C]:T})};return b.jsxs("div",{className:"min-h-screen w-full relative overflow-hidden",style:{backgroundColor:"#f0e6ff"},children:[b.jsx("div",{className:"hidden md:block",children:b.jsx(_U,{})}),b.jsxs("div",{className:"hidden md:flex absolute top-4 left-4 flex-col gap-4 z-10",children:[b.jsx(ya,{icon:"",label:"Chat",onClick:()=>d("chat")}),b.jsx(ya,{icon:"",label:"Guestbook",onClick:()=>d("guestbook")}),b.jsx(ya,{icon:"",label:"Software",onClick:()=>p("Software")}),b.jsx(ya,{icon:"",label:"Research",onClick:()=>p("Research")}),b.jsx(ya,{icon:"",label:"Reading List",onClick:()=>d("readingList")}),b.jsx(ya,{icon:"",label:"About",onClick:()=>d("about")})]}),n.has("paint")&&b.jsx(Ji,{title:"Paint",onClose:()=>f("paint"),defaultPosition:{x:20,y:50},width:"w-auto",icon:"",zIndex:o.paint||10,onFocus:()=>m("paint"),isMinimized:u.paint,onMinimize:C=>S("paint",C),children:b.jsx(P3,{})}),n.has("chat")&&b.jsx(Ji,{title:"Chat Room",onClose:()=>f("chat"),defaultPosition:{x:200,y:50},width:"w-[500px]",icon:"",zIndex:o.chat||10,onFocus:()=>m("chat"),isMinimized:u.chat,onMinimize:C=>S("chat",C),children:b.jsx(gU,{})}),n.has("about")&&b.jsx(Ji,{title:"About me",onClose:()=>f("about"),defaultPosition:{x:150,y:100},width:"w-96",icon:"",zIndex:o.about||10,onFocus:()=>m("about"),isMinimized:u.about,onMinimize:C=>S("about",C),children:b.jsx(mU,{})}),n.has("jobPopup")&&b.jsx(Ji,{title:"Looking for Opportunities!",onClose:()=>f("jobPopup"),defaultPosition:{x:350,y:80},width:"w-[400px]",icon:"",zIndex:o.jobPopup||20,onFocus:()=>m("jobPopup"),isMinimized:u.jobPopup,onMinimize:C=>S("jobPopup",C),children:b.jsx(TU,{})}),n.has("gallery")&&b.jsx(Ji,{title:"My Art Gallery",onClose:()=>f("gallery"),defaultPosition:{x:250,y:100},width:"w-[450px]",icon:"",zIndex:o.gallery||10,onFocus:()=>m("gallery"),isMinimized:u.gallery,onMinimize:C=>S("gallery",C),children:b.jsx(yU,{})}),n.has("guestbook")&&b.jsx(Ji,{title:"Guestbook",onClose:()=>f("guestbook"),defaultPosition:{x:40,y:150},width:"w-[400px]",icon:"",zIndex:o.guestbook||10,onFocus:()=>m("guestbook"),isMinimized:u.guestbook,onMinimize:C=>S("guestbook",C),children:b.jsx(vU,{})}),n.has("readingList")&&b.jsx(Ji,{title:"Reading List",onClose:()=>f("readingList"),defaultPosition:{x:50,y:100},width:"w-[800px]",icon:"",zIndex:o.readingList||10,onFocus:()=>m("readingList"),isMinimized:u.readingList,onMinimize:C=>S("readingList",C),children:b.jsx(kU,{})}),t.map((C,T)=>{const M={Software:{x:300,y:80},Research:{x:450,y:180},Community:{x:320,y:120},Activism:{x:380,y:140}}[C.name]||{x:300+T*150,y:80+T*100};return b.jsx(Ji,{title:C.name,onClose:()=>g(C.id),defaultPosition:M,width:"w-[450px]",icon:v[C.name]||"",zIndex:o[C.id]||10,onFocus:()=>m(C.id),isMinimized:u[C.id],onMinimize:P=>S(C.id,P),children:b.jsx(wU,{blogName:C.name})},C.id)}),b.jsx($z,{isOpen:i,onClose:()=>s(!1),onOpenBlog:p,onOpenWindow:d}),b.jsx(zz,{onStartClick:()=>s(!i),windows:w,onWindowClick:x})]})};var WA={exports:{}},BA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pl=k;function OU(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var MU=typeof Object.is=="function"?Object.is:OU,AU=Pl.useState,RU=Pl.useEffect,PU=Pl.useLayoutEffect,DU=Pl.useDebugValue;function NU(n,e){var t=e(),r=AU({inst:{value:t,getSnapshot:e}}),i=r[0].inst,s=r[1];return PU(function(){i.value=t,i.getSnapshot=e,ry(i)&&s({inst:i})},[n,t,e]),RU(function(){return ry(i)&&s({inst:i}),n(function(){ry(i)&&s({inst:i})})},[n]),DU(t),t}function ry(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!MU(n,t)}catch{return!0}}function IU(n,e){return e()}var jU=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?IU:NU;BA.useSyncExternalStore=Pl.useSyncExternalStore!==void 0?Pl.useSyncExternalStore:jU;WA.exports=BA;var Eb=WA.exports;function bt(n){this.content=n}bt.prototype={constructor:bt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new bt(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new bt(t)},addToStart:function(n,e){return new bt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new bt(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new bt(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=bt.from(n),n.size?new bt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=bt.from(n),n.size?new bt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=bt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};bt.from=function(n){if(n instanceof bt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new bt(e)};function zA(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=zA(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function $A(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=$A(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}class L{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new L(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new L(r,i)}cutByIndex(e,t){return e==t?L.empty:e==0&&t==this.content.length?this:new L(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new L(i,s)}addToStart(e){return new L([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new L(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return zA(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return $A(this,e,t,r)}findIndex(e){if(e==0)return yd(0,e);if(e==this.size)return yd(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let i=this.child(t),s=r+i.nodeSize;if(s>=e)return s==e?yd(t+1,s):yd(t,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return L.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new L(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return L.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new L(t||e,r)}static from(e){if(!e)return L.empty;if(e instanceof L)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new L([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}L.empty=new L([],0);const iy={index:0,offset:0};function yd(n,e){return iy.index=n,iy.offset=e,iy}function qf(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!qf(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!qf(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Se=class uv{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&qf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return uv.none;if(e instanceof uv)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Se.none=[];class Yf extends Error{}class q{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=UA(this.content,e+this.openStart,t);return r&&new q(r,this.openStart,this.openEnd)}removeBetween(e,t){return new q(HA(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return q.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new q(L.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new q(e,r,i)}}q.empty=new q(L.empty,0,0);function HA(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(HA(s.content,e-i-1,t-i-1)))}function UA(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=UA(o.content,e-s-1,t,o);return a&&n.replaceChild(i,o.copy(a))}function LU(n,e,t){if(t.openStart>n.depth)throw new Yf("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Yf("Inconsistent open depths");return VA(n,e,t,0)}function VA(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let o=VA(n,e,t,r+1);return s.copy(s.content.replaceChild(i,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,a=o.content;return Bo(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=FU(t,n);return Bo(s,qA(n,o,a,e,r))}else return Bo(s,Kf(n,e,r))}function GA(n,e){if(!e.type.compatibleContent(n.type))throw new Yf("Cannot join "+e.type.name+" onto "+n.type.name)}function hv(n,e,t){let r=n.node(t);return GA(r,e.node(t)),r}function Wo(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Yc(n,e,t,r){let i=(e||n).node(t),s=0,o=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(Wo(n.nodeAfter,r),s++));for(let a=s;a<o;a++)Wo(i.child(a),r);e&&e.depth==t&&e.textOffset&&Wo(e.nodeBefore,r)}function Bo(n,e){return n.type.checkContent(e),n.copy(e)}function qA(n,e,t,r,i){let s=n.depth>i&&hv(n,e,i+1),o=r.depth>i&&hv(t,r,i+1),a=[];return Yc(null,n,i,a),s&&o&&e.index(i)==t.index(i)?(GA(s,o),Wo(Bo(s,qA(n,e,t,r,i+1)),a)):(s&&Wo(Bo(s,Kf(n,e,i+1)),a),Yc(e,t,i,a),o&&Wo(Bo(o,Kf(t,r,i+1)),a)),Yc(r,null,i,a),new L(a)}function Kf(n,e,t){let r=[];if(Yc(null,n,t,r),n.depth>t){let i=hv(n,e,t+1);Wo(Bo(i,Kf(n,e,t+1)),r)}return Yc(e,null,t,r),new L(r)}function FU(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(L.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class Iu{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Se.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Xf(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new Iu(t,r,s)}static resolveCached(e,t){let r=_C.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==t)return o}else _C.set(e,r=new WU);let i=r.elts[r.i]=Iu.resolve(e,t);return r.i=(r.i+1)%BU,i}}class WU{constructor(){this.elts=[],this.i=0}}const BU=12,_C=new WeakMap;class Xf{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const zU=Object.create(null);let js=class dv{constructor(e,t,r,i=Se.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||L.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&qf(this.attrs,t||e.defaultAttrs||zU)&&Se.sameSet(this.marks,r||Se.none)}copy(e=null){return e==this.content?this:new dv(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new dv(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return q.empty;let i=this.resolve(e),s=this.resolve(t),o=r?0:i.sharedDepth(t),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new q(c,i.depth-o,s.depth-o)}replace(e,t,r){return LU(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return Iu.resolveCached(this,e)}resolveNoCache(e){return Iu.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),YA(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=L.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Se.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Se.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=L.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};js.prototype.text=void 0;class Jf extends js{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):YA(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Jf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Jf(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function YA(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Jo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new $U(e,t);if(r.next==null)return Jo.empty;let i=KA(r);r.next&&r.err("Unexpected trailing text");let s=KU(YU(i));return XU(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!t||l.validEnd))return L.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:h}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let d=s(h,a.concat(u));if(d)return d}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Jo.empty=new Jo(!0);class $U{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function KA(n){let e=[];do e.push(HU(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function HU(n){let e=[];do e.push(UU(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function UU(n){let e=qU(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=VU(n,e);else break;return e}function EC(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function VU(n,e){let t=EC(n),r=t;return n.eat(",")&&(n.next!="}"?r=EC(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function GU(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let o=t[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function qU(n){if(n.eat("(")){let e=KA(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=GU(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function YU(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=t())}else if(o.type=="star"){let l=t();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=t();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=t();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=t();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function XA(n,e){return e-n}function OC(n,e){let t=[];return r(e),t.sort(XA);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&t.indexOf(l)==-1&&r(l)}}}function KU(n){let e=Object.create(null);return t(OC(n,0));function t(r){let i=[];r.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);OC(n,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new Jo(r.indexOf(n.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(XA);s.next.push({type:i[o][0],next:e[a.join(",")]||t(a)})}return s}}function XU(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function JA(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function QA(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function ZA(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let s=n[i];s.validate&&s.validate(e[i])}}function eR(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new QU(n,r,e[r]);return t}let MC=class tR{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=eR(e,r.attrs),this.defaultAttrs=JA(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Jo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:QA(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new js(this,this.computeAttrs(e),L.from(t),Se.setFrom(r))}createChecked(e=null,t,r){return t=L.from(t),this.checkContent(t),new js(this,this.computeAttrs(e),t,Se.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=L.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(L.empty,!0);return s?new js(this,e,t.append(s),Se.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){ZA(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Se.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,o)=>r[s]=new tR(s,t,o));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function JU(n,e,t){let r=t.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${s}`)}}class QU{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?JU(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Rg{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=eR(e,i.attrs),this.excluded=null;let s=JA(this.attrs);this.instance=s?new Se(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Se(this,QA(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Rg(s,i++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){ZA(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class nR{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=bt.from(e.nodes),t.marks=bt.from(e.marks||{}),this.nodes=MC.compile(this.spec.nodes,this),this.marks=Rg.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Jo.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?AC(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:AC(this,o.split(" "))}this.nodeFromJSON=i=>js.fromJSON(this,i),this.markFromJSON=i=>Se.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof MC){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new Jf(r,r.defaultAttrs,e,Se.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function AC(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],o=s;if(s)t.push(s);else for(let a in n.marks){let l=n.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function ZU(n){return n.tag!=null}function eV(n){return n.style!=null}class Ls{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(ZU(i))this.tags.push(i);else if(eV(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new PC(this,t,!1);return r.addAll(e,Se.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new PC(this,t,!0);return r.addAll(e,Se.none,t.from,t.to),q.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(rV(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=DC(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=DC(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ls(e,Ls.schemaRules(e)))}}const rR={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},tV={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},iR={ol:!0,ul:!0},ju=1,fv=2,Kc=4;function RC(n,e,t){return e!=null?(e?ju:0)|(e==="full"?fv:0):n&&n.whitespace=="pre"?ju|fv:t&~Kc}class vd{constructor(e,t,r,i,s,o){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Se.none,this.match=s||(o&Kc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(L.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ju)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=L.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(L.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!rR.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class PC{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,s,o=RC(null,t.preserveWhitespace,0)|(r?Kc:0);i?s=new vd(i.type,i.attrs,Se.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new vd(null,null,Se.none,!0,null,o):s=new vd(e.schema.topNodeType,null,Se.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,s=i.options&fv?"full":this.localPreserveWS||(i.options&ju)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),t,!0),a[l]&&this.insertNode(o.text(a[l]),t,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;iR.hasOwnProperty(o)&&this.parser.normalizeLists&&nV(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:tV.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(rR.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let h=l&&l.skip?t:this.readStyles(e,t);h&&this.addAll(e,h),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,t);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?t=t.filter(c=>!l.clearMark(c)):t=t.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return t}addElementByRule(e,t,r,i){let s,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,t.attrs||null,r,t.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[t.mark];r=r.concat(l.create(t.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,t,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,t);this.findAtPoint(e,s)}findPlace(e,t,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)t=this.enterInner(i[o],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Se.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):NC(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,t,r,i){let s=this.findPlace(e.create(t),r,!1);return s&&(s=this.enterInner(e,t,r,!0,i)),s}enterInner(e,t,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=RC(e,s,o.options);o.options&Kc&&o.content.length==0&&(a|=Kc);let l=Se.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):NC(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new vd(e,t,l,i,null,a)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=ju)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function nV(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&iR.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function rV(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function DC(n){let e={};for(let t in n)e[t]=n[t];return e}function NC(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class la{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=sy(t).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,t);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Kd(sy(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Kd(sy(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return Kd(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new la(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=IC(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return IC(e.marks)}}function IC(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function sy(n){return n.document||window.document}const jC=new WeakMap;function iV(n){let e=jC.get(n);return e===void 0&&jC.set(n,e=sV(n)),e}function sV(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function Kd(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=iV(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(t=i.slice(0,o),i=i.slice(o+1));let a,l=t?n.createElementNS(t,i):n.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let h in c)if(c[h]!=null){let d=h.indexOf(" ");d>0?l.setAttributeNS(h.slice(0,d),h.slice(d+1),c[h]):h=="style"&&l.style?l.style.cssText=c[h]:l.setAttribute(h,c[h])}}for(let h=u;h<e.length;h++){let d=e[h];if(d===0){if(h<e.length-1||h>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:p}=Kd(n,d,t,r);if(l.appendChild(f),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const sR=65535,oR=Math.pow(2,16);function oV(n,e){return n+e*oR}function LC(n){return n&sR}function aV(n){return(n-(n&sR))/oR}const aR=1,lR=2,Xd=4,cR=8;class pv{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&cR)>0}get deletedBefore(){return(this.delInfo&(aR|Xd))>0}get deletedAfter(){return(this.delInfo&(lR|Xd))>0}get deletedAcross(){return(this.delInfo&Xd)>0}}class Sn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Sn.empty)return Sn.empty}recover(e){let t=0,r=LC(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+aV(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],h=l+c;if(e<=h){let d=c?e==l?-1:e==h?1:t:t,f=l+i+(d<0?0:u);if(r)return f;let p=e==(t<0?l:h)?null:oV(a/3,e-l),g=e==l?lR:e==h?aR:Xd;return(t<0?e!=l:e!=h)&&(g|=cR),new pv(f,g,p)}i+=u-c}return r?e+i:new pv(e+i,0,null)}touches(e,t){let r=0,i=LC(t),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+t],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new Sn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Sn.empty:new Sn(e<0?[0,-e,0]:[0,0,e])}}Sn.empty=new Sn([]);class Lu{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Lu(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new Lu;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new pv(e,i,null)}}const oy=Object.create(null);class Lt{getMap(){return Sn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=oy[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in oy)throw new RangeError("Duplicate use of step JSON ID "+e);return oy[e]=t,t.prototype.jsonID=e,t}}class nt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new nt(e,null)}static fail(e){return new nt(null,e)}static fromReplace(e,t,r,i){try{return nt.ok(e.replace(t,r,i))}catch(s){if(s instanceof Yf)return nt.fail(s.message);throw s}}}function Ob(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(Ob(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return L.fromArray(r)}class Ts extends Lt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new q(Ob(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),t.openStart,t.openEnd);return nt.fromReplace(e,this.from,this.to,s)}invert(){return new xr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ts(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ts&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ts(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ts(t.from,t.to,e.markFromJSON(t.mark))}}Lt.jsonID("addMark",Ts);class xr extends Lt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new q(Ob(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return nt.fromReplace(e,this.from,this.to,r)}invert(){return new Ts(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new xr(t.pos,r.pos,this.mark)}merge(e){return e instanceof xr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new xr(t.from,t.to,e.markFromJSON(t.mark))}}Lt.jsonID("removeMark",xr);class _s extends Lt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return nt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return nt.fromReplace(e,this.pos,this.pos+1,new q(L.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new _s(this.pos,t.marks[i]);return new _s(this.pos,this.mark)}}return new Qo(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new _s(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new _s(t.pos,e.markFromJSON(t.mark))}}Lt.jsonID("addNodeMark",_s);class Qo extends Lt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return nt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return nt.fromReplace(e,this.pos,this.pos+1,new q(L.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new _s(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Qo(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Qo(t.pos,e.markFromJSON(t.mark))}}Lt.jsonID("removeNodeMark",Qo);class pt extends Lt{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&gv(e,this.from,this.to)?nt.fail("Structure replace would overwrite content"):nt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Sn([this.from,this.to-this.from,this.slice.size])}invert(e){return new pt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new pt(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof pt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?q.empty:new q(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new pt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?q.empty:new q(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new pt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new pt(t.from,t.to,q.fromJSON(e,t.slice),!!t.structure)}}Lt.jsonID("replace",pt);class mt extends Lt{constructor(e,t,r,i,s,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(gv(e,this.from,this.gapFrom)||gv(e,this.gapTo,this.to)))return nt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return nt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?nt.fromReplace(e,this.from,this.to,r):nt.fail("Content does not fit in gap")}getMap(){return new Sn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new mt(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new mt(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new mt(t.from,t.to,t.gapFrom,t.gapTo,q.fromJSON(e,t.slice),t.insert,!!t.structure)}}Lt.jsonID("replaceAround",mt);function gv(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function lV(n,e,t,r){let i=[],s=[],o,a;n.doc.nodesBetween(e,t,(l,c,u)=>{if(!l.isInline)return;let h=l.marks;if(!r.isInSet(h)&&u.type.allowsMarkType(r.type)){let d=Math.max(c,e),f=Math.min(c+l.nodeSize,t),p=r.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(p)||(o&&o.to==d&&o.mark.eq(h[g])?o.to=f:i.push(o=new xr(d,f,h[g])));a&&a.to==d?a.to=f:s.push(a=new Ts(d,f,r))}}),i.forEach(l=>n.step(l)),s.forEach(l=>n.step(l))}function cV(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof Rg){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,t);for(let u=0;u<l.length;u++){let h=l[u],d;for(let f=0;f<i.length;f++){let p=i[f];p.step==s-1&&h.eq(i[f].style)&&(d=p)}d?(d.to=c,d.step=s):i.push({style:h,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>n.step(new xr(o.from,o.to,o.style)))}function Mb(n,e,t,r=t.contentMatch,i=!0){let s=n.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,h=r.matchType(c.type);if(!h)o.push(new pt(a,u,q.empty));else{r=h;for(let d=0;d<c.marks.length;d++)t.allowsMarkType(c.marks[d].type)||n.step(new xr(a,u,c.marks[d]));if(i&&c.isText&&t.whitespace!="pre"){let d,f=/\r?\n|\r/g,p;for(;d=f.exec(c.text);)p||(p=new q(L.from(t.schema.text(" ",t.allowedMarks(c.marks))),0,0)),o.push(new pt(a+d.index,a+d.index+d[0].length,p))}}a=u}if(!r.validEnd){let l=r.fillBefore(L.empty,!0);n.replace(a,a,new q(l,0,0))}for(let l=o.length-1;l>=0;l--)n.step(o[l])}function uV(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function nc(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),s=n.$from.index(r),o=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(s,o,t))return r;if(r==0||i.type.spec.isolating||!uV(i,s,o))break}return null}function hV(n,e,t){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=L.empty,h=0;for(let p=s,g=!1;p>t;p--)g||r.index(p)>0?(g=!0,u=L.from(r.node(p).copy(u)),h++):l--;let d=L.empty,f=0;for(let p=s,g=!1;p>t;p--)g||i.after(p+1)<i.end(p)?(g=!0,d=L.from(i.node(p).copy(d)),f++):c++;n.step(new mt(l,c,o,a,new q(u.append(d),h,f),u.size-h,!0))}function Ab(n,e,t=null,r=n){let i=dV(n,e),s=i&&fV(r,e);return s?i.map(FC).concat({type:e,attrs:t}).concat(s.map(FC)):null}function FC(n){return{type:n,attrs:null}}function dV(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return t.canReplaceWith(r,i,o)?s:null}function fV(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(t.child(c).type);return!l||!l.validEnd?null:o}function pV(n,e,t){let r=L.empty;for(let o=t.length-1;o>=0;o--){if(r.size){let a=t[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=L.from(t[o].type.create(t[o].attrs,r))}let i=e.start,s=e.end;n.step(new mt(i,s,i,s,new q(r,0,0),t.length,!0))}function gV(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&mV(n.doc,n.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!p?c=!1:!f&&p&&(c=!0)}c===!1&&hR(n,o,a,s),Mb(n,n.mapping.slice(s).map(a,1),r,void 0,c===null);let u=n.mapping.slice(s),h=u.map(a,1),d=u.map(a+o.nodeSize,1);return n.step(new mt(h,d,h+1,d-1,new q(L.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&uR(n,o,a,s),!1}})}function uR(n,e,t,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=n.mapping.slice(r).map(t+1+s+o.index);n.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function hR(n,e,t,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=n.mapping.slice(r).map(t+1+s);n.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function mV(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function yV(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let o=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,o);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new mt(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new q(L.from(o),0,0),1,!0))}function ul(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=t-2;c>s;c--,u--){let h=i.node(c),d=i.index(c);if(h.type.spec.isolating)return!1;let f=h.content.cutByIndex(d,h.childCount),p=r&&r[u+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[u]||h;if(!h.canReplace(d+1,h.childCount)||!g.type.validContent(f))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function vV(n,e,t=1,r){let i=n.doc.resolve(e),s=L.empty,o=L.empty;for(let a=i.depth,l=i.depth-t,c=t-1;a>l;a--,c--){s=L.from(i.node(a).copy(s));let u=r&&r[c];o=L.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}n.step(new pt(e,e,new q(s.append(o),t,t),!0))}function no(n,e){let t=n.resolve(e),r=t.index();return dR(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function wV(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?n.type.schema.nodes.text:s.type;if(t=t.matchType(o),!t||!n.type.allowsMarks(s.marks))return!1}return t.validEnd}function dR(n,e){return!!(n&&e&&!n.isLeaf&&wV(n,e))}function Pg(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):t>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&dR(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function bV(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,s=n.doc.resolve(e-t),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",h=!!o.contentMatch.matchType(i);u&&!h?r=!1:!u&&h&&(r=!0)}let a=n.steps.length;if(r===!1){let u=n.doc.resolve(e+t);hR(n,u.node(),u.before(),a)}o.inlineContent&&Mb(n,e+t-1,o,s.node().contentMatchAt(s.index()),r==null);let l=n.mapping.slice(a),c=l.map(e-t);if(n.step(new pt(c,l.map(e+t,-1),q.empty,!0)),r===!0){let u=n.doc.resolve(c);uR(n,u.node(),u.before(),n.steps.length)}return n}function xV(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function fR(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let h=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=h&&c.canReplaceWith(l,l,h[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Dg(n,e,t=e,r=q.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return pR(i,s,r)?new pt(e,t,r):new SV(i,s,r).fit()}function pR(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class SV{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=L.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=L.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new q(s,o,a);return e>-1?new mt(r.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||r.pos!=this.$to.pos?new pt(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=ay(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,h=null;if(t==1&&(o?c.matchType(o.type)||(h=c.fillBefore(L.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:h};if(t==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=ay(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new q(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=ay(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new q(Ec(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new q(Ec(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:h,type:d}=this.frontier[t];if(i){for(let g=0;g<i.childCount;g++)u.push(i.child(g));h=h.matchFragment(i)}let f=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),m=h.matchType(g.type);if(!m)break;c++,(c>1||l==0||g.content.size)&&(h=m,u.push(gR(g.mark(d.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Oc(this.placed,t,L.from(u)),this.frontier[t].match=h,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,m=a;g<f;g++){let y=m.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),m=y.content}this.unplaced=p?e==0?q.empty:new q(Ec(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new q(Ec(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!ly(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=ly(e,t,i,r,s);if(o){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=ly(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:o,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Oc(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Oc(this.placed,this.depth,L.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(L.empty,!0);t.childCount&&(this.placed=Oc(this.placed,this.frontier.length,t))}}function Ec(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Ec(n.firstChild.content,e-1,t)))}function Oc(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Oc(n.lastChild.content,e-1,t)))}function ay(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function gR(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,gR(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(L.empty,!0)))),n.copy(r)}function ly(n,e,t,r,i){let s=n.node(e),o=i?n.indexAfter(e):n.index(e);if(o==s.childCount&&!t.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!CV(t,s.content,o)?a:null}function CV(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function kV(n){return n.spec.defining||n.spec.definingForContent}function TV(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(pR(i,s,r))return n.step(new pt(e,t,r));let o=yR(i,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let d=i.depth,f=i.pos-1;d>0;d--,f--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(d)>-1?a=d:i.before(d)==f&&o.splice(1,0,-d)}let l=o.indexOf(a),c=[],u=r.openStart;for(let d=r.content,f=0;;f++){let p=d.firstChild;if(c.push(p),f==r.openStart)break;d=p.content}for(let d=u-1;d>=0;d--){let f=c[d],p=kV(f.type);if(p&&!f.sameMarkup(i.node(Math.abs(a)-1)))u=d;else if(p||!f.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let f=(d+u+1)%(r.openStart+1),p=c[f];if(p)for(let g=0;g<o.length;g++){let m=o[(g+l)%o.length],y=!0;m<0&&(y=!1,m=-m);let v=i.node(m-1),w=i.index(m-1);if(v.canReplaceWith(w,w,p.type,p.marks))return n.replace(i.before(m),y?s.after(m):t,new q(mR(r.content,0,r.openStart,f),f,r.openEnd))}}let h=n.steps.length;for(let d=o.length-1;d>=0&&(n.replace(e,t,r),!(n.steps.length>h));d--){let f=o[d];f<0||(e=i.before(f),t=s.after(f))}}function mR(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(mR(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(n).append(n);n=o.append(s.matchFragment(o).fillBefore(L.empty,!0))}return n}function _V(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=xV(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new q(L.from(r),0,0))}function EV(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=yR(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return n.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&t>r.end(o)&&i.end(o)-t!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return n.delete(r.before(o),t);n.delete(e,t)}function yR(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class hl extends Lt{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return nt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return nt.fromReplace(e,this.pos,this.pos+1,new q(L.from(i),0,t.isLeaf?0:1))}getMap(){return Sn.empty}invert(e){return new hl(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new hl(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new hl(t.pos,t.attr,t.value)}}Lt.jsonID("attr",hl);class Fu extends Lt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return nt.ok(r)}getMap(){return Sn.empty}invert(e){return new Fu(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Fu(t.attr,t.value)}}Lt.jsonID("docAttr",Fu);let Dl=class extends Error{};Dl=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Dl.prototype=Object.create(Error.prototype);Dl.prototype.constructor=Dl;Dl.prototype.name="TransformError";class vR{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Lu}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Dl(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=q.empty){let i=Dg(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new q(L.from(r),0,0))}delete(e,t){return this.replace(e,t,q.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return TV(this,e,t,r),this}replaceRangeWith(e,t,r){return _V(this,e,t,r),this}deleteRange(e,t){return EV(this,e,t),this}lift(e,t){return hV(this,e,t),this}join(e,t=1){return bV(this,e,t),this}wrap(e,t){return pV(this,e,t),this}setBlockType(e,t=e,r,i=null){return gV(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return yV(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new hl(e,t,r)),this}setDocAttribute(e,t){return this.step(new Fu(e,t)),this}addNodeMark(e,t){return this.step(new _s(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof Se)t.isInSet(r.marks)&&this.step(new Qo(e,t));else{let i=r.marks,s,o=[];for(;s=t.isInSet(i);)o.push(new Qo(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,t=1,r){return vV(this,e,t,r),this}addMark(e,t,r){return lV(this,e,t,r),this}removeMark(e,t,r){return cV(this,e,t,r),this}clearIncompatible(e,t,r){return Mb(this,e,t,r),this}}const cy=Object.create(null);class ce{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new OV(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=q.empty){let r=t.content.lastChild,i=null;for(let a=0;a<t.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?q.empty:t),a==0&&zC(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),zC(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new ne(e):Ra(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=t<0?Ra(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):Ra(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Vn(e.node(0))}static atStart(e){return Ra(e,e,0,0,1)||new Vn(e)}static atEnd(e){return Ra(e,e,e.content.size,e.childCount,-1)||new Vn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=cy[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in cy)throw new RangeError("Duplicate use of selection JSON ID "+e);return cy[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ne.between(this.$anchor,this.$head).getBookmark()}}ce.prototype.visible=!0;class OV{constructor(e,t){this.$from=e,this.$to=t}}let WC=!1;function BC(n){!WC&&!n.parent.inlineContent&&(WC=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class ne extends ce{constructor(e,t=e){BC(e),BC(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return ce.near(r);let i=e.resolve(t.map(this.anchor));return new ne(i.parent.inlineContent?i:r,r)}replace(e,t=q.empty){if(super.replace(e,t),t==q.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ne&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ng(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ne(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=ce.findFrom(t,r,!0)||ce.findFrom(t,-r,!0);if(s)t=s.$head;else return ce.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(ce.findFrom(e,-r,!0)||ce.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new ne(e,t)}}ce.jsonID("text",ne);class Ng{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Ng(e.map(this.anchor),e.map(this.head))}resolve(e){return ne.between(e.resolve(this.anchor),e.resolve(this.head))}}class Q extends ce{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?ce.near(s):new Q(s)}content(){return new q(L.from(this.node),0,0)}eq(e){return e instanceof Q&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Rb(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Q(e.resolve(t.anchor))}static create(e,t){return new Q(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Q.prototype.visible=!1;ce.jsonID("node",Q);class Rb{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new Ng(r,r):new Rb(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&Q.isSelectable(r)?new Q(t):ce.near(t)}}class Vn extends ce{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=q.empty){if(t==q.empty){e.delete(0,e.doc.content.size);let r=ce.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Vn(e)}map(e){return new Vn(e)}eq(e){return e instanceof Vn}getBookmark(){return MV}}ce.jsonID("all",Vn);const MV={map(){return this},resolve(n){return new Vn(n)}};function Ra(n,e,t,r,i,s=!1){if(e.inlineContent)return ne.create(n,t);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Q.isSelectable(a))return Q.create(n,t-(i<0?a.nodeSize:0))}else{let l=Ra(n,a,t+i,i<0?a.childCount:0,i,s);if(l)return l}t+=a.nodeSize*i}return null}function zC(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof pt||i instanceof mt))return;let s=n.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),n.setSelection(ce.near(n.doc.resolve(o),t))}const $C=1,wd=2,HC=4;class AV extends vR{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|$C)&~wd,this.storedMarks=null,this}get selectionSet(){return(this.updated&$C)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=wd,this}ensureMarks(e){return Se.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&wd)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~wd,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Se.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(t);s=r==t?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(ce.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=HC,this}get scrolledIntoView(){return(this.updated&HC)>0}}function UC(n,e){return!e||!n?n:n.bind(e)}class Mc{constructor(e,t,r){this.name=e,this.init=UC(t.init,r),this.apply=UC(t.apply,r)}}const RV=[new Mc("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Mc("selection",{init(n,e){return n.selection||ce.atStart(e.doc)},apply(n){return n.selection}}),new Mc("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Mc("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class uy{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=RV.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Mc(r.key,r.spec.state,r))})}}class Ja{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:r,n:t.length}:{state:this,n:0})}t.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Ja(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new AV(this)}static create(e){let t=new uy(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ja(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new uy(this.schema,e.plugins),r=t.fields,i=new Ja(t);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new uy(e.schema,e.plugins),s=new Ja(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=js.fromJSON(e.schema,t.doc);else if(o.name=="selection")s.selection=ce.fromJSON(s.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){s[o.name]=c.fromJSON.call(l,e,t[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function wR(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=wR(i,e,{})),t[r]=i}return t}class Ve{constructor(e){this.spec=e,this.props={},e.props&&wR(e.props,this,this.props),this.key=e.key?e.key.key:bR("plugin")}getState(e){return e[this.key]}}const hy=Object.create(null);function bR(n){return n in hy?n+"$"+ ++hy[n]:(hy[n]=0,n+"$")}class vt{constructor(e="key"){this.key=bR(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const PV=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function xR(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const DV=(n,e,t)=>{let r=xR(n,t);if(!r)return!1;let i=Pb(r);if(!i){let o=r.blockRange(),a=o&&nc(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(TR(n,i,e,-1))return!0;if(r.parent.content.size==0&&(Nl(s,"end")||Q.isSelectable(s)))for(let o=r.depth;;o--){let a=Dg(n.doc,r.before(o),r.after(o),q.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(Nl(s,"end")?ce.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Q.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},NV=(n,e,t)=>{let r=xR(n,t);if(!r)return!1;let i=Pb(r);return i?SR(n,i,e):!1},IV=(n,e,t)=>{let r=CR(n,t);if(!r)return!1;let i=Db(r);return i?SR(n,i,e):!1};function SR(n,e,t){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Dg(n.doc,s,l,q.empty);if(!c||c.from!=s||c instanceof pt&&c.slice.size>=l-s)return!1;if(t){let u=n.tr.step(c);u.setSelection(ne.create(u.doc,s)),t(u.scrollIntoView())}return!0}function Nl(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const jV=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=Pb(r)}let o=s&&s.nodeBefore;return!o||!Q.isSelectable(o)?!1:(e&&e(n.tr.setSelection(Q.create(n.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Pb(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function CR(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const LV=(n,e,t)=>{let r=CR(n,t);if(!r)return!1;let i=Db(r);if(!i)return!1;let s=i.nodeAfter;if(TR(n,i,e,1))return!0;if(r.parent.content.size==0&&(Nl(s,"start")||Q.isSelectable(s))){let o=Dg(n.doc,r.before(),r.after(),q.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(Nl(s,"start")?ce.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Q.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},FV=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=Db(r)}let o=s&&s.nodeAfter;return!o||!Q.isSelectable(o)?!1:(e&&e(n.tr.setSelection(Q.create(n.doc,s.pos)).scrollIntoView()),!0)};function Db(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const WV=(n,e)=>{let t=n.selection,r=t instanceof Q,i;if(r){if(t.node.isTextblock||!no(n.doc,t.from))return!1;i=t.from}else if(i=Pg(n.doc,t.from,-1),i==null)return!1;if(e){let s=n.tr.join(i);r&&s.setSelection(Q.create(s.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},BV=(n,e)=>{let t=n.selection,r;if(t instanceof Q){if(t.node.isTextblock||!no(n.doc,t.to))return!1;r=t.to}else if(r=Pg(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},zV=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),s=i&&nc(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},$V=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function kR(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const HV=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),o=kR(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection(ce.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},UV=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Vn||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=kR(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=n.tr.insert(o,s.createAndFill());a.setSelection(ne.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},VV=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(ul(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&nc(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)},GV=(n,e)=>{let{$from:t,to:r}=n.selection,i,s=t.sharedDepth(r);return s==0?!1:(i=t.before(s),e&&e(n.tr.setSelection(Q.create(n.doc,i))),!0)};function qV(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||no(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function TR(n,e,t,r){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&qV(n,e,t))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(t){let f=e.pos+s.nodeSize,p=L.empty;for(let y=o.length-1;y>=0;y--)p=L.from(o[y].create(null,p));p=L.from(i.copy(p));let g=n.tr.step(new mt(e.pos-1,f,e.pos,f,new q(p,1,0),o.length,!0)),m=g.doc.resolve(f+2*o.length);m.nodeAfter&&m.nodeAfter.type==i.type&&no(g.doc,m.pos)&&g.join(m.pos),t(g.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&l?null:ce.findFrom(e,1),h=u&&u.$from.blockRange(u.$to),d=h&&nc(h);if(d!=null&&d>=e.depth)return t&&t(n.tr.lift(h,d).scrollIntoView()),!0;if(c&&Nl(s,"start",!0)&&Nl(i,"end")){let f=i,p=[];for(;p.push(f),!f.isTextblock;)f=f.lastChild;let g=s,m=1;for(;!g.isTextblock;g=g.firstChild)m++;if(f.canReplace(f.childCount,f.childCount,g.content)){if(t){let y=L.empty;for(let w=p.length-1;w>=0;w--)y=L.from(p[w].copy(y));let v=n.tr.step(new mt(e.pos-p.length,e.pos+s.nodeSize,e.pos+m,e.pos+s.nodeSize-m,new q(y,p.length,0),0,!0));t(v.scrollIntoView())}return!0}}return!1}function _R(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(ne.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const YV=_R(-1),KV=_R(1);function XV(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),a=o&&Ab(o,n,e);return a?(r&&r(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function VC(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=t.selection.ranges[s];t.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)i=!0;else{let u=t.doc.resolve(c),h=u.index();i=u.parent.canReplaceWith(h,h+1,n)}})}if(!i)return!1;if(r){let s=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[o];s.setBlockType(a,l,n,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function JV(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s);if(!o)return!1;let a=r?t.tr:null;return QV(a,o,n,e)?(r&&r(a.scrollIntoView()),!0):!1}}function QV(n,e,t,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new Xf(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Xf(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=Ab(s,t,r,e);return a?(n&&ZV(n,e,a,i,t),!0):!1}function ZV(n,e,t,r,i){let s=L.empty;for(let u=t.length-1;u>=0;u--)s=L.from(t[u].type.create(t[u].attrs,s));n.step(new mt(e.start-(r?2:0),e.end,e.start,e.end,new q(s,0,0),t.length,!0));let o=0;for(let u=0;u<t.length;u++)t[u].type==i&&(o=u+1);let a=t.length-o,l=e.start+t.length-(r?2:0),c=e.parent;for(let u=e.startIndex,h=e.endIndex,d=!0;u<h;u++,d=!1)!d&&ul(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function e6(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?t6(e,t,n,s):n6(e,t,s):!0:!1}}function t6(n,e,t,r){let i=n.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new mt(s-1,o,s,o,new q(L.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Xf(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=nc(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return no(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function n6(n,e,t){let r=n.tr,i=t.parent;for(let f=t.end,p=t.endIndex-1,g=t.startIndex;p>g;p--)f-=i.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(t.start),o=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?L.empty:L.from(i))))return!1;let h=s.pos,d=h+o.nodeSize;return r.step(new mt(h-(a?1:0),d+(l?1:0),h+1,d-1,new q((a?L.empty:L.from(i.copy(L.empty))).append(l?L.empty:L.from(i.copy(L.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function r6(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==n);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=n)return!1;if(t){let c=l.lastChild&&l.lastChild.type==a.type,u=L.from(c?n.create():null),h=new q(L.from(n.create(null,L.from(a.type.create(null,u)))),c?3:1,0),d=s.start,f=s.end;t(e.tr.step(new mt(d-(c?3:1),f,d,f,h,1,!0)).scrollIntoView())}return!0}}const xt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Il=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let mv=null;const di=function(n,e,t){let r=mv||(mv=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},i6=function(){mv=null},Zo=function(n,e,t,r){return t&&(GC(n,e,t,r,-1)||GC(n,e,t,r,1))},s6=/^(img|br|input|textarea|hr)$/i;function GC(n,e,t,r,i){for(var s;;){if(n==t&&e==r)return!0;if(e==(i<0?0:$n(n))){let o=n.parentNode;if(!o||o.nodeType!=1||ah(n)||s6.test(n.nodeName)||n.contentEditable=="false")return!1;e=xt(n)+(i<0?0:1),n=o}else if(n.nodeType==1){let o=n.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else n=o,e=i<0?$n(n):0}else return!1}}function $n(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function o6(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=$n(n)}else if(n.parentNode&&!ah(n))e=xt(n),n=n.parentNode;else return null}}function a6(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!ah(n))e=xt(n)+1,n=n.parentNode;else return null}}function l6(n,e,t){for(let r=e==0,i=e==$n(n);r||i;){if(n==t)return!0;let s=xt(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==$n(n)}}function ah(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Ig=function(n){return n.focusNode&&Zo(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function yo(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function c6(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function u6(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min($n(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min($n(r.startContainer),r.startOffset)}}}const Jr=typeof navigator<"u"?navigator:null,qC=typeof document<"u"?document:null,ro=Jr&&Jr.userAgent||"",yv=/Edge\/(\d+)/.exec(ro),ER=/MSIE \d/.exec(ro),vv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ro),pn=!!(ER||vv||yv),Fs=ER?document.documentMode:vv?+vv[1]:yv?+yv[1]:0,Gn=!pn&&/gecko\/(\d+)/i.test(ro);Gn&&+(/Firefox\/(\d+)/.exec(ro)||[0,0])[1];const wv=!pn&&/Chrome\/(\d+)/.exec(ro),Nt=!!wv,OR=wv?+wv[1]:0,qt=!pn&&!!Jr&&/Apple Computer/.test(Jr.vendor),jl=qt&&(/Mobile\/\w+/.test(ro)||!!Jr&&Jr.maxTouchPoints>2),Fn=jl||(Jr?/Mac/.test(Jr.platform):!1),h6=Jr?/Win/.test(Jr.platform):!1,xi=/Android \d/.test(ro),lh=!!qC&&"webkitFontSmoothing"in qC.documentElement.style,d6=lh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function f6(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function ii(n,e){return typeof n=="number"?n:n[e]}function p6(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function YC(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let o=t||n.dom;o;){if(o.nodeType!=1){o=Il(o);continue}let a=o,l=a==s.body,c=l?f6(s):p6(a),u=0,h=0;if(e.top<c.top+ii(r,"top")?h=-(c.top-e.top+ii(i,"top")):e.bottom>c.bottom-ii(r,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+ii(i,"top")-c.top:e.bottom-c.bottom+ii(i,"bottom")),e.left<c.left+ii(r,"left")?u=-(c.left-e.left+ii(i,"left")):e.right>c.right-ii(r,"right")&&(u=e.right-c.right+ii(i,"right")),u||h)if(l)s.defaultView.scrollBy(u,h);else{let f=a.scrollLeft,p=a.scrollTop;h&&(a.scrollTop+=h),u&&(a.scrollLeft+=u);let g=a.scrollLeft-f,m=a.scrollTop-p;e={left:e.left-g,top:e.top-m,right:e.right-g,bottom:e.bottom-m}}let d=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(d))break;o=d=="absolute"?o.offsetParent:Il(o)}}function g6(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=n.root.elementFromPoint(s,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:MR(n.dom)}}function MR(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Il(r));return e}function m6({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;AR(t,r==0?0:r-e)}function AR(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let _a=null;function y6(n){if(n.setActive)return n.setActive();if(_a)return n.focus(_a);let e=MR(n);n.focus(_a==null?{get preventScroll(){return _a={preventScroll:!0},!0}}:void 0),_a||(_a=!1,AR(e,0))}function RR(n,e){let t,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=n.firstChild,h=0;u;u=u.nextSibling,h++){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=di(u).getClientRects();else continue;for(let f=0;f<d.length;f++){let p=d[f];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<r){t=u,r=g,i=g&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&g&&(s=h+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=h+1)}}return!t&&l&&(t=l,i=c,r=0),t&&t.nodeType==3?v6(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:RR(t,i)}function v6(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let s=is(r,1);if(s.top!=s.bottom&&Nb(e,s))return{node:n,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function Nb(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function w6(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function b6(n,e,t){let{node:r,offset:i}=RR(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function x6(n,e,t,r){let i=-1;for(let s=e,o=!1;s!=n.dom;){let a=n.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function PR(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let o=n.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Nb(e,c))return PR(o,e,c)}}if((s=(s+1)%r)==i)break}return n}function S6(n,e){let t=n.dom.ownerDocument,r,i=0,s=u6(t,e.left,e.top);s&&({node:r,offset:i}=s);let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=n.dom.getBoundingClientRect();if(!Nb(e,c)||(o=PR(n.dom,e,c),!o))return null}if(qt)for(let c=o;r&&c;c=Il(c))c.draggable&&(r=void 0);if(o=w6(o,e),r){if(Gn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],h;u.nodeName=="IMG"&&(h=u.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;lh&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=x6(n,r,i,e))}a==null&&(a=b6(n,o,e));let l=n.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function KC(n){return n.top<n.bottom||n.left<n.right}function is(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(KC(r))return r}return Array.prototype.find.call(t,KC)||n.getBoundingClientRect()}const C6=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function DR(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),o=lh||Gn;if(r.nodeType==3)if(o&&(C6.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let l=is(di(r,i,i),t);if(Gn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=is(di(r,i-1,i-1),-1);if(c.top==l.top){let u=is(di(r,i,i+1),-1);if(u.top!=l.top)return wc(u,u.left<c.left)}}return l}else{let l=i,c=i,u=t<0?1:-1;return t<0&&!i?(c++,u=-1):t>=0&&i==r.nodeValue.length?(l--,u=1):t<0?l--:c++,wc(is(di(r,l,c),u),u<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==$n(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return dy(l.getBoundingClientRect(),!1)}if(s==null&&i<$n(r)){let l=r.childNodes[i];if(l.nodeType==1)return dy(l.getBoundingClientRect(),!0)}return dy(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==$n(r))){let l=r.childNodes[i-1],c=l.nodeType==3?di(l,$n(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return wc(is(c,1),!1)}if(s==null&&i<$n(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?di(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return wc(is(c,-1),!0)}return wc(is(r.nodeType==3?di(r):r,-t),t>=0)}function wc(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function dy(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function NR(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function k6(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return NR(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=DR(n,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=di(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(t=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const T6=/[\u0590-\u08ac]/;function _6(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=n.domSelection();return a?!T6.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?s:o:NR(n,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:h}=n.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",t,"character");let f=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:p,focusOffset:g}=n.domSelectionRange(),m=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(u,h),l&&(l!=u||c!=h)&&a.extend&&a.extend(l,c)}catch{}return d!=null&&(a.caretBidiLevel=d),m}):r.pos==r.start()||r.pos==r.end()}let XC=null,JC=null,QC=!1;function E6(n,e,t){return XC==e&&JC==t?QC:(XC=e,JC=t,QC=t=="up"||t=="down"?k6(n,e,t):_6(n,e,t))}const qn=0,ZC=1,To=2,Qr=3;class ch{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=qn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>xt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!t||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof jR){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof IR&&s.side>=0;r--);if(t<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&t&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?xt(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?xt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&t<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,u);e=o;for(let h=a;h>0;h--){let d=this.children[h-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=xt(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(c>t||a==this.children.length-1)){t=c;for(let u=a+1;u<this.children.length;u++){let h=this.children[u];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=xt(h.dom);break}t+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),o=Math.max(e,t);for(let f=0,p=0;f<this.children.length;f++){let g=this.children[f],m=p+g.size;if(s>p&&o<m)return g.setSelection(e-p-g.border,t-p-g.border,r,i);p=m}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),h=!1;if((Gn||qt)&&e==t){let{node:f,offset:p}=a;if(f.nodeType==3){if(h=!!(p&&f.nodeValue[p-1]==`
`),h&&p==f.nodeValue.length)for(let g=f,m;g;g=g.parentNode){if(m=g.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:xt(m)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=f.childNodes[p-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Gn&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let f=u.focusNode.childNodes[u.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||h&&qt)&&Zo(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Zo(l.node,l.offset,u.focusNode,u.focusOffset))return;let d=!1;if((c.extend||e==t)&&!(h&&Gn)){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>t){let p=a;a=l,l=p}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&t>=r:e<o&&t>r){let a=r+s.border,l=o-s.border;if(e>=a&&t<=l){this.dirty=e==r||t==o?To:ZC,e==a&&t==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Qr:s.markDirty(e-a,t-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?To:Qr}r=o}this.dirty=To}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?To:ZC;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class IR extends ch{constructor(e,t,r,i){let s,o=t.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==qn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class O6 extends ch{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ea extends ch{constructor(e,t,r,i,s){super(e,[],r,i),this.mark=t,this.spec=s}static create(e,t,r,i){let s=i.nodeViews[t.type.name],o=s&&s(t,i,r);return(!o||!o.dom)&&(o=la.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new ea(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Qr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Qr&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=qn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=qn}}slice(e,t,r){let i=ea.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;t<o&&(s=xv(s,t,o,r)),e>0&&(s=xv(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ws extends ch{constructor(e,t,r,i,s,o,a,l,c){super(e,[],s,o),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,t,r,i,s,o){let a=s.nodeViews[t.type.name],l,c=a&&a(t,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,h=c&&c.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:h}=la.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!h&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let d=u;return u=WR(u,r,t),c?l=new M6(e,t,r,i,u,h||null,d,c,s,o+1):t.isText?new jg(e,t,r,i,u,d,s):new Ws(e,t,r,i,u,h||null,d,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>L.empty)}return e}matchesNode(e,t,r){return this.dirty==qn&&e.eq(this.node)&&Qf(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new R6(this,o&&o.node,e);N6(this.node,this.innerDeco,(c,u,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!h&&l.syncToMarks(u==this.node.childCount?Se.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,h,d)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,u,h,d)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,h,f,e)||l.updateNextNode(c,u,h,e,d,i)||l.addNode(c,u,h,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==To)&&(o&&this.protectLocalComposition(e,o),LR(this.contentDOM,this.children,e),jl&&I6(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof ne)||r<t||i>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=j6(this.node.content,o,r-t,i-t);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new O6(this,s,t,i);e.input.compositionNodes.push(o),this.children=xv(this.children,r,r+i.length,e,o)}update(e,t,r,i){return this.dirty==Qr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=qn}updateOuterDeco(e){if(Qf(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=FR(this.dom,this.nodeDOM,bv(this.outerDeco,this.node,t),bv(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function ek(n,e,t,r,i){WR(r,e,n);let s=new Ws(void 0,n,e,t,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class jg extends Ws{constructor(e,t,r,i,s,o,a){super(e,t,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==Qr||this.dirty!=qn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=qn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=qn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new jg(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Qr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class jR extends ch{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==qn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class M6 extends Ws{constructor(e,t,r,i,s,o,a,l,c,u){super(e,t,r,i,s,o,a,c,u),this.spec=l}update(e,t,r,i){if(this.dirty==Qr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function LR(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==n){for(;a!=r;)r=tk(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(a,r);if(o instanceof ea){let l=r?r.previousSibling:n.lastChild;LR(o.contentDOM,o.children,t),r=l?l.nextSibling:n.firstChild}}for(;r;)r=tk(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Xc=function(n){n&&(this.nodeName=n)};Xc.prototype=Object.create(null);const _o=[new Xc];function bv(n,e,t){if(n.length==0)return _o;let r=t?_o[0]:new Xc,i=[r];for(let s=0;s<n.length;s++){let o=n[s].type.attrs;if(o){o.nodeName&&i.push(r=new Xc(o.nodeName));for(let a in o){let l=o[a];l!=null&&(t&&i.length==1&&i.push(r=new Xc(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function FR(n,e,t,r){if(t==_o&&r==_o)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=n&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=_o[0]),i=l}A6(i,a||_o[0],o)}return i}function A6(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function WR(n,e,t){return FR(n,n,_o,bv(e,t,n.nodeType!=1))}function Qf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function tk(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class R6{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=P6(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=qn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=ea.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let o=this.top.children[i];return o.dirty==Qr&&o.dom==o.contentDOM&&(o.dirty=To),o.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ws){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,h,d=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Qr&&Qf(t,l.outerDeco));if(!d&&l.update(e,t,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(h=this.recreateWrapper(l,e,t,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=To,h.updateChildren(i,o+1),h.dirty=qn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,s,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Qf(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Ws.create(this.top,t,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,r,i,s){let o=Ws.create(this.top,e,t,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new IR(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ea;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof jg)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((qt||Nt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new jR(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function P6(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=t.children[r-1];if(c instanceof ea)t=c,r=c.children.length;else{a=c,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function D6(n,e){return n.type.side-e.type.side}function N6(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,h;for(;o<i.length&&i[o].to==s;){let m=i[o++];m.widget&&(u?(h||(h=[u])).push(m):u=m)}if(u)if(h){h.sort(D6);for(let m=0;m<h.length;m++)t(h[m],c,!!l)}else t(u,c,!!l);let d,f;if(l)f=-1,d=l,l=null;else if(c<n.childCount)f=c,d=n.child(c++);else break;for(let m=0;m<a.length;m++)a[m].to<=s&&a.splice(m--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+d.nodeSize;if(d.isText){let m=p;o<i.length&&i[o].from<m&&(m=i[o].from);for(let y=0;y<a.length;y++)a[y].to<m&&(m=a[y].to);m<p&&(l=d.cut(m-s),d=d.cut(0,m-s),p=m,f=-1)}else for(;o<i.length&&i[o].to<p;)o++;let g=d.isInline&&!d.isLeaf?a.filter(m=>!m.inline):a.slice();r(d,g,e.forChild(s,d),f),s=p}}function I6(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function j6(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let o=n.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<n.childCount;){let c=n.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=t){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function xv(n,e,t,r,i){let s=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],c=a,u=a+=l.size;c>=t||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>t&&s.push(l.slice(t-c,l.size,r)))}return s}function Ib(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(Ig(t)){for(l=o;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&Q.isSelectable(h)&&i.parent&&!(h.isInline&&l6(t.focusNode,t.focusOffset,i.dom))){let d=i.posBefore;c=new Q(o==d?a:r.resolve(d))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let h=o,d=o;for(let f=0;f<t.rangeCount;f++){let p=t.getRangeAt(f);h=Math.min(h,n.docView.posFromDOM(p.startContainer,p.startOffset,1)),d=Math.max(d,n.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(h<0)return null;[l,o]=d==n.state.selection.anchor?[d,h]:[h,d],a=r.resolve(o)}else l=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let h=e=="pointer"||n.state.selection.head<a.pos&&!s?1:-1;c=jb(n,u,a,h)}return c}function BR(n){return n.editable?n.hasFocus():$R(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function ki(n,e=!1){let t=n.state.selection;if(zR(n,t),!!BR(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Nt){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Zo(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)F6(n);else{let{anchor:r,head:i}=t,s,o;nk&&!(t instanceof ne)&&(t.$from.parent.inlineContent||(s=rk(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=rk(n,t.to))),n.docView.setSelection(r,i,n,e),nk&&(s&&ik(s),o&&ik(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&L6(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const nk=qt||Nt&&OR<63;function rk(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(qt&&i&&i.contentEditable=="false")return fy(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return fy(i);if(s)return fy(s)}}function fy(n){return n.contentEditable="true",qt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function ik(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function L6(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!BR(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function F6(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,r=t.nodeName=="IMG";r?e.collapse(t.parentNode,xt(t)+1):e.collapse(t,0),!r&&!n.state.selection.visible&&pn&&Fs<=11&&(t.disabled=!0,t.disabled=!1)}function zR(n,e){if(e instanceof Q){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(sk(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else sk(n)}function sk(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function jb(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||ne.between(e,t,r)}function ok(n){return n.editable&&!n.hasFocus()?!1:$R(n)}function $R(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function W6(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Zo(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Sv(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&ce.findFrom(s,e)}function ls(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function ak(n,e,t){let r=n.state.selection;if(r instanceof ne)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return ls(n,new ne(r.$anchor,o))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=Sv(n.state,e);return i&&i instanceof Q?ls(n,i):!1}else if(!(Fn&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?Q.isSelectable(s)?ls(n,new Q(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):lh?ls(n,new ne(n.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Q&&r.node.isInline)return ls(n,new ne(e>0?r.$to:r.$from));{let i=Sv(n.state,e);return i?ls(n,i):!1}}}function Zf(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Jc(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Ea(n,e){return e<0?B6(n):z6(n)}function B6(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,o=!1;for(Gn&&t.nodeType==1&&r<Zf(t)&&Jc(t.childNodes[r],-1)&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(Jc(a,-1))i=t,s=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(HR(t))break;{let a=t.previousSibling;for(;a&&Jc(a,-1);)i=t.parentNode,s=xt(a),a=a.previousSibling;if(a)t=a,r=Zf(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}o?Cv(n,t,r):i&&Cv(n,i,s)}function z6(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Zf(t),s,o;for(;;)if(r<i){if(t.nodeType!=1)break;let a=t.childNodes[r];if(Jc(a,1))s=t,o=++r;else break}else{if(HR(t))break;{let a=t.nextSibling;for(;a&&Jc(a,1);)s=a.parentNode,o=xt(a)+1,a=a.nextSibling;if(a)t=a,r=0,i=Zf(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&Cv(n,s,o)}function HR(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function $6(n,e){for(;n&&e==n.childNodes.length&&!ah(n);)e=xt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function H6(n,e){for(;n&&!e&&!ah(n);)e=xt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Cv(n,e,t){if(e.nodeType!=3){let s,o;(o=$6(e,t))?(e=o,t=0):(s=H6(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(!r)return;if(Ig(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&ki(n)},50)}function lk(n,e){let t=n.state.doc.resolve(e);if(!(Nt||h6)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function ck(n,e,t){let r=n.state.selection;if(r instanceof ne&&!r.empty||t.indexOf("s")>-1||Fn&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=Sv(n.state,e);if(o&&o instanceof Q)return ls(n,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof Vn?ce.near(o,e):ce.findFrom(o,e);return a?ls(n,a):!1}return!1}function uk(n,e){if(!(n.state.selection instanceof ne))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return e<0?o.delete(t.pos-s.nodeSize,t.pos):o.delete(t.pos,t.pos+s.nodeSize),n.dispatch(o),!0}return!1}function hk(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function U6(n){if(!qt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;hk(n,r,"true"),setTimeout(()=>hk(n,r,"false"),20)}return!1}function V6(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function G6(n,e){let t=e.keyCode,r=V6(e);if(t==8||Fn&&t==72&&r=="c")return uk(n,-1)||Ea(n,-1);if(t==46&&!e.shiftKey||Fn&&t==68&&r=="c")return uk(n,1)||Ea(n,1);if(t==13||t==27)return!0;if(t==37||Fn&&t==66&&r=="c"){let i=t==37?lk(n,n.state.selection.from)=="ltr"?-1:1:-1;return ak(n,i,r)||Ea(n,i)}else if(t==39||Fn&&t==70&&r=="c"){let i=t==39?lk(n,n.state.selection.from)=="ltr"?1:-1:1;return ak(n,i,r)||Ea(n,i)}else{if(t==38||Fn&&t==80&&r=="c")return ck(n,-1,r)||Ea(n,-1);if(t==40||Fn&&t==78&&r=="c")return U6(n)||ck(n,1,r)||Ea(n,1);if(r==(Fn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Lb(n,e){n.someProp("transformCopied",f=>{e=f(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let f=r.firstChild;t.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let o=n.someProp("clipboardSerializer")||la.fromSchema(n.state.schema),a=KR(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,h=0;for(;c&&c.nodeType==1&&(u=YR[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let p=a.createElement(u[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(t)}`);let d=n.someProp("clipboardTextSerializer",f=>f(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d,slice:e}}function UR(n,e,t,r,i){let s=i.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=!!e&&(r||s||!t);if(l){if(n.someProp("transformPastedText",d=>{e=d(e,s||r,n)}),s)return a=new q(L.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",d=>{a=d(a,n,!0)}),a;let h=n.someProp("clipboardTextParser",d=>d(e,i,r,n));if(h)a=h;else{let d=i.marks(),{schema:f}=n.state,p=la.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let m=o.appendChild(document.createElement("p"));g&&m.appendChild(p.serializeNode(f.text(g,d)))})}}else n.someProp("transformPastedHTML",h=>{t=h(t,n)}),o=X6(t),lh&&J6(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let h=+u[3];h>0;h--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Ls.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!q6.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)a=Q6(dk(a,+u[1],+u[2]),u[4]);else if(a=q.maxOpen(Y6(a.content,i),!0),a.openStart||a.openEnd){let h=0,d=0;for(let f=a.content.firstChild;h<a.openStart&&!f.type.spec.isolating;h++,f=f.firstChild);for(let f=a.content.lastChild;d<a.openEnd&&!f.type.spec.isolating;d++,f=f.lastChild);a=dk(a,h,d)}return n.someProp("transformPasted",h=>{a=h(a,n,l)}),a}const q6=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Y6(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,o=[];if(n.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&GR(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=qR(o[o.length-1],s.length));let u=VR(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return L.from(o)}return n}function VR(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,L.from(n));return n}function GR(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=GR(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(L.from(VR(t,n,i+1))))}}function qR(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,qR(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(L.empty,!0);return n.copy(t.append(r))}function kv(n,e,t,r,i,s){let o=e<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(s=0),i<r-1&&(a=kv(a,e,t,r,i+1,s)),i>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(L.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function dk(n,e,t){return e<n.openStart&&(n=new q(kv(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new q(kv(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const YR={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let fk=null;function KR(){return fk||(fk=document.implementation.createHTMLDocument("title"))}let py=null;function K6(n){let e=window.trustedTypes;return e?(py||(py=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),py.createHTML(n)):n}function X6(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=KR().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&YR[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=K6(n),i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function J6(n){let e=n.querySelectorAll(Nt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function Q6(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:o}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=L.from(l.create(r[a+1],i)),s++,o++}return new q(i,s,o)}const Yt={},Kt={},Z6={touchstart:!0,touchmove:!0};class e8{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function t8(n){for(let e in Yt){let t=Yt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{r8(n,r)&&!Fb(n,r)&&(n.editable||!(r.type in Kt))&&t(n,r)},Z6[e]?{passive:!0}:void 0)}qt&&n.dom.addEventListener("input",()=>null),Tv(n)}function Es(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function n8(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Tv(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>Fb(n,r))})}function Fb(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function r8(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function i8(n,e){!Fb(n,e)&&Yt[e.type]&&(n.editable||!(e.type in Kt))&&Yt[e.type](n,e)}Kt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!JR(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(xi&&Nt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),jl&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,yo(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||G6(n,t)?t.preventDefault():Es(n,"key")};Kt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Kt.keypress=(n,e)=>{let t=e;if(JR(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Fn&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof ne)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode),s=()=>n.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",o=>o(n,r.$from.pos,r.$to.pos,i,s))&&n.dispatch(s()),t.preventDefault()}};function Lg(n){return{left:n.clientX,top:n.clientY}}function s8(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Wb(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(n.someProp(e,a=>o>s.depth?a(n,t,s.nodeAfter,s.before(o),i,!0):a(n,t,s.node(o),s.before(o),i,!1)))return!0;return!1}function dl(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function o8(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&Q.isSelectable(r)?(dl(n,new Q(t)),!0):!1}function a8(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof Q&&(r=t.node);let s=n.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Q.isSelectable(a)){r&&t.$from.depth>0&&o>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(o);break}}return i!=null?(dl(n,Q.create(n.state.doc,i)),!0):!1}function l8(n,e,t,r,i){return Wb(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?a8(n,t):o8(n,t))}function c8(n,e,t,r){return Wb(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function u8(n,e,t,r){return Wb(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||h8(n,t,r)}function h8(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(dl(n,ne.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)dl(n,ne.create(r,a+1,a+1+o.content.size));else if(Q.isSelectable(o))dl(n,Q.create(r,a));else continue;return!0}}function Bb(n){return ep(n)}const XR=Fn?"metaKey":"ctrlKey";Yt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Bb(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&s8(t,n.input.lastClick)&&!t[XR]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s,button:t.button};let o=n.posAtCoords(Lg(t));o&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new d8(n,o,t,!!r)):(s=="doubleClick"?c8:u8)(n,o.pos,o.inside,t)?t.preventDefault():Es(n,"pointer"))};class d8{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[XR],this.allowDefault=r.shiftKey;let s,o;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),o=t.inside;else{let u=e.state.doc.resolve(t.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Q&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Gn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Es(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ki(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Lg(e))),this.updateAllowDefault(e),this.allowDefault||!t?Es(this.view,"pointer"):l8(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||qt&&this.mightDrag&&!this.mightDrag.node.isAtom||Nt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(dl(this.view,ce.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Es(this.view,"pointer")}move(e){this.updateAllowDefault(e),Es(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Yt.touchstart=n=>{n.input.lastTouch=Date.now(),Bb(n),Es(n,"pointer")};Yt.touchmove=n=>{n.input.lastTouch=Date.now(),Es(n,"pointer")};Yt.contextmenu=n=>Bb(n);function JR(n,e){return n.composing?!0:qt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const f8=xi?5e3:-1;Kt.compositionstart=Kt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof ne&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),ep(n,!0),n.markCursor=null;else if(ep(n,!e.selection.empty),Gn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=n.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}n.input.composing=!0}QR(n,f8)};Kt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,QR(n,20))};function QR(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>ep(n),e))}function ZR(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=g8());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function p8(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=o6(e.focusNode,e.focusOffset),r=a6(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let o=t.pmViewDesc;if(!(!o||!o.isText(t.nodeValue)))return r}}return t||r}function g8(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function ep(n,e=!1){if(!(xi&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),ZR(n),e||n.docView&&n.docView.dirty){let t=Ib(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function m8(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Wu=pn&&Fs<15||jl&&d6<604;Yt.copy=Kt.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=Wu?null:t.clipboardData,o=r.content(),{dom:a,text:l}=Lb(n,o);s?(t.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):m8(n,a),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function y8(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function v8(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Bu(n,r.value,null,i,e):Bu(n,r.textContent,r.innerHTML,i,e)},50)}function Bu(n,e,t,r,i){let s=UR(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,i,s||q.empty)))return!0;if(!s)return!1;let o=y8(s),a=o?n.state.tr.replaceSelectionWith(o,r):n.state.tr.replaceSelection(s);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function eP(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Kt.paste=(n,e)=>{let t=e;if(n.composing&&!xi)return;let r=Wu?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Bu(n,eP(r),r.getData("text/html"),i,t)?t.preventDefault():v8(n,t)};class tP{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const w8=Fn?"altKey":"ctrlKey";function nP(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[w8]}Yt.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(Lg(t)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Q?i.to-1:i.to))){if(r&&r.mightDrag)o=Q.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let h=n.docView.nearestDesc(t.target,!0);h&&h.node.type.spec.draggable&&h!=n.docView&&(o=Q.create(n.state.doc,h.posBefore))}}let a=(o||n.state.selection).content(),{dom:l,text:c,slice:u}=Lb(n,a);(!t.dataTransfer.files.length||!Nt||OR>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Wu?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",Wu||t.dataTransfer.setData("text/plain",c),n.dragging=new tP(u,nP(n,t),o)};Yt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Kt.dragover=Kt.dragenter=(n,e)=>e.preventDefault();Kt.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(Lg(t));if(!i)return;let s=n.state.doc.resolve(i.pos),o=r&&r.slice;o?n.someProp("transformPasted",p=>{o=p(o,n,!1)}):o=UR(n,eP(t.dataTransfer),Wu?null:t.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&nP(n,t));if(n.someProp("handleDrop",p=>p(n,t,o||q.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?fR(n.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=n.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),h=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=c.doc;if(h?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(d))return;let f=c.doc.resolve(u);if(h&&Q.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new Q(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,m,y,v)=>p=v),c.setSelection(jb(n,f,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};Yt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&ki(n)},20))};Yt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Yt.beforeinput=(n,e)=>{if(Nt&&xi&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,yo(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Kt)Yt[n]=Kt[n];function zu(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class tp{constructor(e,t){this.toDOM=e,this.spec=t||zo,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new Ut(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof tp&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&zu(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Bs{constructor(e,t){this.attrs=e,this.spec=t||zo}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Ut(s,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Bs&&zu(this.attrs,e.attrs)&&zu(this.spec,e.spec)}static is(e){return e.type instanceof Bs}destroy(){}}class zb{constructor(e,t){this.attrs=e,this.spec=t||zo}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Ut(s.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof zb&&zu(this.attrs,e.attrs)&&zu(this.spec,e.spec)}destroy(){}}class Ut{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Ut(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Ut(e,e,new tp(t,r))}static inline(e,t,r,i){return new Ut(e,t,new Bs(r,i))}static node(e,t,r,i){return new Ut(e,t,new zb(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Bs}get widget(){return this.type instanceof tp}}const Pa=[],zo={};class Le{constructor(e,t){this.local=e.length?e:Pa,this.children=t.length?t:Pa}static create(e,t){return t.length?np(t,e,0,zo):Pt}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,r,i+a,s)}}map(e,t,r){return this==Pt||e.maps.length==0?this:this.mapInner(e,t,0,0,r||zo)}mapInner(e,t,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(t,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?b8(this.children,o||[],e,t,r,i,s):o?new Le(o.sort($o),Pa):Pt}add(e,t){return t.length?this==Pt?Le.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=iP(t,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,np(u,a,c+1,zo)),s+=3}});let o=rP(s?sP(t):t,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Le(o.length?this.local.concat(o).sort($o):this.local,i||this.children)}remove(e){return e.length==0||this==Pt?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+t,l=r[s+1]+t;for(let u=0,h;u<e.length;u++)(h=e[u])&&h.from>a&&h.to<l&&(e[u]=null,(o||(o=[])).push(h));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=Pt?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,t)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Le(i,r):Pt}forChild(e,t){if(this==Pt)return this;if(t.isLeaf)return Le.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Bs){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new Le(i.sort($o),Pa);return r?new gs([a,r]):a}return r||Pt}eq(e){if(this==e)return!0;if(!(e instanceof Le)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return $b(this.localsInner(e))}localsInner(e){if(this==Pt)return Pa;if(e.inlineContent||!this.local.some(Bs.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Bs||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Le.empty=new Le([],[]);Le.removeOverlap=$b;const Pt=Le.empty;class gs{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,zo));return gs.from(r)}forChild(e,t){if(t.isLeaf)return Le.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=Pt&&(s instanceof gs?r=r.concat(s.members):r.push(s))}return gs.from(r)}eq(e){if(!(e instanceof gs)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let o=0;o<s.length;o++)t.push(s[o])}}return t?$b(r?t:t.sort($o)):Pa}static from(e){switch(e.length){case 0:return Pt;case 1:return e[0];default:return new gs(e.every(t=>t instanceof Le)?e:e.reduce((t,r)=>t.concat(r instanceof Le?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function b8(n,e,t,r,i,s,o){let a=n.slice();for(let c=0,u=s;c<t.maps.length;c++){let h=0;t.maps[c].forEach((d,f,p,g)=>{let m=g-p-(f-d);for(let y=0;y<a.length;y+=3){let v=a[y+1];if(v<0||d>v+u-h)continue;let w=a[y]+u-h;f>=w?a[y+1]=d<=w?-2:-1:d>=u&&m&&(a[y]+=m,a[y+1]+=m)}h+=m}),u=t.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=t.map(n[c]+s),h=u-i;if(h<0||h>=r.content.size){l=!0;continue}let d=t.map(n[c+1]+s,-1),f=d-i,{index:p,offset:g}=r.content.findIndex(h),m=r.maybeChild(p);if(m&&g==h&&g+m.nodeSize==f){let y=a[c+2].mapInner(t,m,u+1,n[c]+s+1,o);y!=Pt?(a[c]=h,a[c+1]=f,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=x8(a,n,e,t,i,s,o),u=np(c,r,0,o);e=u.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,d=0;h<u.children.length;h+=3){let f=u.children[h];for(;d<a.length&&a[d]<f;)d+=3;a.splice(d,0,u.children[h],u.children[h+1],u.children[h+2])}}return new Le(e.sort($o),a)}function rP(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Ut(i.from+e,i.to+e,i.type))}return t}function x8(n,e,t,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let h=l.local[u].map(r,i,c);h?t.push(h):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+s+1);return t}function iP(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>t&&o.to<r&&((i||(i=[])).push(o),n[s]=null);return i}function sP(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function np(n,e,t,r){let i=[],s=!1;e.forEach((a,l)=>{let c=iP(n,a,l+t);if(c){s=!0;let u=np(c,a,t+l+1,r);u!=Pt&&i.push(l,l+a.nodeSize,u)}});let o=rP(s?sP(n):n,-t).sort($o);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Le(o,i):Pt}function $o(n,e){return n.from-e.from||n.to-e.to}function $b(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),pk(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),pk(e,i,r.copy(s.from,r.to)));break}}}return e}function pk(n,e,t){for(;e<n.length&&$o(t,n[e])>0;)e++;n.splice(e,0,t)}function gy(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Pt&&e.push(r)}),n.cursorWrapper&&e.push(Le.create(n.state.doc,[n.cursorWrapper.deco])),gs.from(e)}const S8={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},C8=pn&&Fs<=11;class k8{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class T8{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new k8,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);pn&&Fs<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),C8&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,S8)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(ok(this.view)){if(this.suppressingSelectionUpdates)return ki(this.view);if(pn&&Fs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Zo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=Il(s))t.add(s);for(let s=e.anchorNode;s;s=Il(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&ok(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<t.length;u++){let h=this.registerMutation(t[u],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(Gn&&l.length){let u=l.filter(h=>h.nodeName=="BR");if(u.length==2){let[h,d]=u;h.parentNode&&h.parentNode.parentNode==d.parentNode?d.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let d of u){let f=d.parentNode;f&&f.nodeName=="LI"&&(!h||O8(e,h)!=f)&&d.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ig(r)&&(c=Ib(e))&&c.eq(ce.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ki(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),_8(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ki(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let h=e.addedNodes[u];t.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(pn&&Fs<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:h,nextSibling:d}=e.addedNodes[u];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d)}let o=i&&i.parentNode==e.target?xt(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?xt(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let gk=new WeakMap,mk=!1;function _8(n){if(!gk.has(n)&&(gk.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Gn,mk)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),mk=!0}}function yk(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=n.domAtPos(n.state.selection.anchor);return Zo(o.node,o.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function E8(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return yk(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?yk(n,t):null}function O8(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function M8(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Ig(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Nt&&n.input.lastKeyCode===8)for(let m=s;m>i;m--){let y=r.childNodes[m-1],v=y.pmViewDesc;if(y.nodeName=="BR"&&!v){s=m;break}if(!v||v.size)break}let h=n.state.doc,d=n.someProp("domParser")||Ls.fromSchema(n.state.schema),f=h.resolve(o),p=null,g=d.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:A8,context:f});if(c&&c[0].pos!=null){let m=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=m),p={anchor:m+o,head:y+o}}return{doc:g,sel:p,from:o,to:a}}function A8(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(qt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||qt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const R8=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function P8(n,e,t,r,i){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let T=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,_=Ib(n,T);if(_&&!n.state.selection.eq(_)){if(Nt&&xi&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",P=>P(n,yo(13,"Enter"))))return;let M=n.state.tr.setSelection(_);T=="pointer"?M.setMeta("pointer",!0):T=="key"&&M.scrollIntoView(),s&&M.setMeta("composition",s),n.dispatch(M)}return}let o=n.state.doc.resolve(e),a=o.sharedDepth(t);e=o.before(a+1),t=n.state.doc.resolve(t).after(a+1);let l=n.state.selection,c=M8(n,e,t),u=n.state.doc,h=u.slice(c.from,c.to),d,f;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(d=n.state.selection.to,f="end"):(d=n.state.selection.from,f="start"),n.input.lastKeyCode=null;let p=I8(h.content,c.doc.content,c.from,d,f);if(p&&n.input.domChangeCount++,(jl&&n.input.lastIOSEnter>Date.now()-225||xi)&&i.some(T=>T.nodeType==1&&!R8.test(T.nodeName))&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",T=>T(n,yo(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof ne&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let T=vk(n,n.state.doc,c.sel);if(T&&!T.eq(n.state.selection)){let _=n.state.tr.setSelection(T);s&&_.setMeta("composition",s),n.dispatch(_)}}return}n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof ne&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),pn&&Fs<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),m=c.doc.resolveNoCache(p.endB-c.from),y=u.resolve(p.start),v=g.sameParent(m)&&g.parent.inlineContent&&y.end()>=p.endA;if((jl&&n.input.lastIOSEnter>Date.now()-225&&(!v||i.some(T=>T.nodeName=="DIV"||T.nodeName=="P"))||!v&&g.pos<c.doc.content.size&&(!g.sameParent(m)||!g.parent.inlineContent)&&g.pos<m.pos&&!/\S/.test(c.doc.textBetween(g.pos,m.pos,"","")))&&n.someProp("handleKeyDown",T=>T(n,yo(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>p.start&&N8(u,p.start,p.endA,g,m)&&n.someProp("handleKeyDown",T=>T(n,yo(8,"Backspace")))){xi&&Nt&&n.domObserver.suppressSelectionUpdates();return}Nt&&p.endB==p.start&&(n.input.lastChromeDelete=Date.now()),xi&&!v&&g.start()!=m.start()&&m.parentOffset==0&&g.depth==m.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,m=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(T){return T(n,yo(13,"Enter"))})},20));let w=p.start,x=p.endA,S=T=>{let _=T||n.state.tr.replace(w,x,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let M=vk(n,_.doc,c.sel);M&&!(Nt&&n.composing&&M.empty&&(p.start!=p.endB||n.input.lastChromeDelete<Date.now()-100)&&(M.head==w||M.head==_.mapping.map(x)-1)||pn&&M.empty&&M.head==w)&&_.setSelection(M)}return s&&_.setMeta("composition",s),_.scrollIntoView()},C;if(v)if(g.pos==m.pos){pn&&Fs<=11&&g.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>ki(n),20));let T=S(n.state.tr.delete(w,x)),_=u.resolve(p.start).marksAcross(u.resolve(p.endA));_&&T.ensureMarks(_),n.dispatch(T)}else if(p.endA==p.endB&&(C=D8(g.parent.content.cut(g.parentOffset,m.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start())))){let T=S(n.state.tr);C.type=="add"?T.addMark(w,x,C.mark):T.removeMark(w,x,C.mark),n.dispatch(T)}else if(g.parent.child(g.index()).isText&&g.index()==m.index()-(m.textOffset?0:1)){let T=g.parent.textBetween(g.parentOffset,m.parentOffset),_=()=>S(n.state.tr.insertText(T,w,x));n.someProp("handleTextInput",M=>M(n,w,x,T,_))||n.dispatch(_())}else n.dispatch(S());else n.dispatch(S())}function vk(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:jb(n,e.resolve(t.anchor),e.resolve(t.head))}function D8(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<t.length;u++)s=t[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(L.from(c).eq(n))return{mark:a,type:o}}function N8(n,e,t,r,i){if(t-e<=i.pos-r.pos||my(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&t==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=n.resolve(my(s,!0,!0));return!o.parent.isTextblock||o.pos>t||my(o,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function my(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function I8(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a:o,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&n.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&wk(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<n.size&&wk(n.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function wk(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class oP{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new e8,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(kk),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Sk(this),xk(this),this.nodeViews=Ck(this),this.docView=ek(this.state.doc,bk(this),gy(this),this.dom,this),this.domObserver=new T8(this,(r,i,s,o)=>P8(this,r,i,s,o)),this.domObserver.start(),t8(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Tv(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(kk),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(ZR(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let f=Ck(this);L8(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&Tv(this),this.editable=Sk(this),xk(this);let l=gy(this),c=bk(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(i.selection))&&(o=!0);let d=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&g6(this);if(o){this.domObserver.stop();let f=h&&(pn||Nt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&j8(i.selection,e.selection);if(h){let p=Nt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=p8(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=ek(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&W6(this))?ki(this,f):(zR(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():d&&m6(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Q){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&YC(this,t.getBoundingClientRect(),e)}else YC(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new tP(e.slice,e.move,i<0?void 0:Q.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=t?t(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=t?t(a):a))return i}}hasFocus(){if(pn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&y6(this.dom),ki(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return S6(this,e)}coordsAtPos(e,t=1){return DR(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return E6(this,t||this.state,e)}pasteHTML(e,t){return Bu(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Bu(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Lb(this,e)}destroy(){this.docView&&(n8(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],gy(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,i6())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return i8(this,e)}domSelectionRange(){let e=this.domSelection();return e?qt&&this.root.nodeType===11&&c6(this.dom.ownerDocument)==this.dom&&E8(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}oP.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function bk(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Ut.node(0,n.state.doc.content.size,e)]}function xk(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Ut.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Sk(n){return!n.someProp("editable",e=>e(n.state)===!1)}function j8(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Ck(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function L8(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function kk(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ks={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},rp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},F8=typeof navigator<"u"&&/Mac/.test(navigator.platform),W8=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var St=0;St<10;St++)Ks[48+St]=Ks[96+St]=String(St);for(var St=1;St<=24;St++)Ks[St+111]="F"+St;for(var St=65;St<=90;St++)Ks[St]=String.fromCharCode(St+32),rp[St]=String.fromCharCode(St);for(var yy in Ks)rp.hasOwnProperty(yy)||(rp[yy]=Ks[yy]);function B8(n){var e=F8&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||W8&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?rp:Ks)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const z8=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),$8=typeof navigator<"u"&&/Win/.test(navigator.platform);function H8(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))z8?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),o&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function U8(n){let e=Object.create(null);for(let t in n)e[H8(t)]=n[t];return e}function vy(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function V8(n){return new Ve({props:{handleKeyDown:aP(n)}})}function aP(n){let e=U8(n);return function(t,r){let i=B8(r),s,o=e[vy(i,r)];if(o&&o(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[vy(i,r,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!($8&&r.ctrlKey&&r.altKey)&&(s=Ks[r.keyCode])&&s!=i){let a=e[vy(s,r)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}var G8=Object.defineProperty,Hb=(n,e)=>{for(var t in e)G8(n,t,{get:e[t],enumerable:!0})};function Fg(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}var Wg=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:e,state:t}=this,{view:r}=e,{tr:i}=t,s=this.buildProps(i);return Object.fromEntries(Object.entries(n).map(([o,a])=>[o,(...c)=>{const u=a(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,e=!0){const{rawCommands:t,editor:r,state:i}=this,{view:s}=r,o=[],a=!!n,l=n||i.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(h=>h===!0)),u={...Object.fromEntries(Object.entries(t).map(([h,d])=>[h,(...p)=>{const g=this.buildProps(l,e),m=d(...p)(g);return o.push(m),u}])),run:c};return u}createCan(n){const{rawCommands:e,state:t}=this,r=!1,i=n||t.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(n,e=!0){const{rawCommands:t,editor:r,state:i}=this,{view:s}=r,o={tr:n,editor:r,view:s,state:Fg({state:i,transaction:n}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(n,e),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}},lP={};Hb(lP,{blur:()=>q8,clearContent:()=>Y8,clearNodes:()=>K8,command:()=>X8,createParagraphNear:()=>J8,cut:()=>Q8,deleteCurrentNode:()=>Z8,deleteNode:()=>eG,deleteRange:()=>tG,deleteSelection:()=>nG,enter:()=>rG,exitCode:()=>iG,extendMarkRange:()=>sG,first:()=>oG,focus:()=>lG,forEach:()=>cG,insertContent:()=>uG,insertContentAt:()=>fG,joinBackward:()=>mG,joinDown:()=>gG,joinForward:()=>yG,joinItemBackward:()=>vG,joinItemForward:()=>wG,joinTextblockBackward:()=>bG,joinTextblockForward:()=>xG,joinUp:()=>pG,keyboardShortcut:()=>CG,lift:()=>kG,liftEmptyBlock:()=>TG,liftListItem:()=>_G,newlineInCode:()=>EG,resetAttributes:()=>OG,scrollIntoView:()=>MG,selectAll:()=>AG,selectNodeBackward:()=>RG,selectNodeForward:()=>PG,selectParentNode:()=>DG,selectTextblockEnd:()=>NG,selectTextblockStart:()=>IG,setContent:()=>jG,setMark:()=>e9,setMeta:()=>t9,setNode:()=>n9,setNodeSelection:()=>r9,setTextSelection:()=>i9,sinkListItem:()=>s9,splitBlock:()=>o9,splitListItem:()=>a9,toggleList:()=>l9,toggleMark:()=>c9,toggleNode:()=>u9,toggleWrap:()=>h9,undoInputRule:()=>d9,unsetAllMarks:()=>f9,unsetMark:()=>p9,updateAttributes:()=>g9,wrapIn:()=>m9,wrapInList:()=>y9});var q8=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())==null||t.removeAllRanges())}),!0),Y8=(n=!0)=>({commands:e})=>e.setContent("",{emitUpdate:n}),K8=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,h=c.resolve(u.map(l)),d=c.resolve(u.map(l+a.nodeSize)),f=h.blockRange(d);if(!f)return;const p=nc(f);if(a.type.isTextblock){const{defaultType:g}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(f.start,g)}(p||p===0)&&e.lift(f,p)})}),!0},X8=n=>e=>n(e),J8=()=>({state:n,dispatch:e})=>UV(n,e),Q8=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new ne(r.doc.resolve(Math.max(o-1,0)))),!0},Z8=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1};function rt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}var eG=n=>({tr:e,state:t,dispatch:r})=>{const i=rt(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},tG=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},nG=()=>({state:n,dispatch:e})=>PV(n,e),rG=()=>({commands:n})=>n.keyboardShortcut("Enter"),iG=()=>({state:n,dispatch:e})=>HV(n,e);function Ub(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function ip(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:Ub(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function cP(n,e,t={}){return n.find(r=>r.type===e&&ip(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function Tk(n,e,t={}){return!!cP(n,e,t)}function Vb(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(t=t||((r=i.node.marks[0])==null?void 0:r.attrs),!cP([...i.node.marks],e,t)))return;let o=i.index,a=n.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&Tk([...n.parent.child(o-1).marks],e,t);)o-=1,a-=n.parent.child(o).nodeSize;for(;l<n.parent.childCount&&Tk([...n.parent.child(l).marks],e,t);)c+=n.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Wi(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}var sG=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Wi(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const h=Vb(l,s,e);if(h&&h.from<=c&&h.to>=u){const d=ne.create(o,h.from,h.to);t.setSelection(d)}}return!0},oG=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function uP(n){return n instanceof ne}function Eo(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function hP(n,e=null){if(!e)return null;const t=ce.atStart(n),r=ce.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?ne.create(n,Eo(0,i,s),Eo(n.content.size,i,s)):ne.create(n,Eo(e,i,s),Eo(e,i,s))}function aG(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Gb(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var lG=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(Gb()||aG())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!uP(t.state.selection))return o(),!0;const a=hP(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},cG=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),uG=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),dP=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&dP(r)}return n};function bd(n){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return dP(t)}function $u(n,e,t){if(n instanceof js||n instanceof L)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return L.fromArray(n.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(n);return t.errorOnInvalidContent&&o.check(),o}catch(s){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",s),$u("",e,t)}if(i){if(t.errorOnInvalidContent){let o=!1,a="";const l=new nR({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(t.slice?Ls.fromSchema(l).parseSlice(bd(n),t.parseOptions):Ls.fromSchema(l).parse(bd(n),t.parseOptions),t.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Ls.fromSchema(e);return t.slice?s.parseSlice(bd(n),t.parseOptions).content:s.parse(bd(n),t.parseOptions)}return $u("",e,t)}function hG(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof pt||i instanceof mt))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(ce.near(n.doc.resolve(o),t))}var dG=n=>!("type"in n),fG=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){t={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let a;const l=m=>{s.emit("contentError",{editor:s,error:m,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{$u(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(m){l(m)}try{a=$u(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=t.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(m){return l(m),!1}let{from:u,to:h}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},d=!0,f=!0;if((dG(a)?a:[a]).forEach(m=>{m.check(),d=d?m.isText&&m.marks.length===0:!1,f=f?m.isBlock:!1}),u===h&&f){const{parent:m}=r.doc.resolve(u);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(u-=1,h+=1)}let g;if(d){if(Array.isArray(e))g=e.map(m=>m.text||"").join("");else if(e instanceof L){let m="";e.forEach(y=>{y.text&&(m+=y.text)}),g=m}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,u,h)}else{g=a;const m=r.doc.resolve(u),y=m.node(),v=m.parentOffset===0,w=y.isText||y.isTextblock,x=y.content.size>0;v&&w&&x&&(u=Math.max(0,u-1)),r.replaceWith(u,h,g)}t.updateSelection&&hG(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:g}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:g})}return!0},pG=()=>({state:n,dispatch:e})=>WV(n,e),gG=()=>({state:n,dispatch:e})=>BV(n,e),mG=()=>({state:n,dispatch:e})=>DV(n,e),yG=()=>({state:n,dispatch:e})=>LV(n,e),vG=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Pg(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},wG=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Pg(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},bG=()=>({state:n,dispatch:e})=>NV(n,e),xG=()=>({state:n,dispatch:e})=>IV(n,e);function fP(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function SG(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Gb()||fP()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}var CG=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=SG(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Xs(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?rt(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(h,d)=>{if(h.isText)return;const f=Math.max(r,d),p=Math.min(i,d+h.nodeSize);a.push({node:h,from:f,to:p})});const l=i-r,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>ip(h.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((h,d)=>h+d.to-d.from,0)>=l}var kG=(n,e={})=>({state:t,dispatch:r})=>{const i=rt(n,t.schema);return Xs(t,i,e)?zV(t,r):!1},TG=()=>({state:n,dispatch:e})=>VV(n,e),_G=n=>({state:e,dispatch:t})=>{const r=rt(n,e.schema);return e6(r)(e,t)},EG=()=>({state:n,dispatch:e})=>$V(n,e);function Bg(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function _k(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}var OG=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=Bg(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=rt(n,r.schema)),a==="mark"&&(o=Wi(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,_k(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(h=>{o===h.type&&t.addMark(u,u+c.nodeSize,o.create(_k(h.attrs,e)))})})}),!0):!1},MG=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),AG=()=>({tr:n,dispatch:e})=>{if(e){const t=new Vn(n.doc);n.setSelection(t)}return!0},RG=()=>({state:n,dispatch:e})=>jV(n,e),PG=()=>({state:n,dispatch:e})=>FV(n,e),DG=()=>({state:n,dispatch:e})=>GV(n,e),NG=()=>({state:n,dispatch:e})=>KV(n,e),IG=()=>({state:n,dispatch:e})=>YV(n,e);function _v(n,e,t={},r={}){return $u(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}var jG=(n,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(r.preserveWhitespace!=="full"){const c=_v(n,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!t),!0}return o&&s.setMeta("preventUpdate",!t),a.insertContentAt({from:0,to:l.content.size},n,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function pP(n,e){const t=Wi(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function gP(n,e){const t=new vR(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function LG(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function FG(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,s)=>{t(i)&&r.push({node:i,pos:s})}),r}function WG(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function zg(n){return e=>WG(e.$from,n)}function J(n,e,t){return n.config[e]===void 0&&n.parent?J(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?J(n.parent,e,t):null}):n.config[e]}function qb(n){return n.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},r=J(e,"addExtensions",t);return r?[e,...qb(r())]:e}).flat(10)}function Yb(n,e){const t=la.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function mP(n){return typeof n=="function"}function ve(n,e=void 0,...t){return mP(n)?e?n.bind(e)(...t):n(...t):n}function BG(n={}){return Object.keys(n).length===0&&n.constructor===Object}function Hu(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function yP(n){const e=[],{nodeExtensions:t,markExtensions:r}=Hu(n),i=[...t,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=J(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(h=>{Object.entries(u.attributes).forEach(([d,f])=>{e.push({type:h,name:d,attribute:{...s,...f}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=J(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,h])=>{const d={...s,...h};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:o.name,name:u,attribute:d})})}),e}function it(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[h,d]=u.split(":").map(f=>f.trim());c.set(h,d)}),a.forEach(u=>{const[h,d]=u.split(":").map(f=>f.trim());c.set(h,d)}),r[i]=Array.from(c.entries()).map(([u,h])=>`${u}: ${h}`).join("; ")}else r[i]=s}),r},{})}function sp(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>it(t,r),{})}function zG(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Ek(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(t):zG(t.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function Ok(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&BG(t)?!1:t!=null))}function $G(n,e){var t;const r=yP(n),{nodeExtensions:i,markExtensions:s}=Hu(n),o=(t=i.find(c=>J(c,"topNode")))==null?void 0:t.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},d=n.reduce((y,v)=>{const w=J(v,"extendNodeSchema",h);return{...y,...w?w(c):{}}},{}),f=Ok({...d,content:ve(J(c,"content",h)),marks:ve(J(c,"marks",h)),group:ve(J(c,"group",h)),inline:ve(J(c,"inline",h)),atom:ve(J(c,"atom",h)),selectable:ve(J(c,"selectable",h)),draggable:ve(J(c,"draggable",h)),code:ve(J(c,"code",h)),whitespace:ve(J(c,"whitespace",h)),linebreakReplacement:ve(J(c,"linebreakReplacement",h)),defining:ve(J(c,"defining",h)),isolating:ve(J(c,"isolating",h)),attrs:Object.fromEntries(u.map(y=>{var v,w;return[y.name,{default:(v=y==null?void 0:y.attribute)==null?void 0:v.default,validate:(w=y==null?void 0:y.attribute)==null?void 0:w.validate}]}))}),p=ve(J(c,"parseHTML",h));p&&(f.parseDOM=p.map(y=>Ek(y,u)));const g=J(c,"renderHTML",h);g&&(f.toDOM=y=>g({node:y,HTMLAttributes:sp(y,u)}));const m=J(c,"renderText",h);return m&&(f.toText=m),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(m=>m.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},d=n.reduce((m,y)=>{const v=J(y,"extendMarkSchema",h);return{...m,...v?v(c):{}}},{}),f=Ok({...d,inclusive:ve(J(c,"inclusive",h)),excludes:ve(J(c,"excludes",h)),group:ve(J(c,"group",h)),spanning:ve(J(c,"spanning",h)),code:ve(J(c,"code",h)),attrs:Object.fromEntries(u.map(m=>{var y,v;return[m.name,{default:(y=m==null?void 0:m.attribute)==null?void 0:y.default,validate:(v=m==null?void 0:m.attribute)==null?void 0:v.validate}]}))}),p=ve(J(c,"parseHTML",h));p&&(f.parseDOM=p.map(m=>Ek(m,u)));const g=J(c,"renderHTML",h);return g&&(f.toDOM=m=>g({mark:m,HTMLAttributes:sp(m,u)})),[c.name,f]}));return new nR({topNode:o,nodes:a,marks:l})}function HG(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}function Kb(n){return n.sort((t,r)=>{const i=J(t,"priority")||100,s=J(r,"priority")||100;return i>s?-1:i<s?1:0})}function vP(n){const e=Kb(qb(n)),t=HG(e.map(r=>r.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function wP(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="";return n.nodesBetween(r,i,(l,c,u,h)=>{var d;l.isBlock&&c>r&&(a+=s);const f=o==null?void 0:o[l.type.name];if(f)return u&&(a+=f({node:l,pos:c,parent:u,index:h,range:e})),!1;l.isText&&(a+=(d=l==null?void 0:l.text)==null?void 0:d.slice(Math.max(r,c)-c,i-c))}),a}function UG(n,e){const t={from:0,to:n.content.size};return wP(n,t,e)}function bP(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function VG(n,e){const t=rt(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===t.name);return o?{...o.attrs}:{}}function xP(n,e){const t=Bg(typeof e=="string"?e:e.name,n.schema);return t==="node"?VG(n,e):t==="mark"?pP(n,e):{}}function GG(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function qG(n){const e=GG(n);return e.length===1?e:e.filter((t,r)=>!e.filter((s,o)=>o!==r).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function SP(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=t[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),u=e.slice(s).map(l),h=e.invert().map(c,-1),d=e.invert().map(u);r.push({oldRange:{from:h,to:d},newRange:{from:c,to:u}})})}),qG(r)}function Xb(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n),o=Vb(s,i.type);o&&r.push({mark:i,...o})}):t.nodesBetween(n,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var YG=(n,e,t,r=20)=>{const i=n.doc.resolve(t);let s=r,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function wy(n,e){return e.nodes[n]||e.marks[n]||null}function Jd(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var KG=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)==null?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-s))}),t};function Ev(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Wi(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>ip(h.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:d})=>{const f=h.pos,p=d.pos;n.doc.nodesBetween(f,p,(g,m)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(f,m),v=Math.min(p,m+g.nodeSize),w=v-y;o+=w,a.push(...g.marks.map(x=>({mark:x,from:y,to:v})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>ip(h.mark.attrs,t,{strict:!1})).reduce((h,d)=>h+d.to-d.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,d)=>h+d.to-d.from,0);return(l>0?l+c:l)>=o}function XG(n,e,t={}){if(!e)return Xs(n,null,t)||Ev(n,null,t);const r=Bg(e,n.schema);return r==="node"?Xs(n,e,t):r==="mark"?Ev(n,e,t):!1}var JG=(n,e)=>{const{$from:t,$to:r,$anchor:i}=n.selection;if(e){const s=zg(a=>a.type.name===e)(n.selection);if(!s)return!1;const o=n.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||t.pos!==r.pos)},QG=n=>{const{$from:e,$to:t}=n.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function Mk(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Ak(n,e){const{nodeExtensions:t}=Hu(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=ve(J(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function $g(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!=null?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(s=>{i!==!1&&($g(s,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function CP(n){return n instanceof Q}function ZG(n,e,t){var r;const{selection:i}=e;let s=null;if(uP(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(t)&&(!!t.isInSet(a)||!a.some(c=>c.type.excludes(t)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,h,d)=>{if(c)return!1;if(u.isInline){const f=!d||d.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(t));c=f&&p}return!c}),c})}var e9=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=Wi(n,r.schema);if(i)if(o){const c=pP(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,h=c.$to.pos;r.doc.nodesBetween(u,h,(d,f)=>{const p=Math.max(f,u),g=Math.min(f+d.nodeSize,h);d.marks.find(y=>y.type===l)?d.marks.forEach(y=>{l===y.type&&t.addMark(p,g,l.create({...y.attrs,...e}))}):t.addMark(p,g,l.create(e))})});return ZG(r,t,l)},t9=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),n9=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=rt(n,t.schema);let o;return t.selection.$anchor.sameParent(t.selection.$head)&&(o=t.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>VC(s,{...o,...e})(t)?!0:a.clearNodes()).command(({state:a})=>VC(s,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},r9=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Eo(n,0,r.content.size),s=Q.create(r,i);e.setSelection(s)}return!0},i9=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=ne.atStart(r).from,a=ne.atEnd(r).to,l=Eo(i,o,a),c=Eo(s,o,a),u=ne.create(r,l,c);e.setSelection(u)}return!0},s9=n=>({state:e,dispatch:t})=>{const r=rt(n,e.schema);return r6(r)(e,t)};function Rk(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}var o9=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=Jd(c,a.node().type.name,a.node().attrs);if(s instanceof Q&&s.node.isBlock)return!a.parentOffset||!ul(o,a.pos)?!1:(r&&(n&&Rk(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const h=l.parentOffset===l.parent.content.size,d=a.depth===0?void 0:LG(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=h&&d?[{type:d,attrs:u}]:void 0,p=ul(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&ul(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(p=!0,f=d?[{type:d,attrs:u}]:void 0),r){if(p&&(s instanceof ne&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,f),d&&!h&&!a.parentOffset&&a.parent.type!==d)){const g=e.mapping.map(a.before()),m=e.doc.resolve(g);a.node(-1).canReplaceWith(m.index(),m.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}n&&Rk(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return p},a9=(n,e={})=>({tr:t,state:r,dispatch:i,editor:s})=>{var o;const a=rt(n,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const h=l.node(-1);if(h.type!==a)return!1;const d=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=L.empty;const v=l.index(-1)?1:l.index(-2)?2:3;for(let _=l.depth-v;_>=l.depth-3;_-=1)y=L.from(l.node(_).copy(y));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,x={...Jd(d,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(x))||void 0;y=y.append(L.from(a.createAndFill(null,S)||void 0));const C=l.before(l.depth-(v-1));t.replace(C,l.after(-w),new q(y,4-v,0));let T=-1;t.doc.nodesBetween(C,t.doc.content.size,(_,M)=>{if(T>-1)return!1;_.isTextblock&&_.content.size===0&&(T=M+1)}),T>-1&&t.setSelection(ne.near(t.doc.resolve(T))),t.scrollIntoView()}return!0}const f=c.pos===l.end()?h.contentMatchAt(0).defaultType:null,p={...Jd(d,h.type.name,h.attrs),...e},g={...Jd(d,l.node().type.name,l.node().attrs),...e};t.delete(l.pos,c.pos);const m=f?[{type:a,attrs:p},{type:f,attrs:g}]:[{type:a,attrs:p}];if(!ul(t.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:v}=r,{splittableMarks:w}=s.extensionManager,x=v||y.$to.parentOffset&&y.$from.marks();if(t.split(l.pos,2,m).scrollIntoView(),!x||!i)return!0;const S=x.filter(C=>w.includes(C.type.name));t.ensureMarks(S)}return!0},by=(n,e)=>{const t=zg(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&no(n.doc,t.pos)&&n.join(t.pos),!0},xy=(n,e)=>{const t=zg(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&no(n.doc,r)&&n.join(r),!0},l9=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:h,splittableMarks:d}=i.extensionManager,f=rt(n,o.schema),p=rt(e,o.schema),{selection:g,storedMarks:m}=o,{$from:y,$to:v}=g,w=y.blockRange(v),x=m||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const S=zg(C=>Ak(C.type.name,h))(g);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===f)return c.liftListItem(p);if(Ak(S.node.type.name,h)&&f.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,f),!0)).command(()=>by(s,f)).command(()=>xy(s,f)).run()}return!t||!x||!a?l().command(()=>u().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>by(s,f)).command(()=>xy(s,f)).run():l().command(()=>{const C=u().wrapInList(f,r),T=x.filter(_=>d.includes(_.type.name));return s.ensureMarks(T),C?!0:c.clearNodes()}).wrapInList(f,r).command(()=>by(s,f)).command(()=>xy(s,f)).run()},c9=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=Wi(n,r.schema);return Ev(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},u9=(n,e,t={})=>({state:r,commands:i})=>{const s=rt(n,r.schema),o=rt(e,r.schema),a=Xs(r,s,t);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...t})},h9=(n,e={})=>({state:t,commands:r})=>{const i=rt(n,t.schema);return Xs(t,i,e)?r.lift(i):r.wrapIn(i,e)},d9=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},f9=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},p9=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Wi(n,r.schema),{$from:c,empty:u,ranges:h}=a;if(!i)return!0;if(u&&o){let{from:d,to:f}=a;const p=(s=c.marks().find(m=>m.type===l))==null?void 0:s.attrs,g=Vb(c,l,p);g&&(d=g.from,f=g.to),t.removeMark(d,f,l)}else h.forEach(d=>{t.removeMark(d.$from.pos,d.$to.pos,l)});return t.removeStoredMark(l),!0},g9=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=Bg(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=rt(n,r.schema)),a==="mark"&&(o=Wi(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let h,d,f,p;t.selection.empty?r.doc.nodesBetween(c,u,(g,m)=>{s&&s===g.type&&(f=Math.max(m,c),p=Math.min(m+g.nodeSize,u),h=m,d=g)}):r.doc.nodesBetween(c,u,(g,m)=>{m<c&&s&&s===g.type&&(f=Math.max(m,c),p=Math.min(m+g.nodeSize,u),h=m,d=g),m>=c&&m<=u&&(s&&s===g.type&&t.setNodeMarkup(m,void 0,{...g.attrs,...e}),o&&g.marks.length&&g.marks.forEach(y=>{if(o===y.type){const v=Math.max(m,c),w=Math.min(m+g.nodeSize,u);t.addMark(v,w,o.create({...y.attrs,...e}))}}))}),d&&(h!==void 0&&t.setNodeMarkup(h,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(g=>{o===g.type&&t.addMark(f,p,o.create({...g.attrs,...e}))}))}),!0):!1},m9=(n,e={})=>({state:t,dispatch:r})=>{const i=rt(n,t.schema);return XV(i,e)(t,r)},y9=(n,e={})=>({state:t,dispatch:r})=>{const i=rt(n,t.schema);return JV(i,e)(t,r)},v9=class{constructor(){this.callbacks={}}on(n,e){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(e),this}emit(n,...e){const t=this.callbacks[n];return t&&t.forEach(r=>r.apply(this,e)),this}off(n,e){const t=this.callbacks[n];return t&&(e?this.callbacks[n]=t.filter(r=>r!==e):delete this.callbacks[n]),this}once(n,e){const t=(...r)=>{this.off(n,t),e.apply(this,r)};return this.on(n,t)}removeAllListeners(){this.callbacks={}}},uh=class{constructor(n){var e;this.find=n.find,this.handler=n.handler,this.undoable=(e=n.undoable)!=null?e:!0}},w9=(n,e)=>{if(Ub(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function xd(n){var e;const{editor:t,from:r,to:i,text:s,rules:o,plugin:a}=n,{view:l}=t;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(d=>d.type.spec.code))return!1;let u=!1;const h=KG(c)+s;return o.forEach(d=>{if(u)return;const f=w9(h,d.find);if(!f)return;const p=l.state.tr,g=Fg({state:l.state,transaction:p}),m={from:r-(f[0].length-s.length),to:i},{commands:y,chain:v,can:w}=new Wg({editor:t,state:g});d.handler({state:g,range:m,match:f,commands:y,chain:v,can:w})===null||!p.steps.length||(d.undoable&&p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),u=!0)}),u}function b9(n){const{editor:e,rules:t}=n,r=new Ve({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=Yb(L.from(u),o.schema);const{from:h}=l,d=h+u.length;xd({editor:e,from:h,to:d,text:u,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return xd({editor:e,from:s,to:o,text:a,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&xd({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?xd({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function x9(n){return Object.prototype.toString.call(n).slice(8,-1)}function Sd(n){return x9(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function kP(n,e){const t={...n};return Sd(n)&&Sd(e)&&Object.keys(e).forEach(r=>{Sd(e[r])&&Sd(n[r])?t[r]=kP(n[r],e[r]):t[r]=e[r]}),t}var Jb=class{constructor(n={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...n},this.name=this.config.name}get options(){return{...ve(J(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...ve(J(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(n={}){const e=this.extend({...this.config,addOptions:()=>kP(this.options,n)});return e.name=this.name,e.parent=this.parent,e}extend(n={}){const e=new this.constructor({...this.config,...n});return e.parent=this,this.child=e,e.name="name"in n?n.name:e.parent.name,e}},ca=class TP extends Jb{constructor(){super(...arguments),this.type="mark"}static create(e={}){const t=typeof e=="function"?e():e;return new TP(t)}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function S9(n){return typeof n=="number"}var C9=class{constructor(n){this.find=n.find,this.handler=n.handler}},k9=(n,e,t)=>{if(Ub(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=n,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function T9(n){const{editor:e,state:t,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=n,{commands:l,chain:c,can:u}=new Wg({editor:e,state:t}),h=[];return t.doc.nodesBetween(r,i,(f,p)=>{var g,m,y,v,w;if((m=(g=f.type)==null?void 0:g.spec)!=null&&m.code||!(f.isText||f.isTextblock||f.isInline))return;const x=(w=(v=(y=f.content)==null?void 0:y.size)!=null?v:f.nodeSize)!=null?w:0,S=Math.max(r,p),C=Math.min(i,p+x);if(S>=C)return;const T=f.isText?f.text||"":f.textBetween(S-p,C-p,void 0,"");k9(T,s.find,o).forEach(M=>{if(M.index===void 0)return;const P=S+M.index+1,$=P+M[0].length,N={from:t.tr.mapping.map(P),to:t.tr.mapping.map($)},H=s.handler({state:t,range:N,match:M,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});h.push(H)})}),h.every(f=>f!==null)}var Cd=null,_9=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)==null||e.setData("text/html",n),t};function E9(n){const{editor:e,rules:t}=n;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:h,to:d,rule:f,pasteEvt:p})=>{const g=u.tr,m=Fg({state:u,transaction:g});if(!(!T9({editor:e,state:m,from:Math.max(h-1,0),to:d.b-1,rule:f,pasteEvent:p,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return t.map(u=>new Ve({view(h){const d=p=>{var g;r=(g=h.dom.parentElement)!=null&&g.contains(p.target)?h.dom.parentElement:null,r&&(Cd=e)},f=()=>{Cd&&(Cd=null)};return window.addEventListener("dragstart",d),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",d),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(h,d)=>{if(s=r===h.dom.parentElement,a=d,!s){const f=Cd;f!=null&&f.isEditable&&setTimeout(()=>{const p=f.state.selection;p&&f.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(h,d)=>{var f;const p=(f=d.clipboardData)==null?void 0:f.getData("text/html");return o=d,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(h,d,f)=>{const p=h[0],g=p.getMeta("uiEvent")==="paste"&&!i,m=p.getMeta("uiEvent")==="drop"&&!s,y=p.getMeta("applyPasteRules"),v=!!y;if(!g&&!m&&!v)return;if(v){let{text:S}=y;typeof S=="string"?S=S:S=Yb(L.from(S),f.schema);const{from:C}=y,T=C+S.length,_=_9(S);return l({rule:u,state:f,from:C,to:{b:T},pasteEvt:_})}const w=d.doc.content.findDiffStart(f.doc.content),x=d.doc.content.findDiffEnd(f.doc.content);if(!(!S9(w)||!x||w===x.b))return l({rule:u,state:f,from:w,to:x,pasteEvt:o})}}))}var Hg=class{constructor(n,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=n,this.extensions=vP(n),this.schema=$G(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((n,e)=>{const t={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:wy(e.name,this.schema)},r=J(e,"addCommands",t);return r?{...n,...r()}:n},{})}get plugins(){const{editor:n}=this;return Kb([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:n,type:wy(r.name,this.schema)},s=[],o=J(r,"addKeyboardShortcuts",i);let a={};if(r.type==="mark"&&J(r,"exitable",i)&&(a.ArrowRight=()=>ca.handleExit({editor:n,mark:r})),o){const d=Object.fromEntries(Object.entries(o()).map(([f,p])=>[f,()=>p({editor:n})]));a={...a,...d}}const l=V8(a);s.push(l);const c=J(r,"addInputRules",i);if(Mk(r,n.options.enableInputRules)&&c){const d=c();if(d&&d.length){const f=b9({editor:n,rules:d}),p=Array.isArray(f)?f:[f];s.push(...p)}}const u=J(r,"addPasteRules",i);if(Mk(r,n.options.enablePasteRules)&&u){const d=u();if(d&&d.length){const f=E9({editor:n,rules:d});s.push(...f)}}const h=J(r,"addProseMirrorPlugins",i);if(h){const d=h();s.push(...d)}return s})}get attributes(){return yP(this.extensions)}get nodeViews(){const{editor:n}=this,{nodeExtensions:e}=Hu(this.extensions);return Object.fromEntries(e.filter(t=>!!J(t,"addNodeView")).map(t=>{const r=this.attributes.filter(a=>a.type===t.name),i={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:rt(t.name,this.schema)},s=J(t,"addNodeView",i);if(!s)return[];const o=(a,l,c,u,h)=>{const d=sp(a,r);return s()({node:a,view:l,getPos:c,decorations:u,innerDecorations:h,editor:n,extension:t,HTMLAttributes:d})};return[t.name,o]}))}get markViews(){const{editor:n}=this,{markExtensions:e}=Hu(this.extensions);return Object.fromEntries(e.filter(t=>!!J(t,"addMarkView")).map(t=>{const r=this.attributes.filter(a=>a.type===t.name),i={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:Wi(t.name,this.schema)},s=J(t,"addMarkView",i);if(!s)return[];const o=(a,l,c)=>{const u=sp(a,r);return s()({mark:a,view:l,inline:c,editor:n,extension:t,HTMLAttributes:u,updateAttributes:h=>{z9(a,n,h)}})};return[t.name,o]}))}setupExtensions(){const n=this.extensions;this.editor.extensionStorage=Object.fromEntries(n.map(e=>[e.name,e.storage])),n.forEach(e=>{var t;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:wy(e.name,this.schema)};e.type==="mark"&&((t=ve(J(e,"keepOnSplit",r)))==null||t)&&this.splittableMarks.push(e.name);const i=J(e,"onBeforeCreate",r),s=J(e,"onCreate",r),o=J(e,"onUpdate",r),a=J(e,"onSelectionUpdate",r),l=J(e,"onTransaction",r),c=J(e,"onFocus",r),u=J(e,"onBlur",r),h=J(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),h&&this.editor.on("destroy",h)})}};Hg.resolve=vP;Hg.sort=Kb;Hg.flatten=qb;var O9={};Hb(O9,{ClipboardTextSerializer:()=>EP,Commands:()=>OP,Delete:()=>MP,Drop:()=>AP,Editable:()=>RP,FocusEvents:()=>DP,Keymap:()=>NP,Paste:()=>IP,Tabindex:()=>jP,focusEventsPluginKey:()=>PP});var Xe=class _P extends Jb{constructor(){super(...arguments),this.type="extension"}static create(e={}){const t=typeof e=="function"?e():e;return new _P(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},EP=Xe.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ve({key:new vt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=bP(t);return wP(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),OP=Xe.create({name:"commands",addCommands(){return{...lP}}}),MP=Xe.create({name:"delete",onUpdate({transaction:n,appendedTransactions:e}){var t,r,i;const s=()=>{var o,a,l,c;if((c=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,n))!=null?c:n.getMeta("y-sync$"))return;const u=gP(n.before,[n,...e]);SP(u).forEach(f=>{u.mapping.mapResult(f.oldRange.from).deletedAfter&&u.mapping.mapResult(f.oldRange.to).deletedBefore&&u.before.nodesBetween(f.oldRange.from,f.oldRange.to,(p,g)=>{const m=g+p.nodeSize-2,y=f.oldRange.from<=g&&m<=f.oldRange.to;this.editor.emit("delete",{type:"node",node:p,from:g,to:m,newFrom:u.mapping.map(g),newTo:u.mapping.map(m),deletedRange:f.oldRange,newRange:f.newRange,partial:!y,editor:this.editor,transaction:n,combinedTransform:u})})});const d=u.mapping;u.steps.forEach((f,p)=>{var g,m;if(f instanceof xr){const y=d.slice(p).map(f.from,-1),v=d.slice(p).map(f.to),w=d.invert().map(y,-1),x=d.invert().map(v),S=(g=u.doc.nodeAt(y-1))==null?void 0:g.marks.some(T=>T.eq(f.mark)),C=(m=u.doc.nodeAt(v))==null?void 0:m.marks.some(T=>T.eq(f.mark));this.editor.emit("delete",{type:"mark",mark:f.mark,from:f.from,to:f.to,deletedRange:{from:w,to:x},newRange:{from:y,to:v},partial:!!(C||S),editor:this.editor,transaction:n,combinedTransform:u})}})};(i=(r=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),AP=Xe.create({name:"drop",addProseMirrorPlugins(){return[new Ve({key:new vt("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),RP=Xe.create({name:"editable",addProseMirrorPlugins(){return[new Ve({key:new vt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),PP=new vt("focusEvents"),DP=Xe.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Ve({key:PP,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),NP=Xe.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:h}=l,{pos:d,parent:f}=h,p=h.parent.isTextblock&&d>0?a.doc.resolve(d-1):h,g=p.parent.type.spec.isolating,m=h.pos-h.parentOffset,y=g&&p.parent.childCount===1?m===h.pos:ce.atStart(c).from===d;return!u||!f.type.isTextblock||f.textContent.length||!y||y&&h.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Gb()||fP()?s:i},addProseMirrorPlugins(){return[new Ve({key:new vt("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(g=>g.getMeta("composition")))return;const r=n.some(g=>g.docChanged)&&!e.doc.eq(t.doc),i=n.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=e.selection,l=ce.atStart(e.doc).from,c=ce.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!$g(t.doc))return;const d=t.tr,f=Fg({state:t,transaction:d}),{commands:p}=new Wg({editor:this.editor,state:f});if(p.clearNodes(),!!d.steps.length)return d}})]}}),IP=Xe.create({name:"paste",addProseMirrorPlugins(){return[new Ve({key:new vt("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),jP=Xe.create({name:"tabindex",addProseMirrorPlugins(){return[new Ve({key:new vt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),M9=class Da{constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Da(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Da(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Da(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,s=t.isAtom&&!t.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Da(a,this.editor,i,i?t:null);i&&(l.actualDepth=this.depth+1),e.push(new Da(a,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const s=i.node.attrs,o=Object.keys(t);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==t[l])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(t);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(l=>t[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},A9=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function R9(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}var P9=class extends v9{constructor(n={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),t=hP(e,this.options.autofocus);this.editorState=Ja.create({doc:e,schema:this.schema,selection:t||void 0}),this.options.element&&this.mount(this.options.element)}mount(n){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(n),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const n=this.editorView.dom;n!=null&&n.editor&&delete n.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(n){console.warn("Failed to remove CSS element:",n)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=R9(A9,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,e=!0){this.setOptions({editable:n}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:n=>{this.editorState=n},dispatch:n=>{this.dispatchTransaction(n)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(n,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in n)return Reflect.get(n,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(n,e){const t=mP(e)?e(n,[...this.state.plugins]):[...this.state.plugins,n],r=this.state.reconfigure({plugins:t});return this.view.updateState(r),r}unregisterPlugin(n){if(this.isDestroyed)return;const e=this.state.plugins;let t=e;if([].concat(n).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;t=t.filter(o=>!o.key.startsWith(s))}),e.length===t.length)return;const r=this.state.reconfigure({plugins:t});return this.view.updateState(r),r}createExtensionManager(){var n,e;const r=[...this.options.enableCoreExtensions?[RP,EP.configure({blockSeparator:(e=(n=this.options.coreExtensionOptions)==null?void 0:n.clipboardTextSerializer)==null?void 0:e.blockSeparator}),OP,DP,NP,jP,AP,IP,MP].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Hg(r,this)}createCommandManager(){this.commandManager=new Wg({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let n;try{n=_v(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>t.name!=="collaboration"),this.createExtensionManager()}}),n=_v(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return n}createView(n){var e;this.editorView=new oP(n,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const t=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(t),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(c=>{var u;return(u=this.capturedTransaction)==null?void 0:u.step(c)});return}const{state:e,transactions:t}=this.state.applyTransaction(n),r=!this.state.selection.eq(e.selection),i=t.includes(n),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:n,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:n,appendedTransactions:t.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:n});const o=t.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(n.getMeta("preventUpdate")||!t.some(c=>c.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:n,appendedTransactions:t.slice(1)})}getAttributes(n){return xP(this.state,n)}isActive(n,e){const t=typeof n=="string"?n:null,r=typeof n=="string"?e:n;return XG(this.state,t,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Yb(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:e=`

`,textSerializers:t={}}=n||{};return UG(this.state.doc,{blockSeparator:e,textSerializers:{...bP(this.schema),...t}})}get isEmpty(){return $g(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var n,e;return(e=(n=this.editorView)==null?void 0:n.isDestroyed)!=null?e:!0}$node(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelector(n,e))||null}$nodes(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelectorAll(n,e))||null}$pos(n){const e=this.state.doc.resolve(n);return new M9(e,this)}get $doc(){return this.$pos(0)}};function Ll(n){return new uh({find:n.find,handler:({state:e,range:t,match:r})=>{const i=ve(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=t.from+a.indexOf(o),u=c+o.length;if(Xb(t.from,t.to,e.doc).filter(f=>f.mark.type.excluded.find(g=>g===n.type&&g!==f.mark.type)).filter(f=>f.to>c).length)return null;u<t.to&&s.delete(u,t.to),c>t.from&&s.delete(t.from+l,c);const d=t.from+l+o.length;s.addMark(t.from+l,d,n.type.create(i||{})),s.removeStoredMark(n.type)}},undoable:n.undoable})}function D9(n){return new uh({find:n.find,handler:({state:e,range:t,match:r})=>{const i=ve(n.getAttributes,void 0,r)||{},{tr:s}=e,o=t.from;let a=t.to;const l=n.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const h=r[0][r[0].length-1];s.insertText(h,o+r[0].length-1),s.replaceWith(u,a,l)}else if(r[0]){const c=n.type.isInline?o:o-1;s.insert(c,n.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:n.undoable})}function Ov(n){return new uh({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),s=ve(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)},undoable:n.undoable})}function Ge(n){return new uh({find:n.find,handler:({state:e,range:t,match:r})=>{let i=n.replace,s=t.from;const o=t.to;if(r[1]){const a=r[0].lastIndexOf(r[1]);i+=r[0].slice(a+r[1].length),s+=a;const l=s-o;l>0&&(i=r[0].slice(a-l,a)+i,s=o)}e.tr.insertText(i,s,o)},undoable:n.undoable})}function Fl(n){return new uh({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const s=ve(n.getAttributes,void 0,r)||{},o=e.tr.delete(t.from,t.to),l=o.doc.resolve(t.from).blockRange(),c=l&&Ab(l,n.type,s);if(!c)return null;if(o.wrap(l,c),n.keepMarks&&n.editor){const{selection:h,storedMarks:d}=e,{splittableMarks:f}=n.editor.extensionManager,p=d||h.$to.parentOffset&&h.$from.marks();if(p){const g=p.filter(m=>f.includes(m.type.name));o.ensureMarks(g)}}if(n.keepAttributes){const h=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const u=o.doc.resolve(t.from-1).nodeBefore;u&&u.type===n.type&&no(o.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,u))&&o.join(t.from-1)},undoable:n.undoable})}function N9(n,e){const{selection:t}=n,{$from:r}=t;if(t instanceof Q){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var I9={};Hb(I9,{createAtomBlockMarkdownSpec:()=>j9,createBlockMarkdownSpec:()=>L9,createInlineMarkdownSpec:()=>B9,parseAttributes:()=>Qb,parseIndentedBlocks:()=>Mv,renderNestedMarkdownContent:()=>ex,serializeAttributes:()=>Zb});function Qb(n){if(!(n!=null&&n.trim()))return{};const e={},t=[],r=n.replace(/["']([^"']*)["']/g,c=>(t.push(c),`__QUOTED_${t.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const c=i.map(u=>u.trim().slice(1));e.class=c.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,c,u])=>{var h;const d=parseInt(((h=u.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),f=t[d];f&&(e[c]=f.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(e[u]=!0)}),e}function Zb(n){if(!n||Object.keys(n).length===0)return"";const e=[];return n.class&&String(n.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),n.id&&e.push(`#${n.id}`),Object.entries(n).forEach(([t,r])=>{t==="class"||t==="id"||(r===!0?e.push(t):r!==!1&&r!=null&&e.push(`${t}="${String(r)}"`))}),e.join(" ")}function j9(n){const{nodeName:e,name:t,parseAttributes:r=Qb,serializeAttributes:i=Zb,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=n,l=t||e,c=u=>{if(!a)return u;const h={};return a.forEach(d=>{d in u&&(h[d]=u[d])}),h};return{parseMarkdown:(u,h)=>{const d={...s,...u.attributes};return h.createNode(e,d,[])},markdownTokenizer:{name:e,level:"block",start(u){var h;const d=new RegExp(`^:::${l}(?:\\s|$)`,"m"),f=(h=u.match(d))==null?void 0:h.index;return f!==void 0?f:-1},tokenize(u,h,d){const f=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),p=u.match(f);if(!p)return;const g=p[1]||"",m=r(g);if(!o.find(v=>!(v in m)))return{type:e,raw:p[0],attributes:m}}},renderMarkdown:u=>{const h=c(u.attrs||{}),d=i(h),f=d?` {${d}}`:"";return`:::${l}${f} :::`}}}function L9(n){const{nodeName:e,name:t,getContent:r,parseAttributes:i=Qb,serializeAttributes:s=Zb,defaultAttributes:o={},content:a="block",allowedAttributes:l}=n,c=t||e,u=h=>{if(!l)return h;const d={};return l.forEach(f=>{f in h&&(d[f]=h[f])}),d};return{parseMarkdown:(h,d)=>{let f;if(r){const g=r(h);f=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?f=d.parseChildren(h.tokens||[]):f=d.parseInline(h.tokens||[]);const p={...o,...h.attributes};return d.createNode(e,p,f)},markdownTokenizer:{name:e,level:"block",start(h){var d;const f=new RegExp(`^:::${c}`,"m"),p=(d=h.match(f))==null?void 0:d.index;return p!==void 0?p:-1},tokenize(h,d,f){var p;const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),m=h.match(g);if(!m)return;const[y,v=""]=m,w=i(v);let x=1;const S=y.length;let C="";const T=/^:::([\w-]*)(\s.*)?/gm,_=h.slice(S);for(T.lastIndex=0;;){const M=T.exec(_);if(M===null)break;const P=M.index,$=M[1];if(!((p=M[2])!=null&&p.endsWith(":::"))){if($)x+=1;else if(x-=1,x===0){const N=_.slice(0,P);C=N.trim();const H=h.slice(0,S+P+M[0].length);let D=[];if(C)if(a==="block")for(D=f.blockTokens(N),D.forEach(V=>{V.text&&(!V.tokens||V.tokens.length===0)&&(V.tokens=f.inlineTokens(V.text))});D.length>0;){const V=D[D.length-1];if(V.type==="paragraph"&&(!V.text||V.text.trim()===""))D.pop();else break}else D=f.inlineTokens(C);return{type:e,raw:H,attributes:w,content:C,tokens:D}}}}}},renderMarkdown:(h,d)=>{const f=u(h.attrs||{}),p=s(f),g=p?` {${p}}`:"",m=d.renderChildren(h.content||[],`

`);return`:::${c}${g}

${m}

:::`}}}function F9(n){if(!n.trim())return{};const e={},t=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=t.exec(n);for(;r!==null;){const[,i,s,o]=r;e[i]=s||o,r=t.exec(n)}return e}function W9(n){return Object.entries(n).filter(([,e])=>e!=null).map(([e,t])=>`${e}="${t}"`).join(" ")}function B9(n){const{nodeName:e,name:t,getContent:r,parseAttributes:i=F9,serializeAttributes:s=W9,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=n,c=t||e,u=d=>{if(!l)return d;const f={};return l.forEach(p=>{p in d&&(f[p]=d[p])}),f},h=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(d,f)=>{const p={...o,...d.attributes};if(a)return f.createNode(e,p);const g=r?r(d):d.content||"";return g?f.createNode(e,p,[f.createTextNode(g)]):f.createNode(e,p,[])},markdownTokenizer:{name:e,level:"inline",start(d){const f=a?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),p=d.match(f),g=p==null?void 0:p.index;return g!==void 0?g:-1},tokenize(d,f,p){const g=a?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),m=d.match(g);if(!m)return;let y="",v="";if(a){const[,x]=m;v=x}else{const[,x,S]=m;v=x,y=S||""}const w=i(v.trim());return{type:e,raw:m[0],content:y.trim(),attributes:w}}},renderMarkdown:d=>{let f="";r?f=r(d):d.content&&d.content.length>0&&(f=d.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const p=u(d.attrs||{}),g=s(p),m=g?` ${g}`:"";return a?`[${c}${m}]`:`[${c}${m}]${f}[/${c}]`}}}function Mv(n,e,t){var r,i,s,o;const a=n.split(`
`),l=[];let c="",u=0;const h=e.baseIndentSize||2;for(;u<a.length;){const d=a[u],f=d.match(e.itemPattern);if(!f){if(l.length>0)break;if(d.trim()===""){u+=1;continue}else return}const p=e.extractItemData(f),{indentLevel:g,mainContent:m}=p;c=`${c}${d}
`;const y=[m];for(u+=1;u<a.length;){const S=a[u];if(S.trim()===""){const T=a.slice(u+1).findIndex(P=>P.trim()!=="");if(T===-1)break;if((((i=(r=a[u+1+T].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>g){y.push(S),c=`${c}${S}
`,u+=1;continue}else break}if((((o=(s=S.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>g)y.push(S),c=`${c}${S}
`,u+=1;else break}let v;const w=y.slice(1);if(w.length>0){const S=w.map(C=>C.slice(g+h)).join(`
`);S.trim()&&(e.customNestedParser?v=e.customNestedParser(S):v=t.blockTokens(S))}const x=e.createToken(p,v);l.push(x)}if(l.length!==0)return{items:l,raw:c.trim()}}function ex(n,e,t,r){if(!n||!Array.isArray(n.content))return"";const i=typeof t=="function"?t(r):t,[s,...o]=n.content,a=e.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(c=>{const u=e.renderChildren([c]);if(u){const h=u.split(`
`).map(d=>d?e.indent(d):"").join(`
`);l.push(h)}}),l.join(`
`)}function z9(n,e,t={}){const{state:r}=e,{doc:i,tr:s}=r,o=n;i.descendants((a,l)=>{const c=s.mapping.map(l),u=s.mapping.map(l)+a.nodeSize;let h=null;if(a.marks.forEach(f=>{if(f!==o)return!1;h=f}),!h)return;let d=!1;if(Object.keys(t).forEach(f=>{t[f]!==h.attrs[f]&&(d=!0)}),d){const f=n.type.create({...n.attrs,...t});s.removeMark(c,u,n.type),s.addMark(c,u,f)}}),s.docChanged&&e.view.dispatch(s)}var An=class LP extends Jb{constructor(){super(...arguments),this.type="node"}static create(e={}){const t=typeof e=="function"?e():e;return new LP(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function ta(n){return new C9({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const s=ve(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=t.to;if(a){const u=l.search(/\S/),h=t.from+l.indexOf(a),d=h+a.length;if(Xb(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(m=>m===n.type&&m!==p.mark.type)).filter(p=>p.to>h).length)return null;d<t.to&&o.delete(d,t.to),h>t.from&&o.delete(t.from+u,h),c=t.from+u+a.length,o.addMark(t.from+u,c,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}var $9=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!n(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t};const H9=Ip($9);var FP={exports:{}},WP={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug=k,U9=Eb;function V9(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var G9=typeof Object.is=="function"?Object.is:V9,q9=U9.useSyncExternalStore,Y9=Ug.useRef,K9=Ug.useEffect,X9=Ug.useMemo,J9=Ug.useDebugValue;WP.useSyncExternalStoreWithSelector=function(n,e,t,r,i){var s=Y9(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=X9(function(){function l(f){if(!c){if(c=!0,u=f,f=r(f),i!==void 0&&o.hasValue){var p=o.value;if(i(p,f))return h=p}return h=f}if(p=h,G9(u,f))return p;var g=r(f);return i!==void 0&&i(p,g)?(u=f,p):(u=f,h=g)}var c=!1,u,h,d=t===void 0?null:t;return[function(){return l(e())},d===null?void 0:function(){return l(d())}]},[e,t,r,i]);var a=q9(n,s[0],s[1]);return K9(function(){o.hasValue=!0,o.value=a},[a]),J9(a),a};FP.exports=WP;var Q9=FP.exports,Z9=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},eq=({contentComponent:n})=>{const e=Eb.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return b.jsx(b.Fragment,{children:Object.values(e)})};function tq(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:Iw.createPortal(r.reactElement,r.element,t)},n.forEach(i=>i())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(i=>i())}}}var nq=class extends B.Component{constructor(n){var e;super(n),this.editorContentRef=B.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=n.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const n=this.props.editor;if(n&&!n.isDestroyed&&n.options.element){if(n.contentComponent)return;const e=this.editorContentRef.current;e.append(n.view.dom),n.setOptions({element:e}),n.contentComponent=tq(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=n.contentComponent.subscribe(()=>{this.setState(t=>t.hasContentComponentInitialized?t:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),n.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var n;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((n=e.view.dom)!=null&&n.firstChild))return;const t=document.createElement("div");t.append(e.view.dom),e.setOptions({element:t})}catch{}}}render(){const{editor:n,innerRef:e,...t}=this.props;return b.jsxs(b.Fragment,{children:[b.jsx("div",{ref:Z9(e,this.editorContentRef),...t}),(n==null?void 0:n.contentComponent)&&b.jsx(eq,{contentComponent:n.contentComponent})]})}},rq=k.forwardRef((n,e)=>{const t=B.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return B.createElement(nq,{key:t,innerRef:e,...n})}),iq=B.memo(rq),sq=typeof window<"u"?k.useLayoutEffect:k.useEffect,oq=class{constructor(n){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=n,this.lastSnapshot={editor:n,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(n){return this.subscribers.add(n),()=>{this.subscribers.delete(n)}}watch(n){if(this.editor=n,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};function aq(n){var e;const[t]=k.useState(()=>new oq(n.editor)),r=Q9.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!=null?e:H9);return sq(()=>t.watch(n.editor),[n.editor,t]),k.useDebugValue(r),r}var lq=!1,Av=typeof window>"u",cq=Av||!!(typeof window<"u"&&window.next),uq=class BP{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return Av||cq?null:this.createEditor();if(this.options.current.immediatelyRender&&Av&&lq)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new P9(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=t.extensions)==null?void 0:o[s])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?BP.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function hq(n={},e=[]){const t=k.useRef(n);t.current=n;const[r]=k.useState(()=>new uq(t)),i=Eb.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return k.useDebugValue(i),k.useEffect(r.onRender(e)),aq({editor:i,selector:({transactionNumber:s})=>n.shouldRerenderOnTransaction===!1||n.shouldRerenderOnTransaction===void 0?null:n.immediatelyRender&&s===0?0:s+1}),i}var dq=k.createContext({editor:null});dq.Consumer;var fq=k.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),pq=()=>k.useContext(fq);B.forwardRef((n,e)=>{const{onDragStart:t}=pq(),r=n.as||"div";return b.jsx(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});B.createContext({markViewContentRef:()=>{}});var op=(n,e)=>{if(n==="slot")return 0;if(n instanceof Function)return n(e);const{children:t,...r}=e??{};if(n==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[n,r,t]},gq=/^\s*>\s$/,mq=An.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return op("blockquote",{...it(this.options.HTMLAttributes,n),children:op("slot",{})})},parseMarkdown:(n,e)=>e.createNode("blockquote",void 0,e.parseChildren(n.tokens||[])),renderMarkdown:(n,e)=>{if(!n.content)return"";const t=[];return n.content.forEach(i=>{const o=e.renderChildren(i).split(`
`).map(a=>`> ${a}`).join(`
`);t.push(o)}),t.flatMap(i=>[i,"> "]).slice(0,-1).join(`
`)},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Fl({find:gq,type:this.type})]}}),yq=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,vq=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,wq=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,bq=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,xq=ca.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return op("strong",{...it(this.options.HTMLAttributes,n),children:op("slot",{})})},markdownTokenName:"strong",parseMarkdown:(n,e)=>e.applyMark("bold",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`**${e.renderChildren(n)}**`,addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ll({find:yq,type:this.type}),Ll({find:wq,type:this.type})]},addPasteRules(){return[ta({find:vq,type:this.type}),ta({find:bq,type:this.type})]}}),Sq=/(^|[^`])`([^`]+)`(?!`)$/,Cq=/(^|[^`])`([^`]+)`(?!`)/g,kq=ca.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",it(this.options.HTMLAttributes,n),0]},markdownTokenName:"codespan",parseMarkdown:(n,e)=>e.applyMark("code",[{type:"text",text:n.text||""}]),renderMarkdown:(n,e)=>n.content?`\`${e.renderChildren(n.content)}\``:"",addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ll({find:Sq,type:this.type})]},addPasteRules(){return[ta({find:Cq,type:this.type})]}}),Sy=4,Tq=/^```([a-z]+)?[\s\n]$/,_q=/^~~~([a-z]+)?[\s\n]$/,Eq=An.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Sy,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options;if(!t)return null;const s=[...((e=n.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",it(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(n,e)=>{var t;return((t=n.raw)==null?void 0:t.startsWith("```"))===!1&&n.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:n.lang||null},n.text?[e.createTextNode(n.text)]:[])},renderMarkdown:(n,e)=>{var t;let r="";const i=((t=n.attrs)==null?void 0:t.language)||"";return n.content?r=[`\`\`\`${i}`,e.renderChildren(n.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:Sy,{state:r}=n,{selection:i}=r,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(t);return o?n.commands.insertContent(a):n.commands.command(({tr:l})=>{const{from:c,to:u}=i,f=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(p=>a+p).join(`
`);return l.replaceWith(c,u,r.schema.text(f)),!0})},"Shift-Tab":({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:Sy,{state:r}=n,{selection:i}=r,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?n.commands.command(({tr:a})=>{var l;const{pos:c}=s,u=s.start(),h=s.end(),f=r.doc.textBetween(u,h,`
`,`
`).split(`
`);let p=0,g=0;const m=c-u;for(let C=0;C<f.length;C+=1){if(g+f[C].length>=m){p=C;break}g+=f[C].length+1}const v=((l=f[p].match(/^ */))==null?void 0:l[0])||"",w=Math.min(v.length,t);if(w===0)return!0;let x=u;for(let C=0;C<p;C+=1)x+=f[C].length+1;return a.delete(x,x+w),c-x<=w&&a.setSelection(ne.create(a.doc,x)),!0}):n.commands.command(({tr:a})=>{const{from:l,to:c}=i,d=r.doc.textBetween(l,c,`
`,`
`).split(`
`).map(f=>{var p;const g=((p=f.match(/^ */))==null?void 0:p[0])||"",m=Math.min(g.length,t);return f.slice(m)}).join(`
`);return a.replaceWith(l,c,r.schema.text(d)),!0})},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:n.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?n.commands.command(({tr:c})=>(c.setSelection(ce.near(r.resolve(a))),!0)):n.commands.exitCode()}}},addInputRules(){return[Ov({find:Tq,type:this.type,getAttributes:n=>({language:n[1]})}),Ov({find:_q,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Ve({key:new vt("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!t||!s)return!1;const{tr:o,schema:a}=n.state,l=a.text(t.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(ne.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}}),Oq=An.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`

`):""}),Mq=An.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",it(this.options.HTMLAttributes,n)]},renderText(){return`
`},renderMarkdown:(n,e)=>e.indent(`
`),addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:s}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const h=l.filter(d=>a.includes(d.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Aq=An.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,it(this.options.HTMLAttributes,e),0]},parseMarkdown:(n,e)=>e.createNode("heading",{level:n.depth||1},e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>{var t;const r=(t=n.attrs)!=null&&t.level?parseInt(n.attrs.level,10):1,i="#".repeat(r);return n.content?`${i} ${e.renderChildren(n.content)}`:""},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Ov({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}}),Rq=An.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",it(this.options.HTMLAttributes,n)]},markdownTokenName:"hr",parseMarkdown:(n,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!N9(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$to:r}=t,i=n();return CP(t)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(ne.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(Q.create(o.doc,l.pos)):o.setSelection(ne.create(o.doc,l.pos));else{const u=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,h=u==null?void 0:u.create();h&&(o.insert(c,h),o.setSelection(ne.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[D9({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Pq=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Dq=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Nq=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Iq=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,jq=ca.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",it(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(n,e)=>e.applyMark("italic",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`*${e.renderChildren(n)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ll({find:Pq,type:this.type}),Ll({find:Nq,type:this.type})]},addPasteRules(){return[ta({find:Dq,type:this.type}),ta({find:Iq,type:this.type})]}});const Lq="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Fq="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Rv="numeric",Pv="ascii",Dv="alpha",Qc="asciinumeric",Ac="alphanumeric",Nv="domain",zP="emoji",Wq="scheme",Bq="slashscheme",Cy="whitespace";function zq(n,e){return n in e||(e[n]=[]),e[n]}function Oo(n,e,t){e[Rv]&&(e[Qc]=!0,e[Ac]=!0),e[Pv]&&(e[Qc]=!0,e[Dv]=!0),e[Qc]&&(e[Ac]=!0),e[Dv]&&(e[Ac]=!0),e[Ac]&&(e[Nv]=!0),e[zP]&&(e[Nv]=!0);for(const r in e){const i=zq(r,t);i.indexOf(n)<0&&i.push(n)}}function $q(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function on(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}on.groups={};on.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(n))return s}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,r)},tr(n,e,t,r){r=r||on.groups;let i;return e&&e.j?i=e:(i=new on(e),t&&r&&Oo(e,t,r)),this.jr.push([n,i]),i},ts(n,e,t,r){let i=this;const s=n.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(n[o]);return i.tt(n[s-1],e,t,r)},tt(n,e,t,r){r=r||on.groups;const i=this;if(e&&e.j)return i.j[n]=e,e;const s=e;let o,a=i.go(n);if(a?(o=new on,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new on,s){if(r)if(o.t&&typeof o.t=="string"){const l=Object.assign($q(o.t,r),t);Oo(s,l,r)}else t&&Oo(s,t,r);o.t=s}return i.j[n]=o,o}};const le=(n,e,t,r,i)=>n.ta(e,t,r,i),Be=(n,e,t,r,i)=>n.tr(e,t,r,i),Pk=(n,e,t,r,i)=>n.ts(e,t,r,i),F=(n,e,t,r,i)=>n.tt(e,t,r,i),ci="WORD",Iv="UWORD",$P="ASCIINUMERICAL",HP="ALPHANUMERICAL",Uu="LOCALHOST",jv="TLD",Lv="UTLD",Qd="SCHEME",Na="SLASH_SCHEME",tx="NUM",Fv="WS",nx="NL",Zc="OPENBRACE",eu="CLOSEBRACE",ap="OPENBRACKET",lp="CLOSEBRACKET",cp="OPENPAREN",up="CLOSEPAREN",hp="OPENANGLEBRACKET",dp="CLOSEANGLEBRACKET",fp="FULLWIDTHLEFTPAREN",pp="FULLWIDTHRIGHTPAREN",gp="LEFTCORNERBRACKET",mp="RIGHTCORNERBRACKET",yp="LEFTWHITECORNERBRACKET",vp="RIGHTWHITECORNERBRACKET",wp="FULLWIDTHLESSTHAN",bp="FULLWIDTHGREATERTHAN",xp="AMPERSAND",Sp="APOSTROPHE",Cp="ASTERISK",cs="AT",kp="BACKSLASH",Tp="BACKTICK",_p="CARET",ms="COLON",rx="COMMA",Ep="DOLLAR",Dr="DOT",Op="EQUALS",ix="EXCLAMATION",In="HYPHEN",tu="PERCENT",Mp="PIPE",Ap="PLUS",Rp="POUND",nu="QUERY",sx="QUOTE",UP="FULLWIDTHMIDDLEDOT",ox="SEMI",Nr="SLASH",ru="TILDE",Pp="UNDERSCORE",VP="EMOJI",Dp="SYM";var GP=Object.freeze({__proto__:null,ALPHANUMERICAL:HP,AMPERSAND:xp,APOSTROPHE:Sp,ASCIINUMERICAL:$P,ASTERISK:Cp,AT:cs,BACKSLASH:kp,BACKTICK:Tp,CARET:_p,CLOSEANGLEBRACKET:dp,CLOSEBRACE:eu,CLOSEBRACKET:lp,CLOSEPAREN:up,COLON:ms,COMMA:rx,DOLLAR:Ep,DOT:Dr,EMOJI:VP,EQUALS:Op,EXCLAMATION:ix,FULLWIDTHGREATERTHAN:bp,FULLWIDTHLEFTPAREN:fp,FULLWIDTHLESSTHAN:wp,FULLWIDTHMIDDLEDOT:UP,FULLWIDTHRIGHTPAREN:pp,HYPHEN:In,LEFTCORNERBRACKET:gp,LEFTWHITECORNERBRACKET:yp,LOCALHOST:Uu,NL:nx,NUM:tx,OPENANGLEBRACKET:hp,OPENBRACE:Zc,OPENBRACKET:ap,OPENPAREN:cp,PERCENT:tu,PIPE:Mp,PLUS:Ap,POUND:Rp,QUERY:nu,QUOTE:sx,RIGHTCORNERBRACKET:mp,RIGHTWHITECORNERBRACKET:vp,SCHEME:Qd,SEMI:ox,SLASH:Nr,SLASH_SCHEME:Na,SYM:Dp,TILDE:ru,TLD:jv,UNDERSCORE:Pp,UTLD:Lv,UWORD:Iv,WORD:ci,WS:Fv});const si=/[a-z]/,bc=new RegExp("\\p{L}","u"),ky=new RegExp("\\p{Emoji}","u"),oi=/\d/,Ty=/\s/,Dk="\r",_y=`
`,Hq="",Uq="",Ey="";let kd=null,Td=null;function Vq(n=[]){const e={};on.groups=e;const t=new on;kd==null&&(kd=Nk(Lq)),Td==null&&(Td=Nk(Fq)),F(t,"'",Sp),F(t,"{",Zc),F(t,"}",eu),F(t,"[",ap),F(t,"]",lp),F(t,"(",cp),F(t,")",up),F(t,"<",hp),F(t,">",dp),F(t,"",fp),F(t,"",pp),F(t,"",gp),F(t,"",mp),F(t,"",yp),F(t,"",vp),F(t,"",wp),F(t,"",bp),F(t,"&",xp),F(t,"*",Cp),F(t,"@",cs),F(t,"`",Tp),F(t,"^",_p),F(t,":",ms),F(t,",",rx),F(t,"$",Ep),F(t,".",Dr),F(t,"=",Op),F(t,"!",ix),F(t,"-",In),F(t,"%",tu),F(t,"|",Mp),F(t,"+",Ap),F(t,"#",Rp),F(t,"?",nu),F(t,'"',sx),F(t,"/",Nr),F(t,";",ox),F(t,"~",ru),F(t,"_",Pp),F(t,"\\",kp),F(t,"",UP);const r=Be(t,oi,tx,{[Rv]:!0});Be(r,oi,r);const i=Be(r,si,$P,{[Qc]:!0}),s=Be(r,bc,HP,{[Ac]:!0}),o=Be(t,si,ci,{[Pv]:!0});Be(o,oi,i),Be(o,si,o),Be(i,oi,i),Be(i,si,i);const a=Be(t,bc,Iv,{[Dv]:!0});Be(a,si),Be(a,oi,s),Be(a,bc,a),Be(s,oi,s),Be(s,si),Be(s,bc,s);const l=F(t,_y,nx,{[Cy]:!0}),c=F(t,Dk,Fv,{[Cy]:!0}),u=Be(t,Ty,Fv,{[Cy]:!0});F(t,Ey,u),F(c,_y,l),F(c,Ey,u),Be(c,Ty,u),F(u,Dk),F(u,_y),Be(u,Ty,u),F(u,Ey,u);const h=Be(t,ky,VP,{[zP]:!0});F(h,"#"),Be(h,ky,h),F(h,Hq,h);const d=F(h,Uq);F(d,"#"),Be(d,ky,h);const f=[[si,o],[oi,i]],p=[[si,null],[bc,a],[oi,s]];for(let g=0;g<kd.length;g++)ts(t,kd[g],jv,ci,f);for(let g=0;g<Td.length;g++)ts(t,Td[g],Lv,Iv,p);Oo(jv,{tld:!0,ascii:!0},e),Oo(Lv,{utld:!0,alpha:!0},e),ts(t,"file",Qd,ci,f),ts(t,"mailto",Qd,ci,f),ts(t,"http",Na,ci,f),ts(t,"https",Na,ci,f),ts(t,"ftp",Na,ci,f),ts(t,"ftps",Na,ci,f),Oo(Qd,{scheme:!0,ascii:!0},e),Oo(Na,{slashscheme:!0,ascii:!0},e),n=n.sort((g,m)=>g[0]>m[0]?1:-1);for(let g=0;g<n.length;g++){const m=n[g][0],v=n[g][1]?{[Wq]:!0}:{[Bq]:!0};m.indexOf("-")>=0?v[Nv]=!0:si.test(m)?oi.test(m)?v[Qc]=!0:v[Pv]=!0:v[Rv]=!0,Pk(t,m,m,v)}return Pk(t,"localhost",Uu,{ascii:!0}),t.jd=new on(Dp),{start:t,tokens:Object.assign({groups:e},GP)}}function qP(n,e){const t=Gq(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=t.length,i=[];let s=0,o=0;for(;o<r;){let a=n,l=null,c=0,u=null,h=-1,d=-1;for(;o<r&&(l=a.go(t[o]));)a=l,a.accepts()?(h=0,d=0,u=a):h>=0&&(h+=t[o].length,d++),c+=t[o].length,s+=t[o].length,o++;s-=h,o-=d,c-=h,i.push({t:u.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function Gq(n){const e=[],t=n.length;let r=0;for(;r<t;){let i=n.charCodeAt(r),s,o=i<55296||i>56319||r+1===t||(s=n.charCodeAt(r+1))<56320||s>57343?n[r]:n.slice(r,r+2);e.push(o),r+=o.length}return e}function ts(n,e,t,r,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];n.j[l]?s=n.j[l]:(s=new on(r),s.jr=i.slice(),n.j[l]=s),n=s}return s=new on(t),s.jr=i.slice(),n.j[e[o-1]]=s,s}function Nk(n){const e=[],t=[];let r=0,i="0123456789";for(;r<n.length;){let s=0;for(;i.indexOf(n[r+s])>=0;)s++;if(s>0){e.push(t.join(""));for(let o=parseInt(n.substring(r,r+s),10);o>0;o--)t.pop();r+=s}else t.push(n[r]),r++}return e}const Vu={defaultProtocol:"http",events:null,format:Ik,formatHref:Ik,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function ax(n,e=null){let t=Object.assign({},Vu);n&&(t=Object.assign(t,n instanceof ax?n.o:n));const r=t.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}ax.prototype={o:Vu,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:Vu[n],typeof i=="function"&&r&&(i=i(e,t))):typeof i=="function"&&r&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function Ik(n){return n}function YP(n,e){this.t="token",this.v=n,this.tk=e}YP.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=Vu.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),i=n.get("tagName",t,e),s=this.toFormattedString(n),o={},a=n.get("className",t,e),l=n.get("target",t,e),c=n.get("rel",t,e),u=n.getObj("attributes",t,e),h=n.getObj("events",t,e);return o.href=r,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&Object.assign(o,u),{tagName:i,attributes:o,content:s,eventListeners:h}}};function Vg(n,e){class t extends YP{constructor(i,s){super(i,s),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const jk=Vg("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Lk=Vg("text"),qq=Vg("nl"),_d=Vg("url",{isLink:!0,toHref(n=Vu.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Uu&&n[1].t===ms}}),Nn=n=>new on(n);function Yq({groups:n}){const e=n.domain.concat([xp,Cp,cs,kp,Tp,_p,Ep,Op,In,tx,tu,Mp,Ap,Rp,Nr,Dp,ru,Pp]),t=[Sp,ms,rx,Dr,ix,tu,nu,sx,ox,hp,dp,Zc,eu,lp,ap,cp,up,fp,pp,gp,mp,yp,vp,wp,bp],r=[xp,Sp,Cp,kp,Tp,_p,Ep,Op,In,Zc,eu,tu,Mp,Ap,Rp,nu,Nr,Dp,ru,Pp],i=Nn(),s=F(i,ru);le(s,r,s),le(s,n.domain,s);const o=Nn(),a=Nn(),l=Nn();le(i,n.domain,o),le(i,n.scheme,a),le(i,n.slashscheme,l),le(o,r,s),le(o,n.domain,o);const c=F(o,cs);F(s,cs,c),F(a,cs,c),F(l,cs,c);const u=F(s,Dr);le(u,r,s),le(u,n.domain,s);const h=Nn();le(c,n.domain,h),le(h,n.domain,h);const d=F(h,Dr);le(d,n.domain,h);const f=Nn(jk);le(d,n.tld,f),le(d,n.utld,f),F(c,Uu,f);const p=F(h,In);F(p,In,p),le(p,n.domain,h),le(f,n.domain,h),F(f,Dr,d),F(f,In,p);const g=F(f,ms);le(g,n.numeric,jk);const m=F(o,In),y=F(o,Dr);F(m,In,m),le(m,n.domain,o),le(y,r,s),le(y,n.domain,o);const v=Nn(_d);le(y,n.tld,v),le(y,n.utld,v),le(v,n.domain,o),le(v,r,s),F(v,Dr,y),F(v,In,m),F(v,cs,c);const w=F(v,ms),x=Nn(_d);le(w,n.numeric,x);const S=Nn(_d),C=Nn();le(S,e,S),le(S,t,C),le(C,e,S),le(C,t,C),F(v,Nr,S),F(x,Nr,S);const T=F(a,ms),_=F(l,ms),M=F(_,Nr),P=F(M,Nr);le(a,n.domain,o),F(a,Dr,y),F(a,In,m),le(l,n.domain,o),F(l,Dr,y),F(l,In,m),le(T,n.domain,S),F(T,Nr,S),F(T,nu,S),le(P,n.domain,S),le(P,e,S),F(P,Nr,S);const $=[[Zc,eu],[ap,lp],[cp,up],[hp,dp],[fp,pp],[gp,mp],[yp,vp],[wp,bp]];for(let N=0;N<$.length;N++){const[H,D]=$[N],V=F(S,H);F(C,H,V),F(V,D,S);const U=Nn(_d);le(V,e,U);const G=Nn();le(V,t),le(U,e,U),le(U,t,G),le(G,e,U),le(G,t,G),F(U,D,S),F(G,D,S)}return F(i,Uu,v),F(i,nx,qq),{start:i,tokens:GP}}function Kq(n,e,t){let r=t.length,i=0,s=[],o=[];for(;i<r;){let a=n,l=null,c=null,u=0,h=null,d=-1;for(;i<r&&!(l=a.go(t[i].t));)o.push(t[i++]);for(;i<r&&(c=l||a.go(t[i].t));)l=null,a=c,a.accepts()?(d=0,h=a):d>=0&&d++,i++,u++;if(d<0)i-=u,i<r&&(o.push(t[i]),i++);else{o.length>0&&(s.push(Oy(Lk,e,o)),o=[]),i-=d,u-=d;const f=h.t,p=t.slice(i-u,i);s.push(Oy(f,e,p))}}return o.length>0&&s.push(Oy(Lk,e,o)),s}function Oy(n,e,t){const r=t[0].s,i=t[t.length-1].e,s=e.slice(r,i);return new n(s,t)}const Xq=typeof console<"u"&&console&&console.warn||(()=>{}),Jq="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Me={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Qq(){return on.groups={},Me.scanner=null,Me.parser=null,Me.tokenQueue=[],Me.pluginQueue=[],Me.customSchemes=[],Me.initialized=!1,Me}function Fk(n,e=!1){if(Me.initialized&&Xq(`linkifyjs: already initialized - will not register custom scheme "${n}" ${Jq}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Me.customSchemes.push([n,e])}function Zq(){Me.scanner=Vq(Me.customSchemes);for(let n=0;n<Me.tokenQueue.length;n++)Me.tokenQueue[n][1]({scanner:Me.scanner});Me.parser=Yq(Me.scanner.tokens);for(let n=0;n<Me.pluginQueue.length;n++)Me.pluginQueue[n][1]({scanner:Me.scanner,parser:Me.parser});return Me.initialized=!0,Me}function lx(n){return Me.initialized||Zq(),Kq(Me.parser.start,n,qP(Me.scanner.start,n))}lx.scan=qP;function KP(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new ax(t),i=lx(n),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}var cx="[\0- -\u2029]",eY=new RegExp(cx),tY=new RegExp(`${cx}$`),nY=new RegExp(cx,"g");function rY(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function iY(n){return new Ve({key:new vt("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(c=>c.docChanged)&&!t.doc.eq(r.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,a=gP(t.doc,[...e]);if(SP(a).forEach(({newRange:c})=>{const u=FG(r.doc,c,f=>f.isTextblock);let h,d;if(u.length>1)h=u[0],d=r.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(u.length){const f=r.doc.textBetween(c.from,c.to," "," ");if(!tY.test(f))return;h=u[0],d=r.doc.textBetween(h.pos,c.to,void 0," ")}if(h&&d){const f=d.split(eY).filter(Boolean);if(f.length<=0)return!1;const p=f[f.length-1],g=h.pos+d.lastIndexOf(p);if(!p)return!1;const m=lx(p).map(y=>y.toObject(n.defaultProtocol));if(!rY(m))return!1;m.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>n.validate(y.value)).filter(y=>n.shouldAutoLink(y.value)).forEach(y=>{Xb(y.from,y.to,r.doc).some(v=>v.mark.type===n.type)||o.addMark(y.from,y.to,n.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function sY(n){return new Ve({key:new vt("handleClickLink"),props:{handleClick:(e,t,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let u=r.target;const h=[];for(;u.nodeName!=="DIV";)h.push(u),u=u.parentNode;o=h.find(d=>d.nodeName==="A")}if(!o)return!1;const a=xP(e.state,n.type.name),l=(i=o==null?void 0:o.href)!=null?i:a.href,c=(s=o==null?void 0:o.target)!=null?s:a.target;return n.enableClickSelection&&n.editor.commands.extendMarkRange(n.type.name),o&&l?(window.open(l,c),!0):!1}}})}function oY(n){return new Ve({key:new vt("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{shouldAutoLink:i}=n,{state:s}=e,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const c=KP(l,{defaultProtocol:n.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!c||i!==void 0&&!i(c.href)?!1:n.editor.commands.setMark(n.type,{href:c.href})}}})}function lo(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&t.push(i)}),!n||n.replace(nY,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var aY=ca.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){Fk(n);return}Fk(n.scheme,n.optionalSlashes)})},onDestroy(){Qq()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!lo(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!lo(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!lo(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",it(this.options.HTMLAttributes,n),0]:["a",it(this.options.HTMLAttributes,{...n,href:""}),0]},markdownTokenName:"link",parseMarkdown:(n,e)=>e.applyMark("link",e.parseInline(n.tokens||[]),{href:n.href,title:n.title||null}),renderMarkdown:(n,e)=>{var t;const r=((t=n.attrs)==null?void 0:t.href)||"";return`[${e.renderChildren(n)}](${r})`},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!lo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:r=>!!lo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ta({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,i=KP(n).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!lo(o,t),protocols:t,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(iY({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!lo(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(sY({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&n.push(oY({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),n}}),lY=Object.defineProperty,cY=(n,e)=>{for(var t in e)lY(n,t,{get:e[t],enumerable:!0})},uY="listItem",Wk="textStyle",Bk=/^\s*([-+*])\s$/,XP=An.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",it(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>n.type!=="list"||n.ordered?[]:{type:"bulletList",content:n.items?e.parseChildren(n.items):[]},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(uY,this.editor.getAttributes(Wk)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Fl({find:Bk,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Fl({find:Bk,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Wk),editor:this.editor})),[n]}}),JP=An.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",it(this.options.HTMLAttributes,n),0]},markdownTokenName:"list_item",parseMarkdown:(n,e)=>{if(n.type!=="list_item")return[];let t=[];if(n.tokens&&n.tokens.length>0)if(n.tokens.some(i=>i.type==="paragraph"))t=e.parseChildren(n.tokens);else{const i=n.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(t=[{type:"paragraph",content:e.parseInline(i.tokens)}],n.tokens.length>1){const o=n.tokens.slice(1),a=e.parseChildren(o);t.push(...a)}}else t=e.parseChildren(n.tokens)}return t.length===0&&(t=[{type:"paragraph",content:[]}]),{type:"listItem",content:t}},renderMarkdown:(n,e,t)=>ex(n,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",t),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),hY={};cY(hY,{findListItemPos:()=>hh,getNextListDepth:()=>ux,handleBackspace:()=>Wv,handleDelete:()=>Bv,hasListBefore:()=>QP,hasListItemAfter:()=>dY,hasListItemBefore:()=>ZP,listItemHasSubList:()=>eD,nextListIsDeeper:()=>tD,nextListIsHigher:()=>nD});var hh=(n,e)=>{const{$from:t}=e.selection,r=rt(n,e.schema);let i=null,s=t.depth,o=t.pos,a=null;for(;s>0&&a===null;)i=t.node(s),i.type===r?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},ux=(n,e)=>{const t=hh(n,e);if(!t)return!1;const[,r]=YG(e,n,t.$pos.pos+4);return r},QP=(n,e,t)=>{const{$anchor:r}=n.selection,i=Math.max(0,r.pos-2),s=n.doc.resolve(i).node();return!(!s||!t.includes(s.type.name))},ZP=(n,e)=>{var t;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((t=i.nodeBefore)==null?void 0:t.type.name)!==n)},eD=(n,e,t)=>{if(!t)return!1;const r=rt(n,e.schema);let i=!1;return t.descendants(s=>{s.type===r&&(i=!0)}),i},Wv=(n,e,t)=>{if(n.commands.undoInputRule())return!0;if(n.state.selection.from!==n.state.selection.to)return!1;if(!Xs(n.state,e)&&QP(n.state,e,t)){const{$anchor:a}=n.state.selection,l=n.state.doc.resolve(a.before()-1),c=[];l.node().descendants((d,f)=>{d.type.name===e&&c.push({node:d,pos:f})});const u=c.at(-1);if(!u)return!1;const h=n.state.doc.resolve(l.start()+u.pos+1);return n.chain().cut({from:a.start()-1,to:a.end()+1},h.end()).joinForward().run()}if(!Xs(n.state,e)||!QG(n.state))return!1;const r=hh(e,n.state);if(!r)return!1;const s=n.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=eD(e,n.state,s);return ZP(e,n.state)&&!o?n.commands.joinItemBackward():n.chain().liftListItem(e).run()},tD=(n,e)=>{const t=ux(n,e),r=hh(n,e);return!r||!t?!1:t>r.depth},nD=(n,e)=>{const t=ux(n,e),r=hh(n,e);return!r||!t?!1:t<r.depth},Bv=(n,e)=>{if(!Xs(n.state,e)||!JG(n.state,e))return!1;const{selection:t}=n.state,{$from:r,$to:i}=t;return!t.empty&&r.sameParent(i)?!1:tD(e,n.state)?n.chain().focus(n.state.selection.from+4).lift(e).joinBackward().run():nD(e,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward()},dY=(n,e)=>{var t;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((t=i.nodeAfter)==null?void 0:t.type.name)!==n)},rD=Xe.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&Bv(n,t)&&(e=!0)}),e},"Mod-Delete":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&Bv(n,t)&&(e=!0)}),e},Backspace:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&Wv(n,t,r)&&(e=!0)}),e},"Mod-Backspace":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&Wv(n,t,r)&&(e=!0)}),e}}}}),zk=/^(\s*)(\d+)\.\s+(.*)$/,fY=/^\s/;function pY(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t],s=i.match(zk);if(!s)break;const[,o,a,l]=s,c=o.length;let u=l,h=t+1;const d=[i];for(;h<n.length;){const f=n[h];if(f.match(zk))break;if(f.trim()==="")d.push(f),u+=`
`,h+=1;else if(f.match(fY))d.push(f),u+=`
${f.slice(c+2)}`,h+=1;else break}e.push({indent:c,number:parseInt(a,10),content:u.trim(),raw:d.join(`
`)}),r=h,t=h}return[e,r]}function iD(n,e,t){var r;const i=[];let s=0;for(;s<n.length;){const o=n[s];if(o.indent===e){const a=o.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:t.inlineTokens(l)});const u=a.slice(1).join(`
`).trim();if(u){const f=t.blockTokens(u);c.push(...f)}let h=s+1;const d=[];for(;h<n.length&&n[h].indent>e;)d.push(n[h]),h+=1;if(d.length>0){const f=Math.min(...d.map(g=>g.indent)),p=iD(d,f,t);c.push({type:"list",ordered:!0,start:d[0].number,items:p,raw:d.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:c}),s=h}else s+=1}return i}function gY(n,e){return n.map(t=>{if(t.type!=="list_item")return e.parseChildren([t])[0];const r=[];return t.tokens&&t.tokens.length>0&&t.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var mY="listItem",$k="textStyle",Hk=/^(\d+)\.\s$/,sD=An.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",it(this.options.HTMLAttributes,t),0]:["ol",it(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>{if(n.type!=="list"||!n.ordered)return[];const t=n.start||1,r=n.items?gY(n.items,e):[];return t!==1?{type:"orderedList",attrs:{start:t},content:r}:{type:"orderedList",content:r}},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:n=>{const e=n.match(/^(\s*)(\d+)\.\s+/),t=e==null?void 0:e.index;return t!==void 0?t:-1},tokenize:(n,e,t)=>{var r;const i=n.split(`
`),[s,o]=pY(i);if(s.length===0)return;const a=iD(s,0,t);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(mY,this.editor.getAttributes($k)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Fl({find:Hk,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Fl({find:Hk,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes($k)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),yY=/^\s*(\[([( |x])?\])\s$/,vY=An.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",it(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(n,e)=>{const t=[];if(n.tokens&&n.tokens.length>0?t.push(e.createNode("paragraph",{},e.parseInline(n.tokens))):n.text?t.push(e.createNode("paragraph",{},[e.createNode("text",{text:n.text})])):t.push(e.createNode("paragraph",{},[])),n.nestedTokens&&n.nestedTokens.length>0){const r=e.parseChildren(n.nestedTokens);t.push(...r)}return e.createNode("taskItem",{checked:n.checked||!1},t)},renderMarkdown:(n,e)=>{var t;const i=`- [${(t=n.attrs)!=null&&t.checked?"x":" "}] `;return ex(n,e,i)},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=u=>{var h,d;a.ariaLabel=((d=(h=this.options.a11y)==null?void 0:h.checkboxLabel)==null?void 0:d.call(h,u,a.checked))||`Task item checkbox for ${u.textContent||"empty task item"}`};return c(n),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",u=>u.preventDefault()),a.addEventListener("change",u=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:h}=u.target;r.isEditable&&typeof t=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:d})=>{const f=t();if(typeof f!="number")return!1;const p=d.doc.nodeAt(f);return d.setNodeMarkup(f,void 0,{...p==null?void 0:p.attrs,checked:h}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,h)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,h])=>{i.setAttribute(u,h)}),i.dataset.checked=n.attrs.checked,a.checked=n.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(e).forEach(([u,h])=>{i.setAttribute(u,h)}),{dom:i,contentDOM:l,update:u=>u.type!==this.type?!1:(i.dataset.checked=u.attrs.checked,a.checked=u.attrs.checked,c(u),!0)}}},addInputRules(){return[Fl({find:yY,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),wY=An.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",it(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},parseMarkdown:(n,e)=>e.createNode("taskList",{},e.parseChildren(n.items||[])),renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(n){var e;const t=(e=n.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return t!==void 0?t:-1},tokenize(n,e,t){const r=s=>{const o=Mv(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:t.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},t);return o?[{type:"taskList",raw:o.raw,items:o.items}]:t.blockTokens(s)},i=Mv(n,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:t.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:r},t);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Xe.create({name:"listKit",addExtensions(){const n=[];return this.options.bulletList!==!1&&n.push(XP.configure(this.options.bulletList)),this.options.listItem!==!1&&n.push(JP.configure(this.options.listItem)),this.options.listKeymap!==!1&&n.push(rD.configure(this.options.listKeymap)),this.options.orderedList!==!1&&n.push(sD.configure(this.options.orderedList)),this.options.taskItem!==!1&&n.push(vY.configure(this.options.taskItem)),this.options.taskList!==!1&&n.push(wY.configure(this.options.taskList)),n}});var bY=An.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",it(this.options.HTMLAttributes,n),0]},parseMarkdown:(n,e)=>{const t=n.tokens||[];return t.length===1&&t[0].type==="image"?e.parseChildren([t[0]]):e.createNode("paragraph",void 0,e.parseInline(t))},renderMarkdown:(n,e)=>!n||!Array.isArray(n.content)?"":e.renderChildren(n.content),addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),xY=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,SY=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,CY=ca.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",it(this.options.HTMLAttributes,n),0]},markdownTokenName:"del",parseMarkdown:(n,e)=>e.applyMark("strike",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`~~${e.renderChildren(n)}~~`,addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ll({find:xY,type:this.type})]},addPasteRules(){return[ta({find:SY,type:this.type})]}}),kY=An.create({name:"text",group:"inline",parseMarkdown:n=>({type:"text",text:n.text||""}),renderMarkdown:n=>n.text||""}),TY=ca.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",it(this.options.HTMLAttributes,n),0]},parseMarkdown(n,e){return e.applyMark(this.name||"underline",e.parseInline(n.tokens||[]))},renderMarkdown(n,e){return`++${e.renderChildren(n)}++`},markdownTokenizer:{name:"underline",level:"inline",start(n){return n.indexOf("++")},tokenize(n,e,t){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(n);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:t.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function _Y(n={}){return new Ve({view(e){return new EY(e,n)}})}class EY{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(t){let h=e.nodeBefore,d=e.nodeAfter;if(h||d){let f=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(f){let p=f.getBoundingClientRect(),g=h?p.bottom:p.top;h&&d&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let m=this.width/2*a;r={left:p.left,right:p.right,top:g-m,bottom:g+m}}}}if(!r){let h=this.editorView.coordsAtPos(this.cursorPos),d=this.width/2*o;r={left:h.left-d,right:h.left+d,top:h.top,bottom:h.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let h=l.getBoundingClientRect(),d=h.width/l.offsetWidth,f=h.height/l.offsetHeight;c=h.left-l.scrollLeft*d,u=h.top-l.scrollTop*f}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!s){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=fR(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class He extends ce{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return He.valid(r)?new He(r):ce.near(r)}content(){return q.empty}eq(e){return e instanceof He&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new He(e.resolve(t.pos))}getBookmark(){return new hx(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!OY(e)||!MY(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&He.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(t>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=t;let l=e.doc.resolve(i);if(He.valid(l))return l}for(;;){let o=t>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Q.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=o,i+=t;let a=e.doc.resolve(i);if(He.valid(a))return a}return null}}}He.prototype.visible=!1;He.findFrom=He.findGapCursorFrom;ce.jsonID("gapcursor",He);class hx{constructor(e){this.pos=e}map(e){return new hx(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return He.valid(t)?new He(t):ce.near(t)}}function oD(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function OY(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||oD(i.type))return!0;if(i.inlineContent)return!1}}return!0}function MY(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||oD(i.type))return!0;if(i.inlineContent)return!1}}return!0}function AY(){return new Ve({props:{decorations:NY,createSelectionBetween(n,e,t){return e.pos==t.pos&&He.valid(t)?new He(t):null},handleClick:PY,handleKeyDown:RY,handleDOMEvents:{beforeinput:DY}}})}const RY=aP({ArrowLeft:Ed("horiz",-1),ArrowRight:Ed("horiz",1),ArrowUp:Ed("vert",-1),ArrowDown:Ed("vert",1)});function Ed(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof ne){if(!s.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=He.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new He(c))),!0):!1}}function PY(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!He.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&Q.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new He(r))),!0)}function DY(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof He))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=L.empty;for(let o=r.length-1;o>=0;o--)i=L.from(r[o].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new q(i,0,0));return s.setSelection(ne.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function NY(n){if(!(n.selection instanceof He))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Le.create(n.doc,[Ut.widget(n.selection.head,e,{key:"gapcursor"})])}var Np=200,yt=function(){};yt.prototype.append=function(e){return e.length?(e=yt.from(e),!this.length&&e||e.length<Np&&this.leafAppend(e)||this.length<Np&&e.leafPrepend(this)||this.appendInner(e)):this};yt.prototype.prepend=function(e){return e.length?yt.from(e).append(this):this};yt.prototype.appendInner=function(e){return new IY(this,e)};yt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?yt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};yt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};yt.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};yt.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},t,r),i};yt.from=function(e){return e instanceof yt?e:e&&e.length?new aD(e):yt.empty};var aD=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Np)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Np)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(yt);yt.empty=new aD([]);var IY=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(yt);const jY=500;class yr{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((h,d)=>{if(!h.step){i||(i=this.remapping(r,d+1),s=i.maps.length),s--,u.push(h);return}if(i){u.push(new Ir(h.map));let f=h.step.map(i.slice(s)),p;f&&o.maybeStep(f).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new Ir(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new yr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,t,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let h=e.steps[u].invert(e.docs[u]),d=new Ir(e.mapping.maps[u],h,t),f;(f=l&&l.merge(d))&&(d=f,u?s.pop():a=a.slice(0,a.length-1)),s.push(d),t&&(o++,t=void 0),i||(l=d)}let c=o-r.depth;return c>FY&&(a=LY(a,c),o-=c),new yr(a.append(s),o)}remapping(e,t){let r=new Lu;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,t),r}addMaps(e){return this.eventCount==0?this:new yr(this.items.append(e.map(t=>new Ir(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},i);let l=t;this.items.forEach(d=>{let f=s.getMirror(--l);if(f==null)return;o=Math.min(o,f);let p=s.maps[f];if(d.step){let g=e.steps[f].invert(e.docs[f]),m=d.selection&&d.selection.map(s.slice(l+1,f));m&&a++,r.push(new Ir(p,g,m))}else r.push(new Ir(p))},i);let c=[];for(let d=t;d<o;d++)c.push(new Ir(s.maps[d]));let u=this.items.slice(0,i).append(c).append(r),h=new yr(u,a);return h.emptyItemCount()>jY&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(t.slice(r)),c=l&&l.getMap();if(r--,c&&t.appendMap(c,r),l){let u=o.selection&&o.selection.map(t.slice(r));u&&s++;let h=new Ir(c.invert(),l,u),d,f=i.length-1;(d=i.length&&i[f].merge(h))?i[f]=d:i.push(h)}}else o.map&&r--},this.items.length,0),new yr(yt.from(i.reverse()),s)}}yr.empty=new yr(yt.empty,0);function LY(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Ir{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Ir(t.getMap().invert(),t,this.selection)}}}class us{constructor(e,t,r,i,s){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const FY=20;function WY(n,e,t,r){let i=t.getMeta(Ho),s;if(i)return i.historyState;t.getMeta($Y)&&(n=new us(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(Ho))return o.getMeta(Ho).redo?new us(n.done.addTransform(t,void 0,r,Zd(e)),n.undone,Uk(t.mapping.maps),n.prevTime,n.prevComposition):new us(n.done,n.undone.addTransform(t,void 0,r,Zd(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=n.prevTime==0||!o&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-r.newGroupDelay||!BY(t,n.prevRanges)),c=o?My(n.prevRanges,t.mapping):Uk(t.mapping.maps);return new us(n.done.addTransform(t,l?e.selection.getBookmark():void 0,r,Zd(e)),yr.empty,c,t.time,a??n.prevComposition)}else return(s=t.getMeta("rebased"))?new us(n.done.rebased(t,s),n.undone.rebased(t,s),My(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new us(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),My(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function BY(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function Uk(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,s,o)=>e.push(s,o));return e}function My(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s)}return t}function zY(n,e,t){let r=Zd(e),i=Ho.get(e).spec.config,s=(t?n.undone:n.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(t?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new us(t?a:s.remaining,t?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Ho,{redo:t,historyState:l})}let Ay=!1,Vk=null;function Zd(n){let e=n.plugins;if(Vk!=e){Ay=!1,Vk=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Ay=!0;break}}return Ay}const Ho=new vt("history"),$Y=new vt("closeHistory");function HY(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Ve({key:Ho,state:{init(){return new us(yr.empty,yr.empty,null,0,-1)},apply(e,t,r){return WY(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?cD:r=="historyRedo"?uD:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function lD(n,e){return(t,r)=>{let i=Ho.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let s=zY(i,t,n);s&&r(e?s.scrollIntoView():s)}return!0}}const cD=lD(!1,!0),uD=lD(!0,!0);Xe.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const e=(n==null?void 0:n.node)||this.editor.state.doc;if(((n==null?void 0:n.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=n=>{const e=(n==null?void 0:n.node)||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let n=!1;return[new Ve({key:new vt("characterCount"),appendTransaction:(e,t,r)=>{if(n)return;const i=this.options.limit;if(i==null||i===0){n=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const c=r.tr.deleteRange(a,l);return n=!0,c}n=!0},filterTransaction:(e,t)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:t.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=s-r,c=a-l,u=a;return e.deleteRange(c,u),!(this.storage.characters({node:e.doc})>r)}})]}});var UY=Xe.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[_Y(this.options)]}});Xe.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Ve({key:new vt("focus"),props:{decorations:({doc:n,selection:e})=>{const{isEditable:t,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!t||!r)return Le.create(n,[]);let o=0;this.options.mode==="deepest"&&n.descendants((l,c)=>{if(l.isText)return;if(!(i>=c&&i<=c+l.nodeSize-1))return!1;o+=1});let a=0;return n.descendants((l,c)=>{if(l.isText||!(i>=c&&i<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(Ut.node(c,c+l.nodeSize,{class:this.options.className}))}),Le.create(n,s)}}})]}});var VY=Xe.create({name:"gapCursor",addProseMirrorPlugins(){return[AY()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=ve(J(n,"allowGapCursor",t)))!=null?e:null}}}),GY=Xe.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ve({key:new vt("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!t)return null;const s=this.editor.isEmpty;return n.descendants((o,a)=>{const l=r>=a&&r<=a+o.nodeSize,c=!o.isLeaf&&$g(o);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];s&&u.push(this.options.emptyEditorClass);const h=Ut.node(a,a+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(h)}return this.options.includeChildren}),Le.create(n,i)}}})]}});Xe.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:n,options:e}=this;return[new Ve({key:new vt("selection"),props:{decorations(t){return t.selection.empty||n.isFocused||!n.isEditable||CP(t.selection)||n.view.dragging?null:Le.create(t.doc,[Ut.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}});function Gk({types:n,node:e}){return e&&Array.isArray(n)&&n.includes(e.type)||(e==null?void 0:e.type)===n}var qY=Xe.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var n;const e=new vt(this.name),t=((n=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:n.name)||this.options.node||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(t).includes(i.name));return[new Ve({key:e,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:c}=o,u=e.getState(o),h=a.content.size,d=c.nodes[t];if(u)return l.insert(h,d.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!Gk({node:o,types:r})},apply:(i,s)=>{if(!i.docChanged)return s;const o=i.doc.lastChild;return!Gk({node:o,types:r})}}})]}}),YY=Xe.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>cD(n,e),redo:()=>({state:n,dispatch:e})=>uD(n,e)}},addProseMirrorPlugins(){return[HY(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),KY=Xe.create({name:"starterKit",addExtensions(){var n,e,t,r;const i=[];return this.options.bold!==!1&&i.push(xq.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(mq.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(XP.configure(this.options.bulletList)),this.options.code!==!1&&i.push(kq.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Eq.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(Oq.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(UY.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(VY.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(Mq.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(Aq.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(YY.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(Rq.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(jq.configure(this.options.italic)),this.options.listItem!==!1&&i.push(JP.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(rD.configure((n=this.options)==null?void 0:n.listKeymap)),this.options.link!==!1&&i.push(aY.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(sD.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(bY.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(CY.configure(this.options.strike)),this.options.text!==!1&&i.push(kY.configure(this.options.text)),this.options.underline!==!1&&i.push(TY.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&i.push(qY.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),XY=KY,JY=GY,QY=n=>Ge({find:/--$/,replace:n??""}),ZY=n=>Ge({find:/\.\.\.$/,replace:n??""}),eK=n=>Ge({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:n??""}),tK=n=>Ge({find:/"$/,replace:n??""}),nK=n=>Ge({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:n??""}),rK=n=>Ge({find:/'$/,replace:n??""}),iK=n=>Ge({find:/<-$/,replace:n??""}),sK=n=>Ge({find:/->$/,replace:n??""}),oK=n=>Ge({find:/\(c\)$/,replace:n??""}),aK=n=>Ge({find:/\(tm\)$/,replace:n??""}),lK=n=>Ge({find:/\(sm\)$/,replace:n??""}),cK=n=>Ge({find:/\(r\)$/,replace:n??""}),uK=n=>Ge({find:/(?:^|\s)(1\/2)\s$/,replace:n??""}),hK=n=>Ge({find:/\+\/-$/,replace:n??""}),dK=n=>Ge({find:/!=$/,replace:n??""}),fK=n=>Ge({find:/<<$/,replace:n??""}),pK=n=>Ge({find:/>>$/,replace:n??""}),gK=n=>Ge({find:/\d+\s?([*x])\s?\d+$/,replace:n??""}),mK=n=>Ge({find:/\^2$/,replace:n??""}),yK=n=>Ge({find:/\^3$/,replace:n??""}),vK=n=>Ge({find:/(?:^|\s)(1\/4)\s$/,replace:n??""}),wK=n=>Ge({find:/(?:^|\s)(3\/4)\s$/,replace:n??""}),bK=Xe.create({name:"typography",addOptions(){return{closeDoubleQuote:"",closeSingleQuote:"",copyright:"",ellipsis:"",emDash:"",laquo:"",leftArrow:"",multiplication:"",notEqual:"",oneHalf:"",oneQuarter:"",openDoubleQuote:"",openSingleQuote:"",plusMinus:"",raquo:"",registeredTrademark:"",rightArrow:"",servicemark:"",superscriptThree:"",superscriptTwo:"",threeQuarters:"",trademark:""}},addInputRules(){const n=[];return this.options.emDash!==!1&&n.push(QY(this.options.emDash)),this.options.ellipsis!==!1&&n.push(ZY(this.options.ellipsis)),this.options.openDoubleQuote!==!1&&n.push(eK(this.options.openDoubleQuote)),this.options.closeDoubleQuote!==!1&&n.push(tK(this.options.closeDoubleQuote)),this.options.openSingleQuote!==!1&&n.push(nK(this.options.openSingleQuote)),this.options.closeSingleQuote!==!1&&n.push(rK(this.options.closeSingleQuote)),this.options.leftArrow!==!1&&n.push(iK(this.options.leftArrow)),this.options.rightArrow!==!1&&n.push(sK(this.options.rightArrow)),this.options.copyright!==!1&&n.push(oK(this.options.copyright)),this.options.trademark!==!1&&n.push(aK(this.options.trademark)),this.options.servicemark!==!1&&n.push(lK(this.options.servicemark)),this.options.registeredTrademark!==!1&&n.push(cK(this.options.registeredTrademark)),this.options.oneHalf!==!1&&n.push(uK(this.options.oneHalf)),this.options.plusMinus!==!1&&n.push(hK(this.options.plusMinus)),this.options.notEqual!==!1&&n.push(dK(this.options.notEqual)),this.options.laquo!==!1&&n.push(fK(this.options.laquo)),this.options.raquo!==!1&&n.push(pK(this.options.raquo)),this.options.multiplication!==!1&&n.push(gK(this.options.multiplication)),this.options.superscriptTwo!==!1&&n.push(mK(this.options.superscriptTwo)),this.options.superscriptThree!==!1&&n.push(yK(this.options.superscriptThree)),this.options.oneQuarter!==!1&&n.push(vK(this.options.oneQuarter)),this.options.threeQuarters!==!1&&n.push(wK(this.options.threeQuarters)),n}}),xK=bK;const SK=()=>{const n=yB(),[e,t]=k.useState(!0),[r,i]=k.useState(!1),[s,o]=k.useState("Anonymous"),[a,l]=k.useState(""),c="Anonymous",u=k.useRef(null),h=k.useRef(null),d=hq({extensions:[XY.configure({heading:{levels:[1,2,3]}}),JY.configure({placeholder:"Start typing... "}),xK],content:"",editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none min-h-[calc(100vh-200px)] p-6 text-foreground"}},onUpdate:({editor:y})=>{h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{g(y.getHTML())},3e4)}});k.useEffect(()=>(f(),p(),()=>{u.current&&Ur.removeChannel(u.current),h.current&&clearTimeout(h.current)}),[]);const f=async()=>{try{const{data:y,error:v}=await Ur.from("collaborative_dashboard").select("*").eq("id",1).single();if(v)throw v;y&&d&&(d.commands.setContent(y.content),o(y.last_updated_by),l(y.updated_at))}catch(y){console.error("Error loading content:",y),vr.error("Failed to load dashboard")}finally{t(!1)}},p=()=>{u.current=Ur.channel("collaborative_dashboard_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"collaborative_dashboard",filter:"id=eq.1"},y=>{const v=y.new;v.last_updated_by!==c&&d&&(d.commands.setContent(v.content,!1),o(v.last_updated_by),l(v.updated_at),vr.info(`Updated by ${v.last_updated_by}`))}).subscribe()},g=k.useCallback(async y=>{if(!(!y||r)){i(!0);try{const{error:v}=await Ur.from("collaborative_dashboard").update({content:y,last_updated_by:c}).eq("id",1);if(v)throw v;o(c),l(new Date().toISOString())}catch(v){console.error("Error saving:",v),vr.error("Failed to save changes")}finally{i(!1)}}},[c,r]),m=()=>{d&&(h.current&&clearTimeout(h.current),g(d.getHTML()),vr.success("Saved!",{style:{background:"hsl(330, 100%, 95%)",color:"hsl(330, 70%, 40%)",border:"2px solid hsl(330, 85%, 65%)"}}))};return e?b.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:b.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading dashboard..."})}):b.jsxs("div",{className:"min-h-screen bg-background",children:[b.jsx("div",{className:"win95-border bg-card sticky top-0 z-10 shadow-md",children:b.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-4",children:[b.jsx("div",{className:"flex items-center justify-between mb-3",children:b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsxs("button",{onClick:()=>n("/"),className:"win95-border p-2 hover:bg-accent bg-white flex items-center gap-2",title:"Back to Home",children:[b.jsx(nj,{className:"w-4 h-4"}),b.jsx("span",{className:"text-sm font-bold hidden sm:inline",children:"Home"})]}),b.jsx("h1",{className:"text-xl font-bold text-primary",children:" Collaborative Dashboard"})]})}),b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[b.jsx("button",{onClick:()=>d==null?void 0:d.chain().focus().toggleBold().run(),className:`win95-border p-1 hover:bg-accent ${d!=null&&d.isActive("bold")?"bg-primary/20":"bg-white"}`,title:"Bold",children:b.jsx(YI,{className:"w-4 h-4"})}),b.jsx("button",{onClick:()=>d==null?void 0:d.chain().focus().toggleItalic().run(),className:`win95-border p-1 hover:bg-accent ${d!=null&&d.isActive("italic")?"bg-primary/20":"bg-white"}`,title:"Italic",children:b.jsx(rj,{className:"w-4 h-4"})}),b.jsx("div",{className:"w-px h-6 bg-border mx-1"}),b.jsx("button",{onClick:()=>d==null?void 0:d.chain().focus().toggleHeading({level:1}).run(),className:`win95-border p-1 hover:bg-accent ${d!=null&&d.isActive("heading",{level:1})?"bg-primary/20":"bg-white"}`,title:"Heading 1",children:b.jsx(ej,{className:"w-4 h-4"})}),b.jsx("button",{onClick:()=>d==null?void 0:d.chain().focus().toggleHeading({level:2}).run(),className:`win95-border p-1 hover:bg-accent ${d!=null&&d.isActive("heading",{level:2})?"bg-primary/20":"bg-white"}`,title:"Heading 2",children:b.jsx(tj,{className:"w-4 h-4"})}),b.jsx("div",{className:"w-px h-6 bg-border mx-1"}),b.jsx("button",{onClick:()=>d==null?void 0:d.chain().focus().toggleBulletList().run(),className:`win95-border p-1 hover:bg-accent ${d!=null&&d.isActive("bulletList")?"bg-primary/20":"bg-white"}`,title:"Bullet List",children:b.jsx(oj,{className:"w-4 h-4"})}),b.jsx("button",{onClick:()=>d==null?void 0:d.chain().focus().toggleOrderedList().run(),className:`win95-border p-1 hover:bg-accent ${d!=null&&d.isActive("orderedList")?"bg-primary/20":"bg-white"}`,title:"Numbered List",children:b.jsx(sj,{className:"w-4 h-4"})}),b.jsx("button",{onClick:()=>d==null?void 0:d.chain().focus().toggleBlockquote().run(),className:`win95-border p-1 hover:bg-accent ${d!=null&&d.isActive("blockquote")?"bg-primary/20":"bg-white"}`,title:"Quote",children:b.jsx(cj,{className:"w-4 h-4"})}),b.jsx("div",{className:"w-px h-6 bg-border mx-1"}),b.jsx("button",{onClick:()=>d==null?void 0:d.chain().focus().undo().run(),disabled:!(d!=null&&d.can().undo()),className:"win95-border p-1 hover:bg-accent bg-white disabled:opacity-50",title:"Undo",children:b.jsx(gj,{className:"w-4 h-4"})}),b.jsx("button",{onClick:()=>d==null?void 0:d.chain().focus().redo().run(),disabled:!(d!=null&&d.can().redo()),className:"win95-border p-1 hover:bg-accent bg-white disabled:opacity-50",title:"Redo",children:b.jsx(uj,{className:"w-4 h-4"})}),b.jsx("div",{className:"w-px h-6 bg-border mx-1"}),b.jsxs("button",{onClick:m,disabled:r,className:"win95-border p-1 px-2 hover:bg-accent bg-white disabled:opacity-50 flex items-center gap-1",title:"Save Now",children:[b.jsx(hj,{className:"w-4 h-4"}),b.jsx("span",{className:"text-xs hidden sm:inline",children:r?"Saving...":"Save"})]})]}),b.jsxs("div",{className:"text-xs text-muted-foreground hidden md:block",children:[s!==c&&b.jsxs("span",{children:["Last updated by ",s]}),a&&b.jsx("span",{className:"ml-2",children:new Date(a).toLocaleString()})]})]})]})}),b.jsx("div",{className:"mx-auto px-6",children:b.jsx("div",{className:"win95-border-inset bg-white my-6",children:b.jsx(iq,{editor:d})})}),b.jsx("div",{className:"fixed bottom-0 left-0 right-0 win95-border bg-muted py-2 px-6",children:b.jsx("div",{className:"max-w-5xl mx-auto",children:b.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"This is a collaborative space. Anyone can edit! Changes auto-save after 30 seconds."})})})]})},CK=()=>{const n=eb();return k.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:b.jsxs("div",{className:"text-center",children:[b.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),b.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),b.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},kK=new BW,TK=()=>b.jsx($W,{client:kK,children:b.jsxs(mW,{children:[b.jsx(Zj,{}),b.jsx(RL,{}),b.jsx(jB,{children:b.jsxs(DB,{children:[b.jsx(Hd,{path:"/",element:b.jsx(EU,{})}),b.jsx(Hd,{path:"/dashboard",element:b.jsx(SK,{})}),b.jsx(Hd,{path:"*",element:b.jsx(CK,{})})]})})]})});gE(document.getElementById("root")).render(b.jsx(TK,{}));
