var ym=n=>{throw TypeError(n)};var Fh=(n,e,t)=>e.has(n)||ym("Cannot "+t);var j=(n,e,t)=>(Fh(n,e,"read from private field"),t?t.call(n):e.get(n)),ae=(n,e,t)=>e.has(n)?ym("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),ee=(n,e,t,r)=>(Fh(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Ze=(n,e,t)=>(Fh(n,e,"access private method"),t);var Tl=(n,e,t,r)=>({set _(i){ee(n,e,i,t)},get _(){return j(n,e,r)}});function T1(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var nn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function M0(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var j0={exports:{}},Bu={},L0={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=Symbol.for("react.element"),k1=Symbol.for("react.portal"),E1=Symbol.for("react.fragment"),R1=Symbol.for("react.strict_mode"),P1=Symbol.for("react.profiler"),O1=Symbol.for("react.provider"),A1=Symbol.for("react.context"),D1=Symbol.for("react.forward_ref"),M1=Symbol.for("react.suspense"),j1=Symbol.for("react.memo"),L1=Symbol.for("react.lazy"),vm=Symbol.iterator;function N1(n){return n===null||typeof n!="object"?null:(n=vm&&n[vm]||n["@@iterator"],typeof n=="function"?n:null)}var N0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W0=Object.assign,I0={};function Do(n,e,t){this.props=n,this.context=e,this.refs=I0,this.updater=t||N0}Do.prototype.isReactComponent={};Do.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Do.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function F0(){}F0.prototype=Do.prototype;function Ep(n,e,t){this.props=n,this.context=e,this.refs=I0,this.updater=t||N0}var Rp=Ep.prototype=new F0;Rp.constructor=Ep;W0(Rp,Do.prototype);Rp.isPureReactComponent=!0;var wm=Array.isArray,B0=Object.prototype.hasOwnProperty,Pp={current:null},z0={key:!0,ref:!0,__self:!0,__source:!0};function $0(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)B0.call(e,r)&&!z0.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:cl,type:n,key:s,ref:o,props:i,_owner:Pp.current}}function W1(n,e){return{$$typeof:cl,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Op(n){return typeof n=="object"&&n!==null&&n.$$typeof===cl}function I1(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var xm=/\/+/g;function Bh(n,e){return typeof n=="object"&&n!==null&&n.key!=null?I1(""+n.key):e.toString(36)}function Ec(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case cl:case k1:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Bh(o,0):r,wm(i)?(t="",n!=null&&(t=n.replace(xm,"$&/")+"/"),Ec(i,e,t,"",function(c){return c})):i!=null&&(Op(i)&&(i=W1(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(xm,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",wm(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Bh(s,a);o+=Ec(s,e,t,l,i)}else if(l=N1(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Bh(s,a++),o+=Ec(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function kl(n,e,t){if(n==null)return n;var r=[],i=0;return Ec(n,r,"","",function(s){return e.call(t,s,i++)}),r}function F1(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var gt={current:null},Rc={transition:null},B1={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:Rc,ReactCurrentOwner:Pp};function H0(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:kl,forEach:function(n,e,t){kl(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return kl(n,function(){e++}),e},toArray:function(n){return kl(n,function(e){return e})||[]},only:function(n){if(!Op(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};re.Component=Do;re.Fragment=E1;re.Profiler=P1;re.PureComponent=Ep;re.StrictMode=R1;re.Suspense=M1;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B1;re.act=H0;re.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=W0({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Pp.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)B0.call(e,l)&&!z0.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:cl,type:n.type,key:i,ref:s,props:r,_owner:o}};re.createContext=function(n){return n={$$typeof:A1,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:O1,_context:n},n.Consumer=n};re.createElement=$0;re.createFactory=function(n){var e=$0.bind(null,n);return e.type=n,e};re.createRef=function(){return{current:null}};re.forwardRef=function(n){return{$$typeof:D1,render:n}};re.isValidElement=Op;re.lazy=function(n){return{$$typeof:L1,_payload:{_status:-1,_result:n},_init:F1}};re.memo=function(n,e){return{$$typeof:j1,type:n,compare:e===void 0?null:e}};re.startTransition=function(n){var e=Rc.transition;Rc.transition={};try{n()}finally{Rc.transition=e}};re.unstable_act=H0;re.useCallback=function(n,e){return gt.current.useCallback(n,e)};re.useContext=function(n){return gt.current.useContext(n)};re.useDebugValue=function(){};re.useDeferredValue=function(n){return gt.current.useDeferredValue(n)};re.useEffect=function(n,e){return gt.current.useEffect(n,e)};re.useId=function(){return gt.current.useId()};re.useImperativeHandle=function(n,e,t){return gt.current.useImperativeHandle(n,e,t)};re.useInsertionEffect=function(n,e){return gt.current.useInsertionEffect(n,e)};re.useLayoutEffect=function(n,e){return gt.current.useLayoutEffect(n,e)};re.useMemo=function(n,e){return gt.current.useMemo(n,e)};re.useReducer=function(n,e,t){return gt.current.useReducer(n,e,t)};re.useRef=function(n){return gt.current.useRef(n)};re.useState=function(n){return gt.current.useState(n)};re.useSyncExternalStore=function(n,e,t){return gt.current.useSyncExternalStore(n,e,t)};re.useTransition=function(){return gt.current.useTransition()};re.version="18.3.1";L0.exports=re;var C=L0.exports;const F=kp(C),U0=T1({__proto__:null,default:F},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z1=C,$1=Symbol.for("react.element"),H1=Symbol.for("react.fragment"),U1=Object.prototype.hasOwnProperty,V1=z1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,G1={key:!0,ref:!0,__self:!0,__source:!0};function V0(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)U1.call(e,r)&&!G1.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:$1,type:n,key:s,ref:o,props:i,_owner:V1.current}}Bu.Fragment=H1;Bu.jsx=V0;Bu.jsxs=V0;j0.exports=Bu;var x=j0.exports,G0={exports:{}},Ut={},Y0={exports:{}},X0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,D){var I=O.length;O.push(D);e:for(;0<I;){var q=I-1>>>1,Y=O[q];if(0<i(Y,D))O[q]=D,O[I]=Y,I=q;else break e}}function t(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var D=O[0],I=O.pop();if(I!==D){O[0]=I;e:for(var q=0,Y=O.length,Q=Y>>>1;q<Q;){var K=2*(q+1)-1,ge=O[K],we=K+1,ie=O[we];if(0>i(ge,I))we<Y&&0>i(ie,ge)?(O[q]=ie,O[we]=I,q=we):(O[q]=ge,O[K]=I,q=K);else if(we<Y&&0>i(ie,I))O[q]=ie,O[we]=I,q=we;else break e}}return D}function i(O,D){var I=O.sortIndex-D.sortIndex;return I!==0?I:O.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,g=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var D=t(c);D!==null;){if(D.callback===null)r(c);else if(D.startTime<=O)r(c),D.sortIndex=D.expirationTime,e(l,D);else break;D=t(c)}}function b(O){if(p=!1,w(O),!g)if(t(l)!==null)g=!0,$(S);else{var D=t(c);D!==null&&H(b,D.startTime-O)}}function S(O,D){g=!1,p&&(p=!1,v(R),R=-1),f=!0;var I=d;try{for(w(D),h=t(l);h!==null&&(!(h.expirationTime>D)||O&&!B());){var q=h.callback;if(typeof q=="function"){h.callback=null,d=h.priorityLevel;var Y=q(h.expirationTime<=D);D=n.unstable_now(),typeof Y=="function"?h.callback=Y:h===t(l)&&r(l),w(D)}else r(l);h=t(l)}if(h!==null)var Q=!0;else{var K=t(c);K!==null&&H(b,K.startTime-D),Q=!1}return Q}finally{h=null,d=I,f=!1}}var _=!1,T=null,R=-1,A=5,M=-1;function B(){return!(n.unstable_now()-M<A)}function L(){if(T!==null){var O=n.unstable_now();M=O;var D=!0;try{D=T(!0,O)}finally{D?z():(_=!1,T=null)}}else _=!1}var z;if(typeof m=="function")z=function(){m(L)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,G=N.port2;N.port1.onmessage=L,z=function(){G.postMessage(null)}}else z=function(){y(L,0)};function $(O){T=O,_||(_=!0,z())}function H(O,D){R=y(function(){O(n.unstable_now())},D)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){g||f||(g=!0,$(S))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(d){case 1:case 2:case 3:var D=3;break;default:D=d}var I=d;d=D;try{return O()}finally{d=I}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,D){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var I=d;d=O;try{return D()}finally{d=I}},n.unstable_scheduleCallback=function(O,D,I){var q=n.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?q+I:q):I=q,O){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=I+Y,O={id:u++,callback:D,priorityLevel:O,startTime:I,expirationTime:Y,sortIndex:-1},I>q?(O.sortIndex=I,e(c,O),t(l)===null&&O===t(c)&&(p?(v(R),R=-1):p=!0,H(b,I-q))):(O.sortIndex=Y,e(l,O),g||f||(g=!0,$(S))),O},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(O){var D=d;return function(){var I=d;d=D;try{return O.apply(this,arguments)}finally{d=I}}}})(X0);Y0.exports=X0;var Y1=Y0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1=C,Ht=Y1;function W(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var q0=new Set,Da={};function hs(n,e){bo(n,e),bo(n+"Capture",e)}function bo(n,e){for(Da[n]=e,n=0;n<e.length;n++)q0.add(e[n])}var vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vd=Object.prototype.hasOwnProperty,q1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bm={},Sm={};function K1(n){return Vd.call(Sm,n)?!0:Vd.call(bm,n)?!1:q1.test(n)?Sm[n]=!0:(bm[n]=!0,!1)}function J1(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Q1(n,e,t,r){if(e===null||typeof e>"u"||J1(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mt(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ke[n]=new mt(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ke[e]=new mt(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ke[n]=new mt(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ke[n]=new mt(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ke[n]=new mt(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ke[n]=new mt(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ke[n]=new mt(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ke[n]=new mt(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ke[n]=new mt(n,5,!1,n.toLowerCase(),null,!1,!1)});var Ap=/[\-:]([a-z])/g;function Dp(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Ap,Dp);Ke[e]=new mt(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Ap,Dp);Ke[e]=new mt(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Ap,Dp);Ke[e]=new mt(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ke[n]=new mt(n,1,!1,n.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ke[n]=new mt(n,1,!1,n.toLowerCase(),null,!0,!0)});function Mp(n,e,t,r){var i=Ke.hasOwnProperty(e)?Ke[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Q1(e,t,i,r)&&(t=null),r||i===null?K1(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Rr=X1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,El=Symbol.for("react.element"),Ns=Symbol.for("react.portal"),Ws=Symbol.for("react.fragment"),jp=Symbol.for("react.strict_mode"),Gd=Symbol.for("react.profiler"),K0=Symbol.for("react.provider"),J0=Symbol.for("react.context"),Lp=Symbol.for("react.forward_ref"),Yd=Symbol.for("react.suspense"),Xd=Symbol.for("react.suspense_list"),Np=Symbol.for("react.memo"),Xr=Symbol.for("react.lazy"),Q0=Symbol.for("react.offscreen"),_m=Symbol.iterator;function qo(n){return n===null||typeof n!="object"?null:(n=_m&&n[_m]||n["@@iterator"],typeof n=="function"?n:null)}var ke=Object.assign,zh;function ca(n){if(zh===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);zh=e&&e[1]||""}return`
`+zh+n}var $h=!1;function Hh(n,e){if(!n||$h)return"";$h=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{$h=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?ca(n):""}function Z1(n){switch(n.tag){case 5:return ca(n.type);case 16:return ca("Lazy");case 13:return ca("Suspense");case 19:return ca("SuspenseList");case 0:case 2:case 15:return n=Hh(n.type,!1),n;case 11:return n=Hh(n.type.render,!1),n;case 1:return n=Hh(n.type,!0),n;default:return""}}function qd(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ws:return"Fragment";case Ns:return"Portal";case Gd:return"Profiler";case jp:return"StrictMode";case Yd:return"Suspense";case Xd:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case J0:return(n.displayName||"Context")+".Consumer";case K0:return(n._context.displayName||"Context")+".Provider";case Lp:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Np:return e=n.displayName||null,e!==null?e:qd(n.type)||"Memo";case Xr:e=n._payload,n=n._init;try{return qd(n(e))}catch{}}return null}function eC(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qd(e);case 8:return e===jp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mi(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Z0(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tC(n){var e=Z0(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Rl(n){n._valueTracker||(n._valueTracker=tC(n))}function ew(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Z0(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Yc(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Kd(n,e){var t=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Cm(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=mi(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tw(n,e){e=e.checked,e!=null&&Mp(n,"checked",e,!1)}function Jd(n,e){tw(n,e);var t=mi(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Qd(n,e.type,t):e.hasOwnProperty("defaultValue")&&Qd(n,e.type,mi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Tm(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Qd(n,e,t){(e!=="number"||Yc(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var ua=Array.isArray;function Zs(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+mi(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Zd(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function km(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(W(92));if(ua(t)){if(1<t.length)throw Error(W(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:mi(t)}}function nw(n,e){var t=mi(e.value),r=mi(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Em(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function rw(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ef(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?rw(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Pl,iw=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Pl=Pl||document.createElement("div"),Pl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pl.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ma(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ga={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nC=["Webkit","ms","Moz","O"];Object.keys(ga).forEach(function(n){nC.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ga[e]=ga[n]})});function sw(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ga.hasOwnProperty(n)&&ga[n]?(""+e).trim():e+"px"}function ow(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=sw(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var rC=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tf(n,e){if(e){if(rC[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function nf(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rf=null;function Wp(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var sf=null,eo=null,to=null;function Rm(n){if(n=dl(n)){if(typeof sf!="function")throw Error(W(280));var e=n.stateNode;e&&(e=Vu(e),sf(n.stateNode,n.type,e))}}function aw(n){eo?to?to.push(n):to=[n]:eo=n}function lw(){if(eo){var n=eo,e=to;if(to=eo=null,Rm(n),e)for(n=0;n<e.length;n++)Rm(e[n])}}function cw(n,e){return n(e)}function uw(){}var Uh=!1;function hw(n,e,t){if(Uh)return n(e,t);Uh=!0;try{return cw(n,e,t)}finally{Uh=!1,(eo!==null||to!==null)&&(uw(),lw())}}function ja(n,e){var t=n.stateNode;if(t===null)return null;var r=Vu(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(W(231,e,typeof t));return t}var of=!1;if(vr)try{var Ko={};Object.defineProperty(Ko,"passive",{get:function(){of=!0}}),window.addEventListener("test",Ko,Ko),window.removeEventListener("test",Ko,Ko)}catch{of=!1}function iC(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var ma=!1,Xc=null,qc=!1,af=null,sC={onError:function(n){ma=!0,Xc=n}};function oC(n,e,t,r,i,s,o,a,l){ma=!1,Xc=null,iC.apply(sC,arguments)}function aC(n,e,t,r,i,s,o,a,l){if(oC.apply(this,arguments),ma){if(ma){var c=Xc;ma=!1,Xc=null}else throw Error(W(198));qc||(qc=!0,af=c)}}function ds(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function dw(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Pm(n){if(ds(n)!==n)throw Error(W(188))}function lC(n){var e=n.alternate;if(!e){if(e=ds(n),e===null)throw Error(W(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Pm(i),n;if(s===r)return Pm(i),e;s=s.sibling}throw Error(W(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(t.alternate!==r)throw Error(W(190))}if(t.tag!==3)throw Error(W(188));return t.stateNode.current===t?n:e}function fw(n){return n=lC(n),n!==null?pw(n):null}function pw(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=pw(n);if(e!==null)return e;n=n.sibling}return null}var gw=Ht.unstable_scheduleCallback,Om=Ht.unstable_cancelCallback,cC=Ht.unstable_shouldYield,uC=Ht.unstable_requestPaint,Ae=Ht.unstable_now,hC=Ht.unstable_getCurrentPriorityLevel,Ip=Ht.unstable_ImmediatePriority,mw=Ht.unstable_UserBlockingPriority,Kc=Ht.unstable_NormalPriority,dC=Ht.unstable_LowPriority,yw=Ht.unstable_IdlePriority,zu=null,Yn=null;function fC(n){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(zu,n,void 0,(n.current.flags&128)===128)}catch{}}var Rn=Math.clz32?Math.clz32:mC,pC=Math.log,gC=Math.LN2;function mC(n){return n>>>=0,n===0?32:31-(pC(n)/gC|0)|0}var Ol=64,Al=4194304;function ha(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Jc(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=ha(a):(s&=o,s!==0&&(r=ha(s)))}else o=t&~i,o!==0?r=ha(o):s!==0&&(r=ha(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Rn(e),i=1<<t,r|=n[t],e&=~i;return r}function yC(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vC(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Rn(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=yC(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function lf(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function vw(){var n=Ol;return Ol<<=1,!(Ol&4194240)&&(Ol=64),n}function Vh(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function ul(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Rn(e),n[e]=t}function wC(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Rn(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function Fp(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Rn(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var ue=0;function ww(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var xw,Bp,bw,Sw,_w,cf=!1,Dl=[],li=null,ci=null,ui=null,La=new Map,Na=new Map,Kr=[],xC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Am(n,e){switch(n){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":La.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Na.delete(e.pointerId)}}function Jo(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=dl(e),e!==null&&Bp(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function bC(n,e,t,r,i){switch(e){case"focusin":return li=Jo(li,n,e,t,r,i),!0;case"dragenter":return ci=Jo(ci,n,e,t,r,i),!0;case"mouseover":return ui=Jo(ui,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return La.set(s,Jo(La.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Na.set(s,Jo(Na.get(s)||null,n,e,t,r,i)),!0}return!1}function Cw(n){var e=zi(n.target);if(e!==null){var t=ds(e);if(t!==null){if(e=t.tag,e===13){if(e=dw(t),e!==null){n.blockedOn=e,_w(n.priority,function(){bw(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Pc(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=uf(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);rf=r,t.target.dispatchEvent(r),rf=null}else return e=dl(t),e!==null&&Bp(e),n.blockedOn=t,!1;e.shift()}return!0}function Dm(n,e,t){Pc(n)&&t.delete(e)}function SC(){cf=!1,li!==null&&Pc(li)&&(li=null),ci!==null&&Pc(ci)&&(ci=null),ui!==null&&Pc(ui)&&(ui=null),La.forEach(Dm),Na.forEach(Dm)}function Qo(n,e){n.blockedOn===e&&(n.blockedOn=null,cf||(cf=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,SC)))}function Wa(n){function e(i){return Qo(i,n)}if(0<Dl.length){Qo(Dl[0],n);for(var t=1;t<Dl.length;t++){var r=Dl[t];r.blockedOn===n&&(r.blockedOn=null)}}for(li!==null&&Qo(li,n),ci!==null&&Qo(ci,n),ui!==null&&Qo(ui,n),La.forEach(e),Na.forEach(e),t=0;t<Kr.length;t++)r=Kr[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Kr.length&&(t=Kr[0],t.blockedOn===null);)Cw(t),t.blockedOn===null&&Kr.shift()}var no=Rr.ReactCurrentBatchConfig,Qc=!0;function _C(n,e,t,r){var i=ue,s=no.transition;no.transition=null;try{ue=1,zp(n,e,t,r)}finally{ue=i,no.transition=s}}function CC(n,e,t,r){var i=ue,s=no.transition;no.transition=null;try{ue=4,zp(n,e,t,r)}finally{ue=i,no.transition=s}}function zp(n,e,t,r){if(Qc){var i=uf(n,e,t,r);if(i===null)td(n,e,r,Zc,t),Am(n,r);else if(bC(i,n,e,t,r))r.stopPropagation();else if(Am(n,r),e&4&&-1<xC.indexOf(n)){for(;i!==null;){var s=dl(i);if(s!==null&&xw(s),s=uf(n,e,t,r),s===null&&td(n,e,r,Zc,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else td(n,e,r,null,t)}}var Zc=null;function uf(n,e,t,r){if(Zc=null,n=Wp(r),n=zi(n),n!==null)if(e=ds(n),e===null)n=null;else if(t=e.tag,t===13){if(n=dw(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Zc=n,null}function Tw(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hC()){case Ip:return 1;case mw:return 4;case Kc:case dC:return 16;case yw:return 536870912;default:return 16}default:return 16}}var si=null,$p=null,Oc=null;function kw(){if(Oc)return Oc;var n,e=$p,t=e.length,r,i="value"in si?si.value:si.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Oc=i.slice(n,1<r?1-r:void 0)}function Ac(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Ml(){return!0}function Mm(){return!1}function Vt(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ml:Mm,this.isPropagationStopped=Mm,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),e}var Mo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hp=Vt(Mo),hl=ke({},Mo,{view:0,detail:0}),TC=Vt(hl),Gh,Yh,Zo,$u=ke({},hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Up,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Zo&&(Zo&&n.type==="mousemove"?(Gh=n.screenX-Zo.screenX,Yh=n.screenY-Zo.screenY):Yh=Gh=0,Zo=n),Gh)},movementY:function(n){return"movementY"in n?n.movementY:Yh}}),jm=Vt($u),kC=ke({},$u,{dataTransfer:0}),EC=Vt(kC),RC=ke({},hl,{relatedTarget:0}),Xh=Vt(RC),PC=ke({},Mo,{animationName:0,elapsedTime:0,pseudoElement:0}),OC=Vt(PC),AC=ke({},Mo,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),DC=Vt(AC),MC=ke({},Mo,{data:0}),Lm=Vt(MC),jC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WC(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=NC[n])?!!e[n]:!1}function Up(){return WC}var IC=ke({},hl,{key:function(n){if(n.key){var e=jC[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Ac(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?LC[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Up,charCode:function(n){return n.type==="keypress"?Ac(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ac(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),FC=Vt(IC),BC=ke({},$u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nm=Vt(BC),zC=ke({},hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Up}),$C=Vt(zC),HC=ke({},Mo,{propertyName:0,elapsedTime:0,pseudoElement:0}),UC=Vt(HC),VC=ke({},$u,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),GC=Vt(VC),YC=[9,13,27,32],Vp=vr&&"CompositionEvent"in window,ya=null;vr&&"documentMode"in document&&(ya=document.documentMode);var XC=vr&&"TextEvent"in window&&!ya,Ew=vr&&(!Vp||ya&&8<ya&&11>=ya),Wm=" ",Im=!1;function Rw(n,e){switch(n){case"keyup":return YC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pw(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Is=!1;function qC(n,e){switch(n){case"compositionend":return Pw(e);case"keypress":return e.which!==32?null:(Im=!0,Wm);case"textInput":return n=e.data,n===Wm&&Im?null:n;default:return null}}function KC(n,e){if(Is)return n==="compositionend"||!Vp&&Rw(n,e)?(n=kw(),Oc=$p=si=null,Is=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ew&&e.locale!=="ko"?null:e.data;default:return null}}var JC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fm(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!JC[n.type]:e==="textarea"}function Ow(n,e,t,r){aw(r),e=eu(e,"onChange"),0<e.length&&(t=new Hp("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var va=null,Ia=null;function QC(n){zw(n,0)}function Hu(n){var e=zs(n);if(ew(e))return n}function ZC(n,e){if(n==="change")return e}var Aw=!1;if(vr){var qh;if(vr){var Kh="oninput"in document;if(!Kh){var Bm=document.createElement("div");Bm.setAttribute("oninput","return;"),Kh=typeof Bm.oninput=="function"}qh=Kh}else qh=!1;Aw=qh&&(!document.documentMode||9<document.documentMode)}function zm(){va&&(va.detachEvent("onpropertychange",Dw),Ia=va=null)}function Dw(n){if(n.propertyName==="value"&&Hu(Ia)){var e=[];Ow(e,Ia,n,Wp(n)),hw(QC,e)}}function eT(n,e,t){n==="focusin"?(zm(),va=e,Ia=t,va.attachEvent("onpropertychange",Dw)):n==="focusout"&&zm()}function tT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hu(Ia)}function nT(n,e){if(n==="click")return Hu(e)}function rT(n,e){if(n==="input"||n==="change")return Hu(e)}function iT(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var An=typeof Object.is=="function"?Object.is:iT;function Fa(n,e){if(An(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Vd.call(e,i)||!An(n[i],e[i]))return!1}return!0}function $m(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hm(n,e){var t=$m(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=$m(t)}}function Mw(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Mw(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function jw(){for(var n=window,e=Yc();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Yc(n.document)}return e}function Gp(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function sT(n){var e=jw(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Mw(t.ownerDocument.documentElement,t)){if(r!==null&&Gp(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Hm(t,s);var o=Hm(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var oT=vr&&"documentMode"in document&&11>=document.documentMode,Fs=null,hf=null,wa=null,df=!1;function Um(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;df||Fs==null||Fs!==Yc(r)||(r=Fs,"selectionStart"in r&&Gp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wa&&Fa(wa,r)||(wa=r,r=eu(hf,"onSelect"),0<r.length&&(e=new Hp("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Fs)))}function jl(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Bs={animationend:jl("Animation","AnimationEnd"),animationiteration:jl("Animation","AnimationIteration"),animationstart:jl("Animation","AnimationStart"),transitionend:jl("Transition","TransitionEnd")},Jh={},Lw={};vr&&(Lw=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function Uu(n){if(Jh[n])return Jh[n];if(!Bs[n])return n;var e=Bs[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Lw)return Jh[n]=e[t];return n}var Nw=Uu("animationend"),Ww=Uu("animationiteration"),Iw=Uu("animationstart"),Fw=Uu("transitionend"),Bw=new Map,Vm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ci(n,e){Bw.set(n,e),hs(e,[n])}for(var Qh=0;Qh<Vm.length;Qh++){var Zh=Vm[Qh],aT=Zh.toLowerCase(),lT=Zh[0].toUpperCase()+Zh.slice(1);Ci(aT,"on"+lT)}Ci(Nw,"onAnimationEnd");Ci(Ww,"onAnimationIteration");Ci(Iw,"onAnimationStart");Ci("dblclick","onDoubleClick");Ci("focusin","onFocus");Ci("focusout","onBlur");Ci(Fw,"onTransitionEnd");bo("onMouseEnter",["mouseout","mouseover"]);bo("onMouseLeave",["mouseout","mouseover"]);bo("onPointerEnter",["pointerout","pointerover"]);bo("onPointerLeave",["pointerout","pointerover"]);hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cT=new Set("cancel close invalid load scroll toggle".split(" ").concat(da));function Gm(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,aC(r,e,void 0,n),n.currentTarget=null}function zw(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Gm(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Gm(i,a,c),s=l}}}if(qc)throw n=af,qc=!1,af=null,n}function ye(n,e){var t=e[yf];t===void 0&&(t=e[yf]=new Set);var r=n+"__bubble";t.has(r)||($w(e,n,2,!1),t.add(r))}function ed(n,e,t){var r=0;e&&(r|=4),$w(t,n,r,e)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function Ba(n){if(!n[Ll]){n[Ll]=!0,q0.forEach(function(t){t!=="selectionchange"&&(cT.has(t)||ed(t,!1,n),ed(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Ll]||(e[Ll]=!0,ed("selectionchange",!1,e))}}function $w(n,e,t,r){switch(Tw(e)){case 1:var i=_C;break;case 4:i=CC;break;default:i=zp}t=i.bind(null,e,t,n),i=void 0,!of||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function td(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=zi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}hw(function(){var c=s,u=Wp(t),h=[];e:{var d=Bw.get(n);if(d!==void 0){var f=Hp,g=n;switch(n){case"keypress":if(Ac(t)===0)break e;case"keydown":case"keyup":f=FC;break;case"focusin":g="focus",f=Xh;break;case"focusout":g="blur",f=Xh;break;case"beforeblur":case"afterblur":f=Xh;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=jm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=EC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=$C;break;case Nw:case Ww:case Iw:f=OC;break;case Fw:f=UC;break;case"scroll":f=TC;break;case"wheel":f=GC;break;case"copy":case"cut":case"paste":f=DC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Nm}var p=(e&4)!==0,y=!p&&n==="scroll",v=p?d!==null?d+"Capture":null:d;p=[];for(var m=c,w;m!==null;){w=m;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,v!==null&&(b=ja(m,v),b!=null&&p.push(za(m,b,w)))),y)break;m=m.return}0<p.length&&(d=new f(d,g,null,t,u),h.push({event:d,listeners:p}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",d&&t!==rf&&(g=t.relatedTarget||t.fromElement)&&(zi(g)||g[wr]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(g=t.relatedTarget||t.toElement,f=c,g=g?zi(g):null,g!==null&&(y=ds(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=c),f!==g)){if(p=jm,b="onMouseLeave",v="onMouseEnter",m="mouse",(n==="pointerout"||n==="pointerover")&&(p=Nm,b="onPointerLeave",v="onPointerEnter",m="pointer"),y=f==null?d:zs(f),w=g==null?d:zs(g),d=new p(b,m+"leave",f,t,u),d.target=y,d.relatedTarget=w,b=null,zi(u)===c&&(p=new p(v,m+"enter",g,t,u),p.target=w,p.relatedTarget=y,b=p),y=b,f&&g)t:{for(p=f,v=g,m=0,w=p;w;w=Ss(w))m++;for(w=0,b=v;b;b=Ss(b))w++;for(;0<m-w;)p=Ss(p),m--;for(;0<w-m;)v=Ss(v),w--;for(;m--;){if(p===v||v!==null&&p===v.alternate)break t;p=Ss(p),v=Ss(v)}p=null}else p=null;f!==null&&Ym(h,d,f,p,!1),g!==null&&y!==null&&Ym(h,y,g,p,!0)}}e:{if(d=c?zs(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var S=ZC;else if(Fm(d))if(Aw)S=rT;else{S=tT;var _=eT}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=nT);if(S&&(S=S(n,c))){Ow(h,S,t,u);break e}_&&_(n,d,c),n==="focusout"&&(_=d._wrapperState)&&_.controlled&&d.type==="number"&&Qd(d,"number",d.value)}switch(_=c?zs(c):window,n){case"focusin":(Fm(_)||_.contentEditable==="true")&&(Fs=_,hf=c,wa=null);break;case"focusout":wa=hf=Fs=null;break;case"mousedown":df=!0;break;case"contextmenu":case"mouseup":case"dragend":df=!1,Um(h,t,u);break;case"selectionchange":if(oT)break;case"keydown":case"keyup":Um(h,t,u)}var T;if(Vp)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Is?Rw(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(Ew&&t.locale!=="ko"&&(Is||R!=="onCompositionStart"?R==="onCompositionEnd"&&Is&&(T=kw()):(si=u,$p="value"in si?si.value:si.textContent,Is=!0)),_=eu(c,R),0<_.length&&(R=new Lm(R,n,null,t,u),h.push({event:R,listeners:_}),T?R.data=T:(T=Pw(t),T!==null&&(R.data=T)))),(T=XC?qC(n,t):KC(n,t))&&(c=eu(c,"onBeforeInput"),0<c.length&&(u=new Lm("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=T))}zw(h,e)})}function za(n,e,t){return{instance:n,listener:e,currentTarget:t}}function eu(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ja(n,t),s!=null&&r.unshift(za(n,s,i)),s=ja(n,e),s!=null&&r.push(za(n,s,i))),n=n.return}return r}function Ss(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ym(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ja(t,s),l!=null&&o.unshift(za(t,l,a))):i||(l=ja(t,s),l!=null&&o.push(za(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var uT=/\r\n?/g,hT=/\u0000|\uFFFD/g;function Xm(n){return(typeof n=="string"?n:""+n).replace(uT,`
`).replace(hT,"")}function Nl(n,e,t){if(e=Xm(e),Xm(n)!==e&&t)throw Error(W(425))}function tu(){}var ff=null,pf=null;function gf(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mf=typeof setTimeout=="function"?setTimeout:void 0,dT=typeof clearTimeout=="function"?clearTimeout:void 0,qm=typeof Promise=="function"?Promise:void 0,fT=typeof queueMicrotask=="function"?queueMicrotask:typeof qm<"u"?function(n){return qm.resolve(null).then(n).catch(pT)}:mf;function pT(n){setTimeout(function(){throw n})}function nd(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Wa(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Wa(e)}function hi(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Km(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var jo=Math.random().toString(36).slice(2),Hn="__reactFiber$"+jo,$a="__reactProps$"+jo,wr="__reactContainer$"+jo,yf="__reactEvents$"+jo,gT="__reactListeners$"+jo,mT="__reactHandles$"+jo;function zi(n){var e=n[Hn];if(e)return e;for(var t=n.parentNode;t;){if(e=t[wr]||t[Hn]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Km(n);n!==null;){if(t=n[Hn])return t;n=Km(n)}return e}n=t,t=n.parentNode}return null}function dl(n){return n=n[Hn]||n[wr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function zs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(W(33))}function Vu(n){return n[$a]||null}var vf=[],$s=-1;function Ti(n){return{current:n}}function ve(n){0>$s||(n.current=vf[$s],vf[$s]=null,$s--)}function pe(n,e){$s++,vf[$s]=n.current,n.current=e}var yi={},ot=Ti(yi),Ct=Ti(!1),is=yi;function So(n,e){var t=n.type.contextTypes;if(!t)return yi;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Tt(n){return n=n.childContextTypes,n!=null}function nu(){ve(Ct),ve(ot)}function Jm(n,e,t){if(ot.current!==yi)throw Error(W(168));pe(ot,e),pe(Ct,t)}function Hw(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,eC(n)||"Unknown",i));return ke({},t,r)}function ru(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||yi,is=ot.current,pe(ot,n),pe(Ct,Ct.current),!0}function Qm(n,e,t){var r=n.stateNode;if(!r)throw Error(W(169));t?(n=Hw(n,e,is),r.__reactInternalMemoizedMergedChildContext=n,ve(Ct),ve(ot),pe(ot,n)):ve(Ct),pe(Ct,t)}var lr=null,Gu=!1,rd=!1;function Uw(n){lr===null?lr=[n]:lr.push(n)}function yT(n){Gu=!0,Uw(n)}function ki(){if(!rd&&lr!==null){rd=!0;var n=0,e=ue;try{var t=lr;for(ue=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}lr=null,Gu=!1}catch(i){throw lr!==null&&(lr=lr.slice(n+1)),gw(Ip,ki),i}finally{ue=e,rd=!1}}return null}var Hs=[],Us=0,iu=null,su=0,Jt=[],Qt=0,ss=null,dr=1,fr="";function ji(n,e){Hs[Us++]=su,Hs[Us++]=iu,iu=n,su=e}function Vw(n,e,t){Jt[Qt++]=dr,Jt[Qt++]=fr,Jt[Qt++]=ss,ss=n;var r=dr;n=fr;var i=32-Rn(r)-1;r&=~(1<<i),t+=1;var s=32-Rn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,dr=1<<32-Rn(e)+i|t<<i|r,fr=s+n}else dr=1<<s|t<<i|r,fr=n}function Yp(n){n.return!==null&&(ji(n,1),Vw(n,1,0))}function Xp(n){for(;n===iu;)iu=Hs[--Us],Hs[Us]=null,su=Hs[--Us],Hs[Us]=null;for(;n===ss;)ss=Jt[--Qt],Jt[Qt]=null,fr=Jt[--Qt],Jt[Qt]=null,dr=Jt[--Qt],Jt[Qt]=null}var Bt=null,Ft=null,be=!1,Cn=null;function Gw(n,e){var t=en(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Zm(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Bt=n,Ft=hi(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Bt=n,Ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ss!==null?{id:dr,overflow:fr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=en(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Bt=n,Ft=null,!0):!1;default:return!1}}function wf(n){return(n.mode&1)!==0&&(n.flags&128)===0}function xf(n){if(be){var e=Ft;if(e){var t=e;if(!Zm(n,e)){if(wf(n))throw Error(W(418));e=hi(t.nextSibling);var r=Bt;e&&Zm(n,e)?Gw(r,t):(n.flags=n.flags&-4097|2,be=!1,Bt=n)}}else{if(wf(n))throw Error(W(418));n.flags=n.flags&-4097|2,be=!1,Bt=n}}}function ey(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Bt=n}function Wl(n){if(n!==Bt)return!1;if(!be)return ey(n),be=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!gf(n.type,n.memoizedProps)),e&&(e=Ft)){if(wf(n))throw Yw(),Error(W(418));for(;e;)Gw(n,e),e=hi(e.nextSibling)}if(ey(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(W(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ft=hi(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ft=null}}else Ft=Bt?hi(n.stateNode.nextSibling):null;return!0}function Yw(){for(var n=Ft;n;)n=hi(n.nextSibling)}function _o(){Ft=Bt=null,be=!1}function qp(n){Cn===null?Cn=[n]:Cn.push(n)}var vT=Rr.ReactCurrentBatchConfig;function ea(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(W(309));var r=t.stateNode}if(!r)throw Error(W(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(W(284));if(!t._owner)throw Error(W(290,n))}return n}function Il(n,e){throw n=Object.prototype.toString.call(e),Error(W(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function ty(n){var e=n._init;return e(n._payload)}function Xw(n){function e(v,m){if(n){var w=v.deletions;w===null?(v.deletions=[m],v.flags|=16):w.push(m)}}function t(v,m){if(!n)return null;for(;m!==null;)e(v,m),m=m.sibling;return null}function r(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function i(v,m){return v=gi(v,m),v.index=0,v.sibling=null,v}function s(v,m,w){return v.index=w,n?(w=v.alternate,w!==null?(w=w.index,w<m?(v.flags|=2,m):w):(v.flags|=2,m)):(v.flags|=1048576,m)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,m,w,b){return m===null||m.tag!==6?(m=ud(w,v.mode,b),m.return=v,m):(m=i(m,w),m.return=v,m)}function l(v,m,w,b){var S=w.type;return S===Ws?u(v,m,w.props.children,b,w.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Xr&&ty(S)===m.type)?(b=i(m,w.props),b.ref=ea(v,m,w),b.return=v,b):(b=Ic(w.type,w.key,w.props,null,v.mode,b),b.ref=ea(v,m,w),b.return=v,b)}function c(v,m,w,b){return m===null||m.tag!==4||m.stateNode.containerInfo!==w.containerInfo||m.stateNode.implementation!==w.implementation?(m=hd(w,v.mode,b),m.return=v,m):(m=i(m,w.children||[]),m.return=v,m)}function u(v,m,w,b,S){return m===null||m.tag!==7?(m=ts(w,v.mode,b,S),m.return=v,m):(m=i(m,w),m.return=v,m)}function h(v,m,w){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ud(""+m,v.mode,w),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case El:return w=Ic(m.type,m.key,m.props,null,v.mode,w),w.ref=ea(v,null,m),w.return=v,w;case Ns:return m=hd(m,v.mode,w),m.return=v,m;case Xr:var b=m._init;return h(v,b(m._payload),w)}if(ua(m)||qo(m))return m=ts(m,v.mode,w,null),m.return=v,m;Il(v,m)}return null}function d(v,m,w,b){var S=m!==null?m.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(v,m,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case El:return w.key===S?l(v,m,w,b):null;case Ns:return w.key===S?c(v,m,w,b):null;case Xr:return S=w._init,d(v,m,S(w._payload),b)}if(ua(w)||qo(w))return S!==null?null:u(v,m,w,b,null);Il(v,w)}return null}function f(v,m,w,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(w)||null,a(m,v,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case El:return v=v.get(b.key===null?w:b.key)||null,l(m,v,b,S);case Ns:return v=v.get(b.key===null?w:b.key)||null,c(m,v,b,S);case Xr:var _=b._init;return f(v,m,w,_(b._payload),S)}if(ua(b)||qo(b))return v=v.get(w)||null,u(m,v,b,S,null);Il(m,b)}return null}function g(v,m,w,b){for(var S=null,_=null,T=m,R=m=0,A=null;T!==null&&R<w.length;R++){T.index>R?(A=T,T=null):A=T.sibling;var M=d(v,T,w[R],b);if(M===null){T===null&&(T=A);break}n&&T&&M.alternate===null&&e(v,T),m=s(M,m,R),_===null?S=M:_.sibling=M,_=M,T=A}if(R===w.length)return t(v,T),be&&ji(v,R),S;if(T===null){for(;R<w.length;R++)T=h(v,w[R],b),T!==null&&(m=s(T,m,R),_===null?S=T:_.sibling=T,_=T);return be&&ji(v,R),S}for(T=r(v,T);R<w.length;R++)A=f(T,v,R,w[R],b),A!==null&&(n&&A.alternate!==null&&T.delete(A.key===null?R:A.key),m=s(A,m,R),_===null?S=A:_.sibling=A,_=A);return n&&T.forEach(function(B){return e(v,B)}),be&&ji(v,R),S}function p(v,m,w,b){var S=qo(w);if(typeof S!="function")throw Error(W(150));if(w=S.call(w),w==null)throw Error(W(151));for(var _=S=null,T=m,R=m=0,A=null,M=w.next();T!==null&&!M.done;R++,M=w.next()){T.index>R?(A=T,T=null):A=T.sibling;var B=d(v,T,M.value,b);if(B===null){T===null&&(T=A);break}n&&T&&B.alternate===null&&e(v,T),m=s(B,m,R),_===null?S=B:_.sibling=B,_=B,T=A}if(M.done)return t(v,T),be&&ji(v,R),S;if(T===null){for(;!M.done;R++,M=w.next())M=h(v,M.value,b),M!==null&&(m=s(M,m,R),_===null?S=M:_.sibling=M,_=M);return be&&ji(v,R),S}for(T=r(v,T);!M.done;R++,M=w.next())M=f(T,v,R,M.value,b),M!==null&&(n&&M.alternate!==null&&T.delete(M.key===null?R:M.key),m=s(M,m,R),_===null?S=M:_.sibling=M,_=M);return n&&T.forEach(function(L){return e(v,L)}),be&&ji(v,R),S}function y(v,m,w,b){if(typeof w=="object"&&w!==null&&w.type===Ws&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case El:e:{for(var S=w.key,_=m;_!==null;){if(_.key===S){if(S=w.type,S===Ws){if(_.tag===7){t(v,_.sibling),m=i(_,w.props.children),m.return=v,v=m;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Xr&&ty(S)===_.type){t(v,_.sibling),m=i(_,w.props),m.ref=ea(v,_,w),m.return=v,v=m;break e}t(v,_);break}else e(v,_);_=_.sibling}w.type===Ws?(m=ts(w.props.children,v.mode,b,w.key),m.return=v,v=m):(b=Ic(w.type,w.key,w.props,null,v.mode,b),b.ref=ea(v,m,w),b.return=v,v=b)}return o(v);case Ns:e:{for(_=w.key;m!==null;){if(m.key===_)if(m.tag===4&&m.stateNode.containerInfo===w.containerInfo&&m.stateNode.implementation===w.implementation){t(v,m.sibling),m=i(m,w.children||[]),m.return=v,v=m;break e}else{t(v,m);break}else e(v,m);m=m.sibling}m=hd(w,v.mode,b),m.return=v,v=m}return o(v);case Xr:return _=w._init,y(v,m,_(w._payload),b)}if(ua(w))return g(v,m,w,b);if(qo(w))return p(v,m,w,b);Il(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,m!==null&&m.tag===6?(t(v,m.sibling),m=i(m,w),m.return=v,v=m):(t(v,m),m=ud(w,v.mode,b),m.return=v,v=m),o(v)):t(v,m)}return y}var Co=Xw(!0),qw=Xw(!1),ou=Ti(null),au=null,Vs=null,Kp=null;function Jp(){Kp=Vs=au=null}function Qp(n){var e=ou.current;ve(ou),n._currentValue=e}function bf(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function ro(n,e){au=n,Kp=Vs=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(_t=!0),n.firstContext=null)}function rn(n){var e=n._currentValue;if(Kp!==n)if(n={context:n,memoizedValue:e,next:null},Vs===null){if(au===null)throw Error(W(308));Vs=n,au.dependencies={lanes:0,firstContext:n}}else Vs=Vs.next=n;return e}var $i=null;function Zp(n){$i===null?$i=[n]:$i.push(n)}function Kw(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Zp(e)):(t.next=i.next,i.next=t),e.interleaved=t,xr(n,r)}function xr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var qr=!1;function eg(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jw(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function mr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function di(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,xr(n,t)}return i=r.interleaved,i===null?(e.next=e,Zp(r)):(e.next=i.next,i.next=e),r.interleaved=e,xr(n,t)}function Dc(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Fp(n,t)}}function ny(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function lu(n,e,t,r){var i=n.updateQueue;qr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,p=a;switch(d=e,f=t,p.tag){case 1:if(g=p.payload,typeof g=="function"){h=g.call(f,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,d=typeof g=="function"?g.call(f,h,d):g,d==null)break e;h=ke({},h,d);break e;case 2:qr=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);as|=o,n.lanes=o,n.memoizedState=h}}function ry(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var fl={},Xn=Ti(fl),Ha=Ti(fl),Ua=Ti(fl);function Hi(n){if(n===fl)throw Error(W(174));return n}function tg(n,e){switch(pe(Ua,e),pe(Ha,n),pe(Xn,fl),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ef(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=ef(e,n)}ve(Xn),pe(Xn,e)}function To(){ve(Xn),ve(Ha),ve(Ua)}function Qw(n){Hi(Ua.current);var e=Hi(Xn.current),t=ef(e,n.type);e!==t&&(pe(Ha,n),pe(Xn,t))}function ng(n){Ha.current===n&&(ve(Xn),ve(Ha))}var Ce=Ti(0);function cu(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var id=[];function rg(){for(var n=0;n<id.length;n++)id[n]._workInProgressVersionPrimary=null;id.length=0}var Mc=Rr.ReactCurrentDispatcher,sd=Rr.ReactCurrentBatchConfig,os=0,Te=null,Be=null,Ve=null,uu=!1,xa=!1,Va=0,wT=0;function et(){throw Error(W(321))}function ig(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!An(n[t],e[t]))return!1;return!0}function sg(n,e,t,r,i,s){if(os=s,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mc.current=n===null||n.memoizedState===null?_T:CT,n=t(r,i),xa){s=0;do{if(xa=!1,Va=0,25<=s)throw Error(W(301));s+=1,Ve=Be=null,e.updateQueue=null,Mc.current=TT,n=t(r,i)}while(xa)}if(Mc.current=hu,e=Be!==null&&Be.next!==null,os=0,Ve=Be=Te=null,uu=!1,e)throw Error(W(300));return n}function og(){var n=Va!==0;return Va=0,n}function Nn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Te.memoizedState=Ve=n:Ve=Ve.next=n,Ve}function sn(){if(Be===null){var n=Te.alternate;n=n!==null?n.memoizedState:null}else n=Be.next;var e=Ve===null?Te.memoizedState:Ve.next;if(e!==null)Ve=e,Be=n;else{if(n===null)throw Error(W(310));Be=n,n={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ve===null?Te.memoizedState=Ve=n:Ve=Ve.next=n}return Ve}function Ga(n,e){return typeof e=="function"?e(n):e}function od(n){var e=sn(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var r=Be,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((os&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Te.lanes|=u,as|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,An(r,e.memoizedState)||(_t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Te.lanes|=s,as|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function ad(n){var e=sn(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);An(s,e.memoizedState)||(_t=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function Zw(){}function ex(n,e){var t=Te,r=sn(),i=e(),s=!An(r.memoizedState,i);if(s&&(r.memoizedState=i,_t=!0),r=r.queue,ag(rx.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Ve!==null&&Ve.memoizedState.tag&1){if(t.flags|=2048,Ya(9,nx.bind(null,t,r,i,e),void 0,null),Ge===null)throw Error(W(349));os&30||tx(t,e,i)}return i}function tx(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function nx(n,e,t,r){e.value=t,e.getSnapshot=r,ix(e)&&sx(n)}function rx(n,e,t){return t(function(){ix(e)&&sx(n)})}function ix(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!An(n,t)}catch{return!0}}function sx(n){var e=xr(n,1);e!==null&&Pn(e,n,1,-1)}function iy(n){var e=Nn();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:n},e.queue=n,n=n.dispatch=ST.bind(null,Te,n),[e.memoizedState,n]}function Ya(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function ox(){return sn().memoizedState}function jc(n,e,t,r){var i=Nn();Te.flags|=n,i.memoizedState=Ya(1|e,t,void 0,r===void 0?null:r)}function Yu(n,e,t,r){var i=sn();r=r===void 0?null:r;var s=void 0;if(Be!==null){var o=Be.memoizedState;if(s=o.destroy,r!==null&&ig(r,o.deps)){i.memoizedState=Ya(e,t,s,r);return}}Te.flags|=n,i.memoizedState=Ya(1|e,t,s,r)}function sy(n,e){return jc(8390656,8,n,e)}function ag(n,e){return Yu(2048,8,n,e)}function ax(n,e){return Yu(4,2,n,e)}function lx(n,e){return Yu(4,4,n,e)}function cx(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function ux(n,e,t){return t=t!=null?t.concat([n]):null,Yu(4,4,cx.bind(null,e,n),t)}function lg(){}function hx(n,e){var t=sn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&ig(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function dx(n,e){var t=sn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&ig(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function fx(n,e,t){return os&21?(An(t,e)||(t=vw(),Te.lanes|=t,as|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,_t=!0),n.memoizedState=t)}function xT(n,e){var t=ue;ue=t!==0&&4>t?t:4,n(!0);var r=sd.transition;sd.transition={};try{n(!1),e()}finally{ue=t,sd.transition=r}}function px(){return sn().memoizedState}function bT(n,e,t){var r=pi(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},gx(n))mx(e,t);else if(t=Kw(n,e,t,r),t!==null){var i=ft();Pn(t,n,r,i),yx(t,e,r)}}function ST(n,e,t){var r=pi(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(gx(n))mx(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,An(a,o)){var l=e.interleaved;l===null?(i.next=i,Zp(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=Kw(n,e,i,r),t!==null&&(i=ft(),Pn(t,n,r,i),yx(t,e,r))}}function gx(n){var e=n.alternate;return n===Te||e!==null&&e===Te}function mx(n,e){xa=uu=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function yx(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Fp(n,t)}}var hu={readContext:rn,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},_T={readContext:rn,useCallback:function(n,e){return Nn().memoizedState=[n,e===void 0?null:e],n},useContext:rn,useEffect:sy,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,jc(4194308,4,cx.bind(null,e,n),t)},useLayoutEffect:function(n,e){return jc(4194308,4,n,e)},useInsertionEffect:function(n,e){return jc(4,2,n,e)},useMemo:function(n,e){var t=Nn();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Nn();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=bT.bind(null,Te,n),[r.memoizedState,n]},useRef:function(n){var e=Nn();return n={current:n},e.memoizedState=n},useState:iy,useDebugValue:lg,useDeferredValue:function(n){return Nn().memoizedState=n},useTransition:function(){var n=iy(!1),e=n[0];return n=xT.bind(null,n[1]),Nn().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Te,i=Nn();if(be){if(t===void 0)throw Error(W(407));t=t()}else{if(t=e(),Ge===null)throw Error(W(349));os&30||tx(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,sy(rx.bind(null,r,s,n),[n]),r.flags|=2048,Ya(9,nx.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Nn(),e=Ge.identifierPrefix;if(be){var t=fr,r=dr;t=(r&~(1<<32-Rn(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Va++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=wT++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},CT={readContext:rn,useCallback:hx,useContext:rn,useEffect:ag,useImperativeHandle:ux,useInsertionEffect:ax,useLayoutEffect:lx,useMemo:dx,useReducer:od,useRef:ox,useState:function(){return od(Ga)},useDebugValue:lg,useDeferredValue:function(n){var e=sn();return fx(e,Be.memoizedState,n)},useTransition:function(){var n=od(Ga)[0],e=sn().memoizedState;return[n,e]},useMutableSource:Zw,useSyncExternalStore:ex,useId:px,unstable_isNewReconciler:!1},TT={readContext:rn,useCallback:hx,useContext:rn,useEffect:ag,useImperativeHandle:ux,useInsertionEffect:ax,useLayoutEffect:lx,useMemo:dx,useReducer:ad,useRef:ox,useState:function(){return ad(Ga)},useDebugValue:lg,useDeferredValue:function(n){var e=sn();return Be===null?e.memoizedState=n:fx(e,Be.memoizedState,n)},useTransition:function(){var n=ad(Ga)[0],e=sn().memoizedState;return[n,e]},useMutableSource:Zw,useSyncExternalStore:ex,useId:px,unstable_isNewReconciler:!1};function yn(n,e){if(n&&n.defaultProps){e=ke({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Sf(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:ke({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Xu={isMounted:function(n){return(n=n._reactInternals)?ds(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=ft(),i=pi(n),s=mr(r,i);s.payload=e,t!=null&&(s.callback=t),e=di(n,s,i),e!==null&&(Pn(e,n,i,r),Dc(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=ft(),i=pi(n),s=mr(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=di(n,s,i),e!==null&&(Pn(e,n,i,r),Dc(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=ft(),r=pi(n),i=mr(t,r);i.tag=2,e!=null&&(i.callback=e),e=di(n,i,r),e!==null&&(Pn(e,n,r,t),Dc(e,n,r))}};function oy(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Fa(t,r)||!Fa(i,s):!0}function vx(n,e,t){var r=!1,i=yi,s=e.contextType;return typeof s=="object"&&s!==null?s=rn(s):(i=Tt(e)?is:ot.current,r=e.contextTypes,s=(r=r!=null)?So(n,i):yi),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xu,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function ay(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Xu.enqueueReplaceState(e,e.state,null)}function _f(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},eg(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=rn(s):(s=Tt(e)?is:ot.current,i.context=So(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Sf(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Xu.enqueueReplaceState(i,i.state,null),lu(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function ko(n,e){try{var t="",r=e;do t+=Z1(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function ld(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Cf(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var kT=typeof WeakMap=="function"?WeakMap:Map;function wx(n,e,t){t=mr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){fu||(fu=!0,jf=r),Cf(n,e)},t}function xx(n,e,t){t=mr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Cf(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Cf(n,e),typeof r!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function ly(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new kT;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=BT.bind(null,n,e,t),e.then(n,n))}function cy(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function uy(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=mr(-1,1),e.tag=2,di(t,e,1))),t.lanes|=1),n)}var ET=Rr.ReactCurrentOwner,_t=!1;function ct(n,e,t,r){e.child=n===null?qw(e,null,t,r):Co(e,n.child,t,r)}function hy(n,e,t,r,i){t=t.render;var s=e.ref;return ro(e,i),r=sg(n,e,t,r,s,i),t=og(),n!==null&&!_t?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,br(n,e,i)):(be&&t&&Yp(e),e.flags|=1,ct(n,e,r,i),e.child)}function dy(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!mg(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,bx(n,e,s,r,i)):(n=Ic(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Fa,t(o,r)&&n.ref===e.ref)return br(n,e,i)}return e.flags|=1,n=gi(s,r),n.ref=e.ref,n.return=e,e.child=n}function bx(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Fa(s,r)&&n.ref===e.ref)if(_t=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(_t=!0);else return e.lanes=n.lanes,br(n,e,i)}return Tf(n,e,t,r,i)}function Sx(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(Ys,Wt),Wt|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,pe(Ys,Wt),Wt|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,pe(Ys,Wt),Wt|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,pe(Ys,Wt),Wt|=r;return ct(n,e,i,t),e.child}function _x(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Tf(n,e,t,r,i){var s=Tt(t)?is:ot.current;return s=So(e,s),ro(e,i),t=sg(n,e,t,r,s,i),r=og(),n!==null&&!_t?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,br(n,e,i)):(be&&r&&Yp(e),e.flags|=1,ct(n,e,t,i),e.child)}function fy(n,e,t,r,i){if(Tt(t)){var s=!0;ru(e)}else s=!1;if(ro(e,i),e.stateNode===null)Lc(n,e),vx(e,t,r),_f(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=rn(c):(c=Tt(t)?is:ot.current,c=So(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&ay(e,o,r,c),qr=!1;var d=e.memoizedState;o.state=d,lu(e,r,o,i),l=e.memoizedState,a!==r||d!==l||Ct.current||qr?(typeof u=="function"&&(Sf(e,t,u,r),l=e.memoizedState),(a=qr||oy(e,t,a,r,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Jw(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:yn(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=rn(l):(l=Tt(t)?is:ot.current,l=So(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&ay(e,o,r,l),qr=!1,d=e.memoizedState,o.state=d,lu(e,r,o,i);var g=e.memoizedState;a!==h||d!==g||Ct.current||qr?(typeof f=="function"&&(Sf(e,t,f,r),g=e.memoizedState),(c=qr||oy(e,t,c,r,d,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return kf(n,e,t,r,s,i)}function kf(n,e,t,r,i,s){_x(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Qm(e,t,!1),br(n,e,s);r=e.stateNode,ET.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Co(e,n.child,null,s),e.child=Co(e,null,a,s)):ct(n,e,a,s),e.memoizedState=r.state,i&&Qm(e,t,!0),e.child}function Cx(n){var e=n.stateNode;e.pendingContext?Jm(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Jm(n,e.context,!1),tg(n,e.containerInfo)}function py(n,e,t,r,i){return _o(),qp(i),e.flags|=256,ct(n,e,t,r),e.child}var Ef={dehydrated:null,treeContext:null,retryLane:0};function Rf(n){return{baseLanes:n,cachePool:null,transitions:null}}function Tx(n,e,t){var r=e.pendingProps,i=Ce.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),pe(Ce,i&1),n===null)return xf(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ju(o,r,0,null),n=ts(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Rf(t),e.memoizedState=Ef,n):cg(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return RT(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=gi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=gi(a,s):(s=ts(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?Rf(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Ef,r}return s=n.child,n=s.sibling,r=gi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function cg(n,e){return e=Ju({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Fl(n,e,t,r){return r!==null&&qp(r),Co(e,n.child,null,t),n=cg(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function RT(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=ld(Error(W(422))),Fl(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ju({mode:"visible",children:r.children},i,0,null),s=ts(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Co(e,n.child,null,o),e.child.memoizedState=Rf(o),e.memoizedState=Ef,s);if(!(e.mode&1))return Fl(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=ld(s,r,void 0),Fl(n,e,o,r)}if(a=(o&n.childLanes)!==0,_t||a){if(r=Ge,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,xr(n,i),Pn(r,n,i,-1))}return gg(),r=ld(Error(W(421))),Fl(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=zT.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Ft=hi(i.nextSibling),Bt=e,be=!0,Cn=null,n!==null&&(Jt[Qt++]=dr,Jt[Qt++]=fr,Jt[Qt++]=ss,dr=n.id,fr=n.overflow,ss=e),e=cg(e,r.children),e.flags|=4096,e)}function gy(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),bf(n.return,e,t)}function cd(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function kx(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ct(n,e,r.children,t),r=Ce.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&gy(n,t,e);else if(n.tag===19)gy(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(pe(Ce,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&cu(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),cd(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&cu(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}cd(e,!0,t,null,s);break;case"together":cd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lc(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function br(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),as|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(W(153));if(e.child!==null){for(n=e.child,t=gi(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=gi(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function PT(n,e,t){switch(e.tag){case 3:Cx(e),_o();break;case 5:Qw(e);break;case 1:Tt(e.type)&&ru(e);break;case 4:tg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;pe(ou,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pe(Ce,Ce.current&1),e.flags|=128,null):t&e.child.childLanes?Tx(n,e,t):(pe(Ce,Ce.current&1),n=br(n,e,t),n!==null?n.sibling:null);pe(Ce,Ce.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return kx(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pe(Ce,Ce.current),r)break;return null;case 22:case 23:return e.lanes=0,Sx(n,e,t)}return br(n,e,t)}var Ex,Pf,Rx,Px;Ex=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Pf=function(){};Rx=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Hi(Xn.current);var s=null;switch(t){case"input":i=Kd(n,i),r=Kd(n,r),s=[];break;case"select":i=ke({},i,{value:void 0}),r=ke({},r,{value:void 0}),s=[];break;case"textarea":i=Zd(n,i),r=Zd(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=tu)}tf(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Da.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Da.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ye("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Px=function(n,e,t,r){t!==r&&(e.flags|=4)};function ta(n,e){if(!be)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function tt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function OT(n,e,t){var r=e.pendingProps;switch(Xp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(e),null;case 1:return Tt(e.type)&&nu(),tt(e),null;case 3:return r=e.stateNode,To(),ve(Ct),ve(ot),rg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Wl(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Cn!==null&&(Wf(Cn),Cn=null))),Pf(n,e),tt(e),null;case 5:ng(e);var i=Hi(Ua.current);if(t=e.type,n!==null&&e.stateNode!=null)Rx(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return tt(e),null}if(n=Hi(Xn.current),Wl(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Hn]=e,r[$a]=s,n=(e.mode&1)!==0,t){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(i=0;i<da.length;i++)ye(da[i],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":Cm(r,s),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ye("invalid",r);break;case"textarea":km(r,s),ye("invalid",r)}tf(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Nl(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Nl(r.textContent,a,n),i=["children",""+a]):Da.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ye("scroll",r)}switch(t){case"input":Rl(r),Tm(r,s,!0);break;case"textarea":Rl(r),Em(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=tu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=rw(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Hn]=e,n[$a]=r,Ex(n,e,!1,!1),e.stateNode=n;e:{switch(o=nf(t,r),t){case"dialog":ye("cancel",n),ye("close",n),i=r;break;case"iframe":case"object":case"embed":ye("load",n),i=r;break;case"video":case"audio":for(i=0;i<da.length;i++)ye(da[i],n);i=r;break;case"source":ye("error",n),i=r;break;case"img":case"image":case"link":ye("error",n),ye("load",n),i=r;break;case"details":ye("toggle",n),i=r;break;case"input":Cm(n,r),i=Kd(n,r),ye("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=ke({},r,{value:void 0}),ye("invalid",n);break;case"textarea":km(n,r),i=Zd(n,r),ye("invalid",n);break;default:i=r}tf(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?ow(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&iw(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Ma(n,l):typeof l=="number"&&Ma(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Da.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ye("scroll",n):l!=null&&Mp(n,s,l,o))}switch(t){case"input":Rl(n),Tm(n,r,!1);break;case"textarea":Rl(n),Em(n);break;case"option":r.value!=null&&n.setAttribute("value",""+mi(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Zs(n,!!r.multiple,s,!1):r.defaultValue!=null&&Zs(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=tu)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tt(e),null;case 6:if(n&&e.stateNode!=null)Px(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(t=Hi(Ua.current),Hi(Xn.current),Wl(e)){if(r=e.stateNode,t=e.memoizedProps,r[Hn]=e,(s=r.nodeValue!==t)&&(n=Bt,n!==null))switch(n.tag){case 3:Nl(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Nl(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Hn]=e,e.stateNode=r}return tt(e),null;case 13:if(ve(Ce),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(be&&Ft!==null&&e.mode&1&&!(e.flags&128))Yw(),_o(),e.flags|=98560,s=!1;else if(s=Wl(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[Hn]=e}else _o(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tt(e),s=!1}else Cn!==null&&(Wf(Cn),Cn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Ce.current&1?$e===0&&($e=3):gg())),e.updateQueue!==null&&(e.flags|=4),tt(e),null);case 4:return To(),Pf(n,e),n===null&&Ba(e.stateNode.containerInfo),tt(e),null;case 10:return Qp(e.type._context),tt(e),null;case 17:return Tt(e.type)&&nu(),tt(e),null;case 19:if(ve(Ce),s=e.memoizedState,s===null)return tt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ta(s,!1);else{if($e!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=cu(n),o!==null){for(e.flags|=128,ta(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return pe(Ce,Ce.current&1|2),e.child}n=n.sibling}s.tail!==null&&Ae()>Eo&&(e.flags|=128,r=!0,ta(s,!1),e.lanes=4194304)}else{if(!r)if(n=cu(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ta(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!be)return tt(e),null}else 2*Ae()-s.renderingStartTime>Eo&&t!==1073741824&&(e.flags|=128,r=!0,ta(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ae(),e.sibling=null,t=Ce.current,pe(Ce,r?t&1|2:t&1),e):(tt(e),null);case 22:case 23:return pg(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Wt&1073741824&&(tt(e),e.subtreeFlags&6&&(e.flags|=8192)):tt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function AT(n,e){switch(Xp(e),e.tag){case 1:return Tt(e.type)&&nu(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return To(),ve(Ct),ve(ot),rg(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return ng(e),null;case 13:if(ve(Ce),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(W(340));_o()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ve(Ce),null;case 4:return To(),null;case 10:return Qp(e.type._context),null;case 22:case 23:return pg(),null;case 24:return null;default:return null}}var Bl=!1,it=!1,DT=typeof WeakSet=="function"?WeakSet:Set,V=null;function Gs(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Re(n,e,r)}else t.current=null}function Of(n,e,t){try{t()}catch(r){Re(n,e,r)}}var my=!1;function MT(n,e){if(ff=Qc,n=jw(),Gp(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=n,d=null;t:for(;;){for(var f;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===n)break t;if(d===t&&++c===i&&(a=o),d===s&&++u===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(pf={focusedElem:n,selectionRange:t},Qc=!1,V=e;V!==null;)if(e=V,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,V=n;else for(;V!==null;){e=V;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,y=g.memoizedState,v=e.stateNode,m=v.getSnapshotBeforeUpdate(e.elementType===e.type?p:yn(e.type,p),y);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(b){Re(e,e.return,b)}if(n=e.sibling,n!==null){n.return=e.return,V=n;break}V=e.return}return g=my,my=!1,g}function ba(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&Of(e,t,s)}i=i.next}while(i!==r)}}function qu(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Af(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Ox(n){var e=n.alternate;e!==null&&(n.alternate=null,Ox(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Hn],delete e[$a],delete e[yf],delete e[gT],delete e[mT])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Ax(n){return n.tag===5||n.tag===3||n.tag===4}function yy(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ax(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Df(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=tu));else if(r!==4&&(n=n.child,n!==null))for(Df(n,e,t),n=n.sibling;n!==null;)Df(n,e,t),n=n.sibling}function Mf(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Mf(n,e,t),n=n.sibling;n!==null;)Mf(n,e,t),n=n.sibling}var Ye=null,bn=!1;function Ir(n,e,t){for(t=t.child;t!==null;)Dx(n,e,t),t=t.sibling}function Dx(n,e,t){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(zu,t)}catch{}switch(t.tag){case 5:it||Gs(t,e);case 6:var r=Ye,i=bn;Ye=null,Ir(n,e,t),Ye=r,bn=i,Ye!==null&&(bn?(n=Ye,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ye.removeChild(t.stateNode));break;case 18:Ye!==null&&(bn?(n=Ye,t=t.stateNode,n.nodeType===8?nd(n.parentNode,t):n.nodeType===1&&nd(n,t),Wa(n)):nd(Ye,t.stateNode));break;case 4:r=Ye,i=bn,Ye=t.stateNode.containerInfo,bn=!0,Ir(n,e,t),Ye=r,bn=i;break;case 0:case 11:case 14:case 15:if(!it&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Of(t,e,o),i=i.next}while(i!==r)}Ir(n,e,t);break;case 1:if(!it&&(Gs(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Re(t,e,a)}Ir(n,e,t);break;case 21:Ir(n,e,t);break;case 22:t.mode&1?(it=(r=it)||t.memoizedState!==null,Ir(n,e,t),it=r):Ir(n,e,t);break;default:Ir(n,e,t)}}function vy(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new DT),e.forEach(function(r){var i=$T.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function hn(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ye=a.stateNode,bn=!1;break e;case 3:Ye=a.stateNode.containerInfo,bn=!0;break e;case 4:Ye=a.stateNode.containerInfo,bn=!0;break e}a=a.return}if(Ye===null)throw Error(W(160));Dx(s,o,i),Ye=null,bn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Re(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Mx(e,n),e=e.sibling}function Mx(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(hn(e,n),Ln(n),r&4){try{ba(3,n,n.return),qu(3,n)}catch(p){Re(n,n.return,p)}try{ba(5,n,n.return)}catch(p){Re(n,n.return,p)}}break;case 1:hn(e,n),Ln(n),r&512&&t!==null&&Gs(t,t.return);break;case 5:if(hn(e,n),Ln(n),r&512&&t!==null&&Gs(t,t.return),n.flags&32){var i=n.stateNode;try{Ma(i,"")}catch(p){Re(n,n.return,p)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&tw(i,s),nf(a,o);var c=nf(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?ow(i,h):u==="dangerouslySetInnerHTML"?iw(i,h):u==="children"?Ma(i,h):Mp(i,u,h,c)}switch(a){case"input":Jd(i,s);break;case"textarea":nw(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Zs(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Zs(i,!!s.multiple,s.defaultValue,!0):Zs(i,!!s.multiple,s.multiple?[]:"",!1))}i[$a]=s}catch(p){Re(n,n.return,p)}}break;case 6:if(hn(e,n),Ln(n),r&4){if(n.stateNode===null)throw Error(W(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(p){Re(n,n.return,p)}}break;case 3:if(hn(e,n),Ln(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Wa(e.containerInfo)}catch(p){Re(n,n.return,p)}break;case 4:hn(e,n),Ln(n);break;case 13:hn(e,n),Ln(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(dg=Ae())),r&4&&vy(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(it=(c=it)||u,hn(e,n),it=c):hn(e,n),Ln(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(V=n,u=n.child;u!==null;){for(h=V=u;V!==null;){switch(d=V,f=d.child,d.tag){case 0:case 11:case 14:case 15:ba(4,d,d.return);break;case 1:Gs(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(p){Re(r,t,p)}}break;case 5:Gs(d,d.return);break;case 22:if(d.memoizedState!==null){xy(h);continue}}f!==null?(f.return=d,V=f):xy(h)}u=u.sibling}e:for(u=null,h=n;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=sw("display",o))}catch(p){Re(n,n.return,p)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(p){Re(n,n.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:hn(e,n),Ln(n),r&4&&vy(n);break;case 21:break;default:hn(e,n),Ln(n)}}function Ln(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Ax(t)){var r=t;break e}t=t.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ma(i,""),r.flags&=-33);var s=yy(n);Mf(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=yy(n);Df(n,a,o);break;default:throw Error(W(161))}}catch(l){Re(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function jT(n,e,t){V=n,jx(n)}function jx(n,e,t){for(var r=(n.mode&1)!==0;V!==null;){var i=V,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Bl;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||it;a=Bl;var c=it;if(Bl=o,(it=l)&&!c)for(V=i;V!==null;)o=V,l=o.child,o.tag===22&&o.memoizedState!==null?by(i):l!==null?(l.return=o,V=l):by(i);for(;s!==null;)V=s,jx(s),s=s.sibling;V=i,Bl=a,it=c}wy(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,V=s):wy(n)}}function wy(n){for(;V!==null;){var e=V;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:it||qu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!it)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:yn(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ry(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}ry(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Wa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}it||e.flags&512&&Af(e)}catch(d){Re(e,e.return,d)}}if(e===n){V=null;break}if(t=e.sibling,t!==null){t.return=e.return,V=t;break}V=e.return}}function xy(n){for(;V!==null;){var e=V;if(e===n){V=null;break}var t=e.sibling;if(t!==null){t.return=e.return,V=t;break}V=e.return}}function by(n){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{qu(4,e)}catch(l){Re(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Re(e,i,l)}}var s=e.return;try{Af(e)}catch(l){Re(e,s,l)}break;case 5:var o=e.return;try{Af(e)}catch(l){Re(e,o,l)}}}catch(l){Re(e,e.return,l)}if(e===n){V=null;break}var a=e.sibling;if(a!==null){a.return=e.return,V=a;break}V=e.return}}var LT=Math.ceil,du=Rr.ReactCurrentDispatcher,ug=Rr.ReactCurrentOwner,tn=Rr.ReactCurrentBatchConfig,se=0,Ge=null,We=null,qe=0,Wt=0,Ys=Ti(0),$e=0,Xa=null,as=0,Ku=0,hg=0,Sa=null,bt=null,dg=0,Eo=1/0,or=null,fu=!1,jf=null,fi=null,zl=!1,oi=null,pu=0,_a=0,Lf=null,Nc=-1,Wc=0;function ft(){return se&6?Ae():Nc!==-1?Nc:Nc=Ae()}function pi(n){return n.mode&1?se&2&&qe!==0?qe&-qe:vT.transition!==null?(Wc===0&&(Wc=vw()),Wc):(n=ue,n!==0||(n=window.event,n=n===void 0?16:Tw(n.type)),n):1}function Pn(n,e,t,r){if(50<_a)throw _a=0,Lf=null,Error(W(185));ul(n,t,r),(!(se&2)||n!==Ge)&&(n===Ge&&(!(se&2)&&(Ku|=t),$e===4&&Jr(n,qe)),kt(n,r),t===1&&se===0&&!(e.mode&1)&&(Eo=Ae()+500,Gu&&ki()))}function kt(n,e){var t=n.callbackNode;vC(n,e);var r=Jc(n,n===Ge?qe:0);if(r===0)t!==null&&Om(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Om(t),e===1)n.tag===0?yT(Sy.bind(null,n)):Uw(Sy.bind(null,n)),fT(function(){!(se&6)&&ki()}),t=null;else{switch(ww(r)){case 1:t=Ip;break;case 4:t=mw;break;case 16:t=Kc;break;case 536870912:t=yw;break;default:t=Kc}t=$x(t,Lx.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Lx(n,e){if(Nc=-1,Wc=0,se&6)throw Error(W(327));var t=n.callbackNode;if(io()&&n.callbackNode!==t)return null;var r=Jc(n,n===Ge?qe:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=gu(n,r);else{e=r;var i=se;se|=2;var s=Wx();(Ge!==n||qe!==e)&&(or=null,Eo=Ae()+500,es(n,e));do try{IT();break}catch(a){Nx(n,a)}while(!0);Jp(),du.current=s,se=i,We!==null?e=0:(Ge=null,qe=0,e=$e)}if(e!==0){if(e===2&&(i=lf(n),i!==0&&(r=i,e=Nf(n,i))),e===1)throw t=Xa,es(n,0),Jr(n,r),kt(n,Ae()),t;if(e===6)Jr(n,r);else{if(i=n.current.alternate,!(r&30)&&!NT(i)&&(e=gu(n,r),e===2&&(s=lf(n),s!==0&&(r=s,e=Nf(n,s))),e===1))throw t=Xa,es(n,0),Jr(n,r),kt(n,Ae()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Li(n,bt,or);break;case 3:if(Jr(n,r),(r&130023424)===r&&(e=dg+500-Ae(),10<e)){if(Jc(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){ft(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=mf(Li.bind(null,n,bt,or),e);break}Li(n,bt,or);break;case 4:if(Jr(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Rn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*LT(r/1960))-r,10<r){n.timeoutHandle=mf(Li.bind(null,n,bt,or),r);break}Li(n,bt,or);break;case 5:Li(n,bt,or);break;default:throw Error(W(329))}}}return kt(n,Ae()),n.callbackNode===t?Lx.bind(null,n):null}function Nf(n,e){var t=Sa;return n.current.memoizedState.isDehydrated&&(es(n,e).flags|=256),n=gu(n,e),n!==2&&(e=bt,bt=t,e!==null&&Wf(e)),n}function Wf(n){bt===null?bt=n:bt.push.apply(bt,n)}function NT(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!An(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jr(n,e){for(e&=~hg,e&=~Ku,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Rn(e),r=1<<t;n[t]=-1,e&=~r}}function Sy(n){if(se&6)throw Error(W(327));io();var e=Jc(n,0);if(!(e&1))return kt(n,Ae()),null;var t=gu(n,e);if(n.tag!==0&&t===2){var r=lf(n);r!==0&&(e=r,t=Nf(n,r))}if(t===1)throw t=Xa,es(n,0),Jr(n,e),kt(n,Ae()),t;if(t===6)throw Error(W(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Li(n,bt,or),kt(n,Ae()),null}function fg(n,e){var t=se;se|=1;try{return n(e)}finally{se=t,se===0&&(Eo=Ae()+500,Gu&&ki())}}function ls(n){oi!==null&&oi.tag===0&&!(se&6)&&io();var e=se;se|=1;var t=tn.transition,r=ue;try{if(tn.transition=null,ue=1,n)return n()}finally{ue=r,tn.transition=t,se=e,!(se&6)&&ki()}}function pg(){Wt=Ys.current,ve(Ys)}function es(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,dT(t)),We!==null)for(t=We.return;t!==null;){var r=t;switch(Xp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nu();break;case 3:To(),ve(Ct),ve(ot),rg();break;case 5:ng(r);break;case 4:To();break;case 13:ve(Ce);break;case 19:ve(Ce);break;case 10:Qp(r.type._context);break;case 22:case 23:pg()}t=t.return}if(Ge=n,We=n=gi(n.current,null),qe=Wt=e,$e=0,Xa=null,hg=Ku=as=0,bt=Sa=null,$i!==null){for(e=0;e<$i.length;e++)if(t=$i[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}$i=null}return n}function Nx(n,e){do{var t=We;try{if(Jp(),Mc.current=hu,uu){for(var r=Te.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}uu=!1}if(os=0,Ve=Be=Te=null,xa=!1,Va=0,ug.current=null,t===null||t.return===null){$e=1,Xa=e,We=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=qe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=cy(o);if(f!==null){f.flags&=-257,uy(f,o,a,s,e),f.mode&1&&ly(s,c,e),e=f,l=c;var g=e.updateQueue;if(g===null){var p=new Set;p.add(l),e.updateQueue=p}else g.add(l);break e}else{if(!(e&1)){ly(s,c,e),gg();break e}l=Error(W(426))}}else if(be&&a.mode&1){var y=cy(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),uy(y,o,a,s,e),qp(ko(l,a));break e}}s=l=ko(l,a),$e!==4&&($e=2),Sa===null?Sa=[s]:Sa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=wx(s,l,e);ny(s,v);break e;case 1:a=l;var m=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(fi===null||!fi.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=xx(s,a,e);ny(s,b);break e}}s=s.return}while(s!==null)}Fx(t)}catch(S){e=S,We===t&&t!==null&&(We=t=t.return);continue}break}while(!0)}function Wx(){var n=du.current;return du.current=hu,n===null?hu:n}function gg(){($e===0||$e===3||$e===2)&&($e=4),Ge===null||!(as&268435455)&&!(Ku&268435455)||Jr(Ge,qe)}function gu(n,e){var t=se;se|=2;var r=Wx();(Ge!==n||qe!==e)&&(or=null,es(n,e));do try{WT();break}catch(i){Nx(n,i)}while(!0);if(Jp(),se=t,du.current=r,We!==null)throw Error(W(261));return Ge=null,qe=0,$e}function WT(){for(;We!==null;)Ix(We)}function IT(){for(;We!==null&&!cC();)Ix(We)}function Ix(n){var e=zx(n.alternate,n,Wt);n.memoizedProps=n.pendingProps,e===null?Fx(n):We=e,ug.current=null}function Fx(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=AT(t,e),t!==null){t.flags&=32767,We=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{$e=6,We=null;return}}else if(t=OT(t,e,Wt),t!==null){We=t;return}if(e=e.sibling,e!==null){We=e;return}We=e=n}while(e!==null);$e===0&&($e=5)}function Li(n,e,t){var r=ue,i=tn.transition;try{tn.transition=null,ue=1,FT(n,e,t,r)}finally{tn.transition=i,ue=r}return null}function FT(n,e,t,r){do io();while(oi!==null);if(se&6)throw Error(W(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(W(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(wC(n,s),n===Ge&&(We=Ge=null,qe=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||zl||(zl=!0,$x(Kc,function(){return io(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=tn.transition,tn.transition=null;var o=ue;ue=1;var a=se;se|=4,ug.current=null,MT(n,t),Mx(t,n),sT(pf),Qc=!!ff,pf=ff=null,n.current=t,jT(t),uC(),se=a,ue=o,tn.transition=s}else n.current=t;if(zl&&(zl=!1,oi=n,pu=i),s=n.pendingLanes,s===0&&(fi=null),fC(t.stateNode),kt(n,Ae()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(fu)throw fu=!1,n=jf,jf=null,n;return pu&1&&n.tag!==0&&io(),s=n.pendingLanes,s&1?n===Lf?_a++:(_a=0,Lf=n):_a=0,ki(),null}function io(){if(oi!==null){var n=ww(pu),e=tn.transition,t=ue;try{if(tn.transition=null,ue=16>n?16:n,oi===null)var r=!1;else{if(n=oi,oi=null,pu=0,se&6)throw Error(W(331));var i=se;for(se|=4,V=n.current;V!==null;){var s=V,o=s.child;if(V.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(V=c;V!==null;){var u=V;switch(u.tag){case 0:case 11:case 15:ba(8,u,s)}var h=u.child;if(h!==null)h.return=u,V=h;else for(;V!==null;){u=V;var d=u.sibling,f=u.return;if(Ox(u),u===c){V=null;break}if(d!==null){d.return=f,V=d;break}V=f}}}var g=s.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var y=p.sibling;p.sibling=null,p=y}while(p!==null)}}V=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,V=o;else e:for(;V!==null;){if(s=V,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ba(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,V=v;break e}V=s.return}}var m=n.current;for(V=m;V!==null;){o=V;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,V=w;else e:for(o=m;V!==null;){if(a=V,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:qu(9,a)}}catch(S){Re(a,a.return,S)}if(a===o){V=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,V=b;break e}V=a.return}}if(se=i,ki(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(zu,n)}catch{}r=!0}return r}finally{ue=t,tn.transition=e}}return!1}function _y(n,e,t){e=ko(t,e),e=wx(n,e,1),n=di(n,e,1),e=ft(),n!==null&&(ul(n,1,e),kt(n,e))}function Re(n,e,t){if(n.tag===3)_y(n,n,t);else for(;e!==null;){if(e.tag===3){_y(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fi===null||!fi.has(r))){n=ko(t,n),n=xx(e,n,1),e=di(e,n,1),n=ft(),e!==null&&(ul(e,1,n),kt(e,n));break}}e=e.return}}function BT(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=ft(),n.pingedLanes|=n.suspendedLanes&t,Ge===n&&(qe&t)===t&&($e===4||$e===3&&(qe&130023424)===qe&&500>Ae()-dg?es(n,0):hg|=t),kt(n,e)}function Bx(n,e){e===0&&(n.mode&1?(e=Al,Al<<=1,!(Al&130023424)&&(Al=4194304)):e=1);var t=ft();n=xr(n,e),n!==null&&(ul(n,e,t),kt(n,t))}function zT(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Bx(n,t)}function $T(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),Bx(n,t)}var zx;zx=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ct.current)_t=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return _t=!1,PT(n,e,t);_t=!!(n.flags&131072)}else _t=!1,be&&e.flags&1048576&&Vw(e,su,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Lc(n,e),n=e.pendingProps;var i=So(e,ot.current);ro(e,t),i=sg(null,e,r,n,i,t);var s=og();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(r)?(s=!0,ru(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,eg(e),i.updater=Xu,e.stateNode=i,i._reactInternals=e,_f(e,r,n,t),e=kf(null,e,r,!0,s,t)):(e.tag=0,be&&s&&Yp(e),ct(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Lc(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=UT(r),n=yn(r,n),i){case 0:e=Tf(null,e,r,n,t);break e;case 1:e=fy(null,e,r,n,t);break e;case 11:e=hy(null,e,r,n,t);break e;case 14:e=dy(null,e,r,yn(r.type,n),t);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yn(r,i),Tf(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yn(r,i),fy(n,e,r,i,t);case 3:e:{if(Cx(e),n===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Jw(n,e),lu(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ko(Error(W(423)),e),e=py(n,e,r,t,i);break e}else if(r!==i){i=ko(Error(W(424)),e),e=py(n,e,r,t,i);break e}else for(Ft=hi(e.stateNode.containerInfo.firstChild),Bt=e,be=!0,Cn=null,t=qw(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(_o(),r===i){e=br(n,e,t);break e}ct(n,e,r,t)}e=e.child}return e;case 5:return Qw(e),n===null&&xf(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,gf(r,i)?o=null:s!==null&&gf(r,s)&&(e.flags|=32),_x(n,e),ct(n,e,o,t),e.child;case 6:return n===null&&xf(e),null;case 13:return Tx(n,e,t);case 4:return tg(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Co(e,null,r,t):ct(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yn(r,i),hy(n,e,r,i,t);case 7:return ct(n,e,e.pendingProps,t),e.child;case 8:return ct(n,e,e.pendingProps.children,t),e.child;case 12:return ct(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,pe(ou,r._currentValue),r._currentValue=o,s!==null)if(An(s.value,o)){if(s.children===i.children&&!Ct.current){e=br(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=mr(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),bf(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),bf(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ct(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ro(e,t),i=rn(i),r=r(i),e.flags|=1,ct(n,e,r,t),e.child;case 14:return r=e.type,i=yn(r,e.pendingProps),i=yn(r.type,i),dy(n,e,r,i,t);case 15:return bx(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yn(r,i),Lc(n,e),e.tag=1,Tt(r)?(n=!0,ru(e)):n=!1,ro(e,t),vx(e,r,i),_f(e,r,i,t),kf(null,e,r,!0,n,t);case 19:return kx(n,e,t);case 22:return Sx(n,e,t)}throw Error(W(156,e.tag))};function $x(n,e){return gw(n,e)}function HT(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(n,e,t,r){return new HT(n,e,t,r)}function mg(n){return n=n.prototype,!(!n||!n.isReactComponent)}function UT(n){if(typeof n=="function")return mg(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Lp)return 11;if(n===Np)return 14}return 2}function gi(n,e){var t=n.alternate;return t===null?(t=en(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Ic(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")mg(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Ws:return ts(t.children,i,s,e);case jp:o=8,i|=8;break;case Gd:return n=en(12,t,e,i|2),n.elementType=Gd,n.lanes=s,n;case Yd:return n=en(13,t,e,i),n.elementType=Yd,n.lanes=s,n;case Xd:return n=en(19,t,e,i),n.elementType=Xd,n.lanes=s,n;case Q0:return Ju(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case K0:o=10;break e;case J0:o=9;break e;case Lp:o=11;break e;case Np:o=14;break e;case Xr:o=16,r=null;break e}throw Error(W(130,n==null?n:typeof n,""))}return e=en(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function ts(n,e,t,r){return n=en(7,n,r,e),n.lanes=t,n}function Ju(n,e,t,r){return n=en(22,n,r,e),n.elementType=Q0,n.lanes=t,n.stateNode={isHidden:!1},n}function ud(n,e,t){return n=en(6,n,null,e),n.lanes=t,n}function hd(n,e,t){return e=en(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function VT(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vh(0),this.expirationTimes=Vh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function yg(n,e,t,r,i,s,o,a,l){return n=new VT(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=en(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},eg(s),n}function GT(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ns,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function Hx(n){if(!n)return yi;n=n._reactInternals;e:{if(ds(n)!==n||n.tag!==1)throw Error(W(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(n.tag===1){var t=n.type;if(Tt(t))return Hw(n,t,e)}return e}function Ux(n,e,t,r,i,s,o,a,l){return n=yg(t,r,!0,n,i,s,o,a,l),n.context=Hx(null),t=n.current,r=ft(),i=pi(t),s=mr(r,i),s.callback=e??null,di(t,s,i),n.current.lanes=i,ul(n,i,r),kt(n,r),n}function Qu(n,e,t,r){var i=e.current,s=ft(),o=pi(i);return t=Hx(t),e.context===null?e.context=t:e.pendingContext=t,e=mr(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=di(i,e,o),n!==null&&(Pn(n,i,o,s),Dc(n,i,o)),o}function mu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Cy(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function vg(n,e){Cy(n,e),(n=n.alternate)&&Cy(n,e)}function YT(){return null}var Vx=typeof reportError=="function"?reportError:function(n){console.error(n)};function wg(n){this._internalRoot=n}Zu.prototype.render=wg.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(W(409));Qu(n,e,null,null)};Zu.prototype.unmount=wg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;ls(function(){Qu(null,n,null,null)}),e[wr]=null}};function Zu(n){this._internalRoot=n}Zu.prototype.unstable_scheduleHydration=function(n){if(n){var e=Sw();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Kr.length&&e!==0&&e<Kr[t].priority;t++);Kr.splice(t,0,n),t===0&&Cw(n)}};function xg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function eh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ty(){}function XT(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=mu(o);s.call(c)}}var o=Ux(e,r,n,0,null,!1,!1,"",Ty);return n._reactRootContainer=o,n[wr]=o.current,Ba(n.nodeType===8?n.parentNode:n),ls(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=mu(l);a.call(c)}}var l=yg(n,0,!1,null,null,!1,!1,"",Ty);return n._reactRootContainer=l,n[wr]=l.current,Ba(n.nodeType===8?n.parentNode:n),ls(function(){Qu(e,l,t,r)}),l}function th(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=mu(o);a.call(l)}}Qu(e,o,n,i)}else o=XT(t,e,n,i,r);return mu(o)}xw=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=ha(e.pendingLanes);t!==0&&(Fp(e,t|1),kt(e,Ae()),!(se&6)&&(Eo=Ae()+500,ki()))}break;case 13:ls(function(){var r=xr(n,1);if(r!==null){var i=ft();Pn(r,n,1,i)}}),vg(n,1)}};Bp=function(n){if(n.tag===13){var e=xr(n,134217728);if(e!==null){var t=ft();Pn(e,n,134217728,t)}vg(n,134217728)}};bw=function(n){if(n.tag===13){var e=pi(n),t=xr(n,e);if(t!==null){var r=ft();Pn(t,n,e,r)}vg(n,e)}};Sw=function(){return ue};_w=function(n,e){var t=ue;try{return ue=n,e()}finally{ue=t}};sf=function(n,e,t){switch(e){case"input":if(Jd(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Vu(r);if(!i)throw Error(W(90));ew(r),Jd(r,i)}}}break;case"textarea":nw(n,t);break;case"select":e=t.value,e!=null&&Zs(n,!!t.multiple,e,!1)}};cw=fg;uw=ls;var qT={usingClientEntryPoint:!1,Events:[dl,zs,Vu,aw,lw,fg]},na={findFiberByHostInstance:zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KT={bundleType:na.bundleType,version:na.version,rendererPackageName:na.rendererPackageName,rendererConfig:na.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=fw(n),n===null?null:n.stateNode},findFiberByHostInstance:na.findFiberByHostInstance||YT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{zu=$l.inject(KT),Yn=$l}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qT;Ut.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xg(e))throw Error(W(200));return GT(n,e,null,t)};Ut.createRoot=function(n,e){if(!xg(n))throw Error(W(299));var t=!1,r="",i=Vx;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=yg(n,1,!1,null,null,t,!1,r,i),n[wr]=e.current,Ba(n.nodeType===8?n.parentNode:n),new wg(e)};Ut.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(W(188)):(n=Object.keys(n).join(","),Error(W(268,n)));return n=fw(e),n=n===null?null:n.stateNode,n};Ut.flushSync=function(n){return ls(n)};Ut.hydrate=function(n,e,t){if(!eh(e))throw Error(W(200));return th(null,n,e,!0,t)};Ut.hydrateRoot=function(n,e,t){if(!xg(n))throw Error(W(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=Vx;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Ux(e,null,n,1,t??null,i,!1,s,o),n[wr]=e.current,Ba(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Zu(e)};Ut.render=function(n,e,t){if(!eh(e))throw Error(W(200));return th(null,n,e,!1,t)};Ut.unmountComponentAtNode=function(n){if(!eh(n))throw Error(W(40));return n._reactRootContainer?(ls(function(){th(null,null,n,!1,function(){n._reactRootContainer=null,n[wr]=null})}),!0):!1};Ut.unstable_batchedUpdates=fg;Ut.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!eh(t))throw Error(W(200));if(n==null||n._reactInternals===void 0)throw Error(W(38));return th(n,e,t,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function Gx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gx)}catch(n){console.error(n)}}Gx(),G0.exports=Ut;var Pr=G0.exports;const Yx=kp(Pr);var Xx,ky=Pr;Xx=ky.createRoot,ky.hydrateRoot;const JT=1,QT=1e6;let dd=0;function ZT(){return dd=(dd+1)%Number.MAX_SAFE_INTEGER,dd.toString()}const fd=new Map,Ey=n=>{if(fd.has(n))return;const e=setTimeout(()=>{fd.delete(n),Ca({type:"REMOVE_TOAST",toastId:n})},QT);fd.set(n,e)},ek=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,JT)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?Ey(t):n.toasts.forEach(r=>{Ey(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Fc=[];let Bc={toasts:[]};function Ca(n){Bc=ek(Bc,n),Fc.forEach(e=>{e(Bc)})}function tk({...n}){const e=ZT(),t=i=>Ca({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Ca({type:"DISMISS_TOAST",toastId:e});return Ca({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function nk(){const[n,e]=C.useState(Bc);return C.useEffect(()=>(Fc.push(e),()=>{const t=Fc.indexOf(e);t>-1&&Fc.splice(t,1)}),[n]),{...n,toast:tk,dismiss:t=>Ca({type:"DISMISS_TOAST",toastId:t})}}function ze(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Ry(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function qx(...n){return e=>{let t=!1;const r=n.map(i=>{const s=Ry(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Ry(n[i],null)}}}}function Dn(...n){return C.useCallback(qx(...n),n)}function nh(n,e=[]){let t=[];function r(s,o){const a=C.createContext(o),l=t.length;t=[...t,o];const c=h=>{var v;const{scope:d,children:f,...g}=h,p=((v=d==null?void 0:d[n])==null?void 0:v[l])||a,y=C.useMemo(()=>g,Object.values(g));return x.jsx(p.Provider,{value:y,children:f})};c.displayName=s+"Provider";function u(h,d){var p;const f=((p=d==null?void 0:d[n])==null?void 0:p[l])||a,g=C.useContext(f);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=t.map(o=>C.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return C.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,rk(i,...e)]}function rk(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return C.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function If(n){const e=ik(n),t=C.forwardRef((r,i)=>{const{children:s,...o}=r,a=C.Children.toArray(s),l=a.find(ok);if(l){const c=l.props.children,u=a.map(h=>h===l?C.Children.count(c)>1?C.Children.only(null):C.isValidElement(c)?c.props.children:null:h);return x.jsx(e,{...o,ref:i,children:C.isValidElement(c)?C.cloneElement(c,void 0,u):null})}return x.jsx(e,{...o,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}function ik(n){const e=C.forwardRef((t,r)=>{const{children:i,...s}=t;if(C.isValidElement(i)){const o=lk(i),a=ak(s,i.props);return i.type!==C.Fragment&&(a.ref=r?qx(r,o):o),C.cloneElement(i,a)}return C.Children.count(i)>1?C.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Kx=Symbol("radix.slottable");function sk(n){const e=({children:t})=>x.jsx(x.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=Kx,e}function ok(n){return C.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Kx}function ak(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function lk(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function ck(n){const e=n+"CollectionProvider",[t,r]=nh(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:y,children:v}=p,m=F.useRef(null),w=F.useRef(new Map).current;return x.jsx(i,{scope:y,itemMap:w,collectionRef:m,children:v})};o.displayName=e;const a=n+"CollectionSlot",l=If(a),c=F.forwardRef((p,y)=>{const{scope:v,children:m}=p,w=s(a,v),b=Dn(y,w.collectionRef);return x.jsx(l,{ref:b,children:m})});c.displayName=a;const u=n+"CollectionItemSlot",h="data-radix-collection-item",d=If(u),f=F.forwardRef((p,y)=>{const{scope:v,children:m,...w}=p,b=F.useRef(null),S=Dn(y,b),_=s(u,v);return F.useEffect(()=>(_.itemMap.set(b,{ref:b,...w}),()=>void _.itemMap.delete(b))),x.jsx(d,{[h]:"",ref:S,children:m})});f.displayName=u;function g(p){const y=s(n+"CollectionConsumer",p);return F.useCallback(()=>{const m=y.collectionRef.current;if(!m)return[];const w=Array.from(m.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((_,T)=>w.indexOf(_.ref.current)-w.indexOf(T.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},g,r]}var uk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Dt=uk.reduce((n,e)=>{const t=If(`Primitive.${e}`),r=C.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function Jx(n,e){n&&Pr.flushSync(()=>n.dispatchEvent(e))}function vi(n){const e=C.useRef(n);return C.useEffect(()=>{e.current=n}),C.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function hk(n,e=globalThis==null?void 0:globalThis.document){const t=vi(n);C.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var dk="DismissableLayer",Ff="dismissableLayer.update",fk="dismissableLayer.pointerDownOutside",pk="dismissableLayer.focusOutside",Py,Qx=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bg=C.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,c=C.useContext(Qx),[u,h]=C.useState(null),d=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=C.useState({}),g=Dn(e,T=>h(T)),p=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=p.indexOf(y),m=u?p.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,b=m>=v,S=mk(T=>{const R=T.target,A=[...c.branches].some(M=>M.contains(R));!b||A||(i==null||i(T),o==null||o(T),T.defaultPrevented||a==null||a())},d),_=yk(T=>{const R=T.target;[...c.branches].some(M=>M.contains(R))||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())},d);return hk(T=>{m===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},d),C.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Py=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Oy(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=Py)}},[u,d,t,c]),C.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Oy())},[u,c]),C.useEffect(()=>{const T=()=>f({});return document.addEventListener(Ff,T),()=>document.removeEventListener(Ff,T)},[]),x.jsx(Dt.div,{...l,ref:g,style:{pointerEvents:w?b?"auto":"none":void 0,...n.style},onFocusCapture:ze(n.onFocusCapture,_.onFocusCapture),onBlurCapture:ze(n.onBlurCapture,_.onBlurCapture),onPointerDownCapture:ze(n.onPointerDownCapture,S.onPointerDownCapture)})});bg.displayName=dk;var gk="DismissableLayerBranch",Zx=C.forwardRef((n,e)=>{const t=C.useContext(Qx),r=C.useRef(null),i=Dn(e,r);return C.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),x.jsx(Dt.div,{...n,ref:i})});Zx.displayName=gk;function mk(n,e=globalThis==null?void 0:globalThis.document){const t=vi(n),r=C.useRef(!1),i=C.useRef(()=>{});return C.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){eb(fk,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function yk(n,e=globalThis==null?void 0:globalThis.document){const t=vi(n),r=C.useRef(!1);return C.useEffect(()=>{const i=s=>{s.target&&!r.current&&eb(pk,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Oy(){const n=new CustomEvent(Ff);document.dispatchEvent(n)}function eb(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?Jx(i,s):i.dispatchEvent(s)}var vk=bg,wk=Zx,wi=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{},xk="Portal",tb=C.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[i,s]=C.useState(!1);wi(()=>s(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Yx.createPortal(x.jsx(Dt.div,{...r,ref:e}),o):null});tb.displayName=xk;function bk(n,e){return C.useReducer((t,r)=>e[t][r]??t,n)}var Sg=n=>{const{present:e,children:t}=n,r=Sk(e),i=typeof t=="function"?t({present:r.isPresent}):C.Children.only(t),s=Dn(r.ref,_k(i));return typeof t=="function"||r.isPresent?C.cloneElement(i,{ref:s}):null};Sg.displayName="Presence";function Sk(n){const[e,t]=C.useState(),r=C.useRef(null),i=C.useRef(n),s=C.useRef("none"),o=n?"mounted":"unmounted",[a,l]=bk(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const c=Hl(r.current);s.current=a==="mounted"?c:"none"},[a]),wi(()=>{const c=r.current,u=i.current;if(u!==n){const d=s.current,f=Hl(c);n?l("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&d!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),wi(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=f=>{const p=Hl(r.current).includes(f.animationName);if(f.target===e&&p&&(l("ANIMATION_END"),!i.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},d=f=>{f.target===e&&(s.current=Hl(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:C.useCallback(c=>{r.current=c?getComputedStyle(c):null,t(c)},[])}}function Hl(n){return(n==null?void 0:n.animationName)||"none"}function _k(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Ck=U0[" useInsertionEffect ".trim().toString()]||wi;function Tk({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,o]=kk({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:i;{const u=C.useRef(n!==void 0);C.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=C.useCallback(u=>{var h;if(a){const d=Ek(u)?u(n):u;d!==n&&((h=o.current)==null||h.call(o,d))}else s(u)},[a,n,s,o]);return[l,c]}function kk({defaultProp:n,onChange:e}){const[t,r]=C.useState(n),i=C.useRef(t),s=C.useRef(e);return Ck(()=>{s.current=e},[e]),C.useEffect(()=>{var o;i.current!==t&&((o=s.current)==null||o.call(s,t),i.current=t)},[t,i]),[t,r,s]}function Ek(n){return typeof n=="function"}var Rk=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Pk="VisuallyHidden",rh=C.forwardRef((n,e)=>x.jsx(Dt.span,{...n,ref:e,style:{...Rk,...n.style}}));rh.displayName=Pk;var Ok=rh,_g="ToastProvider",[Cg,Ak,Dk]=ck("Toast"),[nb,yW]=nh("Toast",[Dk]),[Mk,ih]=nb(_g),rb=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=n,[a,l]=C.useState(null),[c,u]=C.useState(0),h=C.useRef(!1),d=C.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${_g}\`. Expected non-empty \`string\`.`),x.jsx(Cg.Provider,{scope:e,children:x.jsx(Mk,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:C.useCallback(()=>u(f=>f+1),[]),onToastRemove:C.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:d,children:o})})};rb.displayName=_g;var ib="ToastViewport",jk=["F8"],Bf="toast.viewportPause",zf="toast.viewportResume",sb=C.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=jk,label:i="Notifications ({hotkey})",...s}=n,o=ih(ib,t),a=Ak(t),l=C.useRef(null),c=C.useRef(null),u=C.useRef(null),h=C.useRef(null),d=Dn(e,h,o.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;C.useEffect(()=>{const y=v=>{var w;r.length!==0&&r.every(b=>v[b]||v.code===b)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),C.useEffect(()=>{const y=l.current,v=h.current;if(g&&y&&v){const m=()=>{if(!o.isClosePausedRef.current){const _=new CustomEvent(Bf);v.dispatchEvent(_),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const _=new CustomEvent(zf);v.dispatchEvent(_),o.isClosePausedRef.current=!1}},b=_=>{!y.contains(_.relatedTarget)&&w()},S=()=>{y.contains(document.activeElement)||w()};return y.addEventListener("focusin",m),y.addEventListener("focusout",b),y.addEventListener("pointermove",m),y.addEventListener("pointerleave",S),window.addEventListener("blur",m),window.addEventListener("focus",w),()=>{y.removeEventListener("focusin",m),y.removeEventListener("focusout",b),y.removeEventListener("pointermove",m),y.removeEventListener("pointerleave",S),window.removeEventListener("blur",m),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const p=C.useCallback(({tabbingDirection:y})=>{const m=a().map(w=>{const b=w.ref.current,S=[b,...Yk(b)];return y==="forwards"?S:S.reverse()});return(y==="forwards"?m.reverse():m).flat()},[a]);return C.useEffect(()=>{const y=h.current;if(y){const v=m=>{var S,_,T;const w=m.altKey||m.ctrlKey||m.metaKey;if(m.key==="Tab"&&!w){const R=document.activeElement,A=m.shiftKey;if(m.target===y&&A){(S=c.current)==null||S.focus();return}const L=p({tabbingDirection:A?"backwards":"forwards"}),z=L.findIndex(N=>N===R);pd(L.slice(z+1))?m.preventDefault():A?(_=c.current)==null||_.focus():(T=u.current)==null||T.focus()}};return y.addEventListener("keydown",v),()=>y.removeEventListener("keydown",v)}},[a,p]),x.jsxs(wk,{ref:l,role:"region","aria-label":i.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&x.jsx($f,{ref:c,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"forwards"});pd(y)}}),x.jsx(Cg.Slot,{scope:t,children:x.jsx(Dt.ol,{tabIndex:-1,...s,ref:d})}),g&&x.jsx($f,{ref:u,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"backwards"});pd(y)}})]})});sb.displayName=ib;var ob="ToastFocusProxy",$f=C.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=ih(ob,t);return x.jsx(rh,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});$f.displayName=ob;var pl="Toast",Lk="toast.swipeStart",Nk="toast.swipeMove",Wk="toast.swipeCancel",Ik="toast.swipeEnd",ab=C.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...o}=n,[a,l]=Tk({prop:r,defaultProp:i??!0,onChange:s,caller:pl});return x.jsx(Sg,{present:t||a,children:x.jsx(zk,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:vi(n.onPause),onResume:vi(n.onResume),onSwipeStart:ze(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ze(n.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ze(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ze(n.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});ab.displayName=pl;var[Fk,Bk]=nb(pl,{onClose(){}}),zk=C.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:d,onSwipeEnd:f,...g}=n,p=ih(pl,t),[y,v]=C.useState(null),m=Dn(e,N=>v(N)),w=C.useRef(null),b=C.useRef(null),S=i||p.duration,_=C.useRef(0),T=C.useRef(S),R=C.useRef(0),{onToastAdd:A,onToastRemove:M}=p,B=vi(()=>{var G;(y==null?void 0:y.contains(document.activeElement))&&((G=p.viewport)==null||G.focus()),o()}),L=C.useCallback(N=>{!N||N===1/0||(window.clearTimeout(R.current),_.current=new Date().getTime(),R.current=window.setTimeout(B,N))},[B]);C.useEffect(()=>{const N=p.viewport;if(N){const G=()=>{L(T.current),c==null||c()},$=()=>{const H=new Date().getTime()-_.current;T.current=T.current-H,window.clearTimeout(R.current),l==null||l()};return N.addEventListener(Bf,$),N.addEventListener(zf,G),()=>{N.removeEventListener(Bf,$),N.removeEventListener(zf,G)}}},[p.viewport,S,l,c,L]),C.useEffect(()=>{s&&!p.isClosePausedRef.current&&L(S)},[s,S,p.isClosePausedRef,L]),C.useEffect(()=>(A(),()=>M()),[A,M]);const z=C.useMemo(()=>y?pb(y):null,[y]);return p.viewport?x.jsxs(x.Fragment,{children:[z&&x.jsx($k,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),x.jsx(Fk,{scope:t,onClose:B,children:Pr.createPortal(x.jsx(Cg.ItemSlot,{scope:t,children:x.jsx(vk,{asChild:!0,onEscapeKeyDown:ze(a,()=>{p.isFocusedToastEscapeKeyDownRef.current||B(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:x.jsx(Dt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":p.swipeDirection,...g,ref:m,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:ze(n.onKeyDown,N=>{N.key==="Escape"&&(a==null||a(N.nativeEvent),N.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,B()))}),onPointerDown:ze(n.onPointerDown,N=>{N.button===0&&(w.current={x:N.clientX,y:N.clientY})}),onPointerMove:ze(n.onPointerMove,N=>{if(!w.current)return;const G=N.clientX-w.current.x,$=N.clientY-w.current.y,H=!!b.current,O=["left","right"].includes(p.swipeDirection),D=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,I=O?D(0,G):0,q=O?0:D(0,$),Y=N.pointerType==="touch"?10:2,Q={x:I,y:q},K={originalEvent:N,delta:Q};H?(b.current=Q,Ul(Nk,h,K,{discrete:!1})):Ay(Q,p.swipeDirection,Y)?(b.current=Q,Ul(Lk,u,K,{discrete:!1}),N.target.setPointerCapture(N.pointerId)):(Math.abs(G)>Y||Math.abs($)>Y)&&(w.current=null)}),onPointerUp:ze(n.onPointerUp,N=>{const G=b.current,$=N.target;if($.hasPointerCapture(N.pointerId)&&$.releasePointerCapture(N.pointerId),b.current=null,w.current=null,G){const H=N.currentTarget,O={originalEvent:N,delta:G};Ay(G,p.swipeDirection,p.swipeThreshold)?Ul(Ik,f,O,{discrete:!0}):Ul(Wk,d,O,{discrete:!0}),H.addEventListener("click",D=>D.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),$k=n=>{const{__scopeToast:e,children:t,...r}=n,i=ih(pl,e),[s,o]=C.useState(!1),[a,l]=C.useState(!1);return Vk(()=>o(!0)),C.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:x.jsx(tb,{asChild:!0,children:x.jsx(rh,{...r,children:s&&x.jsxs(x.Fragment,{children:[i.label," ",t]})})})},Hk="ToastTitle",lb=C.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return x.jsx(Dt.div,{...r,ref:e})});lb.displayName=Hk;var Uk="ToastDescription",cb=C.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return x.jsx(Dt.div,{...r,ref:e})});cb.displayName=Uk;var ub="ToastAction",hb=C.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?x.jsx(fb,{altText:t,asChild:!0,children:x.jsx(Tg,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${ub}\`. Expected non-empty \`string\`.`),null)});hb.displayName=ub;var db="ToastClose",Tg=C.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=Bk(db,t);return x.jsx(fb,{asChild:!0,children:x.jsx(Dt.button,{type:"button",...r,ref:e,onClick:ze(n.onClick,i.onClose)})})});Tg.displayName=db;var fb=C.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return x.jsx(Dt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function pb(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Gk(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...pb(r))}}),e}function Ul(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?Jx(i,s):i.dispatchEvent(s)}var Ay=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function Vk(n=()=>{}){const e=vi(n);wi(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function Gk(n){return n.nodeType===n.ELEMENT_NODE}function Yk(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function pd(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var Xk=rb,gb=sb,mb=ab,yb=lb,vb=cb,wb=hb,xb=Tg;function bb(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=bb(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Sb(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=bb(n))&&(r&&(r+=" "),r+=e);return r}const Dy=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,My=Sb,qk=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return My(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=t==null?void 0:t[c],h=s==null?void 0:s[c];if(u===null)return null;const d=Dy(u)||Dy(h);return i[c][d]}),a=t&&Object.entries(t).reduce((c,u)=>{let[h,d]=u;return d===void 0||(c[h]=d),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:d,...f}=u;return Object.entries(f).every(g=>{let[p,y]=g;return Array.isArray(y)?y.includes({...s,...a}[p]):{...s,...a}[p]===y})?[...c,h,d]:c},[]);return My(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_b=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=C.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>C.createElement("svg",{ref:l,...Jk,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:_b("lucide",i),...a},[...o.map(([c,u])=>C.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=(n,e)=>{const t=C.forwardRef(({className:r,...i},s)=>C.createElement(Qk,{ref:s,iconNode:e,className:_b(`lucide-${Kk(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=Je("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=Je("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=Je("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=Je("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=Je("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=Je("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=Je("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=Je("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=Je("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=Je("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=Je("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=Je("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=Je("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=Je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=Je("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=Je("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=Je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),kg="-",fE=n=>{const e=gE(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(kg);return a[0]===""&&a.length!==1&&a.shift(),Tb(a,e)||pE(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},Tb=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?Tb(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=n.join(kg);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},Ly=/^\[(.+)\]$/,pE=n=>{if(Ly.test(n)){const e=Ly.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},gE=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return yE(Object.entries(n.classGroups),t).forEach(([s,o])=>{Hf(o,r,s,e)}),r},Hf=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const s=i===""?e:Ny(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(mE(i)){Hf(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{Hf(o,Ny(e,s),t,r)})})},Ny=(n,e)=>{let t=n;return e.split(kg).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},mE=n=>n.isThemeGetter,yE=(n,e)=>e?n.map(([t,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,i]}):n,vE=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},kb="!",wE=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,u=0,h;for(let y=0;y<a.length;y++){let v=a[y];if(c===0){if(v===i&&(r||a.slice(y,y+s)===e)){l.push(a.slice(u,y)),u=y+s;continue}if(v==="/"){h=y;continue}}v==="["?c++:v==="]"&&c--}const d=l.length===0?a:a.substring(u),f=d.startsWith(kb),g=f?d.substring(1):d,p=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:g,maybePostfixModifierPosition:p}};return t?a=>t({className:a,parseClassName:o}):o},xE=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},bE=n=>({cache:vE(n.cacheSize),parseClassName:wE(n),...fE(n)}),SE=/\s+/,_E=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=n.trim().split(SE);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:d,maybePostfixModifierPosition:f}=t(c);let g=!!f,p=r(g?d.substring(0,f):d);if(!p){if(!g){a=c+(a.length>0?" "+a:a);continue}if(p=r(d),!p){a=c+(a.length>0?" "+a:a);continue}g=!1}const y=xE(u).join(":"),v=h?y+kb:y,m=v+p;if(s.includes(m))continue;s.push(m);const w=i(p,g);for(let b=0;b<w.length;++b){const S=w[b];s.push(v+S)}a=c+(a.length>0?" "+a:a)}return a};function CE(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Eb(e))&&(r&&(r+=" "),r+=t);return r}const Eb=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=Eb(n[r]))&&(t&&(t+=" "),t+=e);return t};function TE(n,...e){let t,r,i,s=o;function o(l){const c=e.reduce((u,h)=>h(u),n());return t=bE(c),r=t.cache.get,i=t.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=_E(l,t);return i(l,u),u}return function(){return s(CE.apply(null,arguments))}}const me=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},Rb=/^\[(?:([a-z-]+):)?(.+)\]$/i,kE=/^\d+\/\d+$/,EE=new Set(["px","full","screen"]),RE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,PE=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,OE=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,AE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,DE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,rr=n=>so(n)||EE.has(n)||kE.test(n),Fr=n=>Lo(n,"length",BE),so=n=>!!n&&!Number.isNaN(Number(n)),md=n=>Lo(n,"number",so),ra=n=>!!n&&Number.isInteger(Number(n)),ME=n=>n.endsWith("%")&&so(n.slice(0,-1)),te=n=>Rb.test(n),Br=n=>RE.test(n),jE=new Set(["length","size","percentage"]),LE=n=>Lo(n,jE,Pb),NE=n=>Lo(n,"position",Pb),WE=new Set(["image","url"]),IE=n=>Lo(n,WE,$E),FE=n=>Lo(n,"",zE),ia=()=>!0,Lo=(n,e,t)=>{const r=Rb.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},BE=n=>PE.test(n)&&!OE.test(n),Pb=()=>!1,zE=n=>AE.test(n),$E=n=>DE.test(n),HE=()=>{const n=me("colors"),e=me("spacing"),t=me("blur"),r=me("brightness"),i=me("borderColor"),s=me("borderRadius"),o=me("borderSpacing"),a=me("borderWidth"),l=me("contrast"),c=me("grayscale"),u=me("hueRotate"),h=me("invert"),d=me("gap"),f=me("gradientColorStops"),g=me("gradientColorStopPositions"),p=me("inset"),y=me("margin"),v=me("opacity"),m=me("padding"),w=me("saturate"),b=me("scale"),S=me("sepia"),_=me("skew"),T=me("space"),R=me("translate"),A=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",te,e],L=()=>[te,e],z=()=>["",rr,Fr],N=()=>["auto",so,te],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",te],I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[so,te];return{cacheSize:500,separator:":",theme:{colors:[ia],spacing:[rr,Fr],blur:["none","",Br,te],brightness:q(),borderColor:[n],borderRadius:["none","","full",Br,te],borderSpacing:L(),borderWidth:z(),contrast:q(),grayscale:D(),hueRotate:q(),invert:D(),gap:L(),gradientColorStops:[n],gradientColorStopPositions:[ME,Fr],inset:B(),margin:B(),opacity:q(),padding:L(),saturate:q(),scale:q(),sepia:D(),skew:q(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",te]}],container:["container"],columns:[{columns:[Br]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),te]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ra,te]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",te]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",ra,te]}],"grid-cols":[{"grid-cols":[ia]}],"col-start-end":[{col:["auto",{span:["full",ra,te]},te]}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":[ia]}],"row-start-end":[{row:["auto",{span:[ra,te]},te]}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",te]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",te]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",te,e]}],"min-w":[{"min-w":[te,e,"min","max","fit"]}],"max-w":[{"max-w":[te,e,"none","full","min","max","fit","prose",{screen:[Br]},Br]}],h:[{h:[te,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[te,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[te,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[te,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Br,Fr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",md]}],"font-family":[{font:[ia]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",te]}],"line-clamp":[{"line-clamp":["none",so,md]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",rr,te]}],"list-image":[{"list-image":["none",te]}],"list-style-type":[{list:["none","disc","decimal",te]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",rr,Fr]}],"underline-offset":[{"underline-offset":["auto",rr,te]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),NE]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",LE]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},IE]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:$()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[rr,te]}],"outline-w":[{outline:[rr,Fr]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[rr,Fr]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Br,FE]}],"shadow-color":[{shadow:[ia]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Br,te]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",te]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",te]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",te]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[ra,te]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",te]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",te]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",te]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[rr,Fr,md]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},UE=TE(HE);function fs(...n){return UE(Sb(n))}const VE=Xk,Ob=C.forwardRef(({className:n,...e},t)=>x.jsx(gb,{ref:t,className:fs("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));Ob.displayName=gb.displayName;const GE=qk("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ab=C.forwardRef(({className:n,variant:e,...t},r)=>x.jsx(mb,{ref:r,className:fs(GE({variant:e}),n),...t}));Ab.displayName=mb.displayName;const YE=C.forwardRef(({className:n,...e},t)=>x.jsx(wb,{ref:t,className:fs("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",n),...e}));YE.displayName=wb.displayName;const Db=C.forwardRef(({className:n,...e},t)=>x.jsx(xb,{ref:t,className:fs("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:x.jsx(Cb,{className:"h-4 w-4"})}));Db.displayName=xb.displayName;const Mb=C.forwardRef(({className:n,...e},t)=>x.jsx(yb,{ref:t,className:fs("text-sm font-semibold",n),...e}));Mb.displayName=yb.displayName;const jb=C.forwardRef(({className:n,...e},t)=>x.jsx(vb,{ref:t,className:fs("text-sm opacity-90",n),...e}));jb.displayName=vb.displayName;function XE(){const{toasts:n}=nk();return x.jsxs(VE,{children:[n.map(function({id:e,title:t,description:r,action:i,...s}){return x.jsxs(Ab,{...s,children:[x.jsxs("div",{className:"grid gap-1",children:[t&&x.jsx(Mb,{children:t}),r&&x.jsx(jb,{children:r})]}),i,x.jsx(Db,{})]},e)}),x.jsx(Ob,{})]})}var Wy=["light","dark"],qE="(prefers-color-scheme: dark)",KE=C.createContext(void 0),JE={setTheme:n=>{},themes:[]},QE=()=>{var n;return(n=C.useContext(KE))!=null?n:JE};C.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:l})=>{let c=s==="system",u=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,h=i?Wy.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",d=(g,p=!1,y=!0)=>{let v=o?o[g]:g,m=p?g+"|| ''":`'${v}'`,w="";return i&&y&&!p&&Wy.includes(g)&&(w+=`d.style.colorScheme = '${g}';`),t==="class"?p||v?w+=`c.add(${m})`:w+="null":v&&(w+=`d[s](n,${m})`),w},f=n?`!function(){${u}${d(n)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${qE}',m=window.matchMedia(t);if(m.media!==t||m.matches){${d("dark")}}else{${d("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${d(o?"x[e]":"e",!0)}}${c?"":"else{"+d(s,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${d(o?"x[e]":"e",!0)}}else{${d(s,!1,!1)};}${h}}catch(t){}}();`;return C.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:f}})});var ZE=n=>{switch(n){case"success":return nR;case"info":return iR;case"warning":return rR;case"error":return sR;default:return null}},eR=Array(12).fill(0),tR=({visible:n,className:e})=>F.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},F.createElement("div",{className:"sonner-spinner"},eR.map((t,r)=>F.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),nR=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),rR=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),iR=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),sR=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),oR=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},F.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),F.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),aR=()=>{let[n,e]=F.useState(document.hidden);return F.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},Uf=1,lR=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Uf++,o=this.toasts.find(l=>l.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...i,dismissible:a,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let i=e instanceof Promise?e:e(),s=r!==void 0,o,a=i.then(async c=>{if(o=["resolve",c],F.isValidElement(c))s=!1,this.create({id:r,type:"default",message:c});else if(uR(c)&&!c.ok){s=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:h})}else if(t.success!==void 0){s=!1;let u=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:h})}}).catch(async c=>{if(o=["reject",c],t.error!==void 0){s=!1;let u=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:h})}}).finally(()=>{var c;s&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Uf++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},wt=new lR,cR=(n,e)=>{let t=(e==null?void 0:e.id)||Uf++;return wt.addToast({title:n,...e,id:t}),t},uR=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",hR=cR,dR=()=>wt.toasts,fR=()=>wt.getActiveToasts(),ns=Object.assign(hR,{success:wt.success,info:wt.info,warning:wt.warning,error:wt.error,custom:wt.custom,message:wt.message,promise:wt.promise,dismiss:wt.dismiss,loading:wt.loading},{getHistory:dR,getToasts:fR});function pR(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}pR(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Vl(n){return n.label!==void 0}var gR=3,mR="32px",yR="16px",Iy=4e3,vR=356,wR=14,xR=20,bR=200;function dn(...n){return n.filter(Boolean).join(" ")}function SR(n){let[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var _R=n=>{var e,t,r,i,s,o,a,l,c,u,h;let{invert:d,toast:f,unstyled:g,interacting:p,setHeights:y,visibleToasts:v,heights:m,index:w,toasts:b,expanded:S,removeToast:_,defaultRichColors:T,closeButton:R,style:A,cancelButtonStyle:M,actionButtonStyle:B,className:L="",descriptionClassName:z="",duration:N,position:G,gap:$,loadingIcon:H,expandByDefault:O,classNames:D,icons:I,closeButtonAriaLabel:q="Close toast",pauseWhenPageIsHidden:Y}=n,[Q,K]=F.useState(null),[ge,we]=F.useState(null),[ie,Dr]=F.useState(!1),[Gt,Qe]=F.useState(!1),[Mr,ys]=F.useState(!1),[jr,Sl]=F.useState(!1),[Lh,_l]=F.useState(!1),[Nh,Yo]=F.useState(0),[vs,hm]=F.useState(0),Xo=F.useRef(f.duration||N||Iy),dm=F.useRef(null),Pi=F.useRef(null),m1=w===0,y1=w+1<=v,Yt=f.type,ws=f.dismissible!==!1,v1=f.className||"",w1=f.descriptionClassName||"",Cl=F.useMemo(()=>m.findIndex(Z=>Z.toastId===f.id)||0,[m,f.id]),x1=F.useMemo(()=>{var Z;return(Z=f.closeButton)!=null?Z:R},[f.closeButton,R]),fm=F.useMemo(()=>f.duration||N||Iy,[f.duration,N]),Wh=F.useRef(0),xs=F.useRef(0),pm=F.useRef(0),bs=F.useRef(null),[b1,S1]=G.split("-"),gm=F.useMemo(()=>m.reduce((Z,he,xe)=>xe>=Cl?Z:Z+he.height,0),[m,Cl]),mm=aR(),_1=f.invert||d,Ih=Yt==="loading";xs.current=F.useMemo(()=>Cl*$+gm,[Cl,gm]),F.useEffect(()=>{Xo.current=fm},[fm]),F.useEffect(()=>{Dr(!0)},[]),F.useEffect(()=>{let Z=Pi.current;if(Z){let he=Z.getBoundingClientRect().height;return hm(he),y(xe=>[{toastId:f.id,height:he,position:f.position},...xe]),()=>y(xe=>xe.filter(ln=>ln.toastId!==f.id))}},[y,f.id]),F.useLayoutEffect(()=>{if(!ie)return;let Z=Pi.current,he=Z.style.height;Z.style.height="auto";let xe=Z.getBoundingClientRect().height;Z.style.height=he,hm(xe),y(ln=>ln.find(cn=>cn.toastId===f.id)?ln.map(cn=>cn.toastId===f.id?{...cn,height:xe}:cn):[{toastId:f.id,height:xe,position:f.position},...ln])},[ie,f.title,f.description,y,f.id]);let Lr=F.useCallback(()=>{Qe(!0),Yo(xs.current),y(Z=>Z.filter(he=>he.toastId!==f.id)),setTimeout(()=>{_(f)},bR)},[f,_,y,xs]);F.useEffect(()=>{if(f.promise&&Yt==="loading"||f.duration===1/0||f.type==="loading")return;let Z;return S||p||Y&&mm?(()=>{if(pm.current<Wh.current){let he=new Date().getTime()-Wh.current;Xo.current=Xo.current-he}pm.current=new Date().getTime()})():Xo.current!==1/0&&(Wh.current=new Date().getTime(),Z=setTimeout(()=>{var he;(he=f.onAutoClose)==null||he.call(f,f),Lr()},Xo.current)),()=>clearTimeout(Z)},[S,p,f,Yt,Y,mm,Lr]),F.useEffect(()=>{f.delete&&Lr()},[Lr,f.delete]);function C1(){var Z,he,xe;return I!=null&&I.loading?F.createElement("div",{className:dn(D==null?void 0:D.loader,(Z=f==null?void 0:f.classNames)==null?void 0:Z.loader,"sonner-loader"),"data-visible":Yt==="loading"},I.loading):H?F.createElement("div",{className:dn(D==null?void 0:D.loader,(he=f==null?void 0:f.classNames)==null?void 0:he.loader,"sonner-loader"),"data-visible":Yt==="loading"},H):F.createElement(tR,{className:dn(D==null?void 0:D.loader,(xe=f==null?void 0:f.classNames)==null?void 0:xe.loader),visible:Yt==="loading"})}return F.createElement("li",{tabIndex:0,ref:Pi,className:dn(L,v1,D==null?void 0:D.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,D==null?void 0:D.default,D==null?void 0:D[Yt],(t=f==null?void 0:f.classNames)==null?void 0:t[Yt]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:T,"data-styled":!(f.jsx||f.unstyled||g),"data-mounted":ie,"data-promise":!!f.promise,"data-swiped":Lh,"data-removed":Gt,"data-visible":y1,"data-y-position":b1,"data-x-position":S1,"data-index":w,"data-front":m1,"data-swiping":Mr,"data-dismissible":ws,"data-type":Yt,"data-invert":_1,"data-swipe-out":jr,"data-swipe-direction":ge,"data-expanded":!!(S||O&&ie),style:{"--index":w,"--toasts-before":w,"--z-index":b.length-w,"--offset":`${Gt?Nh:xs.current}px`,"--initial-height":O?"auto":`${vs}px`,...A,...f.style},onDragEnd:()=>{ys(!1),K(null),bs.current=null},onPointerDown:Z=>{Ih||!ws||(dm.current=new Date,Yo(xs.current),Z.target.setPointerCapture(Z.pointerId),Z.target.tagName!=="BUTTON"&&(ys(!0),bs.current={x:Z.clientX,y:Z.clientY}))},onPointerUp:()=>{var Z,he,xe,ln;if(jr||!ws)return;bs.current=null;let cn=Number(((Z=Pi.current)==null?void 0:Z.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Nr=Number(((he=Pi.current)==null?void 0:he.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Oi=new Date().getTime()-((xe=dm.current)==null?void 0:xe.getTime()),un=Q==="x"?cn:Nr,Wr=Math.abs(un)/Oi;if(Math.abs(un)>=xR||Wr>.11){Yo(xs.current),(ln=f.onDismiss)==null||ln.call(f,f),we(Q==="x"?cn>0?"right":"left":Nr>0?"down":"up"),Lr(),Sl(!0),_l(!1);return}ys(!1),K(null)},onPointerMove:Z=>{var he,xe,ln,cn;if(!bs.current||!ws||((he=window.getSelection())==null?void 0:he.toString().length)>0)return;let Nr=Z.clientY-bs.current.y,Oi=Z.clientX-bs.current.x,un=(xe=n.swipeDirections)!=null?xe:SR(G);!Q&&(Math.abs(Oi)>1||Math.abs(Nr)>1)&&K(Math.abs(Oi)>Math.abs(Nr)?"x":"y");let Wr={x:0,y:0};Q==="y"?(un.includes("top")||un.includes("bottom"))&&(un.includes("top")&&Nr<0||un.includes("bottom")&&Nr>0)&&(Wr.y=Nr):Q==="x"&&(un.includes("left")||un.includes("right"))&&(un.includes("left")&&Oi<0||un.includes("right")&&Oi>0)&&(Wr.x=Oi),(Math.abs(Wr.x)>0||Math.abs(Wr.y)>0)&&_l(!0),(ln=Pi.current)==null||ln.style.setProperty("--swipe-amount-x",`${Wr.x}px`),(cn=Pi.current)==null||cn.style.setProperty("--swipe-amount-y",`${Wr.y}px`)}},x1&&!f.jsx?F.createElement("button",{"aria-label":q,"data-disabled":Ih,"data-close-button":!0,onClick:Ih||!ws?()=>{}:()=>{var Z;Lr(),(Z=f.onDismiss)==null||Z.call(f,f)},className:dn(D==null?void 0:D.closeButton,(i=f==null?void 0:f.classNames)==null?void 0:i.closeButton)},(s=I==null?void 0:I.close)!=null?s:oR):null,f.jsx||C.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:F.createElement(F.Fragment,null,Yt||f.icon||f.promise?F.createElement("div",{"data-icon":"",className:dn(D==null?void 0:D.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||C1():null,f.type!=="loading"?f.icon||(I==null?void 0:I[Yt])||ZE(Yt):null):null,F.createElement("div",{"data-content":"",className:dn(D==null?void 0:D.content,(a=f==null?void 0:f.classNames)==null?void 0:a.content)},F.createElement("div",{"data-title":"",className:dn(D==null?void 0:D.title,(l=f==null?void 0:f.classNames)==null?void 0:l.title)},typeof f.title=="function"?f.title():f.title),f.description?F.createElement("div",{"data-description":"",className:dn(z,w1,D==null?void 0:D.description,(c=f==null?void 0:f.classNames)==null?void 0:c.description)},typeof f.description=="function"?f.description():f.description):null),C.isValidElement(f.cancel)?f.cancel:f.cancel&&Vl(f.cancel)?F.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||M,onClick:Z=>{var he,xe;Vl(f.cancel)&&ws&&((xe=(he=f.cancel).onClick)==null||xe.call(he,Z),Lr())},className:dn(D==null?void 0:D.cancelButton,(u=f==null?void 0:f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,C.isValidElement(f.action)?f.action:f.action&&Vl(f.action)?F.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||B,onClick:Z=>{var he,xe;Vl(f.action)&&((xe=(he=f.action).onClick)==null||xe.call(he,Z),!Z.defaultPrevented&&Lr())},className:dn(D==null?void 0:D.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function Fy(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function CR(n,e){let t={};return[n,e].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",a=s?yR:mR;function l(c){["top","right","bottom","left"].forEach(u=>{t[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?t[`${o}-${c}`]=a:t[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),t}var TR=C.forwardRef(function(n,e){let{invert:t,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:h,duration:d,style:f,visibleToasts:g=gR,toastOptions:p,dir:y=Fy(),gap:v=wR,loadingIcon:m,icons:w,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:S}=n,[_,T]=F.useState([]),R=F.useMemo(()=>Array.from(new Set([r].concat(_.filter(Y=>Y.position).map(Y=>Y.position)))),[_,r]),[A,M]=F.useState([]),[B,L]=F.useState(!1),[z,N]=F.useState(!1),[G,$]=F.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),H=F.useRef(null),O=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=F.useRef(null),I=F.useRef(!1),q=F.useCallback(Y=>{T(Q=>{var K;return(K=Q.find(ge=>ge.id===Y.id))!=null&&K.delete||wt.dismiss(Y.id),Q.filter(({id:ge})=>ge!==Y.id)})},[]);return F.useEffect(()=>wt.subscribe(Y=>{if(Y.dismiss){T(Q=>Q.map(K=>K.id===Y.id?{...K,delete:!0}:K));return}setTimeout(()=>{Yx.flushSync(()=>{T(Q=>{let K=Q.findIndex(ge=>ge.id===Y.id);return K!==-1?[...Q.slice(0,K),{...Q[K],...Y},...Q.slice(K+1)]:[Y,...Q]})})})}),[]),F.useEffect(()=>{if(u!=="system"){$(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;let Y=window.matchMedia("(prefers-color-scheme: dark)");try{Y.addEventListener("change",({matches:Q})=>{$(Q?"dark":"light")})}catch{Y.addListener(({matches:K})=>{try{$(K?"dark":"light")}catch(ge){console.error(ge)}})}},[u]),F.useEffect(()=>{_.length<=1&&L(!1)},[_]),F.useEffect(()=>{let Y=Q=>{var K,ge;i.every(we=>Q[we]||Q.code===we)&&(L(!0),(K=H.current)==null||K.focus()),Q.code==="Escape"&&(document.activeElement===H.current||(ge=H.current)!=null&&ge.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[i]),F.useEffect(()=>{if(H.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,I.current=!1)}},[H.current]),F.createElement("section",{ref:e,"aria-label":`${b} ${O}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((Y,Q)=>{var K;let[ge,we]=Y.split("-");return _.length?F.createElement("ol",{key:Y,dir:y==="auto"?Fy():y,tabIndex:-1,ref:H,className:a,"data-sonner-toaster":!0,"data-theme":G,"data-y-position":ge,"data-lifted":B&&_.length>1&&!s,"data-x-position":we,style:{"--front-toast-height":`${((K=A[0])==null?void 0:K.height)||0}px`,"--width":`${vR}px`,"--gap":`${v}px`,...f,...CR(l,c)},onBlur:ie=>{I.current&&!ie.currentTarget.contains(ie.relatedTarget)&&(I.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||I.current||(I.current=!0,D.current=ie.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{z||L(!1)},onDragEnd:()=>L(!1),onPointerDown:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||N(!0)},onPointerUp:()=>N(!1)},_.filter(ie=>!ie.position&&Q===0||ie.position===Y).map((ie,Dr)=>{var Gt,Qe;return F.createElement(_R,{key:ie.id,icons:w,index:Dr,toast:ie,defaultRichColors:h,duration:(Gt=p==null?void 0:p.duration)!=null?Gt:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:t,visibleToasts:g,closeButton:(Qe=p==null?void 0:p.closeButton)!=null?Qe:o,interacting:z,position:Y,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:q,toasts:_.filter(Mr=>Mr.position==ie.position),heights:A.filter(Mr=>Mr.position==ie.position),setHeights:M,expandByDefault:s,gap:v,loadingIcon:m,expanded:B,pauseWhenPageIsHidden:S,swipeDirections:n.swipeDirections})})):null}))});const kR=({...n})=>{const{theme:e="system"}=QE();return x.jsx(TR,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})},ER=["top","right","bottom","left"],xi=Math.min,It=Math.max,yu=Math.round,Gl=Math.floor,qn=n=>({x:n,y:n}),RR={left:"right",right:"left",bottom:"top",top:"bottom"},PR={start:"end",end:"start"};function Vf(n,e,t){return It(n,xi(e,t))}function Sr(n,e){return typeof n=="function"?n(e):n}function _r(n){return n.split("-")[0]}function No(n){return n.split("-")[1]}function Eg(n){return n==="x"?"y":"x"}function Rg(n){return n==="y"?"height":"width"}const OR=new Set(["top","bottom"]);function Vn(n){return OR.has(_r(n))?"y":"x"}function Pg(n){return Eg(Vn(n))}function AR(n,e,t){t===void 0&&(t=!1);const r=No(n),i=Pg(n),s=Rg(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=vu(o)),[o,vu(o)]}function DR(n){const e=vu(n);return[Gf(n),e,Gf(e)]}function Gf(n){return n.replace(/start|end/g,e=>PR[e])}const By=["left","right"],zy=["right","left"],MR=["top","bottom"],jR=["bottom","top"];function LR(n,e,t){switch(n){case"top":case"bottom":return t?e?zy:By:e?By:zy;case"left":case"right":return e?MR:jR;default:return[]}}function NR(n,e,t,r){const i=No(n);let s=LR(_r(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(Gf)))),s}function vu(n){return n.replace(/left|right|bottom|top/g,e=>RR[e])}function WR(n){return{top:0,right:0,bottom:0,left:0,...n}}function Lb(n){return typeof n!="number"?WR(n):{top:n,right:n,bottom:n,left:n}}function wu(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function $y(n,e,t){let{reference:r,floating:i}=n;const s=Vn(e),o=Pg(e),a=Rg(o),l=_r(e),c=s==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let f;switch(l){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-i.width,y:h};break;default:f={x:r.x,y:r.y}}switch(No(e)){case"start":f[o]-=d*(t&&c?-1:1);break;case"end":f[o]+=d*(t&&c?-1:1);break}return f}const IR=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:h}=$y(c,r,l),d=r,f={},g=0;for(let p=0;p<a.length;p++){const{name:y,fn:v}=a[p],{x:m,y:w,data:b,reset:S}=await v({x:u,y:h,initialPlacement:r,placement:d,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:n,floating:e}});u=m??u,h=w??h,f={...f,[y]:{...f[y],...b}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(d=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):S.rects),{x:u,y:h}=$y(c,d,l)),p=-1)}return{x:u,y:h,placement:d,strategy:i,middlewareData:f}};async function qa(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=Sr(e,n),g=Lb(f),y=a[d?h==="floating"?"reference":"floating":h],v=wu(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(y)))==null||t?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),m=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),b=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},S=wu(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:m,offsetParent:w,strategy:l}):m);return{top:(v.top-S.top+g.top)/b.y,bottom:(S.bottom-v.bottom+g.bottom)/b.y,left:(v.left-S.left+g.left)/b.x,right:(S.right-v.right+g.right)/b.x}}const FR=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Sr(n,e)||{};if(c==null)return{};const h=Lb(u),d={x:t,y:r},f=Pg(i),g=Rg(f),p=await o.getDimensions(c),y=f==="y",v=y?"top":"left",m=y?"bottom":"right",w=y?"clientHeight":"clientWidth",b=s.reference[g]+s.reference[f]-d[f]-s.floating[g],S=d[f]-s.reference[f],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let T=_?_[w]:0;(!T||!await(o.isElement==null?void 0:o.isElement(_)))&&(T=a.floating[w]||s.floating[g]);const R=b/2-S/2,A=T/2-p[g]/2-1,M=xi(h[v],A),B=xi(h[m],A),L=M,z=T-p[g]-B,N=T/2-p[g]/2+R,G=Vf(L,N,z),$=!l.arrow&&No(i)!=null&&N!==G&&s.reference[g]/2-(N<L?M:B)-p[g]/2<0,H=$?N<L?N-L:N-z:0;return{[f]:d[f]+H,data:{[f]:G,centerOffset:N-G-H,...$&&{alignmentOffset:H}},reset:$}}}),BR=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...y}=Sr(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const v=_r(i),m=Vn(a),w=_r(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=d||(w||!p?[vu(a)]:DR(a)),_=g!=="none";!d&&_&&S.push(...NR(a,p,g,b));const T=[a,...S],R=await qa(e,y),A=[];let M=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&A.push(R[v]),h){const N=AR(i,o,b);A.push(R[N[0]],R[N[1]])}if(M=[...M,{placement:i,overflows:A}],!A.every(N=>N<=0)){var B,L;const N=(((B=s.flip)==null?void 0:B.index)||0)+1,G=T[N];if(G&&(!(h==="alignment"?m!==Vn(G):!1)||M.every(O=>O.overflows[0]>0&&Vn(O.placement)===m)))return{data:{index:N,overflows:M},reset:{placement:G}};let $=(L=M.filter(H=>H.overflows[0]<=0).sort((H,O)=>H.overflows[1]-O.overflows[1])[0])==null?void 0:L.placement;if(!$)switch(f){case"bestFit":{var z;const H=(z=M.filter(O=>{if(_){const D=Vn(O.placement);return D===m||D==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(D=>D>0).reduce((D,I)=>D+I,0)]).sort((O,D)=>O[1]-D[1])[0])==null?void 0:z[0];H&&($=H);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function Hy(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function Uy(n){return ER.some(e=>n[e]>=0)}const zR=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Sr(n,e);switch(r){case"referenceHidden":{const s=await qa(e,{...i,elementContext:"reference"}),o=Hy(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Uy(o)}}}case"escaped":{const s=await qa(e,{...i,altBoundary:!0}),o=Hy(s,t.floating);return{data:{escapedOffsets:o,escaped:Uy(o)}}}default:return{}}}}},Nb=new Set(["left","top"]);async function $R(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=_r(t),a=No(t),l=Vn(t)==="y",c=Nb.has(o)?-1:1,u=s&&l?-1:1,h=Sr(e,n);let{mainAxis:d,crossAxis:f,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof g=="number"&&(f=a==="end"?g*-1:g),l?{x:f*u,y:d*c}:{x:d*c,y:f*u}}const HR=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await $R(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},UR=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:v,y:m}=y;return{x:v,y:m}}},...l}=Sr(n,e),c={x:t,y:r},u=await qa(e,l),h=Vn(_r(i)),d=Eg(h);let f=c[d],g=c[h];if(s){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",m=f+u[y],w=f-u[v];f=Vf(m,f,w)}if(o){const y=h==="y"?"top":"left",v=h==="y"?"bottom":"right",m=g+u[y],w=g-u[v];g=Vf(m,g,w)}const p=a.fn({...e,[d]:f,[h]:g});return{...p,data:{x:p.x-t,y:p.y-r,enabled:{[d]:s,[h]:o}}}}}},VR=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Sr(n,e),u={x:t,y:r},h=Vn(i),d=Eg(h);let f=u[d],g=u[h];const p=Sr(a,e),y=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const w=d==="y"?"height":"width",b=s.reference[d]-s.floating[w]+y.mainAxis,S=s.reference[d]+s.reference[w]-y.mainAxis;f<b?f=b:f>S&&(f=S)}if(c){var v,m;const w=d==="y"?"width":"height",b=Nb.has(_r(i)),S=s.reference[h]-s.floating[w]+(b&&((v=o.offset)==null?void 0:v[h])||0)+(b?0:y.crossAxis),_=s.reference[h]+s.reference[w]+(b?0:((m=o.offset)==null?void 0:m[h])||0)-(b?y.crossAxis:0);g<S?g=S:g>_&&(g=_)}return{[d]:f,[h]:g}}}},GR=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Sr(n,e),u=await qa(e,c),h=_r(i),d=No(i),f=Vn(i)==="y",{width:g,height:p}=s.floating;let y,v;h==="top"||h==="bottom"?(y=h,v=d===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=h,y=d==="end"?"top":"bottom");const m=p-u.top-u.bottom,w=g-u.left-u.right,b=xi(p-u[y],m),S=xi(g-u[v],w),_=!e.middlewareData.shift;let T=b,R=S;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(R=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=m),_&&!d){const M=It(u.left,0),B=It(u.right,0),L=It(u.top,0),z=It(u.bottom,0);f?R=g-2*(M!==0||B!==0?M+B:It(u.left,u.right)):T=p-2*(L!==0||z!==0?L+z:It(u.top,u.bottom))}await l({...e,availableWidth:R,availableHeight:T});const A=await o.getDimensions(a.floating);return g!==A.width||p!==A.height?{reset:{rects:!0}}:{}}}};function sh(){return typeof window<"u"}function Wo(n){return Wb(n)?(n.nodeName||"").toLowerCase():"#document"}function zt(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Zn(n){var e;return(e=(Wb(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Wb(n){return sh()?n instanceof Node||n instanceof zt(n).Node:!1}function Mn(n){return sh()?n instanceof Element||n instanceof zt(n).Element:!1}function Jn(n){return sh()?n instanceof HTMLElement||n instanceof zt(n).HTMLElement:!1}function Vy(n){return!sh()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof zt(n).ShadowRoot}const YR=new Set(["inline","contents"]);function gl(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=jn(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!YR.has(i)}const XR=new Set(["table","td","th"]);function qR(n){return XR.has(Wo(n))}const KR=[":popover-open",":modal"];function oh(n){return KR.some(e=>{try{return n.matches(e)}catch{return!1}})}const JR=["transform","translate","scale","rotate","perspective"],QR=["transform","translate","scale","rotate","perspective","filter"],ZR=["paint","layout","strict","content"];function Og(n){const e=Ag(),t=Mn(n)?jn(n):n;return JR.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||QR.some(r=>(t.willChange||"").includes(r))||ZR.some(r=>(t.contain||"").includes(r))}function eP(n){let e=bi(n);for(;Jn(e)&&!Ro(e);){if(Og(e))return e;if(oh(e))return null;e=bi(e)}return null}function Ag(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const tP=new Set(["html","body","#document"]);function Ro(n){return tP.has(Wo(n))}function jn(n){return zt(n).getComputedStyle(n)}function ah(n){return Mn(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function bi(n){if(Wo(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Vy(n)&&n.host||Zn(n);return Vy(e)?e.host:e}function Ib(n){const e=bi(n);return Ro(e)?n.ownerDocument?n.ownerDocument.body:n.body:Jn(e)&&gl(e)?e:Ib(e)}function Ka(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Ib(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=zt(i);if(s){const a=Yf(o);return e.concat(o,o.visualViewport||[],gl(i)?i:[],a&&t?Ka(a):[])}return e.concat(i,Ka(i,[],t))}function Yf(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Fb(n){const e=jn(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Jn(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=yu(t)!==s||yu(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function Dg(n){return Mn(n)?n:n.contextElement}function oo(n){const e=Dg(n);if(!Jn(e))return qn(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=Fb(e);let o=(s?yu(t.width):t.width)/r,a=(s?yu(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const nP=qn(0);function Bb(n){const e=zt(n);return!Ag()||!e.visualViewport?nP:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function rP(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==zt(n)?!1:e}function cs(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=Dg(n);let o=qn(1);e&&(r?Mn(r)&&(o=oo(r)):o=oo(n));const a=rP(s,t,r)?Bb(s):qn(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const d=zt(s),f=r&&Mn(r)?zt(r):r;let g=d,p=Yf(g);for(;p&&r&&f!==g;){const y=oo(p),v=p.getBoundingClientRect(),m=jn(p),w=v.left+(p.clientLeft+parseFloat(m.paddingLeft))*y.x,b=v.top+(p.clientTop+parseFloat(m.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,h*=y.y,l+=w,c+=b,g=zt(p),p=Yf(g)}}return wu({width:u,height:h,x:l,y:c})}function Mg(n,e){const t=ah(n).scrollLeft;return e?e.left+t:cs(Zn(n)).left+t}function zb(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:Mg(n,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function iP(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=Zn(r),a=e?oh(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=qn(1);const u=qn(0),h=Jn(r);if((h||!h&&!s)&&((Wo(r)!=="body"||gl(o))&&(l=ah(r)),Jn(r))){const f=cs(r);c=oo(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}const d=o&&!h&&!s?zb(o,l,!0):qn(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+d.x,y:t.y*c.y-l.scrollTop*c.y+u.y+d.y}}function sP(n){return Array.from(n.getClientRects())}function oP(n){const e=Zn(n),t=ah(n),r=n.ownerDocument.body,i=It(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=It(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+Mg(n);const a=-t.scrollTop;return jn(r).direction==="rtl"&&(o+=It(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function aP(n,e){const t=zt(n),r=Zn(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=Ag();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}const lP=new Set(["absolute","fixed"]);function cP(n,e){const t=cs(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=Jn(n)?oo(n):qn(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function Gy(n,e,t){let r;if(e==="viewport")r=aP(n,t);else if(e==="document")r=oP(Zn(n));else if(Mn(e))r=cP(e,t);else{const i=Bb(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return wu(r)}function $b(n,e){const t=bi(n);return t===e||!Mn(t)||Ro(t)?!1:jn(t).position==="fixed"||$b(t,e)}function uP(n,e){const t=e.get(n);if(t)return t;let r=Ka(n,[],!1).filter(a=>Mn(a)&&Wo(a)!=="body"),i=null;const s=jn(n).position==="fixed";let o=s?bi(n):n;for(;Mn(o)&&!Ro(o);){const a=jn(o),l=Og(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&lP.has(i.position)||gl(o)&&!l&&$b(n,o))?r=r.filter(u=>u!==o):i=a,o=bi(o)}return e.set(n,r),r}function hP(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?oh(e)?[]:uP(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const h=Gy(e,u,i);return c.top=It(h.top,c.top),c.right=xi(h.right,c.right),c.bottom=xi(h.bottom,c.bottom),c.left=It(h.left,c.left),c},Gy(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function dP(n){const{width:e,height:t}=Fb(n);return{width:e,height:t}}function fP(n,e,t){const r=Jn(e),i=Zn(e),s=t==="fixed",o=cs(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=qn(0);function c(){l.x=Mg(i)}if(r||!r&&!s)if((Wo(e)!=="body"||gl(i))&&(a=ah(e)),r){const f=cs(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?zb(i,a):qn(0),h=o.left+a.scrollLeft-l.x-u.x,d=o.top+a.scrollTop-l.y-u.y;return{x:h,y:d,width:o.width,height:o.height}}function yd(n){return jn(n).position==="static"}function Yy(n,e){if(!Jn(n)||jn(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Zn(n)===t&&(t=t.ownerDocument.body),t}function Hb(n,e){const t=zt(n);if(oh(n))return t;if(!Jn(n)){let i=bi(n);for(;i&&!Ro(i);){if(Mn(i)&&!yd(i))return i;i=bi(i)}return t}let r=Yy(n,e);for(;r&&qR(r)&&yd(r);)r=Yy(r,e);return r&&Ro(r)&&yd(r)&&!Og(r)?t:r||eP(n)||t}const pP=async function(n){const e=this.getOffsetParent||Hb,t=this.getDimensions,r=await t(n.floating);return{reference:fP(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function gP(n){return jn(n).direction==="rtl"}const mP={convertOffsetParentRelativeRectToViewportRelativeRect:iP,getDocumentElement:Zn,getClippingRect:hP,getOffsetParent:Hb,getElementRects:pP,getClientRects:sP,getDimensions:dP,getScale:oo,isElement:Mn,isRTL:gP};function Ub(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function yP(n,e){let t=null,r;const i=Zn(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=n.getBoundingClientRect(),{left:u,top:h,width:d,height:f}=c;if(a||e(),!d||!f)return;const g=Gl(h),p=Gl(i.clientWidth-(u+d)),y=Gl(i.clientHeight-(h+f)),v=Gl(u),w={rootMargin:-g+"px "+-p+"px "+-y+"px "+-v+"px",threshold:It(0,xi(1,l))||1};let b=!0;function S(_){const T=_[0].intersectionRatio;if(T!==l){if(!b)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!Ub(c,n.getBoundingClientRect())&&o(),b=!1}try{t=new IntersectionObserver(S,{...w,root:i.ownerDocument})}catch{t=new IntersectionObserver(S,w)}t.observe(n)}return o(!0),s}function vP(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Dg(n),u=i||s?[...c?Ka(c):[],...Ka(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",t,{passive:!0}),s&&v.addEventListener("resize",t)});const h=c&&a?yP(c,t):null;let d=-1,f=null;o&&(f=new ResizeObserver(v=>{let[m]=v;m&&m.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(e)})),t()}),c&&!l&&f.observe(c),f.observe(e));let g,p=l?cs(n):null;l&&y();function y(){const v=cs(n);p&&!Ub(p,v)&&t(),p=v,g=requestAnimationFrame(y)}return t(),()=>{var v;u.forEach(m=>{i&&m.removeEventListener("scroll",t),s&&m.removeEventListener("resize",t)}),h==null||h(),(v=f)==null||v.disconnect(),f=null,l&&cancelAnimationFrame(g)}}const wP=HR,xP=UR,bP=BR,SP=GR,_P=zR,Xy=FR,CP=VR,TP=(n,e,t)=>{const r=new Map,i={platform:mP,...t},s={...i.platform,_c:r};return IR(n,e,{...i,platform:s})};var kP=typeof document<"u",EP=function(){},zc=kP?C.useLayoutEffect:EP;function xu(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!xu(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!xu(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function Vb(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function qy(n,e){const t=Vb(n);return Math.round(e*t)/t}function vd(n){const e=C.useRef(n);return zc(()=>{e.current=n}),e}function RP(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,h]=C.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[d,f]=C.useState(r);xu(d,r)||f(r);const[g,p]=C.useState(null),[y,v]=C.useState(null),m=C.useCallback(O=>{O!==_.current&&(_.current=O,p(O))},[]),w=C.useCallback(O=>{O!==T.current&&(T.current=O,v(O))},[]),b=s||g,S=o||y,_=C.useRef(null),T=C.useRef(null),R=C.useRef(u),A=l!=null,M=vd(l),B=vd(i),L=vd(c),z=C.useCallback(()=>{if(!_.current||!T.current)return;const O={placement:e,strategy:t,middleware:d};B.current&&(O.platform=B.current),TP(_.current,T.current,O).then(D=>{const I={...D,isPositioned:L.current!==!1};N.current&&!xu(R.current,I)&&(R.current=I,Pr.flushSync(()=>{h(I)}))})},[d,e,t,B,L]);zc(()=>{c===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,h(O=>({...O,isPositioned:!1})))},[c]);const N=C.useRef(!1);zc(()=>(N.current=!0,()=>{N.current=!1}),[]),zc(()=>{if(b&&(_.current=b),S&&(T.current=S),b&&S){if(M.current)return M.current(b,S,z);z()}},[b,S,z,M,A]);const G=C.useMemo(()=>({reference:_,floating:T,setReference:m,setFloating:w}),[m,w]),$=C.useMemo(()=>({reference:b,floating:S}),[b,S]),H=C.useMemo(()=>{const O={position:t,left:0,top:0};if(!$.floating)return O;const D=qy($.floating,u.x),I=qy($.floating,u.y);return a?{...O,transform:"translate("+D+"px, "+I+"px)",...Vb($.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:D,top:I}},[t,a,$.floating,u.x,u.y]);return C.useMemo(()=>({...u,update:z,refs:G,elements:$,floatingStyles:H}),[u,z,G,$,H])}const PP=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?Xy({element:r.current,padding:i}).fn(t):{}:r?Xy({element:r,padding:i}).fn(t):{}}}},OP=(n,e)=>({...wP(n),options:[n,e]}),AP=(n,e)=>({...xP(n),options:[n,e]}),DP=(n,e)=>({...CP(n),options:[n,e]}),MP=(n,e)=>({...bP(n),options:[n,e]}),jP=(n,e)=>({...SP(n),options:[n,e]}),LP=(n,e)=>({..._P(n),options:[n,e]}),NP=(n,e)=>({...PP(n),options:[n,e]});var WP="Arrow",Gb=C.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return x.jsx(Dt.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});Gb.displayName=WP;var IP=Gb;function FP(n){const[e,t]=C.useState(void 0);return wi(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var Yb="Popper",[Xb,qb]=nh(Yb),[wW,Kb]=Xb(Yb),Jb="PopperAnchor",Qb=C.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=Kb(Jb,t),o=C.useRef(null),a=Dn(e,o);return C.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:x.jsx(Dt.div,{...i,ref:a})});Qb.displayName=Jb;var jg="PopperContent",[BP,zP]=Xb(jg),Zb=C.forwardRef((n,e)=>{var ie,Dr,Gt,Qe,Mr,ys;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:d=!1,updatePositionStrategy:f="optimized",onPlaced:g,...p}=n,y=Kb(jg,t),[v,m]=C.useState(null),w=Dn(e,jr=>m(jr)),[b,S]=C.useState(null),_=FP(b),T=(_==null?void 0:_.width)??0,R=(_==null?void 0:_.height)??0,A=r+(s!=="center"?"-"+s:""),M=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},B=Array.isArray(c)?c:[c],L=B.length>0,z={padding:M,boundary:B.filter(HP),altBoundary:L},{refs:N,floatingStyles:G,placement:$,isPositioned:H,middlewareData:O}=RP({strategy:"fixed",placement:A,whileElementsMounted:(...jr)=>vP(...jr,{animationFrame:f==="always"}),elements:{reference:y.anchor},middleware:[OP({mainAxis:i+R,alignmentAxis:o}),l&&AP({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?DP():void 0,...z}),l&&MP({...z}),jP({...z,apply:({elements:jr,rects:Sl,availableWidth:Lh,availableHeight:_l})=>{const{width:Nh,height:Yo}=Sl.reference,vs=jr.floating.style;vs.setProperty("--radix-popper-available-width",`${Lh}px`),vs.setProperty("--radix-popper-available-height",`${_l}px`),vs.setProperty("--radix-popper-anchor-width",`${Nh}px`),vs.setProperty("--radix-popper-anchor-height",`${Yo}px`)}}),b&&NP({element:b,padding:a}),UP({arrowWidth:T,arrowHeight:R}),d&&LP({strategy:"referenceHidden",...z})]}),[D,I]=nS($),q=vi(g);wi(()=>{H&&(q==null||q())},[H,q]);const Y=(ie=O.arrow)==null?void 0:ie.x,Q=(Dr=O.arrow)==null?void 0:Dr.y,K=((Gt=O.arrow)==null?void 0:Gt.centerOffset)!==0,[ge,we]=C.useState();return wi(()=>{v&&we(window.getComputedStyle(v).zIndex)},[v]),x.jsx("div",{ref:N.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:H?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ge,"--radix-popper-transform-origin":[(Qe=O.transformOrigin)==null?void 0:Qe.x,(Mr=O.transformOrigin)==null?void 0:Mr.y].join(" "),...((ys=O.hide)==null?void 0:ys.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:x.jsx(BP,{scope:t,placedSide:D,onArrowChange:S,arrowX:Y,arrowY:Q,shouldHideArrow:K,children:x.jsx(Dt.div,{"data-side":D,"data-align":I,...p,ref:w,style:{...p.style,animation:H?void 0:"none"}})})})});Zb.displayName=jg;var eS="PopperArrow",$P={top:"bottom",right:"left",bottom:"top",left:"right"},tS=C.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=zP(eS,r),o=$P[s.placedSide];return x.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:x.jsx(IP,{...i,ref:t,style:{...i.style,display:"block"}})})});tS.displayName=eS;function HP(n){return n!==null}var UP=n=>({name:"transformOrigin",options:n,fn(e){var y,v,m;const{placement:t,rects:r,middlewareData:i}=e,o=((y=i.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=nS(t),h={start:"0%",center:"50%",end:"100%"}[u],d=(((v=i.arrow)==null?void 0:v.x)??0)+a/2,f=(((m=i.arrow)==null?void 0:m.y)??0)+l/2;let g="",p="";return c==="bottom"?(g=o?h:`${d}px`,p=`${-l}px`):c==="top"?(g=o?h:`${d}px`,p=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,p=o?h:`${f}px`):c==="left"&&(g=`${r.floating.width+l}px`,p=o?h:`${f}px`),{data:{x:g,y:p}}}});function nS(n){const[e,t="center"]=n.split("-");return[e,t]}var VP=Qb,GP=Zb,YP=tS,[lh,xW]=nh("Tooltip",[qb]),Lg=qb(),rS="TooltipProvider",XP=700,Ky="tooltip.open",[qP,iS]=lh(rS),sS=n=>{const{__scopeTooltip:e,delayDuration:t=XP,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=n,o=C.useRef(!0),a=C.useRef(!1),l=C.useRef(0);return C.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),x.jsx(qP,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:C.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:C.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:C.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};sS.displayName=rS;var oS="Tooltip",[bW,ch]=lh(oS),Xf="TooltipTrigger",KP=C.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=ch(Xf,t),s=iS(Xf,t),o=Lg(t),a=C.useRef(null),l=Dn(e,a,i.onTriggerChange),c=C.useRef(!1),u=C.useRef(!1),h=C.useCallback(()=>c.current=!1,[]);return C.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),x.jsx(VP,{asChild:!0,...o,children:x.jsx(Dt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:ze(n.onPointerMove,d=>{d.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:ze(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:ze(n.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ze(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:ze(n.onBlur,i.onClose),onClick:ze(n.onClick,i.onClose)})})});KP.displayName=Xf;var JP="TooltipPortal",[SW,QP]=lh(JP,{forceMount:void 0}),Po="TooltipContent",aS=C.forwardRef((n,e)=>{const t=QP(Po,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=ch(Po,n.__scopeTooltip);return x.jsx(Sg,{present:r||o.open,children:o.disableHoverableContent?x.jsx(lS,{side:i,...s,ref:e}):x.jsx(ZP,{side:i,...s,ref:e})})}),ZP=C.forwardRef((n,e)=>{const t=ch(Po,n.__scopeTooltip),r=iS(Po,n.__scopeTooltip),i=C.useRef(null),s=Dn(e,i),[o,a]=C.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:h}=r,d=C.useCallback(()=>{a(null),h(!1)},[h]),f=C.useCallback((g,p)=>{const y=g.currentTarget,v={x:g.clientX,y:g.clientY},m=iO(v,y.getBoundingClientRect()),w=sO(v,m),b=oO(p.getBoundingClientRect()),S=lO([...w,...b]);a(S),h(!0)},[h]);return C.useEffect(()=>()=>d(),[d]),C.useEffect(()=>{if(l&&u){const g=y=>f(y,u),p=y=>f(y,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",p),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",p)}}},[l,u,f,d]),C.useEffect(()=>{if(o){const g=p=>{const y=p.target,v={x:p.clientX,y:p.clientY},m=(l==null?void 0:l.contains(y))||(u==null?void 0:u.contains(y)),w=!aO(v,o);m?d():w&&(d(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,o,c,d]),x.jsx(lS,{...n,ref:s})}),[eO,tO]=lh(oS,{isInside:!1}),nO=sk("TooltipContent"),lS=C.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=ch(Po,t),c=Lg(t),{onClose:u}=l;return C.useEffect(()=>(document.addEventListener(Ky,u),()=>document.removeEventListener(Ky,u)),[u]),C.useEffect(()=>{if(l.trigger){const h=d=>{const f=d.target;f!=null&&f.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),x.jsx(bg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:x.jsxs(GP,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[x.jsx(nO,{children:r}),x.jsx(eO,{scope:t,isInside:!0,children:x.jsx(Ok,{id:l.contentId,role:"tooltip",children:i||r})})]})})});aS.displayName=Po;var cS="TooltipArrow",rO=C.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=Lg(t);return tO(cS,t).isInside?null:x.jsx(YP,{...i,...r,ref:e})});rO.displayName=cS;function iO(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function sO(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function oO(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function aO(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,h=l.x,d=l.y;u>r!=d>r&&t<(h-c)*(r-u)/(d-u)+c&&(i=!i)}return i}function lO(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),cO(e)}function cO(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var uO=sS,uS=aS;const hO=uO,dO=C.forwardRef(({className:n,sideOffset:e=4,...t},r)=>x.jsx(uS,{ref:r,sideOffset:e,className:fs("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));dO.displayName=uS.displayName;var uh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hh=typeof window>"u"||"Deno"in globalThis;function vn(){}function fO(n,e){return typeof n=="function"?n(e):n}function pO(n){return typeof n=="number"&&n>=0&&n!==1/0}function gO(n,e){return Math.max(n+(e||0)-Date.now(),0)}function qf(n,e){return typeof n=="function"?n(e):n}function mO(n,e){return typeof n=="function"?n(e):n}function Jy(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==Ng(o,e.options))return!1}else if(!Qa(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function Qy(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(Ja(e.options.mutationKey)!==Ja(s))return!1}else if(!Qa(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function Ng(n,e){return((e==null?void 0:e.queryKeyHashFn)||Ja)(n)}function Ja(n){return JSON.stringify(n,(e,t)=>Kf(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function Qa(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Qa(n[t],e[t])):!1}function hS(n,e){if(n===e)return n;const t=Zy(n)&&Zy(e);if(t||Kf(n)&&Kf(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{},l=new Set(r);let c=0;for(let u=0;u<o;u++){const h=t?u:s[u];(!t&&l.has(h)||t)&&n[h]===void 0&&e[h]===void 0?(a[h]=void 0,c++):(a[h]=hS(n[h],e[h]),a[h]===n[h]&&n[h]!==void 0&&c++)}return i===o&&c===i?n:a}return e}function Zy(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Kf(n){if(!ev(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!ev(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function ev(n){return Object.prototype.toString.call(n)==="[object Object]"}function yO(n){return new Promise(e=>{setTimeout(e,n)})}function vO(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?hS(n,e):e}function wO(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function xO(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var Wg=Symbol();function dS(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===Wg?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Xi,ei,fo,T0,bO=(T0=class extends uh{constructor(){super();ae(this,Xi);ae(this,ei);ae(this,fo);ee(this,fo,e=>{if(!hh&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){j(this,ei)||this.setEventListener(j(this,fo))}onUnsubscribe(){var e;this.hasListeners()||((e=j(this,ei))==null||e.call(this),ee(this,ei,void 0))}setEventListener(e){var t;ee(this,fo,e),(t=j(this,ei))==null||t.call(this),ee(this,ei,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){j(this,Xi)!==e&&(ee(this,Xi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof j(this,Xi)=="boolean"?j(this,Xi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Xi=new WeakMap,ei=new WeakMap,fo=new WeakMap,T0),fS=new bO,po,ti,go,k0,SO=(k0=class extends uh{constructor(){super();ae(this,po,!0);ae(this,ti);ae(this,go);ee(this,go,e=>{if(!hh&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){j(this,ti)||this.setEventListener(j(this,go))}onUnsubscribe(){var e;this.hasListeners()||((e=j(this,ti))==null||e.call(this),ee(this,ti,void 0))}setEventListener(e){var t;ee(this,go,e),(t=j(this,ti))==null||t.call(this),ee(this,ti,e(this.setOnline.bind(this)))}setOnline(e){j(this,po)!==e&&(ee(this,po,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return j(this,po)}},po=new WeakMap,ti=new WeakMap,go=new WeakMap,k0),bu=new SO;function _O(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function CO(n){return Math.min(1e3*2**n,3e4)}function pS(n){return(n??"online")==="online"?bu.isOnline():!0}var gS=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function wd(n){return n instanceof gS}function mS(n){let e=!1,t=0,r=!1,i;const s=_O(),o=p=>{var y;r||(d(new gS(p)),(y=n.abort)==null||y.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>fS.isFocused()&&(n.networkMode==="always"||bu.isOnline())&&n.canRun(),u=()=>pS(n.networkMode)&&n.canRun(),h=p=>{var y;r||(r=!0,(y=n.onSuccess)==null||y.call(n,p),i==null||i(),s.resolve(p))},d=p=>{var y;r||(r=!0,(y=n.onError)==null||y.call(n,p),i==null||i(),s.reject(p))},f=()=>new Promise(p=>{var y;i=v=>{(r||c())&&p(v)},(y=n.onPause)==null||y.call(n)}).then(()=>{var p;i=void 0,r||(p=n.onContinue)==null||p.call(n)}),g=()=>{if(r)return;let p;const y=t===0?n.initialPromise:void 0;try{p=y??n.fn()}catch(v){p=Promise.reject(v)}Promise.resolve(p).then(h).catch(v=>{var _;if(r)return;const m=n.retry??(hh?0:3),w=n.retryDelay??CO,b=typeof w=="function"?w(t,v):w,S=m===!0||typeof m=="number"&&t<m||typeof m=="function"&&m(t,v);if(e||!S){d(v);return}t++,(_=n.onFail)==null||_.call(n,t,v),yO(b).then(()=>c()?void 0:f()).then(()=>{e?d(v):g()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?g():f().then(g),s)}}var TO=n=>setTimeout(n,0);function kO(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=TO;const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var ht=kO(),qi,E0,yS=(E0=class{constructor(){ae(this,qi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),pO(this.gcTime)&&ee(this,qi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(hh?1/0:5*60*1e3))}clearGcTimeout(){j(this,qi)&&(clearTimeout(j(this,qi)),ee(this,qi,void 0))}},qi=new WeakMap,E0),mo,Ki,qt,Ji,rt,al,Qi,wn,ir,R0,EO=(R0=class extends yS{constructor(e){super();ae(this,wn);ae(this,mo);ae(this,Ki);ae(this,qt);ae(this,Ji);ae(this,rt);ae(this,al);ae(this,Qi);ee(this,Qi,!1),ee(this,al,e.defaultOptions),this.setOptions(e.options),this.observers=[],ee(this,Ji,e.client),ee(this,qt,j(this,Ji).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ee(this,mo,PO(this.options)),this.state=e.state??j(this,mo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=j(this,rt))==null?void 0:e.promise}setOptions(e){this.options={...j(this,al),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&j(this,qt).remove(this)}setData(e,t){const r=vO(this.state.data,e,this.options);return Ze(this,wn,ir).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){Ze(this,wn,ir).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,i;const t=(r=j(this,rt))==null?void 0:r.promise;return(i=j(this,rt))==null||i.cancel(e),t?t.then(vn).catch(vn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(j(this,mo))}isActive(){return this.observers.some(e=>mO(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Wg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>qf(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!gO(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=j(this,rt))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=j(this,rt))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),j(this,qt).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(j(this,rt)&&(j(this,Qi)?j(this,rt).cancel({revert:!0}):j(this,rt).cancelRetry()),this.scheduleGc()),j(this,qt).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ze(this,wn,ir).call(this,{type:"invalidate"})}fetch(e,t){var c,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(j(this,rt))return j(this,rt).continueRetry(),j(this,rt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,i=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(ee(this,Qi,!0),r.signal)})},s=()=>{const d=dS(this.options,t),g=(()=>{const p={client:j(this,Ji),queryKey:this.queryKey,meta:this.meta};return i(p),p})();return ee(this,Qi,!1),this.options.persister?this.options.persister(d,g,this):d(g)},a=(()=>{const d={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:j(this,Ji),state:this.state,fetchFn:s};return i(d),d})();(c=this.options.behavior)==null||c.onFetch(a,this),ee(this,Ki,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Ze(this,wn,ir).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta});const l=d=>{var f,g,p,y;wd(d)&&d.silent||Ze(this,wn,ir).call(this,{type:"error",error:d}),wd(d)||((g=(f=j(this,qt).config).onError)==null||g.call(f,d,this),(y=(p=j(this,qt).config).onSettled)==null||y.call(p,this.state.data,d,this)),this.scheduleGc()};return ee(this,rt,mS({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{var f,g,p,y;if(d===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(v){l(v);return}(g=(f=j(this,qt).config).onSuccess)==null||g.call(f,d,this),(y=(p=j(this,qt).config).onSettled)==null||y.call(p,d,this.state.error,this),this.scheduleGc()},onError:l,onFail:(d,f)=>{Ze(this,wn,ir).call(this,{type:"failed",failureCount:d,error:f})},onPause:()=>{Ze(this,wn,ir).call(this,{type:"pause"})},onContinue:()=>{Ze(this,wn,ir).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),j(this,rt).start()}},mo=new WeakMap,Ki=new WeakMap,qt=new WeakMap,Ji=new WeakMap,rt=new WeakMap,al=new WeakMap,Qi=new WeakMap,wn=new WeakSet,ir=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...RO(r.data,this.options),fetchMeta:e.meta??null};case"success":return ee(this,Ki,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return wd(i)&&i.revert&&j(this,Ki)?{...j(this,Ki),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),ht.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),j(this,qt).notify({query:this,type:"updated",action:e})})},R0);function RO(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:pS(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function PO(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Fn,P0,OO=(P0=class extends uh{constructor(e={}){super();ae(this,Fn);this.config=e,ee(this,Fn,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??Ng(i,t);let o=this.get(s);return o||(o=new EO({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){j(this,Fn).has(e.queryHash)||(j(this,Fn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=j(this,Fn).get(e.queryHash);t&&(e.destroy(),t===e&&j(this,Fn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ht.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return j(this,Fn).get(e)}getAll(){return[...j(this,Fn).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Jy(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>Jy(e,r)):t}notify(e){ht.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ht.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ht.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Fn=new WeakMap,P0),Bn,lt,Zi,zn,Gr,O0,AO=(O0=class extends yS{constructor(e){super();ae(this,zn);ae(this,Bn);ae(this,lt);ae(this,Zi);this.mutationId=e.mutationId,ee(this,lt,e.mutationCache),ee(this,Bn,[]),this.state=e.state||DO(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){j(this,Bn).includes(e)||(j(this,Bn).push(e),this.clearGcTimeout(),j(this,lt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ee(this,Bn,j(this,Bn).filter(t=>t!==e)),this.scheduleGc(),j(this,lt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){j(this,Bn).length||(this.state.status==="pending"?this.scheduleGc():j(this,lt).remove(this))}continue(){var e;return((e=j(this,Zi))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,o,a,l,c,u,h,d,f,g,p,y,v,m,w,b,S,_,T,R;const t=()=>{Ze(this,zn,Gr).call(this,{type:"continue"})};ee(this,Zi,mS({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(A,M)=>{Ze(this,zn,Gr).call(this,{type:"failed",failureCount:A,error:M})},onPause:()=>{Ze(this,zn,Gr).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>j(this,lt).canRun(this)}));const r=this.state.status==="pending",i=!j(this,Zi).canStart();try{if(r)t();else{Ze(this,zn,Gr).call(this,{type:"pending",variables:e,isPaused:i}),await((o=(s=j(this,lt).config).onMutate)==null?void 0:o.call(s,e,this));const M=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));M!==this.state.context&&Ze(this,zn,Gr).call(this,{type:"pending",context:M,variables:e,isPaused:i})}const A=await j(this,Zi).start();return await((u=(c=j(this,lt).config).onSuccess)==null?void 0:u.call(c,A,e,this.state.context,this)),await((d=(h=this.options).onSuccess)==null?void 0:d.call(h,A,e,this.state.context)),await((g=(f=j(this,lt).config).onSettled)==null?void 0:g.call(f,A,null,this.state.variables,this.state.context,this)),await((y=(p=this.options).onSettled)==null?void 0:y.call(p,A,null,e,this.state.context)),Ze(this,zn,Gr).call(this,{type:"success",data:A}),A}catch(A){try{throw await((m=(v=j(this,lt).config).onError)==null?void 0:m.call(v,A,e,this.state.context,this)),await((b=(w=this.options).onError)==null?void 0:b.call(w,A,e,this.state.context)),await((_=(S=j(this,lt).config).onSettled)==null?void 0:_.call(S,void 0,A,this.state.variables,this.state.context,this)),await((R=(T=this.options).onSettled)==null?void 0:R.call(T,void 0,A,e,this.state.context)),A}finally{Ze(this,zn,Gr).call(this,{type:"error",error:A})}}finally{j(this,lt).runNext(this)}}},Bn=new WeakMap,lt=new WeakMap,Zi=new WeakMap,zn=new WeakSet,Gr=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),ht.batch(()=>{j(this,Bn).forEach(r=>{r.onMutationUpdate(e)}),j(this,lt).notify({mutation:this,type:"updated",action:e})})},O0);function DO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var hr,xn,ll,A0,MO=(A0=class extends uh{constructor(e={}){super();ae(this,hr);ae(this,xn);ae(this,ll);this.config=e,ee(this,hr,new Set),ee(this,xn,new Map),ee(this,ll,0)}build(e,t,r){const i=new AO({mutationCache:this,mutationId:++Tl(this,ll)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){j(this,hr).add(e);const t=Yl(e);if(typeof t=="string"){const r=j(this,xn).get(t);r?r.push(e):j(this,xn).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(j(this,hr).delete(e)){const t=Yl(e);if(typeof t=="string"){const r=j(this,xn).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&j(this,xn).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Yl(e);if(typeof t=="string"){const r=j(this,xn).get(t),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=Yl(e);if(typeof t=="string"){const i=(r=j(this,xn).get(t))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ht.batch(()=>{j(this,hr).forEach(e=>{this.notify({type:"removed",mutation:e})}),j(this,hr).clear(),j(this,xn).clear()})}getAll(){return Array.from(j(this,hr))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Qy(t,r))}findAll(e={}){return this.getAll().filter(t=>Qy(e,t))}notify(e){ht.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ht.batch(()=>Promise.all(e.map(t=>t.continue().catch(vn))))}},hr=new WeakMap,xn=new WeakMap,ll=new WeakMap,A0);function Yl(n){var e;return(e=n.options.scope)==null?void 0:e.id}function tv(n){return{onFetch:(e,t)=>{var u,h,d,f,g;const r=e.options,i=(d=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:d.direction,s=((f=e.state.data)==null?void 0:f.pages)||[],o=((g=e.state.data)==null?void 0:g.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let p=!1;const y=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},v=dS(e.options,e.fetchOptions),m=async(w,b,S)=>{if(p)return Promise.reject();if(b==null&&w.pages.length)return Promise.resolve(w);const T=(()=>{const B={client:e.client,queryKey:e.queryKey,pageParam:b,direction:S?"backward":"forward",meta:e.options.meta};return y(B),B})(),R=await v(T),{maxPages:A}=e.options,M=S?xO:wO;return{pages:M(w.pages,R,A),pageParams:M(w.pageParams,b,A)}};if(i&&s.length){const w=i==="backward",b=w?jO:nv,S={pages:s,pageParams:o},_=b(r,S);a=await m(S,_,w)}else{const w=n??s.length;do{const b=l===0?o[0]??r.initialPageParam:nv(r,a);if(l>0&&b==null)break;a=await m(a,b),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var p,y;return(y=(p=e.options).persister)==null?void 0:y.call(p,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function nv(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function jO(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Ee,ni,ri,yo,vo,ii,wo,xo,D0,LO=(D0=class{constructor(n={}){ae(this,Ee);ae(this,ni);ae(this,ri);ae(this,yo);ae(this,vo);ae(this,ii);ae(this,wo);ae(this,xo);ee(this,Ee,n.queryCache||new OO),ee(this,ni,n.mutationCache||new MO),ee(this,ri,n.defaultOptions||{}),ee(this,yo,new Map),ee(this,vo,new Map),ee(this,ii,0)}mount(){Tl(this,ii)._++,j(this,ii)===1&&(ee(this,wo,fS.subscribe(async n=>{n&&(await this.resumePausedMutations(),j(this,Ee).onFocus())})),ee(this,xo,bu.subscribe(async n=>{n&&(await this.resumePausedMutations(),j(this,Ee).onOnline())})))}unmount(){var n,e;Tl(this,ii)._--,j(this,ii)===0&&((n=j(this,wo))==null||n.call(this),ee(this,wo,void 0),(e=j(this,xo))==null||e.call(this),ee(this,xo,void 0))}isFetching(n){return j(this,Ee).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return j(this,ni).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=j(this,Ee).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=j(this,Ee).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(qf(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return j(this,Ee).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=j(this,Ee).get(r.queryHash),s=i==null?void 0:i.state.data,o=fO(e,s);if(o!==void 0)return j(this,Ee).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return ht.batch(()=>j(this,Ee).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=j(this,Ee).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=j(this,Ee);ht.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=j(this,Ee);return ht.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=ht.batch(()=>j(this,Ee).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(vn).catch(vn)}invalidateQueries(n,e={}){return ht.batch(()=>(j(this,Ee).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=ht.batch(()=>j(this,Ee).findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(vn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(vn)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=j(this,Ee).build(this,e);return t.isStaleByTime(qf(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(vn).catch(vn)}fetchInfiniteQuery(n){return n.behavior=tv(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(vn).catch(vn)}ensureInfiniteQueryData(n){return n.behavior=tv(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return bu.isOnline()?j(this,ni).resumePausedMutations():Promise.resolve()}getQueryCache(){return j(this,Ee)}getMutationCache(){return j(this,ni)}getDefaultOptions(){return j(this,ri)}setDefaultOptions(n){ee(this,ri,n)}setQueryDefaults(n,e){j(this,yo).set(Ja(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...j(this,yo).values()],t={};return e.forEach(r=>{Qa(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){j(this,vo).set(Ja(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...j(this,vo).values()],t={};return e.forEach(r=>{Qa(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...j(this,ri).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Ng(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Wg&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...j(this,ri).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){j(this,Ee).clear(),j(this,ni).clear()}},Ee=new WeakMap,ni=new WeakMap,ri=new WeakMap,yo=new WeakMap,vo=new WeakMap,ii=new WeakMap,wo=new WeakMap,xo=new WeakMap,D0),NO=C.createContext(void 0),WO=({client:n,children:e})=>(C.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),x.jsx(NO.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Su(){return Su=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Su.apply(this,arguments)}var ai;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ai||(ai={}));const rv="popstate";function IO(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Jf("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:wS(i)}return BO(e,t,null,n)}function Ot(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function vS(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function FO(){return Math.random().toString(36).substr(2,8)}function iv(n,e){return{usr:n.state,key:n.key,idx:e}}function Jf(n,e,t,r){return t===void 0&&(t=null),Su({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?dh(e):e,{state:t,key:e&&e.key||r||FO()})}function wS(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function dh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function BO(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ai.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Su({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=ai.Pop;let y=u(),v=y==null?null:y-c;c=y,l&&l({action:a,location:p.location,delta:v})}function d(y,v){a=ai.Push;let m=Jf(p.location,y,v);c=u()+1;let w=iv(m,c),b=p.createHref(m);try{o.pushState(w,"",b)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(b)}s&&l&&l({action:a,location:p.location,delta:1})}function f(y,v){a=ai.Replace;let m=Jf(p.location,y,v);c=u();let w=iv(m,c),b=p.createHref(m);o.replaceState(w,"",b),s&&l&&l({action:a,location:p.location,delta:0})}function g(y){let v=i.location.origin!=="null"?i.location.origin:i.location.href,m=typeof y=="string"?y:wS(y);return m=m.replace(/ $/,"%20"),Ot(v,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,v)}let p={get action(){return a},get location(){return n(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(rv,h),l=y,()=>{i.removeEventListener(rv,h),l=null}},createHref(y){return e(i,y)},createURL:g,encodeLocation(y){let v=g(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:f,go(y){return o.go(y)}};return p}var sv;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(sv||(sv={}));function zO(n,e,t){return t===void 0&&(t="/"),$O(n,e,t,!1)}function $O(n,e,t,r){let i=typeof e=="string"?dh(e):e,s=SS(i.pathname||"/",t);if(s==null)return null;let o=xS(n);HO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=eA(s);a=QO(o[l],c,r)}return a}function xS(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ot(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ao([r,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(Ot(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),xS(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:KO(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of bS(s.path))i(s,o,l)}),e}function bS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=bS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function HO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:JO(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const UO=/^:[\w-]+$/,VO=3,GO=2,YO=1,XO=10,qO=-2,ov=n=>n==="*";function KO(n,e){let t=n.split("/"),r=t.length;return t.some(ov)&&(r+=qO),e&&(r+=GO),t.filter(i=>!ov(i)).reduce((i,s)=>i+(UO.test(s)?VO:s===""?YO:XO),r)}function JO(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function QO(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=av({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!h&&c&&t&&!r[r.length-1].route.index&&(h=av({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:ao([s,h.pathname]),pathnameBase:tA(ao([s,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(s=ao([s,h.pathnameBase]))}return o}function av(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=ZO(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:d,isOptional:f}=u;if(d==="*"){let p=a[h]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const g=a[h];return f&&!g?c[d]=void 0:c[d]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function ZO(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),vS(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function eA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vS(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function SS(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const ao=n=>n.join("/").replace(/\/\/+/g,"/"),tA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/");function nA(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const _S=["post","put","patch","delete"];new Set(_S);const rA=["get",..._S];new Set(rA);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _u(){return _u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_u.apply(this,arguments)}const iA=C.createContext(null),sA=C.createContext(null),CS=C.createContext(null),fh=C.createContext(null),ph=C.createContext({outlet:null,matches:[],isDataRoute:!1}),TS=C.createContext(null);function Ig(){return C.useContext(fh)!=null}function kS(){return Ig()||Ot(!1),C.useContext(fh).location}function oA(n,e){return aA(n,e)}function aA(n,e,t,r){Ig()||Ot(!1);let{navigator:i}=C.useContext(CS),{matches:s}=C.useContext(ph),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=kS(),u;if(e){var h;let y=typeof e=="string"?dh(e):e;l==="/"||(h=y.pathname)!=null&&h.startsWith(l)||Ot(!1),u=y}else u=c;let d=u.pathname||"/",f=d;if(l!=="/"){let y=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=zO(n,{pathname:f}),p=dA(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:ao([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:ao([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,t,r);return e&&p?C.createElement(fh.Provider,{value:{location:_u({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ai.Pop}},p):p}function lA(){let n=mA(),e=nA(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:i},t):null,null)}const cA=C.createElement(lA,null);class uA extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?C.createElement(ph.Provider,{value:this.props.routeContext},C.createElement(TS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function hA(n){let{routeContext:e,match:t,children:r}=n,i=C.useContext(iA);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),C.createElement(ph.Provider,{value:e},r)}function dA(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||Ot(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:d,errors:f}=t,g=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,d)=>{let f,g=!1,p=null,y=null;t&&(f=a&&h.route.id?a[h.route.id]:void 0,p=h.route.errorElement||cA,l&&(c<0&&d===0?(g=!0,y=null):c===d&&(g=!0,y=h.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,d+1)),m=()=>{let w;return f?w=p:g?w=y:h.route.Component?w=C.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=u,C.createElement(hA,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:t!=null},children:w})};return t&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?C.createElement(uA,{location:t.location,revalidation:t.revalidation,component:p,error:f,children:m(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):m()},null)}var Qf=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Qf||{});function fA(n){let e=C.useContext(sA);return e||Ot(!1),e}function pA(n){let e=C.useContext(ph);return e||Ot(!1),e}function gA(n){let e=pA(),t=e.matches[e.matches.length-1];return t.route.id||Ot(!1),t.route.id}function mA(){var n;let e=C.useContext(TS),t=fA(Qf.UseRouteError),r=gA(Qf.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function yA(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Zf(n){Ot(!1)}function vA(n){let{basename:e="/",children:t=null,location:r,navigationType:i=ai.Pop,navigator:s,static:o=!1,future:a}=n;Ig()&&Ot(!1);let l=e.replace(/^\/*/,"/"),c=C.useMemo(()=>({basename:l,navigator:s,static:o,future:_u({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=dh(r));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:g="default"}=r,p=C.useMemo(()=>{let y=SS(u,l);return y==null?null:{location:{pathname:y,search:h,hash:d,state:f,key:g},navigationType:i}},[l,u,h,d,f,g,i]);return p==null?null:C.createElement(CS.Provider,{value:c},C.createElement(fh.Provider,{children:t,value:p}))}function wA(n){let{children:e,location:t}=n;return oA(ep(e),t)}new Promise(()=>{});function ep(n,e){e===void 0&&(e=[]);let t=[];return C.Children.forEach(n,(r,i)=>{if(!C.isValidElement(r))return;let s=[...e,i];if(r.type===C.Fragment){t.push.apply(t,ep(r.props.children,s));return}r.type!==Zf&&Ot(!1),!r.props.index||!r.props.children||Ot(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ep(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const xA="6";try{window.__reactRouterVersion=xA}catch{}const bA="startTransition",lv=U0[bA];function SA(n){let{basename:e,children:t,future:r,window:i}=n,s=C.useRef();s.current==null&&(s.current=IO({window:i,v5Compat:!0}));let o=s.current,[a,l]=C.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=C.useCallback(h=>{c&&lv?lv(()=>l(h)):l(h)},[l,c]);return C.useLayoutEffect(()=>o.listen(u),[o,u]),C.useEffect(()=>yA(r),[r]),C.createElement(vA,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}var cv;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(cv||(cv={}));var uv;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(uv||(uv={}));var gh={exports:{}},ES={},RS={exports:{}},_A="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",CA=_A,TA=CA;function PS(){}function OS(){}OS.resetWarningCache=PS;var kA=function(){function n(r,i,s,o,a,l){if(l!==TA){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:OS,resetWarningCache:PS};return t.PropTypes=t,t};RS.exports=kA();var AS=RS.exports;function DS(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=DS(n[e]))&&(r&&(r+=" "),r+=t);else for(e in n)n[e]&&(r&&(r+=" "),r+=e);return r}function hv(){for(var n,e,t=0,r="";t<arguments.length;)(n=arguments[t++])&&(e=DS(n))&&(r&&(r+=" "),r+=e);return r}const EA=Object.freeze(Object.defineProperty({__proto__:null,clsx:hv,default:hv},Symbol.toStringTag,{value:"Module"})),RA=M0(EA);var Pe={},er={};Object.defineProperty(er,"__esModule",{value:!0});er.dontSetMe=MA;er.findInArray=PA;er.int=DA;er.isFunction=OA;er.isNum=AA;function PA(n,e){for(let t=0,r=n.length;t<r;t++)if(e.apply(e,[n[t],t,n]))return n[t]}function OA(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Function]"}function AA(n){return typeof n=="number"&&!isNaN(n)}function DA(n){return parseInt(n,10)}function MA(n,e,t){if(n[e])return new Error("Invalid prop ".concat(e," passed to ").concat(t," - do not set this, set it on the child."))}var ps={};Object.defineProperty(ps,"__esModule",{value:!0});ps.browserPrefixToKey=jS;ps.browserPrefixToStyle=jA;ps.default=void 0;ps.getPrefix=MS;const xd=["Moz","Webkit","O","ms"];function MS(){var n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(n=window.document)===null||n===void 0||(n=n.documentElement)===null||n===void 0?void 0:n.style;if(!t||e in t)return"";for(let r=0;r<xd.length;r++)if(jS(e,xd[r])in t)return xd[r];return""}function jS(n,e){return e?"".concat(e).concat(LA(n)):n}function jA(n,e){return e?"-".concat(e.toLowerCase(),"-").concat(n):n}function LA(n){let e="",t=!0;for(let r=0;r<n.length;r++)t?(e+=n[r].toUpperCase(),t=!1):n[r]==="-"?t=!0:e+=n[r];return e}ps.default=MS();Object.defineProperty(Pe,"__esModule",{value:!0});Pe.addClassName=WS;Pe.addEvent=IA;Pe.addUserSelectStyles=qA;Pe.createCSSTransform=VA;Pe.createSVGTransform=GA;Pe.getTouch=YA;Pe.getTouchIdentifier=XA;Pe.getTranslation=Fg;Pe.innerHeight=$A;Pe.innerWidth=HA;Pe.matchesSelector=NS;Pe.matchesSelectorAndParentsTo=WA;Pe.offsetXYFromParent=UA;Pe.outerHeight=BA;Pe.outerWidth=zA;Pe.removeClassName=IS;Pe.removeEvent=FA;Pe.removeUserSelectStyles=KA;var $t=er,dv=NA(ps);function LS(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(LS=function(r){return r?t:e})(n)}function NA(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=LS(e);if(t&&t.has(n))return t.get(n);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var o=i?Object.getOwnPropertyDescriptor(n,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=n[s]}return r.default=n,t&&t.set(n,r),r}let Xl="";function NS(n,e){return Xl||(Xl=(0,$t.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,$t.isFunction)(n[t])})),(0,$t.isFunction)(n[Xl])?n[Xl](e):!1}function WA(n,e,t){let r=n;do{if(NS(r,e))return!0;if(r===t)return!1;r=r.parentNode}while(r);return!1}function IA(n,e,t,r){if(!n)return;const i={capture:!0,...r};n.addEventListener?n.addEventListener(e,t,i):n.attachEvent?n.attachEvent("on"+e,t):n["on"+e]=t}function FA(n,e,t,r){if(!n)return;const i={capture:!0,...r};n.removeEventListener?n.removeEventListener(e,t,i):n.detachEvent?n.detachEvent("on"+e,t):n["on"+e]=null}function BA(n){let e=n.clientHeight;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,$t.int)(t.borderTopWidth),e+=(0,$t.int)(t.borderBottomWidth),e}function zA(n){let e=n.clientWidth;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,$t.int)(t.borderLeftWidth),e+=(0,$t.int)(t.borderRightWidth),e}function $A(n){let e=n.clientHeight;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,$t.int)(t.paddingTop),e-=(0,$t.int)(t.paddingBottom),e}function HA(n){let e=n.clientWidth;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,$t.int)(t.paddingLeft),e-=(0,$t.int)(t.paddingRight),e}function UA(n,e,t){const i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),s=(n.clientX+e.scrollLeft-i.left)/t,o=(n.clientY+e.scrollTop-i.top)/t;return{x:s,y:o}}function VA(n,e){const t=Fg(n,e,"px");return{[(0,dv.browserPrefixToKey)("transform",dv.default)]:t}}function GA(n,e){return Fg(n,e,"")}function Fg(n,e,t){let{x:r,y:i}=n,s="translate(".concat(r).concat(t,",").concat(i).concat(t,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+t),a="".concat(typeof e.y=="string"?e.y:e.y+t);s="translate(".concat(o,", ").concat(a,")")+s}return s}function YA(n,e){return n.targetTouches&&(0,$t.findInArray)(n.targetTouches,t=>e===t.identifier)||n.changedTouches&&(0,$t.findInArray)(n.changedTouches,t=>e===t.identifier)}function XA(n){if(n.targetTouches&&n.targetTouches[0])return n.targetTouches[0].identifier;if(n.changedTouches&&n.changedTouches[0])return n.changedTouches[0].identifier}function qA(n){if(!n)return;let e=n.getElementById("react-draggable-style-el");e||(e=n.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,n.getElementsByTagName("head")[0].appendChild(e)),n.body&&WS(n.body,"react-draggable-transparent-selection")}function KA(n){if(n)try{if(n.body&&IS(n.body,"react-draggable-transparent-selection"),n.selection)n.selection.empty();else{const e=(n.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function WS(n,e){n.classList?n.classList.add(e):n.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(n.className+=" ".concat(e))}function IS(n,e){n.classList?n.classList.remove(e):n.className=n.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.canDragX=ZA;tr.canDragY=e2;tr.createCoreData=n2;tr.createDraggableData=r2;tr.getBoundPosition=JA;tr.getControlPosition=t2;tr.snapToGrid=QA;var Lt=er,Xs=Pe;function JA(n,e,t){if(!n.props.bounds)return[e,t];let{bounds:r}=n.props;r=typeof r=="string"?r:i2(r);const i=Bg(n);if(typeof r=="string"){const{ownerDocument:s}=i,o=s.defaultView;let a;if(r==="parent"?a=i.parentNode:a=s.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const l=a,c=o.getComputedStyle(i),u=o.getComputedStyle(l);r={left:-i.offsetLeft+(0,Lt.int)(u.paddingLeft)+(0,Lt.int)(c.marginLeft),top:-i.offsetTop+(0,Lt.int)(u.paddingTop)+(0,Lt.int)(c.marginTop),right:(0,Xs.innerWidth)(l)-(0,Xs.outerWidth)(i)-i.offsetLeft+(0,Lt.int)(u.paddingRight)-(0,Lt.int)(c.marginRight),bottom:(0,Xs.innerHeight)(l)-(0,Xs.outerHeight)(i)-i.offsetTop+(0,Lt.int)(u.paddingBottom)-(0,Lt.int)(c.marginBottom)}}return(0,Lt.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,Lt.isNum)(r.bottom)&&(t=Math.min(t,r.bottom)),(0,Lt.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,Lt.isNum)(r.top)&&(t=Math.max(t,r.top)),[e,t]}function QA(n,e,t){const r=Math.round(e/n[0])*n[0],i=Math.round(t/n[1])*n[1];return[r,i]}function ZA(n){return n.props.axis==="both"||n.props.axis==="x"}function e2(n){return n.props.axis==="both"||n.props.axis==="y"}function t2(n,e,t){const r=typeof e=="number"?(0,Xs.getTouch)(n,e):null;if(typeof e=="number"&&!r)return null;const i=Bg(t),s=t.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,Xs.offsetXYFromParent)(r||n,s,t.props.scale)}function n2(n,e,t){const r=!(0,Lt.isNum)(n.lastX),i=Bg(n);return r?{node:i,deltaX:0,deltaY:0,lastX:e,lastY:t,x:e,y:t}:{node:i,deltaX:e-n.lastX,deltaY:t-n.lastY,lastX:n.lastX,lastY:n.lastY,x:e,y:t}}function r2(n,e){const t=n.props.scale;return{node:e.node,x:n.state.x+e.deltaX/t,y:n.state.y+e.deltaY/t,deltaX:e.deltaX/t,deltaY:e.deltaY/t,lastX:n.state.x,lastY:n.state.y}}function i2(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}}function Bg(n){const e=n.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var mh={},yh={};Object.defineProperty(yh,"__esModule",{value:!0});yh.default=s2;function s2(){}Object.defineProperty(mh,"__esModule",{value:!0});mh.default=void 0;var bd=a2(C),yt=zg(AS),o2=zg(Pr),nt=Pe,zr=tr,Sd=er,sa=zg(yh);function zg(n){return n&&n.__esModule?n:{default:n}}function FS(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(FS=function(r){return r?t:e})(n)}function a2(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=FS(e);if(t&&t.has(n))return t.get(n);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var o=i?Object.getOwnPropertyDescriptor(n,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=n[s]}return r.default=n,t&&t.set(n,r),r}function at(n,e,t){return e=l2(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function l2(n){var e=c2(n,"string");return typeof e=="symbol"?e:String(e)}function c2(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const pn={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let $r=pn.mouse,vh=class extends bd.Component{constructor(){super(...arguments),at(this,"dragging",!1),at(this,"lastX",NaN),at(this,"lastY",NaN),at(this,"touchIdentifier",null),at(this,"mounted",!1),at(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=t;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,nt.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,nt.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;e.type==="touchstart"&&e.preventDefault();const i=(0,nt.getTouchIdentifier)(e);this.touchIdentifier=i;const s=(0,zr.getControlPosition)(e,i,this);if(s==null)return;const{x:o,y:a}=s,l=(0,zr.createCoreData)(this,o,a);(0,sa.default)("DraggableCore: handleDragStart: %j",l),(0,sa.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,nt.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,nt.addEvent)(r,$r.move,this.handleDrag),(0,nt.addEvent)(r,$r.stop,this.handleDragStop))}),at(this,"handleDrag",e=>{const t=(0,zr.getControlPosition)(e,this.touchIdentifier,this);if(t==null)return;let{x:r,y:i}=t;if(Array.isArray(this.props.grid)){let a=r-this.lastX,l=i-this.lastY;if([a,l]=(0,zr.snapToGrid)(this.props.grid,a,l),!a&&!l)return;r=this.lastX+a,i=this.lastY+l}const s=(0,zr.createCoreData)(this,r,i);if((0,sa.default)("DraggableCore: handleDrag: %j",s),this.props.onDrag(e,s)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=r,this.lastY=i}),at(this,"handleDragStop",e=>{if(!this.dragging)return;const t=(0,zr.getControlPosition)(e,this.touchIdentifier,this);if(t==null)return;let{x:r,y:i}=t;if(Array.isArray(this.props.grid)){let l=r-this.lastX||0,c=i-this.lastY||0;[l,c]=(0,zr.snapToGrid)(this.props.grid,l,c),r=this.lastX+l,i=this.lastY+c}const s=(0,zr.createCoreData)(this,r,i);if(this.props.onStop(e,s)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,nt.removeUserSelectStyles)(a.ownerDocument),(0,sa.default)("DraggableCore: handleDragStop: %j",s),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,sa.default)("DraggableCore: Removing handlers"),(0,nt.removeEvent)(a.ownerDocument,$r.move,this.handleDrag),(0,nt.removeEvent)(a.ownerDocument,$r.stop,this.handleDragStop))}),at(this,"onMouseDown",e=>($r=pn.mouse,this.handleDragStart(e))),at(this,"onMouseUp",e=>($r=pn.mouse,this.handleDragStop(e))),at(this,"onTouchStart",e=>($r=pn.touch,this.handleDragStart(e))),at(this,"onTouchEnd",e=>($r=pn.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,nt.addEvent)(e,pn.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,nt.removeEvent)(t,pn.mouse.move,this.handleDrag),(0,nt.removeEvent)(t,pn.touch.move,this.handleDrag),(0,nt.removeEvent)(t,pn.mouse.stop,this.handleDragStop),(0,nt.removeEvent)(t,pn.touch.stop,this.handleDragStop),(0,nt.removeEvent)(e,pn.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,nt.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(t=this.props)===null||t===void 0||(t=t.nodeRef)===null||t===void 0?void 0:t.current:o2.default.findDOMNode(this)}render(){return bd.cloneElement(bd.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};mh.default=vh;at(vh,"displayName","DraggableCore");at(vh,"propTypes",{allowAnyClick:yt.default.bool,children:yt.default.node.isRequired,disabled:yt.default.bool,enableUserSelectHack:yt.default.bool,offsetParent:function(n,e){if(n[e]&&n[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:yt.default.arrayOf(yt.default.number),handle:yt.default.string,cancel:yt.default.string,nodeRef:yt.default.object,onStart:yt.default.func,onDrag:yt.default.func,onStop:yt.default.func,onMouseDown:yt.default.func,scale:yt.default.number,className:Sd.dontSetMe,style:Sd.dontSetMe,transform:Sd.dontSetMe});at(vh,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),n.default=void 0;var e=d(C),t=u(AS),r=u(Pr),i=u(RA),s=Pe,o=tr,a=er,l=u(mh),c=u(yh);function u(m){return m&&m.__esModule?m:{default:m}}function h(m){if(typeof WeakMap!="function")return null;var w=new WeakMap,b=new WeakMap;return(h=function(S){return S?b:w})(m)}function d(m,w){if(m&&m.__esModule)return m;if(m===null||typeof m!="object"&&typeof m!="function")return{default:m};var b=h(w);if(b&&b.has(m))return b.get(m);var S={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in m)if(T!=="default"&&Object.prototype.hasOwnProperty.call(m,T)){var R=_?Object.getOwnPropertyDescriptor(m,T):null;R&&(R.get||R.set)?Object.defineProperty(S,T,R):S[T]=m[T]}return S.default=m,b&&b.set(m,S),S}function f(){return f=Object.assign?Object.assign.bind():function(m){for(var w=1;w<arguments.length;w++){var b=arguments[w];for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(m[S]=b[S])}return m},f.apply(this,arguments)}function g(m,w,b){return w=p(w),w in m?Object.defineProperty(m,w,{value:b,enumerable:!0,configurable:!0,writable:!0}):m[w]=b,m}function p(m){var w=y(m,"string");return typeof w=="symbol"?w:String(w)}function y(m,w){if(typeof m!="object"||m===null)return m;var b=m[Symbol.toPrimitive];if(b!==void 0){var S=b.call(m,w||"default");if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(m)}class v extends e.Component{static getDerivedStateFromProps(w,b){let{position:S}=w,{prevPropsPosition:_}=b;return S&&(!_||S.x!==_.x||S.y!==_.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:S,prevPropsPosition:_}),{x:S.x,y:S.y,prevPropsPosition:{...S}}):null}constructor(w){super(w),g(this,"onDragStart",(b,S)=>{if((0,c.default)("Draggable: onDragStart: %j",S),this.props.onStart(b,(0,o.createDraggableData)(this,S))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),g(this,"onDrag",(b,S)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",S);const _=(0,o.createDraggableData)(this,S),T={x:_.x,y:_.y,slackX:0,slackY:0};if(this.props.bounds){const{x:A,y:M}=T;T.x+=this.state.slackX,T.y+=this.state.slackY;const[B,L]=(0,o.getBoundPosition)(this,T.x,T.y);T.x=B,T.y=L,T.slackX=this.state.slackX+(A-T.x),T.slackY=this.state.slackY+(M-T.y),_.x=T.x,_.y=T.y,_.deltaX=T.x-this.state.x,_.deltaY=T.y-this.state.y}if(this.props.onDrag(b,_)===!1)return!1;this.setState(T)}),g(this,"onDragStop",(b,S)=>{if(!this.state.dragging||this.props.onStop(b,(0,o.createDraggableData)(this,S))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",S);const T={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:A,y:M}=this.props.position;T.x=A,T.y=M}this.setState(T)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var w,b;return(w=(b=this.props)===null||b===void 0||(b=b.nodeRef)===null||b===void 0?void 0:b.current)!==null&&w!==void 0?w:r.default.findDOMNode(this)}render(){const{axis:w,bounds:b,children:S,defaultPosition:_,defaultClassName:T,defaultClassNameDragging:R,defaultClassNameDragged:A,position:M,positionOffset:B,scale:L,...z}=this.props;let N={},G=null;const H=!!!M||this.state.dragging,O=M||_,D={x:(0,o.canDragX)(this)&&H?this.state.x:O.x,y:(0,o.canDragY)(this)&&H?this.state.y:O.y};this.state.isElementSVG?G=(0,s.createSVGTransform)(D,B):N=(0,s.createCSSTransform)(D,B);const I=(0,i.default)(S.props.className||"",T,{[R]:this.state.dragging,[A]:this.state.dragged});return e.createElement(l.default,f({},z,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(S),{className:I,style:{...S.props.style,...N},transform:G}))}}n.default=v,g(v,"displayName","Draggable"),g(v,"propTypes",{...l.default.propTypes,axis:t.default.oneOf(["both","x","y","none"]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),g(v,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(ES);const{default:BS,DraggableCore:u2}=ES;gh.exports=BS;gh.exports.default=BS;gh.exports.DraggableCore=u2;var h2=gh.exports;const d2=kp(h2);var Me=function(){return Me=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Me.apply(this,arguments)},fv={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},pv={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},ql={width:"20px",height:"20px",position:"absolute",zIndex:1},f2={top:Me(Me({},fv),{top:"-5px"}),right:Me(Me({},pv),{left:void 0,right:"-5px"}),bottom:Me(Me({},fv),{top:void 0,bottom:"-5px"}),left:Me(Me({},pv),{left:"-5px"}),topRight:Me(Me({},ql),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Me(Me({},ql),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Me(Me({},ql),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Me(Me({},ql),{left:"-10px",top:"-10px",cursor:"nw-resize"})},p2=C.memo(function(n){var e=n.onResizeStart,t=n.direction,r=n.children,i=n.replaceStyles,s=n.className,o=C.useCallback(function(c){e(c,t)},[e,t]),a=C.useCallback(function(c){e(c,t)},[e,t]),l=C.useMemo(function(){return Me(Me({position:"absolute",userSelect:"none"},f2[t]),i??{})},[i,t]);return x.jsx("div",{className:s||void 0,style:l,onMouseDown:o,onTouchStart:a,children:r})}),g2=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wn=function(){return Wn=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Wn.apply(this,arguments)},m2={width:"auto",height:"auto"},Kl=function(n,e,t){return Math.max(Math.min(n,t),e)},gv=function(n,e,t){var r=Math.round(n/e);return r*e+t*(r-1)},_s=function(n,e){return new RegExp(n,"i").test(e)},Jl=function(n){return!!(n.touches&&n.touches.length)},y2=function(n){return!!((n.clientX||n.clientX===0)&&(n.clientY||n.clientY===0))},mv=function(n,e,t){t===void 0&&(t=0);var r=e.reduce(function(s,o,a){return Math.abs(o-n)<Math.abs(e[s]-n)?a:s},0),i=Math.abs(e[r]-n);return t===0||i<t?e[r]:n},_d=function(n){return n=n.toString(),n==="auto"||n.endsWith("px")||n.endsWith("%")||n.endsWith("vh")||n.endsWith("vw")||n.endsWith("vmax")||n.endsWith("vmin")?n:"".concat(n,"px")},Ql=function(n,e,t,r){if(n&&typeof n=="string"){if(n.endsWith("px"))return Number(n.replace("px",""));if(n.endsWith("%")){var i=Number(n.replace("%",""))/100;return e*i}if(n.endsWith("vw")){var i=Number(n.replace("vw",""))/100;return t*i}if(n.endsWith("vh")){var i=Number(n.replace("vh",""))/100;return r*i}}return n},v2=function(n,e,t,r,i,s,o){return r=Ql(r,n.width,e,t),i=Ql(i,n.height,e,t),s=Ql(s,n.width,e,t),o=Ql(o,n.height,e,t),{maxWidth:typeof r>"u"?void 0:Number(r),maxHeight:typeof i>"u"?void 0:Number(i),minWidth:typeof s>"u"?void 0:Number(s),minHeight:typeof o>"u"?void 0:Number(o)}},w2=function(n){return Array.isArray(n)?n:[n,n]},x2=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],yv="__resizable_base__",b2=function(n){g2(e,n);function e(t){var r,i,s,o,a=n.call(this,t)||this;return a.ratio=1,a.resizable=null,a.parentLeft=0,a.parentTop=0,a.resizableLeft=0,a.resizableRight=0,a.resizableTop=0,a.resizableBottom=0,a.targetLeft=0,a.targetTop=0,a.delta={width:0,height:0},a.appendBase=function(){if(!a.resizable||!a.window)return null;var l=a.parentNode;if(!l)return null;var c=a.window.document.createElement("div");return c.style.width="100%",c.style.height="100%",c.style.position="absolute",c.style.transform="scale(0, 0)",c.style.left="0",c.style.flex="0 0 100%",c.classList?c.classList.add(yv):c.className+=yv,l.appendChild(c),c},a.removeBase=function(l){var c=a.parentNode;c&&c.removeChild(l)},a.state={isResizing:!1,width:(i=(r=a.propsSize)===null||r===void 0?void 0:r.width)!==null&&i!==void 0?i:"auto",height:(o=(s=a.propsSize)===null||s===void 0?void 0:s.height)!==null&&o!==void 0?o:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),a}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||m2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var t=0,r=0;if(this.resizable&&this.window){var i=this.resizable.offsetWidth,s=this.resizable.offsetHeight,o=this.resizable.style.position;o!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:i,r=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:s,this.resizable.style.position=o}return{width:t,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var t=this,r=this.props.size,i=function(a){var l;if(typeof t.state[a]>"u"||t.state[a]==="auto")return"auto";if(t.propsSize&&t.propsSize[a]&&(!((l=t.propsSize[a])===null||l===void 0)&&l.toString().endsWith("%"))){if(t.state[a].toString().endsWith("%"))return t.state[a].toString();var c=t.getParentSize(),u=Number(t.state[a].toString().replace("px","")),h=u/c[a]*100;return"".concat(h,"%")}return _d(t.state[a])},s=r&&typeof r.width<"u"&&!this.state.isResizing?_d(r.width):i("width"),o=r&&typeof r.height<"u"&&!this.state.isResizing?_d(r.height):i("height");return{width:s,height:o}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var r=!1,i=this.parentNode.style.flexWrap;i!=="wrap"&&(r=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var s={width:t.offsetWidth,height:t.offsetHeight};return r&&(this.parentNode.style.flexWrap=i),this.removeBase(t),s},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(t,r){var i=this.propsSize&&this.propsSize[r];return this.state[r]==="auto"&&this.state.original[r]===t&&(typeof i>"u"||i==="auto")?"auto":t},e.prototype.calculateNewMaxFromBoundary=function(t,r){var i=this.props.boundsByDirection,s=this.state.direction,o=i&&_s("left",s),a=i&&_s("top",s),l,c;if(this.props.bounds==="parent"){var u=this.parentNode;u&&(l=o?this.resizableRight-this.parentLeft:u.offsetWidth+(this.parentLeft-this.resizableLeft),c=a?this.resizableBottom-this.parentTop:u.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(l=o?this.resizableRight:this.window.innerWidth-this.resizableLeft,c=a?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(l=o?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),c=a?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return l&&Number.isFinite(l)&&(t=t&&t<l?t:l),c&&Number.isFinite(c)&&(r=r&&r<c?r:c),{maxWidth:t,maxHeight:r}},e.prototype.calculateNewSizeFromDirection=function(t,r){var i=this.props.scale||1,s=w2(this.props.resizeRatio||1),o=s[0],a=s[1],l=this.state,c=l.direction,u=l.original,h=this.props,d=h.lockAspectRatio,f=h.lockAspectRatioExtraHeight,g=h.lockAspectRatioExtraWidth,p=u.width,y=u.height,v=f||0,m=g||0;return _s("right",c)&&(p=u.width+(t-u.x)*o/i,d&&(y=(p-m)/this.ratio+v)),_s("left",c)&&(p=u.width-(t-u.x)*o/i,d&&(y=(p-m)/this.ratio+v)),_s("bottom",c)&&(y=u.height+(r-u.y)*a/i,d&&(p=(y-v)*this.ratio+m)),_s("top",c)&&(y=u.height-(r-u.y)*a/i,d&&(p=(y-v)*this.ratio+m)),{newWidth:p,newHeight:y}},e.prototype.calculateNewSizeFromAspectRatio=function(t,r,i,s){var o=this.props,a=o.lockAspectRatio,l=o.lockAspectRatioExtraHeight,c=o.lockAspectRatioExtraWidth,u=typeof s.width>"u"?10:s.width,h=typeof i.width>"u"||i.width<0?t:i.width,d=typeof s.height>"u"?10:s.height,f=typeof i.height>"u"||i.height<0?r:i.height,g=l||0,p=c||0;if(a){var y=(d-g)*this.ratio+p,v=(f-g)*this.ratio+p,m=(u-p)/this.ratio+g,w=(h-p)/this.ratio+g,b=Math.max(u,y),S=Math.min(h,v),_=Math.max(d,m),T=Math.min(f,w);t=Kl(t,b,S),r=Kl(r,_,T)}else t=Kl(t,u,h),r=Kl(r,d,f);return{newWidth:t,newHeight:r}},e.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds==="parent"){var r=this.parentNode;if(r){var i=r.getBoundingClientRect();this.parentLeft=i.left*t,this.parentTop=i.top*t}}if(this.props.bounds&&typeof this.props.bounds!="string"){var s=this.props.bounds.getBoundingClientRect();this.targetLeft=s.left*t,this.targetTop=s.top*t}if(this.resizable){var o=this.resizable.getBoundingClientRect(),a=o.left,l=o.top,c=o.right,u=o.bottom;this.resizableLeft=a*t,this.resizableRight=c*t,this.resizableTop=l*t,this.resizableBottom=u*t}},e.prototype.onResizeStart=function(t,r){if(!(!this.resizable||!this.window)){var i=0,s=0;if(t.nativeEvent&&y2(t.nativeEvent)?(i=t.nativeEvent.clientX,s=t.nativeEvent.clientY):t.nativeEvent&&Jl(t.nativeEvent)&&(i=t.nativeEvent.touches[0].clientX,s=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var o=this.props.onResizeStart(t,r,this.resizable);if(o===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var a,l=this.window.getComputedStyle(this.resizable);if(l.flexBasis!=="auto"){var c=this.parentNode;if(c){var u=this.window.getComputedStyle(c).flexDirection;this.flexDir=u.startsWith("row")?"row":"column",a=l.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var h={original:{x:i,y:s,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Wn(Wn({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:r,flexBasis:a};this.setState(h)}},e.prototype.onMouseMove=function(t){var r=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Jl(t))try{t.preventDefault(),t.stopPropagation()}catch{}var i=this.props,s=i.maxWidth,o=i.maxHeight,a=i.minWidth,l=i.minHeight,c=Jl(t)?t.touches[0].clientX:t.clientX,u=Jl(t)?t.touches[0].clientY:t.clientY,h=this.state,d=h.direction,f=h.original,g=h.width,p=h.height,y=this.getParentSize(),v=v2(y,this.window.innerWidth,this.window.innerHeight,s,o,a,l);s=v.maxWidth,o=v.maxHeight,a=v.minWidth,l=v.minHeight;var m=this.calculateNewSizeFromDirection(c,u),w=m.newHeight,b=m.newWidth,S=this.calculateNewMaxFromBoundary(s,o);this.props.snap&&this.props.snap.x&&(b=mv(b,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(w=mv(w,this.props.snap.y,this.props.snapGap));var _=this.calculateNewSizeFromAspectRatio(b,w,{width:S.maxWidth,height:S.maxHeight},{width:a,height:l});if(b=_.newWidth,w=_.newHeight,this.props.grid){var T=gv(b,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),R=gv(w,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),A=this.props.snapGap||0,M=A===0||Math.abs(T-b)<=A?T:b,B=A===0||Math.abs(R-w)<=A?R:w;b=M,w=B}var L={width:b-f.width,height:w-f.height};if(this.delta=L,g&&typeof g=="string"){if(g.endsWith("%")){var z=b/y.width*100;b="".concat(z,"%")}else if(g.endsWith("vw")){var N=b/this.window.innerWidth*100;b="".concat(N,"vw")}else if(g.endsWith("vh")){var G=b/this.window.innerHeight*100;b="".concat(G,"vh")}}if(p&&typeof p=="string"){if(p.endsWith("%")){var z=w/y.height*100;w="".concat(z,"%")}else if(p.endsWith("vw")){var N=w/this.window.innerWidth*100;w="".concat(N,"vw")}else if(p.endsWith("vh")){var G=w/this.window.innerHeight*100;w="".concat(G,"vh")}}var $={width:this.createSizeForCssProperty(b,"width"),height:this.createSizeForCssProperty(w,"height")};this.flexDir==="row"?$.flexBasis=$.width:this.flexDir==="column"&&($.flexBasis=$.height);var H=this.state.width!==$.width,O=this.state.height!==$.height,D=this.state.flexBasis!==$.flexBasis,I=H||O||D;I&&Pr.flushSync(function(){r.setState($)}),this.props.onResize&&I&&this.props.onResize(t,d,this.resizable,L)}},e.prototype.onMouseUp=function(t){var r,i,s=this.state,o=s.isResizing,a=s.direction;s.original,!(!o||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(t,a,this.resizable,this.delta),this.props.size&&this.setState({width:(r=this.props.size.width)!==null&&r!==void 0?r:"auto",height:(i=this.props.size.height)!==null&&i!==void 0?i:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Wn(Wn({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(t){var r,i;this.setState({width:(r=t.width)!==null&&r!==void 0?r:"auto",height:(i=t.height)!==null&&i!==void 0?i:"auto"})},e.prototype.renderResizer=function(){var t=this,r=this.props,i=r.enable,s=r.handleStyles,o=r.handleClasses,a=r.handleWrapperStyle,l=r.handleWrapperClass,c=r.handleComponent;if(!i)return null;var u=Object.keys(i).map(function(h){return i[h]!==!1?x.jsx(p2,{direction:h,onResizeStart:t.onResizeStart,replaceStyles:s&&s[h],className:o&&o[h],children:c&&c[h]?c[h]:null},h):null});return x.jsx("div",{className:l,style:a,children:u})},e.prototype.render=function(){var t=this,r=Object.keys(this.props).reduce(function(o,a){return x2.indexOf(a)!==-1||(o[a]=t.props[a]),o},{}),i=Wn(Wn(Wn({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(i.flexBasis=this.state.flexBasis);var s=this.props.as||"div";return x.jsxs(s,Wn({style:i,className:this.props.className},r,{ref:function(o){o&&(t.resizable=o)},children:[this.state.isResizing&&x.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(C.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var tp=function(n,e){return tp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},tp(n,e)};function S2(n,e){tp(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ie=function(){return Ie=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ie.apply(this,arguments)};function _2(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}var C2={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},T2=function(n){return{bottom:n,bottomLeft:n,bottomRight:n,left:n,right:n,top:n,topLeft:n,topRight:n}},k2=function(n){S2(e,n);function e(t){var r=n.call(this,t)||this;return r.resizingPosition={x:0,y:0},r.offsetFromParent={left:0,top:0},r.resizableElement={current:null},r.originalPosition={x:0,y:0},r.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},r.onResizeStart=r.onResizeStart.bind(r),r.onResize=r.onResize.bind(r),r.onResizeStop=r.onResizeStop.bind(r),r.onDragStart=r.onDragStart.bind(r),r.onDrag=r.onDrag.bind(r),r.onDragStop=r.onDragStop.bind(r),r.getMaxSizesFromProps=r.getMaxSizesFromProps.bind(r),r}return e.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,r=t.left,i=t.top,s=this.getDraggablePosition(),o=s.x,a=s.y;this.draggable.setState({x:o-r,y:a-i}),this.forceUpdate()},e.prototype.getDraggablePosition=function(){var t=this.draggable.state,r=t.x,i=t.y;return{x:r,y:i}},e.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},e.prototype.getParentSize=function(){return this.resizable.getParentSize()},e.prototype.getMaxSizesFromProps=function(){var t=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,r=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:t,maxHeight:r}},e.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},e.prototype.getOffsetHeight=function(t){var r=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/r;case"body":return document.body.offsetHeight/r;default:return t.offsetHeight}},e.prototype.getOffsetWidth=function(t){var r=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/r;case"body":return document.body.offsetWidth/r;default:return t.offsetWidth}},e.prototype.onDragStart=function(t,r){this.props.onDragStart&&this.props.onDragStart(t,r);var i=this.getDraggablePosition();if(this.originalPosition=i,!!this.props.bounds){var s=this.getParent(),o=this.props.scale,a;if(this.props.bounds==="parent")a=s;else if(this.props.bounds==="body"){var l=s.getBoundingClientRect(),c=l.left,u=l.top,h=document.body.getBoundingClientRect(),d=-(c-s.offsetLeft*o-h.left)/o,f=-(u-s.offsetTop*o-h.top)/o,g=(document.body.offsetWidth-this.resizable.size.width*o)/o+d,p=(document.body.offsetHeight-this.resizable.size.height*o)/o+f;return this.setState({bounds:{top:f,right:g,bottom:p,left:d}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var y=s.getBoundingClientRect(),v=y.left,m=y.top,w=-(v-s.offsetLeft*o)/o,b=-(m-s.offsetTop*o)/o,g=(window.innerWidth-this.resizable.size.width*o)/o+w,p=(window.innerHeight-this.resizable.size.height*o)/o+b;return this.setState({bounds:{top:b,right:g,bottom:p,left:w}})}else typeof this.props.bounds=="string"?a=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(a=this.props.bounds);if(!(!(a instanceof HTMLElement)||!(s instanceof HTMLElement))){var S=a.getBoundingClientRect(),_=S.left,T=S.top,R=s.getBoundingClientRect(),A=R.left,M=R.top,B=(_-A)/o,L=T-M;if(this.resizable){this.updateOffsetFromParent();var z=this.offsetFromParent;this.setState({bounds:{top:L-z.top,right:B+(a.offsetWidth-this.resizable.size.width)-z.left/o,bottom:L+(a.offsetHeight-this.resizable.size.height)-z.top,left:B-z.left/o}})}}}},e.prototype.onDrag=function(t,r){if(this.props.onDrag){var i=this.offsetFromParent,s=i.left,o=i.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(t,Ie(Ie({},r),{x:r.x+s,y:r.y+o}));if(this.props.dragAxis==="x")return this.props.onDrag(t,Ie(Ie({},r),{x:r.x+s,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(t,Ie(Ie({},r),{x:this.originalPosition.x+s,y:r.y+o,deltaX:0}))}},e.prototype.onDragStop=function(t,r){if(this.props.onDragStop){var i=this.offsetFromParent,s=i.left,o=i.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(t,Ie(Ie({},r),{x:r.x+s,y:r.y+o}));if(this.props.dragAxis==="x")return this.props.onDragStop(t,Ie(Ie({},r),{x:r.x+s,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(t,Ie(Ie({},r),{x:this.originalPosition.x+s,y:r.y+o,deltaX:0}))}},e.prototype.onResizeStart=function(t,r,i){t.stopPropagation(),this.setState({resizing:!0});var s=this.props.scale,o=this.offsetFromParent,a=this.getDraggablePosition();if(this.resizingPosition={x:a.x+o.left,y:a.y+o.top},this.originalPosition=a,this.props.bounds){var l=this.getParent(),c=void 0;this.props.bounds==="parent"?c=l:this.props.bounds==="body"?c=document.body:this.props.bounds==="window"?c=window:typeof this.props.bounds=="string"?c=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(c=this.props.bounds);var u=this.getSelfElement();if(u instanceof Element&&(c instanceof HTMLElement||c===window)&&l instanceof HTMLElement){var h=this.getMaxSizesFromProps(),d=h.maxWidth,f=h.maxHeight,g=this.getParentSize();if(d&&typeof d=="string")if(d.endsWith("%")){var p=Number(d.replace("%",""))/100;d=g.width*p}else d.endsWith("px")&&(d=Number(d.replace("px","")));if(f&&typeof f=="string")if(f.endsWith("%")){var p=Number(f.replace("%",""))/100;f=g.height*p}else f.endsWith("px")&&(f=Number(f.replace("px","")));var y=u.getBoundingClientRect(),v=y.left,m=y.top,w=this.props.bounds==="window"?{left:0,top:0}:c.getBoundingClientRect(),b=w.left,S=w.top,_=this.getOffsetWidth(c),T=this.getOffsetHeight(c),R=r.toLowerCase().endsWith("left"),A=r.toLowerCase().endsWith("right"),M=r.startsWith("top"),B=r.startsWith("bottom");if((R||M)&&this.resizable){var L=(v-b)/s+this.resizable.size.width;this.setState({maxWidth:L>Number(d)?d:L})}if(A||this.props.lockAspectRatio&&!R&&!M){var L=_+(b-v)/s;this.setState({maxWidth:L>Number(d)?d:L})}if((M||R)&&this.resizable){var L=(m-S)/s+this.resizable.size.height;this.setState({maxHeight:L>Number(f)?f:L})}if(B||this.props.lockAspectRatio&&!M&&!R){var L=T+(S-m)/s;this.setState({maxHeight:L>Number(f)?f:L})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(t,r,i)},e.prototype.onResize=function(t,r,i,s){var o=this,a={x:this.originalPosition.x,y:this.originalPosition.y},l=-s.width,c=-s.height,u=["top","left","topLeft","bottomLeft","topRight"];u.includes(r)&&(r==="bottomLeft"?a.x+=l:(r==="topRight"||(a.x+=l),a.y+=c));var h=this.draggable.state;(a.x!==h.x||a.y!==h.y)&&Pr.flushSync(function(){o.draggable.setState(a)}),this.updateOffsetFromParent();var d=this.offsetFromParent,f=this.getDraggablePosition().x+d.left,g=this.getDraggablePosition().y+d.top;this.resizingPosition={x:f,y:g},this.props.onResize&&this.props.onResize(t,r,i,s,{x:f,y:g})},e.prototype.onResizeStop=function(t,r,i,s){this.setState({resizing:!1});var o=this.getMaxSizesFromProps(),a=o.maxWidth,l=o.maxHeight;this.setState({maxWidth:a,maxHeight:l}),this.props.onResizeStop&&this.props.onResizeStop(t,r,i,s,this.resizingPosition)},e.prototype.updateSize=function(t){this.resizable&&this.resizable.updateSize({width:t.width,height:t.height})},e.prototype.updatePosition=function(t){this.draggable.setState(t)},e.prototype.updateOffsetFromParent=function(){var t=this.props.scale,r=this.getParent(),i=this.getSelfElement();if(!r||i===null)return{top:0,left:0};var s=r.getBoundingClientRect(),o=s.left,a=s.top,l=i.getBoundingClientRect(),c=this.getDraggablePosition(),u=r.scrollLeft,h=r.scrollTop;this.offsetFromParent={left:l.left-o+u-c.x*t,top:l.top-a+h-c.y*t}},e.prototype.render=function(){var t=this,r=this.props,i=r.disableDragging,s=r.style,o=r.dragHandleClassName,a=r.position,l=r.onMouseDown,c=r.onMouseUp,u=r.dragAxis,h=r.dragGrid,d=r.bounds,f=r.enableUserSelectHack,g=r.cancel,p=r.children;r.onResizeStart,r.onResize,r.onResizeStop,r.onDragStart,r.onDrag,r.onDragStop;var y=r.resizeHandleStyles,v=r.resizeHandleClasses,m=r.resizeHandleComponent,w=r.enableResizing,b=r.resizeGrid,S=r.resizeHandleWrapperClass,_=r.resizeHandleWrapperStyle,T=r.scale,R=r.allowAnyClick,A=r.dragPositionOffset,M=_2(r,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),B=this.props.default?Ie({},this.props.default):void 0;delete M.default;var L=i||o?{cursor:"auto"}:{cursor:"move"},z=Ie(Ie(Ie({},C2),L),s),N=this.offsetFromParent,G=N.left,$=N.top,H;a&&(H={x:a.x-G,y:a.y-$});var O=this.state.resizing?void 0:H,D=this.state.resizing?"both":u;return C.createElement(d2,{ref:function(I){I&&(t.draggable=I)},handle:o?".".concat(o):void 0,defaultPosition:B,onMouseDown:l,onMouseUp:c,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:D,disabled:i,grid:h,bounds:d?this.state.bounds:void 0,position:O,enableUserSelectHack:f,cancel:g,scale:T,allowAnyClick:R,nodeRef:this.resizableElement,positionOffset:A},C.createElement(b2,Ie({},M,{ref:function(I){I&&(t.resizable=I,t.resizableElement.current=I.resizable)},defaultSize:B,size:this.props.size,enable:typeof w=="boolean"?T2(w):w,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:z,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:b,handleWrapperClass:S,handleWrapperStyle:_,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:y,handleClasses:v,handleComponent:m,scale:this.props.scale}),p))},e.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},e}(C.PureComponent);const Ai=({title:n,children:e,onClose:t,defaultPosition:r={x:100,y:100},width:i="w-96",height:s="h-auto",icon:o,zIndex:a=10,onFocus:l,isMinimized:c,onMinimize:u})=>{const[h,d]=C.useState(!1),[f,g]=C.useState(!1),p=c!==void 0?c:h;C.useEffect(()=>{const m=()=>{g(window.innerWidth<768)};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);const y=()=>{const m=!p;u?u(m):d(m)},v=x.jsxs("div",{className:"win95-border bg-card flex flex-col shadow-lg h-full",children:[x.jsxs("div",{className:"window-title win95-title flex items-center justify-between px-1 py-1 cursor-move select-none",children:[x.jsxs("div",{className:"flex items-center gap-2 text-primary-foreground font-bold text-sm",children:[o&&x.jsx("span",{className:"text-base",children:o}),x.jsx("span",{children:n})]}),x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{onClick:y,className:"win95-border bg-card hover:bg-muted w-5 h-5 flex items-center justify-center active:win95-border-inset",children:x.jsx(sE,{className:"w-3 h-3"})}),x.jsx("button",{className:"win95-border bg-card hover:bg-muted w-5 h-5 flex items-center justify-center active:win95-border-inset",children:x.jsx(cE,{className:"w-2.5 h-2.5"})}),x.jsx("button",{onClick:t,className:"win95-border bg-card hover:bg-muted w-5 h-5 flex items-center justify-center active:win95-border-inset",children:x.jsx(Cb,{className:"w-3 h-3"})})]})]}),!p&&x.jsx("div",{className:"p-2 bg-card overflow-auto flex-1",children:e})]});return f?x.jsx("div",{className:"fixed top-0 left-0 right-0 bottom-10 m-2 animate-fade-in",style:{zIndex:a},onClick:l,children:v}):x.jsx(k2,{default:{x:r.x,y:r.y,width:384,height:"auto"},minWidth:300,minHeight:200,bounds:"window",dragHandleClassName:"window-title",className:"animate-fade-in",style:{zIndex:a},onMouseDown:l,enableResizing:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},resizeHandleStyles:{bottomRight:{cursor:"nwse-resize",width:"20px",height:"20px",right:"0px",bottom:"0px"},bottom:{cursor:"ns-resize",height:"10px"},right:{cursor:"ew-resize",width:"10px"},top:{cursor:"ns-resize",height:"10px"},left:{cursor:"ew-resize",width:"10px"},topRight:{cursor:"nesw-resize",width:"20px",height:"20px"},topLeft:{cursor:"nwse-resize",width:"20px",height:"20px"},bottomLeft:{cursor:"nesw-resize",width:"20px",height:"20px"}},children:v})},Cs=({icon:n,label:e,onClick:t})=>x.jsxs("button",{onClick:t,className:"flex flex-col items-center gap-1 p-2 hover:bg-primary/20 active:bg-primary/30 rounded group w-20",children:[x.jsx("div",{className:"text-4xl pixelated drop-shadow-lg",children:n}),x.jsx("span",{className:"text-xs text-white font-bold drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)] text-center leading-tight",children:e})]}),E2=({onStartClick:n,windows:e=[],onWindowClick:t})=>{const[r,i]=C.useState(new Date);return C.useEffect(()=>{const s=setInterval(()=>i(new Date),1e3);return()=>clearInterval(s)},[]),x.jsxs("div",{className:"fixed bottom-0 left-0 right-0 h-10 win95-border taskbar-gradient flex items-center justify-between px-2 z-50 shadow-lg",children:[x.jsxs("button",{onClick:n,className:"win95-border bg-gradient-to-br from-primary/20 to-accent/30 hover:from-primary/30 hover:to-accent/40 px-3 py-1 font-bold text-sm active:win95-border-inset flex items-center gap-2",children:[x.jsx(lE,{className:"w-4 h-4 text-primary"}),"Start"]}),x.jsx("div",{className:"flex-1 flex items-center gap-2 px-2 overflow-x-auto",children:e.map(s=>x.jsxs("button",{onClick:()=>t==null?void 0:t(s.id),className:"win95-border bg-card hover:bg-muted px-2 py-1 text-sm active:win95-border-inset flex items-center gap-2 min-w-[120px] max-w-[150px]",children:[x.jsx("span",{children:s.icon}),x.jsx("span",{className:"truncate",children:s.title})]},s.id))}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("a",{href:"https://open.spotify.com/user/12162592549?si=1248bae490c74683",target:"_blank",rel:"noopener noreferrer",className:"win95-border bg-card hover:bg-muted p-1 active:win95-border-inset",title:"Listen on Spotify",children:x.jsx(dE,{className:"w-4 h-4 text-primary"})}),x.jsx("div",{className:"win95-border-inset bg-muted/60 backdrop-blur-sm px-3 py-1 text-sm font-mono min-w-[100px] text-center",children:r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},R2=({isOpen:n,onClose:e,onOpenBlog:t,onOpenWindow:r})=>{const i=C.useRef(null);if(C.useEffect(()=>{const o=a=>{i.current&&!i.current.contains(a.target)&&e()};return n&&document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[n,e]),!n)return null;const s=[{name:"Software",icon:"💻"},{name:"Research",icon:"🔬"},{name:"Community",icon:"🦄"},{name:"Activism",icon:"🌈"}];return x.jsxs("div",{ref:i,className:"fixed bottom-10 left-0 w-64 win95-border bg-card shadow-2xl z-50 animate-fade-in",children:[x.jsx("div",{className:"bg-gradient-to-r from-primary/30 to-accent/40 px-3 py-6 flex items-center gap-3 border-b-2 border-border",children:x.jsxs("div",{className:"text-sm font-bold",children:[x.jsx("div",{className:"text-primary",children:"Mari's website"}),x.jsx("div",{className:"text-xs text-muted-foreground",children:"v1.0"})]})}),x.jsxs("div",{className:"p-1",children:[x.jsxs("div",{className:"mb-1 relative group/programs",children:[x.jsxs("button",{className:"w-full px-3 py-1.5 flex items-center gap-2 hover:bg-primary/20 active:bg-primary/30 text-left text-sm",children:[x.jsx(gd,{className:"w-4 h-4"}),x.jsx("span",{className:"flex-1",children:"Programs"}),x.jsx(jy,{className:"w-3 h-3 text-muted-foreground"})]}),x.jsx("div",{className:"hidden group-hover/programs:block absolute left-full top-0 ml-1 w-48 win95-border bg-card shadow-2xl z-50",children:x.jsxs("div",{className:"p-1",children:[x.jsx(Mt,{icon:"🎨",text:"Paint",onClick:()=>{r("paint"),e()}}),x.jsx(Mt,{icon:"💬",text:"Chat",onClick:()=>{r("chat"),e()}}),x.jsx(Mt,{icon:"🖼️",text:"Gallery",onClick:()=>{r("gallery"),e()}}),x.jsx(Mt,{icon:"📖",text:"Guestbook",onClick:()=>{r("guestbook"),e()}})]})})]}),x.jsx("div",{className:"h-px bg-border my-1"}),x.jsxs("div",{className:"mb-1 relative group/blogs",children:[x.jsxs("button",{className:"w-full px-3 py-1.5 flex items-center gap-2 hover:bg-primary/20 active:bg-primary/30 text-left text-sm",children:[x.jsx(gd,{className:"w-4 h-4"}),x.jsx("span",{className:"flex-1",children:"Blogs"}),x.jsx(jy,{className:"w-3 h-3 text-muted-foreground"})]}),x.jsx("div",{className:"hidden group-hover/blogs:block absolute left-full top-0 ml-1 w-56 win95-border bg-card shadow-2xl z-50",children:x.jsxs("div",{className:"p-1",children:[x.jsx(Mt,{icon:"🤖",text:"Do Cyborgs Dream of Bionic Sheep?",onClick:()=>{window.open("https://cyborgdream.github.io/","_blank"),e()},showArrow:!0}),x.jsx(Mt,{icon:"📝",text:"Medium",onClick:()=>{window.open("https://medium.com/@mari-meir","_blank"),e()},showArrow:!0}),x.jsx(Mt,{icon:"🔬",text:"Tech for Good Research",onClick:()=>{window.open("https://techforgoodresearch.substack.com/","_blank"),e()},showArrow:!0}),x.jsx(Mt,{icon:"📡",text:"Wireless Hippie",onClick:()=>{window.open("https://wireless-hippie.neocities.org/","_blank"),e()},showArrow:!0}),x.jsx(Mt,{icon:"✍️",text:"Letters for the Evanescents",onClick:()=>{window.open("https://lettersfortheevanescents.mataroa.blog/","_blank"),e()},showArrow:!0})]})})]}),x.jsx("div",{className:"h-px bg-border my-1"}),x.jsxs("div",{children:[x.jsxs("div",{className:"px-3 py-1 text-xs font-bold text-muted-foreground flex items-center gap-1",children:[x.jsx(gd,{className:"w-3 h-3"}),"My interests"]}),s.map(o=>x.jsx(Mt,{icon:o.icon,text:o.name,onClick:()=>{t(o.name),e()}},o.name)),x.jsx(Mt,{icon:"📚",text:"Reading List",onClick:()=>{window.open("/reading-list.html","_blank"),e()},showArrow:!0})]}),x.jsx("div",{className:"h-px bg-border my-1"}),x.jsx(Mt,{icon:"🌸",text:"About",onClick:()=>{r("about"),e()}}),x.jsx(Mt,{icon:"⚙️",text:"Settings",onClick:()=>{window.open("https://github.com/marimeireles/psychonautgirl","_blank"),e()},showArrow:!0})]})]})},Mt=({icon:n,text:e,onClick:t,showArrow:r=!1})=>x.jsxs("button",{onClick:t,className:"w-full px-3 py-1.5 flex items-center gap-2 hover:bg-primary/20 active:bg-primary/30 text-left group text-sm",children:[x.jsx("span",{className:"text-base",children:n}),x.jsx("span",{className:`flex-1 ${r?"underline":""}`,children:e}),r&&x.jsx(eE,{className:"w-3 h-3 text-muted-foreground"})]});function k(n,e,t){return(e=function(r){var i=function(s,o){if(typeof s!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var l=a.call(s,o||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(s)}(r,"string");return typeof i=="symbol"?i:i+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vv(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function E(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vv(Object(t),!0).forEach(function(r){k(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vv(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Se(n,e){if(n==null)return{};var t,r,i=function(o,a){if(o==null)return{};var l={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(a.indexOf(c)>=0)continue;l[c]=o[c]}return l}(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function nr(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}class wv{constructor(){k(this,"browserShadowBlurConstant",1),k(this,"DPI",96),k(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),k(this,"perfLimitSizeTotal",2097152),k(this,"maxCacheSideLimit",4096),k(this,"minCacheSideLimit",256),k(this,"disableStyleCopyPaste",!1),k(this,"enableGLFiltering",!0),k(this,"textureSize",4096),k(this,"forceGLPutImageData",!1),k(this,"cachesBoundsOfCurve",!1),k(this,"fontPaths",{}),k(this,"NUM_FRACTION_DIGITS",4)}}const oe=new class extends wv{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=E(E({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new wv,t=(n==null?void 0:n.reduce((r,i)=>(r[i]=e[i],r),{}))||e;this.configure(t)}},Si=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[n]("fabric",...t)};class Gn extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class P2 extends Gn{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class O2{}class A2 extends O2{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),i=e.createShader(e.FRAGMENT_SHADER);return!!i&&(e.shaderSource(i,r),e.compileShader(i),!!e.getShaderParameter(i,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),t.getExtension("WEBGL_lose_context").loseContext(),Si("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const D2={};let xv;const Qn=()=>xv||(xv={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new A2,dispose(){},copyPasteData:D2}),Io=()=>Qn().document,wh=()=>Qn().window,zS=()=>{var n;return Math.max((n=oe.devicePixelRatio)!==null&&n!==void 0?n:wh().devicePixelRatio,1)},Ta=new class{constructor(){k(this,"charWidthsCache",{}),k(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:r}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const i=this.charWidthsCache[e],s="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return i[s]||(i[s]={}),i[s]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=oe,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},np="6.7.1";function $c(){}const ml=Math.PI/2,Cu=2*Math.PI,$g=Math.PI/180,pt=Object.freeze([1,0,0,1,0,0]),Hg=16,Hr=.4477152502,ne="center",ce="left",Et="top",rp="bottom",Oe="right",Rt="none",Ug=/\r?\n/,$S="moving",xh="scaling",HS="rotating",Vg="rotate",US="skewing",Za="resizing",M2="modifyPoly",j2="modifyPath",Tu="changed",bh="scale",At="scaleX",on="scaleY",Fo="skewX",Bo="skewY",He="fill",Pt="stroke",ku="modified",Ts="json",Cd="svg",U=new class{constructor(){this[Ts]=new Map,this[Cd]=new Map}has(n){return this[Ts].has(n)}getClass(n){const e=this[Ts].get(n);if(!e)throw new Gn("No class registered for ".concat(n));return e}setClass(n,e){e?this[Ts].set(e,n):(this[Ts].set(n.type,n),this[Ts].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[Cd].get(n)}setSVGClass(n,e){this[Cd].set(e??n.type.toLowerCase(),n)}},Eu=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var r;return t.target===n||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};class L2{constructor(){k(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[i,s]=r;this.on(i,s)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(i=>{let[s,o]=i;r.push(this.once(s,o))}),()=>r.forEach(i=>i())}if(t){const r=this.on(e,function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];t.call(this,...s),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],i=r.indexOf(t);i>-1&&r.splice(i,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[i,s]=r;this._removeEventListener(i,s)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const i=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(i)for(let s=0;s<i.length;s++)i[s].call(this,t||{})}}const Ms=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},Cr=n=>{if(n===0)return 1;switch(Math.abs(n)/ml){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},Tr=n=>{if(n===0)return 0;const e=n/ml,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};class P{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new P(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new P(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new P(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new P(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new P(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new P(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new P(this.x/e.x,this.y/e.y)}scalarDivide(e){return new P(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new P(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new P(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new P(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new P(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gg;const r=Tr(e),i=Cr(e),s=this.subtract(t);return new P(s.x*i-s.y*r,s.x*r+s.y*i).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new P(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const Gg=new P(0,0),Hc=n=>!!n&&Array.isArray(n._objects);function VS(n){class e extends n{constructor(){super(...arguments),k(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];const o=this._objects.push(...i);return i.forEach(a=>this._onObjectAdded(a)),o}insertAt(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return this._objects.splice(r,0,...s),s.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const r=this._objects,i=[];for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return o.forEach(l=>{const c=r.indexOf(l);c!==-1&&(r.splice(c,1),i.push(l),this._onObjectRemoved(l))}),i}forEachObject(r){this.getObjects().forEach((i,s,o)=>r(i,s,o))}getObjects(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...i))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,i){return!!this._objects.includes(r)||!!i&&this._objects.some(s=>s instanceof e&&s.contains(r,!0))}complexity(){return this._objects.reduce((r,i)=>r+=i.complexity?i.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(Ms(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(Ms(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,i){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==0){const o=this.findNewLowerIndex(r,s,i);return Ms(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,i){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==this._objects.length-1){const o=this.findNewUpperIndex(r,s,i);return Ms(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,i){return r!==this._objects[i]&&(Ms(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,i,s){let o;if(s){o=i;for(let a=i-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=i-1;return o}findNewUpperIndex(r,i,s){let o;if(s){o=i;for(let a=i+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=i+1;return o}collectObjects(r){let{left:i,top:s,width:o,height:a}=r,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=[],u=new P(i,s),h=u.add(new P(o,a));for(let d=this._objects.length-1;d>=0;d--){const f=this._objects[d];f.selectable&&f.visible&&(l&&f.intersectsWithRect(u,h)||f.isContainedWithinRect(u,h)||l&&f.containsPoint(u)||l&&f.containsPoint(h))&&c.push(f)}return c}}return e}class GS extends L2{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function Uc(n){return wh().requestAnimationFrame(n)}function N2(n){return wh().cancelAnimationFrame(n)}let W2=0;const _i=()=>W2++,kr=()=>{const n=Io().createElement("canvas");if(!n||n.getContext===void 0)throw new Gn("Failed to create `canvas` element");return n},I2=()=>Io().createElement("img"),an=n=>{const e=kr();return e.width=n.width,e.height=n.height,e},YS=(n,e,t)=>n.toDataURL("image/".concat(e),t),XS=(n,e,t)=>new Promise((r,i)=>{n.toBlob(r,"image/".concat(e),t)}),De=n=>n*$g,Er=n=>n/$g,F2=n=>n.every((e,t)=>e===pt[t]),xt=(n,e,t)=>new P(n).transform(e,t),kn=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:r,y:i}=new P(n[4],n[5]).transform(t,!0);return t[4]=-r,t[5]=-i,t},Xe=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],Yg=(n,e)=>n.reduceRight((t,r)=>r&&t?Xe(r,t,e):r||t,void 0)||pt.concat(),qS=n=>{let[e,t]=n;return Math.atan2(t,e)},Ru=n=>{const e=qS(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(t),i=(n[0]*n[3]-n[2]*n[1])/r,s=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:Er(e),scaleX:r,scaleY:i,skewX:Er(s),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},yl=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function zo(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=De(n),i=Cr(r),s=Tr(r);return[i,s,-s,i,e?e-(i*e-s*t):0,t?t-(s*e+i*t):0]}const Xg=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},KS=n=>Math.tan(De(n)),JS=n=>[1,0,KS(n),1,0,0],QS=n=>[1,KS(n),0,1,0,0],Sh=n=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:i=!1,skewX:s=0,skewY:o=0}=n,a=Xg(r?-e:e,i?-t:t);return s&&(a=Xe(a,JS(s),!0)),o&&(a=Xe(a,QS(o),!0)),a},B2=n=>{const{translateX:e=0,translateY:t=0,angle:r=0}=n;let i=yl(e,t);r&&(i=Xe(i,zo({angle:r})));const s=Sh(n);return F2(s)||(i=Xe(i,s)),i},Vc=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,i){if(e&&e.aborted)return i(new P2("loadImage"));const s=I2();let o;e&&(o=function(l){s.src="",i(l)},e.addEventListener("abort",o,{once:!0}));const a=function(){s.onload=s.onerror=null,o&&(e==null||e.removeEventListener("abort",o)),r(s)};n?(s.onload=a,s.onerror=function(){o&&(e==null||e.removeEventListener("abort",o)),i(new Gn("Error loading ".concat(s.src)))},t&&(s.crossOrigin=t),s.src=n):a()})},el=function(n){let{signal:e,reviver:t=$c}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,i)=>{const s=[];e&&e.addEventListener("abort",i,{once:!0}),Promise.all(n.map(o=>U.getClass(o.type).fromObject(o,{signal:e}).then(a=>(t(o,a),s.push(a),a)))).then(r).catch(o=>{s.forEach(a=>{a.dispose&&a.dispose()}),i(o)}).finally(()=>{e&&e.removeEventListener("abort",i)})})},_h=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const i=[];e&&e.addEventListener("abort",r,{once:!0});const s=Object.values(n).map(a=>a&&a.type&&U.has(a.type)?el([a],{signal:e}).then(l=>{let[c]=l;return i.push(c),c}):a),o=Object.keys(n);Promise.all(s).then(a=>a.reduce((l,c,u)=>(l[o[u]]=c,l),{})).then(t).catch(a=>{i.forEach(l=>{l.dispose&&l.dispose()}),r(a)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},$o=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},qg=(n,e)=>Object.keys(n).reduce((t,r)=>(e(n[r],r,n)&&(t[r]=n[r]),t),{}),fe=(n,e)=>parseFloat(Number(n).toFixed(e)),tl=n=>"matrix("+n.map(e=>fe(e,oe.NUM_FRACTION_DIGITS)).join(" ")+")",Zt=n=>!!n&&n.toLive!==void 0,bv=n=>!!n&&typeof n.toObject=="function",Sv=n=>!!n&&n.offsetX!==void 0&&"source"in n,Wi=n=>!!n&&"multiSelectionStacking"in n;function ZS(n){const e=n&&Tn(n);let t=0,r=0;if(!n||!e)return{left:t,top:r};let i=n;const s=e.documentElement,o=e.body||{scrollLeft:0,scrollTop:0};for(;i&&(i.parentNode||i.host)&&(i=i.parentNode||i.host,i===e?(t=o.scrollLeft||s.scrollLeft||0,r=o.scrollTop||s.scrollTop||0):(t+=i.scrollLeft||0,r+=i.scrollTop||0),i.nodeType!==1||i.style.position!=="fixed"););return{left:t,top:r}}const Tn=n=>n.ownerDocument||null,e_=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},t_=function(n,e,t){let{width:r,height:i}=t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=i,s>1&&(n.setAttribute("width",(r*s).toString()),n.setAttribute("height",(i*s).toString()),e.scale(s,s))},ip=(n,e)=>{let{width:t,height:r}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function _v(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=Rt,n}class n_{constructor(e){k(this,"_originalCanvasStyle",void 0),k(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&Io().getElementById(e)||kr();var r;if(t.hasAttribute("data-fabric"))throw new Gn("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:i}=this.lower;i.classList.remove("lower-canvas"),i.removeAttribute("data-fabric"),i.setAttribute("width","".concat(t)),i.setAttribute("height","".concat(r)),i.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:i}=this.lower;t_(r,i,e,t)}setCSSDimensions(e){ip(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&Tn(e),i={left:0,top:0};if(!r)return i;const s=((t=e_(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};i.left+=parseInt(s.borderLeftWidth,10)||0,i.top+=parseInt(s.borderTopWidth,10)||0,i.left+=parseInt(s.paddingLeft,10)||0,i.top+=parseInt(s.paddingTop,10)||0;let o={left:0,top:0};const a=r.documentElement;e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect());const l=ZS(e);return{left:o.left+l.left-(a.clientLeft||0)+i.left,top:o.top+l.top-(a.clientTop||0)+i.top}}(this.lower.el)}dispose(){Qn().dispose(this.lower.el),delete this.lower}}const z2={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...pt]};class vl extends VS(GS){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return vl.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new n_(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];const s=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(Si("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?zS():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const i=E({width:this.width,height:this.height},e);this.elements.setDimensions(i,this.getRetinaScaling()),this.hasLostContext=!0,this.width=i.width,this.height=i.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,i=[...this.viewportTransform],s=xt(e,kn(i));i[0]=t,i[3]=t;const o=xt(s,i);i[4]+=r.x-o.x,i[5]+=r.y-o.y,this.setViewportTransform(i)}setZoom(e){this.zoomToPoint(new P(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new P(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Uc(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=kn(this.viewportTransform),i=xt({x:0,y:0},r),s=xt({x:e,y:t},r),o=i.min(s),a=i.max(s);return this.vptCoords={tl:o,tr:new P(a.x,o.y),bl:new P(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(N2(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,i=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),i&&(i._set("canvas",this),i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,i)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,i=t.length;r<i;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],i=this["".concat(t,"Image")],s=this.viewportTransform,o=this["".concat(t,"Vpt")];if(!r&&!i)return;const a=Zt(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?r.toLive(e):r,o&&e.transform(...s),a){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const l=r.gradientTransform||r.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(i){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&e.transform(...s),i.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new P(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new P(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new P(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new P(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new P(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return xt(this.getCenterPoint(),kn(this.viewportTransform))}_centerObject(e,t){e.setXY(t,ne,ne),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,i=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return E(E(E({version:np},$o(this,t)),{},{objects:this._objects.filter(s=>!s.excludeFromExport).map(s=>this._toObject(s,e,t))},this.__serializeBgOverlay(e,t)),i?{clipPath:i}:null)}_toObject(e,t,r){let i;this.includeDefaultValues||(i=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!i),s}__serializeBgOverlay(e,t){const r={},i=this.backgroundImage,s=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return Zt(o)?o.excludeFromExport||(r.background=o.toObject(t)):o&&(r.background=o),Zt(a)?a.excludeFromExport||(r.overlay=a.toObject(t)):a&&(r.overlay=a),i&&!i.excludeFromExport&&(r.backgroundImage=this._toObject(i,e,t)),s&&!s.excludeFromExport&&(r.overlayImage=this._toObject(s,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),i=t.height||"".concat(this.height),s=oe.NUM_FRACTION_DIGITS,o=t.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;a='viewBox="'.concat(fe(-l[4]/l[0],s)," ").concat(fe(-l[5]/l[3],s)," ").concat(fe(this.width/l[0],s)," ").concat(fe(this.height/l[3],s),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',i,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",np,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(_i()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Zt(t)){const r=this["".concat(e,"Vpt")],i=this.viewportTransform,s={isType:()=>!1,width:this.width/(r?i[0]:1),height:this.height/(r?i[3]:1)};return t.toSVG(s,{additionalTransform:r?tl(i):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=oe.fontPaths;this._objects.forEach(function s(o){e.push(o),Hc(o)&&o._objects.forEach(s)}),e.forEach(s=>{if(!(o=s)||typeof o._renderText!="function")return;var o;const{styles:a,fontFamily:l}=s;!t[l]&&r[l]&&(t[l]=!0,a&&Object.values(a).forEach(c=>{Object.values(c).forEach(u=>{let{fontFamily:h=""}=u;!t[h]&&r[h]&&(t[h]=!0)})}))});const i=Object.keys(t).map(s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(r[s],`');
		}
`)).join("");return i?`	<style type="text/css"><![CDATA[
`.concat(i,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const i=this[t];i&&!i.excludeFromExport&&i.toSVG&&e.push(i.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(Zt(r)){const i=r.repeat||"",s=this.width,o=this.height,a=this["".concat(t,"Vpt")]?tl(kn(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(s/2,",").concat(o/2,')" x="').concat(r.offsetX-s/2,'" y="').concat(r.offsetY-o/2,'" width="').concat(i!=="repeat-y"&&i!=="no-repeat"||!Sv(r)?s:r.source.width,'" height="').concat(i!=="repeat-x"&&i!=="no-repeat"||!Sv(r)?o:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Gn("`json` is undefined"));const i=typeof e=="string"?JSON.parse(e):e,{objects:s=[],backgroundImage:o,background:a,overlayImage:l,overlay:c,clipPath:u}=i,h=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([el(s,{reviver:t,signal:r}),_h({backgroundImage:o,backgroundColor:a,overlayImage:l,overlayColor:c,clipPath:u},{signal:r})]).then(d=>{let[f,g]=d;return this.clear(),this.add(...f),this.set(i),this.set(g),this.renderOnAddRemove=h,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=an(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:i=1,enableRetinaScaling:s=!1}=e,o=i*(s?this.getRetinaScaling():1);return YS(this.toCanvasElement(o,e),t,r)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:i=1,enableRetinaScaling:s=!1}=e,o=i*(s?this.getRetinaScaling():1);return XS(this.toCanvasElement(o,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:i,top:s,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,l=(r||this.height)*e,c=this.getZoom(),u=this.width,h=this.height,d=this.skipControlsDrawing,f=c*e,g=this.viewportTransform,p=[f,0,0,f,(g[4]-(i||0))*e,(g[5]-(s||0))*e],y=this.enableRetinaScaling,v=an({width:a,height:l}),m=o?this._objects.filter(w=>o(w)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=p,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(v.getContext("2d"),m),this.viewportTransform=g,this.width=u,this.height=h,this.calcViewportBoundaries(),this.enableRetinaScaling=y,this.skipControlsDrawing=d,v}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Eu.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}k(vl,"ownDefaults",z2);const $2=["touchstart","touchmove","touchend"],H2=n=>{const e=ZS(n.target),t=function(r){const i=r.changedTouches;return i&&i[0]?i[0]:r}(n);return new P(t.clientX+e.left,t.clientY+e.top)},sp=n=>$2.includes(n.type)||n.pointerType==="touch",Cv=n=>{n.preventDefault(),n.stopPropagation()},yr=n=>{let e=0,t=0,r=0,i=0;for(let s=0,o=n.length;s<o;s++){const{x:a,y:l}=n[s];(a>r||!s)&&(r=a),(a<e||!s)&&(e=a),(l>i||!s)&&(i=l),(l<t||!s)&&(t=l)}return{left:e,top:t,width:r-e,height:i-t}},U2=["translateX","translateY","scaleX","scaleY"],V2=(n,e)=>Pu(n,Xe(e,n.calcOwnMatrix())),Pu=(n,e)=>{const t=Ru(e),{translateX:r,translateY:i,scaleX:s,scaleY:o}=t,a=Se(t,U2),l=new P(r,i);n.flipX=!1,n.flipY=!1,Object.assign(n,a),n.set({scaleX:s,scaleY:o}),n.setPositionByOrigin(l,ne,ne)},G2=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},r_=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),Kg=(n,e,t)=>{const r=n/2,i=e/2,s=[new P(-r,-i),new P(r,-i),new P(-r,i),new P(r,i)].map(a=>a.transform(t)),o=yr(s);return new P(o.width,o.height)},Ch=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pt;return Xe(kn(arguments.length>1&&arguments[1]!==void 0?arguments[1]:pt),n)},lo=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pt;return n.transform(Ch(e,t))},Y2=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pt;return n.transform(Ch(e,t),!0)},X2=(n,e,t)=>{const r=Ch(e,t);return Pu(n,Xe(r,n.calcOwnMatrix())),r},i_=(n,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(n),E(E({},e),{},{target:r})),r.fire(n,e)},q2={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Ne=n=>typeof n=="string"?q2[n]:n-.5,Ou="not-allowed";function s_(n){return Ne(n.originX)===Ne(ne)&&Ne(n.originY)===Ne(ne)}function Tv(n){return .5-Ne(n)}const On=(n,e)=>n[e],o_=(n,e,t,r)=>({e:n,transform:e,pointer:new P(t,r)});function a_(n,e){const t=n.getTotalAngle()+Er(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function Jg(n,e,t,r,i){var s;let{target:o,corner:a}=n;const l=o.controls[a],c=((s=o.canvas)===null||s===void 0?void 0:s.getZoom())||1,u=o.padding/c,h=function(d,f,g,p){const y=d.getRelativeCenterPoint(),v=g!==void 0&&p!==void 0?d.translateToGivenOrigin(y,ne,ne,g,p):new P(d.left,d.top);return(d.angle?f.rotate(-De(d.angle),y):f).subtract(v)}(o,new P(r,i),e,t);return h.x>=u&&(h.x-=u),h.x<=-u&&(h.x+=u),h.y>=u&&(h.y-=u),h.y<=u&&(h.y+=u),h.x-=l.offsetX,h.y-=l.offsetY,h}const K2=(n,e,t,r)=>{const{target:i,offsetX:s,offsetY:o}=e,a=t-s,l=r-o,c=!On(i,"lockMovementX")&&i.left!==a,u=!On(i,"lockMovementY")&&i.top!==l;return c&&i.set(ce,a),u&&i.set(Et,l),(c||u)&&i_($S,o_(n,e,t,r)),c||u},kv={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Td=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),Ev=(n,e,t,r)=>{n/=255,e/=255,t/=255;const i=Math.max(n,e,t),s=Math.min(n,e,t);let o,a;const l=(i+s)/2;if(i===s)o=a=0;else{const c=i-s;switch(a=l>.5?c/(2-i-s):c/(i+s),i){case n:o=(e-t)/c+(e<t?6:0);break;case e:o=(t-n)/c+2;break;case t:o=(n-e)/c+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),r]},Rv=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},Zl=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),Pv=n=>{let[e,t,r,i=1]=n;const s=Math.round(.3*e+.59*t+.11*r);return[s,s,s,i]};class le{constructor(e){if(k(this,"isUnrecognised",!1),e)if(e instanceof le)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,i,s=1]=e;this.setSource([t,r,i,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in kv&&(e=kv[e]),e==="transparent"?[255,255,255,0]:le.sourceFromHex(e)||le.sourceFromRgb(e)||le.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=Ev(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,i]=Ev(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(i,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,i]=this.getSource();return"".concat(Zl(e)).concat(Zl(t)).concat(Zl(r)).concat(Zl(Math.round(255*i)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Pv(this.getSource())),this}toBlackWhite(e){const[t,,,r]=Pv(this.getSource()),i=t<(e||127)?0:255;return this.setSource([i,i,i,r]),this}overlayWith(e){e instanceof le||(e=new le(e));const t=this.getSource(),r=e.getSource(),[i,s,o]=t.map((a,l)=>Math.round(.5*a+.5*r[l]));return this.setSource([i,s,o,t[3]]),this}static fromRgb(e){return le.fromRgba(e)}static fromRgba(e){return new le(le.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[r,i,s]=t.slice(1,4).map(o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a});return[r,i,s,Rv(t[4])]}}static fromHsl(e){return le.fromHsla(e)}static fromHsla(e){return new le(le.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(le.parseAngletoDegrees(t[1])%360+360)%360/360,i=parseFloat(t[2])/100,s=parseFloat(t[3])/100;let o,a,l;if(i===0)o=a=l=s;else{const c=s<=.5?s*(i+1):s+i-s*i,u=2*s-c;o=Td(u,c,r+1/3),a=Td(u,c,r),l=Td(u,c,r-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*l),Rv(t[4])]}static fromHex(e){return new le(le.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(l=>l+l):t.match(/.{2}/g);const[i,s,o,a=255]=r.map(l=>parseInt(l,16));return[i,s,o,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?Er(r):t.includes("turn")?360*r:r}}const co=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Hg;const t=/\D{0,2}$/.exec(n),r=parseFloat(n),i=oe.DPI;switch(t==null?void 0:t[0]){case"mm":return r*i/25.4;case"cm":return r*i/2.54;case"in":return r*i;case"pt":return r*i/72;case"pc":return r*i/72*12;case"em":return r*e;default:return r}},J2=n=>{const[e,t]=n.trim().split(" "),[r,i]=(s=e)&&s!==Rt?[s.slice(1,4),s.slice(5,8)]:s===Rt?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:t||"meet",alignX:r,alignY:i}},nl=function(n,e){let t,r,i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const s=new le(e),o=s.getAlpha();t=s.toRgb(),o!==1&&(r=o.toString())}else t="none";return i?"".concat(n,": ").concat(t,"; ").concat(r?"".concat(n,"-opacity: ").concat(r,"; "):""):"".concat(n,'="').concat(t,'" ').concat(r?"".concat(n,'-opacity="').concat(r,'" '):"")};class l_{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):Rt,s=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=this.opacity!==void 0?this.opacity:"1",u=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),d=nl(He,this.fill);return[nl(Pt,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",t,"; ","opacity: ",c,";",h,u].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),i='transform="'.concat(tl(r));return"".concat(i).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=i,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:i,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=i?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=l&&l.absolutePositioned,h=this.stroke,d=this.fill,f=this.shadow,g=[],p=e.indexOf("COMMON_PARTS");let y;l&&(l.clipPathId="CLIPPATH_".concat(_i()),y='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(r),`</clipPath>
`)),u&&g.push("<g ",a,this.getSvgCommons(),` >
`),g.push("<g ",this.getSvgTransform(!1),u?"":a+this.getSvgCommons(),` >
`);const v=[o,c,t?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[p]=v,Zt(d)&&g.push(d.toSVG(this)),Zt(h)&&g.push(h.toSVG(this)),f&&g.push(f.toSVG(this)),l&&g.push(y),g.push(e.join("")),g.push(`</g>
`),u&&g.push(`</g>
`),r?r(g.join("")):g.join("")}addPaintOrder(){return this.paintFirst!==He?' paint-order="'.concat(this.paintFirst,'" '):""}}function Th(n){return new RegExp("^("+n.join("|")+")\\b","i")}const us="textDecorationThickness",c_=["fontSize","fontWeight","fontFamily","fontStyle"],u_=["underline","overline","linethrough"],h_=[...c_,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],d_=[...h_,...u_,"textBackgroundColor","direction",us],Q2=[...c_,...u_,Pt,"strokeWidth",He,"deltaY","textBackgroundColor",us],Z2={_reNewline:Ug,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:ce,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:ce,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[us]:66.667},Un="justify",Au="justify-left",ka="justify-right",Ea="justify-center";var Ov,Av,Dv;const En=String.raw(Ov||(Ov=nr(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),kd=String.raw(Av||(Av=nr(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),eD=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+En+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+En+"))?\\s+(.*)"),tD={cx:ce,x:ce,r:"radius",cy:Et,y:Et,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":us},Ed="font-size",Rd="clip-path";Th(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Th(["symbol","image","marker","pattern","view","svg"]);const Mv=Th(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(Dv||(Dv=nr(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),En,kd,En,kd,En,kd,En));const nD=new P(1,0),f_=new P,p_=(n,e)=>n.rotate(e),op=(n,e)=>new P(e).subtract(n),ap=n=>n.distanceFrom(f_),lp=(n,e)=>Math.atan2(Ra(n,e),iD(n,e)),rD=n=>lp(nD,n),Qg=n=>n.eq(f_)?n:n.scalarDivide(ap(n)),g_=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Qg(new P(-n.y,n.x).scalarMultiply(e?1:-1))},Ra=(n,e)=>n.x*e.y-n.y*e.x,iD=(n,e)=>n.x*e.x+n.y*e.y,jv=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const r=Ra(e,t),i=Ra(e,n),s=Ra(t,n);return r>=0?i>=0&&s<=0:!(i<=0&&s>=0)},Lv="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Nv=new RegExp("(?:\\s|^)"+Lv+Lv+"("+En+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Kn{constructor(e){const t=typeof e=="string"?Kn.parseShadow(e):e;Object.assign(this,Kn.ownDefaults,t),this.id=_i()}static parseShadow(e){const t=e.trim(),[,r=0,i=0,s=0]=(Nv.exec(t)||[]).map(o=>parseFloat(o)||0);return{color:(t.replace(Nv,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:i,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=p_(new P(this.offsetX,this.offsetY),De(-e.angle)),r=new le(this.color);let i=40,s=40;return e.width&&e.height&&(i=100*fe((Math.abs(t.x)+this.blur)/e.width,oe.NUM_FRACTION_DIGITS)+20,s=100*fe((Math.abs(t.y)+this.blur)/e.height,oe.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(i,'%" width="').concat(100+2*i,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(fe(this.blur?this.blur/2:0,oe.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(fe(t.x,oe.NUM_FRACTION_DIGITS),'" dy="').concat(fe(t.y,oe.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=Kn.ownDefaults;return this.includeDefaultValues?e:qg(e,(r,i)=>r!==t[i])}static async fromObject(e){return new this(e)}}k(Kn,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),k(Kn,"type","shadow"),U.setClass(Kn,"shadow");const Oo=(n,e,t)=>Math.max(n,Math.min(e,t)),sD=[Et,ce,At,on,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Fo,Bo],Or=[He,Pt,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],oD={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:ce,originY:Et,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:He,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},aD=(n,e,t,r)=>-t*Math.cos(n/r*ml)+t+e,lD=()=>!1;class Zg{constructor(e){let{startValue:t,byValue:r,duration:i=500,delay:s=0,easing:o=aD,onStart:a=$c,onChange:l=$c,onComplete:c=$c,abort:u=lD,target:h}=e;k(this,"_state","pending"),k(this,"durationProgress",0),k(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=i,this.delay=s,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=c,this._abort=u,this.target=h,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Uc(e),this.delay):Uc(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:i,valueProgress:s}=this.calculate(r);this.value=Object.freeze(i),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Uc(this.tick)))}register(){Eu.push(this)}unregister(){Eu.remove(this)}abort(){this._state="aborted",this.unregister()}}const cD=["startValue","endValue"];class uD extends Zg{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(E(E({},Se(e,cD)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const hD=["startValue","endValue"];class dD extends Zg{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(E(E({},Se(e,hD)),{},{startValue:t,byValue:r.map((i,s)=>i-t[s])}))}calculate(e){const t=this.startValue.map((r,i)=>this.easing(e,r,this.byValue[i],this.duration,i));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const fD=["startValue","endValue","easing","onChange","onComplete","abort"],pD=(n,e,t,r)=>e+t*(1-Math.cos(n/r*ml)),Pd=n=>n&&((e,t,r)=>n(new le(e).toRgba(),t,r));class gD extends Zg{constructor(e){let{startValue:t,endValue:r,easing:i=pD,onChange:s,onComplete:o,abort:a}=e,l=Se(e,fD);const c=new le(t).getSource(),u=new le(r).getSource();super(E(E({},l),{},{startValue:c,byValue:u.map((h,d)=>h-c[d]),easing:i,onChange:Pd(s),onComplete:Pd(o),abort:Pd(a)}))}calculate(e){const[t,r,i,s]=this.startValue.map((a,l)=>this.easing(e,a,this.byValue[l],this.duration,l)),o=[...[t,r,i].map(Math.round),Oo(0,s,1)];return{value:o,valueProgress:o.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}}function m_(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new dD(n):new uD(n);return e.start(),e}function mD(n){const e=new gD(n);return e.start(),e}class _e{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(i=>!this.includes(i))),this}static isPointContained(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(i||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(i||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const s=op(t,r),o=op(t,e).divide(s);return i?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(e,t){const r=new P(e).setX(Math.min(e.x-1,...t.map(s=>s.x)));let i=0;for(let s=0;s<t.length;s++){const o=this.intersectSegmentSegment(t[s],t[(s+1)%t.length],e,r);if(o.includes(e))return!0;i+=+(o.status==="Intersection")}return i%2==1}static intersectLineLine(e,t,r,i){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=t.x-e.x,l=t.y-e.y,c=i.x-r.x,u=i.y-r.y,h=e.x-r.x,d=e.y-r.y,f=c*d-u*h,g=a*d-l*h,p=u*a-c*l;if(p!==0){const y=f/p,v=g/p;return(s||0<=y&&y<=1)&&(o||0<=v&&v<=1)?new _e("Intersection").append(new P(e.x+y*a,e.y+y*l)):new _e}if(f===0||g===0){const y=s||o||_e.isPointContained(e,r,i)||_e.isPointContained(t,r,i)||_e.isPointContained(r,e,t)||_e.isPointContained(i,e,t);return new _e(y?"Coincident":void 0)}return new _e("Parallel")}static intersectSegmentLine(e,t,r,i){return _e.intersectLineLine(e,t,r,i,!1,!0)}static intersectSegmentSegment(e,t,r,i){return _e.intersectLineLine(e,t,r,i,!1,!1)}static intersectLinePolygon(e,t,r){let i=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new _e,o=r.length;for(let a,l,c,u=0;u<o;u++){if(a=r[u],l=r[(u+1)%o],c=_e.intersectLineLine(e,t,a,l,i,!1),c.status==="Coincident")return c;s.append(...c.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,t,r){return _e.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new _e,i=e.length,s=[];for(let o=0;o<i;o++){const a=e[o],l=e[(o+1)%i],c=_e.intersectSegmentPolygon(a,l,t);c.status==="Coincident"?(s.push(c),r.append(a,l)):r.append(...c.points)}return s.length>0&&s.length===e.length?new _e("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const i=t.min(r),s=t.max(r),o=new P(s.x,i.y),a=new P(i.x,s.y);return _e.intersectPolygonPolygon(e,[i,o,s,a])}}class yD extends GS{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?xt(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=xt(e,kn(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new P(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:i}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,t,r,i];if(this.group){const o=this.group.calcTransformMatrix();return s.map(a=>xt(a,o))}return s}intersectsWithRect(e,t){return _e.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=_e.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:i,width:s,height:o}=this.getBoundingRect();return r>=e.x&&r+s<=t.x&&i>=e.y&&i+o<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return _e.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return yr(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(At,e),this._set(on,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Er(qS(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||pt.concat()}calcACoords(){const e=zo({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),i=yl(t,r),s=Xe(i,e),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:xt({x:-a,y:-l},s),tr:xt({x:a,y:-l},s),bl:xt({x:-a,y:l},s),br:xt({x:a,y:l},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Ne(this.originX),Ne(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),i=this.matrixCache;return i&&i.key.every((s,o)=>s===r[o])?i.value:(this.group&&(t=Xe(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),i={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=B2(i);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new P(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=E({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let i=r,s=0;this.strokeUniform&&(i=0,s=r);const o=t.width+i,a=t.height+i;let l;return l=t.skewX===0&&t.skewY===0?new P(o*t.scaleX,a*t.scaleY):Kg(o,a,Sh(t)),l.scalarAdd(s)}translateToGivenOrigin(e,t,r,i,s){let o=e.x,a=e.y;const l=Ne(i)-Ne(t),c=Ne(s)-Ne(r);if(l||c){const u=this._getTransformedDimensions();o+=l*u.x,a+=c*u.y}return new P(o,a)}translateToCenterPoint(e,t,r){if(t===ne&&r===ne)return e;const i=this.translateToGivenOrigin(e,t,r,ne,ne);return this.angle?i.rotate(De(this.angle),e):i}translateToOriginPoint(e,t,r){const i=this.translateToGivenOrigin(e,ne,ne,t,r);return this.angle?i.rotate(De(this.angle),e):i}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?xt(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new P(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const i=this.translateToCenterPoint(e,t,r),s=this.translateToOriginPoint(i,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),ce,Et)}}const vD=["type"],wD=["extraParam"];let sr=class Gc extends yD{static getDefaults(){return Gc.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){Si("warn","Setting type has no effect",e)}constructor(e){super(),k(this,"_cacheContext",null),Object.assign(this,Gc.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=kr(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,i=oe.maxCacheSideLimit,s=oe.minCacheSideLimit;if(t<=i&&r<=i&&t*r<=oe.perfLimitSizeTotal)return t<s&&(e.width=s),r<s&&(e.height=s),e;const o=t/r,[a,l]=Ta.limitDimsByArea(o),c=Oo(s,a,i),u=Oo(s,l,i);return t>c&&(e.zoomX/=t/c,e.width=c,e.capped=!0),r>u&&(e.zoomY/=r/u,e.height=u,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,i=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(i+2),zoomX:e.x,zoomY:e.y,x:r,y:i}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:i,zoomX:s,zoomY:o,x:a,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),c=r!==e.width||i!==e.height,u=this.zoomX!==s||this.zoomY!==o;if(!e||!t)return!1;if(c||u){r!==e.width||i!==e.height?(e.width=r,e.height=i):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const h=a/2,d=l/2;return this.cacheTranslationX=Math.round(e.width/2-h)+h,this.cacheTranslationY=Math.round(e.height/2-d)+d,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(s,o),this.zoomX=s,this.zoomY=o,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new P(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Ru(this.calcTransformMatrix());return new P(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==At&&e!==on||(t=this._constrainScale(t)),e===At&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof Kn||(t=new Kn(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:i,cacheTranslationY:s}=this,{width:o,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:i,cacheTranslationY:s,width:o,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Pt&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const i=this.fill,s=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=i,this.stroke=s}createClipPathLayer(e,t){const r=an(t),i=r.getContext("2d");if(i.translate(t.cacheTranslationX,t.cacheTranslationY),i.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(s=>{s.transform(i)}),t.parentClipPaths.push(e),e.absolutePositioned){const s=kn(this.calcTransformMatrix());i.transform(s[0],s[1],s[2],s[3],s[4],s[5])}return e.transform(i),e.drawObject(i,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const i=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,i)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Zt(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(Zt(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,i=this.getCanvasRetinaScaling(),[s,,,o]=(r==null?void 0:r.viewportTransform)||pt,a=s*i,l=o*i,c=t.nonScaling?new P(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*oe.browserShadowBlurConstant*(a+l)*(c.x+c.y)/4,e.shadowOffsetX=t.offsetX*a*c.x,e.shadowOffsetY=t.offsetY*l*c.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Zt(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,i=-this.width/2+t.offsetX||0,s=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,i,s):e.transform(1,0,0,1,i,s),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:i,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===Pt?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const i=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),o=i.x/this.scaleX/s,a=i.y/this.scaleY/s,l=an({width:Math.ceil(o),height:Math.ceil(a)}),c=l.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(o,0),c.lineTo(o,a),c.lineTo(0,a),c.closePath(),c.translate(o/2,a/2),c.scale(i.zoomX/this.scaleX/s,i.zoomY/this.scaleY/s),this._applyPatternGradientTransform(c,t),c.fillStyle=t.toLive(e),c.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/i.zoomX,s*this.scaleY/i.zoomY),e.strokeStyle=(r=c.createPattern(l,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new P(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(U.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=r_(this),r=this.group,i=this.shadow,s=Math.abs,o=e.enableRetinaScaling?zS():1,a=(e.multiplier||1)*o,l=e.canvasProvider||(m=>new vl(m,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&G2(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&X2(this,this.getViewportTransform()),this.setCoords();const c=kr(),u=this.getBoundingRect(),h=this.shadow,d=new P;if(h){const m=h.blur,w=h.nonScaling?new P(1,1):this.getObjectScaling();d.x=2*Math.round(s(h.offsetX)+m)*s(w.x),d.y=2*Math.round(s(h.offsetY)+m)*s(w.y)}const f=u.width+d.x,g=u.height+d.y;c.width=Math.ceil(f),c.height=Math.ceil(g);const p=l(c);e.format==="jpeg"&&(p.backgroundColor="#fff"),this.setPositionByOrigin(new P(p.width/2,p.height/2),ne,ne);const y=this.canvas;p._objects=[this],this.set("canvas",p),this.setCoords();const v=p.toCanvasElement(a||1,e);return this.set("canvas",y),this.shadow=i,r&&(this.group=r),this.set(t),this.setCoords(),p._objects=[],p.destroy(),v}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return YS(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return XS(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:i}=this;if(t){const{x:s,y:o}=this.getRelativeCenterPoint();this.originX=ne,this.originY=ne,this.left=s,this.top=o}if(this.set("angle",e),t){const{x:s,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,i);this.left=s,this.top=o,this.originX=r,this.originY=i}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Eu.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Qn().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((r,i)=>{let[s,o]=i;return r[s]=this._animate(s,o,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.split("."),s=this.constructor.colorProperties.includes(i[i.length-1]),{abort:o,startValue:a,onChange:l,onComplete:c}=r,u=E(E({},r),{},{target:this,startValue:a??i.reduce((h,d)=>h[d],this),endValue:t,abort:o==null?void 0:o.bind(this),onChange:(h,d,f)=>{i.reduce((g,p,y)=>(y===i.length-1&&(g[p]=h),g[p]),this),l&&l(h,d,f)},onComplete:(h,d,f)=>{this.setCoords(),c&&c(h,d,f)}});return s?mD(u):m_(u)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let i,s=0;s<t.length;s++){if(i=t[s],i===e)return{fork:[this,...t.slice(0,s)],otherFork:[],common:t.slice(s)};for(let o=0;o<r.length;o++){if(this===r[o])return{fork:[],otherFork:[e,...r.slice(0,o)],common:[this,...t]};if(i===r[o])return{fork:[this,...t.slice(0,s)],otherFork:[e,...r.slice(0,o)],common:t.slice(s)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const i=t.fork.pop(),s=t.otherFork.pop(),o=r._objects.indexOf(i),a=r._objects.indexOf(s);return o>-1&&o>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Gc.customProperties,this.constructor.customProperties||[]);let t;const r=oe.NUM_FRACTION_DIGITS,{clipPath:i,fill:s,stroke:o,shadow:a,strokeDashArray:l,left:c,top:u,originX:h,originY:d,width:f,height:g,strokeWidth:p,strokeLineCap:y,strokeDashOffset:v,strokeLineJoin:m,strokeUniform:w,strokeMiterLimit:b,scaleX:S,scaleY:_,angle:T,flipX:R,flipY:A,opacity:M,visible:B,backgroundColor:L,fillRule:z,paintFirst:N,globalCompositeOperation:G,skewX:$,skewY:H}=this;i&&!i.excludeFromExport&&(t=i.toObject(e.concat("inverted","absolutePositioned")));const O=I=>fe(I,r),D=E(E({},$o(this,e)),{},{type:this.constructor.type,version:np,originX:h,originY:d,left:O(c),top:O(u),width:O(f),height:O(g),fill:bv(s)?s.toObject():s,stroke:bv(o)?o.toObject():o,strokeWidth:O(p),strokeDashArray:l&&l.concat(),strokeLineCap:y,strokeDashOffset:v,strokeLineJoin:m,strokeUniform:w,strokeMiterLimit:O(b),scaleX:O(S),scaleY:O(_),angle:O(T),flipX:R,flipY:A,opacity:O(M),shadow:a&&a.toObject(),visible:B,backgroundColor:L,fillRule:z,paintFirst:N,globalCompositeOperation:G,skewX:O($),skewY:O(H)},t?{clipPath:t}:null);return this.includeDefaultValues?D:this._removeDefaultValues(D)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return qg(e,(i,s)=>{if(s===ce||s===Et||s==="type")return!0;const o=r[s];return i!==o&&!(Array.isArray(i)&&Array.isArray(o)&&i.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Se(e,vD),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:i}=r,s=Se(r,wD);return _h(t,s).then(o=>i?(delete o[i],new this(t[i],o)):new this(o))}static fromObject(e,t){return this._fromObject(e,t)}};k(sr,"stateProperties",sD),k(sr,"cacheProperties",Or),k(sr,"ownDefaults",oD),k(sr,"type","FabricObject"),k(sr,"colorProperties",[He,Pt,"backgroundColor"]),k(sr,"customProperties",[]),U.setClass(sr),U.setClass(sr,"object");const Ho=(n,e,t)=>(r,i,s,o)=>{const a=e(r,i,s,o);return a&&i_(n,E(E({},o_(r,i,s,o)),t)),a};function Uo(n){return(e,t,r,i)=>{const{target:s,originX:o,originY:a}=t,l=s.getRelativeCenterPoint(),c=s.translateToOriginPoint(l,o,a),u=n(e,t,r,i);return s.setPositionByOrigin(c,t.originX,t.originY),u}}const Wv=Ho(Za,Uo((n,e,t,r)=>{const i=Jg(e,e.originX,e.originY,t,r);if(Ne(e.originX)===Ne(ne)||Ne(e.originX)===Ne(Oe)&&i.x<0||Ne(e.originX)===Ne(ce)&&i.x>0){const{target:s}=e,o=s.strokeWidth/(s.strokeUniform?s.scaleX:1),a=s_(e)?2:1,l=s.width,c=Math.abs(i.x*a/s.scaleX)-o;return s.set("width",Math.max(c,1)),l!==s.width}return!1}));function xD(n,e,t,r,i){r=r||{};const s=this.sizeX||r.cornerSize||i.cornerSize,o=this.sizeY||r.cornerSize||i.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:i.transparentCorners,l=a?Pt:He,c=!a&&(r.cornerStrokeColor||i.cornerStrokeColor);let u,h=e,d=t;n.save(),n.fillStyle=r.cornerColor||i.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||i.cornerStrokeColor||"",s>o?(u=s,n.scale(1,o/s),d=t*s/o):o>s?(u=o,n.scale(s/o,1),h=e*o/s):u=s,n.beginPath(),n.arc(h,d,u/2,0,Cu,!1),n[l](),c&&n.stroke(),n.restore()}function bD(n,e,t,r,i){r=r||{};const s=this.sizeX||r.cornerSize||i.cornerSize,o=this.sizeY||r.cornerSize||i.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:i.transparentCorners,l=a?Pt:He,c=!a&&(r.cornerStrokeColor||i.cornerStrokeColor),u=s/2,h=o/2;n.save(),n.fillStyle=r.cornerColor||i.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||i.cornerStrokeColor||"",n.translate(e,t);const d=i.getTotalAngle();n.rotate(De(d)),n["".concat(l,"Rect")](-u,-h,s,o),c&&n.strokeRect(-u,-h,s,o),n.restore()}class mn{constructor(e){k(this,"visible",!0),k(this,"actionName",bh),k(this,"angle",0),k(this,"x",0),k(this,"y",0),k(this,"offsetX",0),k(this,"offsetY",0),k(this,"sizeX",0),k(this,"sizeY",0),k(this,"touchSizeX",0),k(this,"touchSizeY",0),k(this,"cursorStyle","crosshair"),k(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,i){var s;let{tl:o,tr:a,br:l,bl:c}=i;return((s=t.canvas)===null||s===void 0?void 0:s.getActiveObject())===t&&t.isControlVisible(e)&&_e.isPointInPolygon(r,[o,a,l,c])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,i;return(r=(i=e._controlsVisibility)===null||i===void 0?void 0:i[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,i){return new P(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,i,s,o){const a=Yg([yl(r,i),zo({angle:e}),Xg((s?this.touchSizeX:this.sizeX)||t,(s?this.touchSizeY:this.sizeY)||t)]);return{tl:new P(-.5,-.5).transform(a),tr:new P(.5,-.5).transform(a),br:new P(.5,.5).transform(a),bl:new P(-.5,.5).transform(a)}}render(e,t,r,i,s){((i=i||{}).cornerStyle||s.cornerStyle)==="circle"?xD.call(this,e,t,r,i,s):bD.call(this,e,t,r,i,s)}}const SD=(n,e,t)=>t.lockRotation?Ou:e.cursorStyle,_D=Ho(HS,Uo((n,e,t,r)=>{let{target:i,ex:s,ey:o,theta:a,originX:l,originY:c}=e;const u=i.translateToOriginPoint(i.getRelativeCenterPoint(),l,c);if(On(i,"lockRotation"))return!1;const h=Math.atan2(o-u.y,s-u.x),d=Math.atan2(r-u.y,t-u.x);let f=Er(d-h+a);if(i.snapAngle&&i.snapAngle>0){const p=i.snapAngle,y=i.snapThreshold||p,v=Math.ceil(f/p)*p,m=Math.floor(f/p)*p;Math.abs(f-m)<y?f=m:Math.abs(f-v)<y&&(f=v)}f<0&&(f=360+f),f%=360;const g=i.angle!==f;return i.angle=f,g}));function y_(n,e){const t=e.canvas,r=n[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function v_(n,e,t){const r=On(n,"lockScalingX"),i=On(n,"lockScalingY");if(r&&i||!e&&(r||i)&&t||r&&e==="x"||i&&e==="y")return!0;const{width:s,height:o,strokeWidth:a}=n;return s===0&&a===0&&e!=="y"||o===0&&a===0&&e!=="x"}const CD=["e","se","s","sw","w","nw","n","ne","e"],fa=(n,e,t)=>{const r=y_(n,t);if(v_(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return Ou;const i=a_(t,e);return"".concat(CD[i],"-resize")};function em(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=e.target,o=i.by,a=y_(n,s);let l,c,u,h,d,f;if(v_(s,o,a))return!1;if(e.gestureScale)c=e.scaleX*e.gestureScale,u=e.scaleY*e.gestureScale;else{if(l=Jg(e,e.originX,e.originY,t,r),d=o!=="y"?Math.sign(l.x||e.signX||1):1,f=o!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=d),e.signY||(e.signY=f),On(s,"lockScalingFlip")&&(e.signX!==d||e.signY!==f))return!1;if(h=s._getTransformedDimensions(),a&&!o){const y=Math.abs(l.x)+Math.abs(l.y),{original:v}=e,m=y/(Math.abs(h.x*v.scaleX/s.scaleX)+Math.abs(h.y*v.scaleY/s.scaleY));c=v.scaleX*m,u=v.scaleY*m}else c=Math.abs(l.x*s.scaleX/h.x),u=Math.abs(l.y*s.scaleY/h.y);s_(e)&&(c*=2,u*=2),e.signX!==d&&o!=="y"&&(e.originX=Tv(e.originX),c*=-1,e.signX=d),e.signY!==f&&o!=="x"&&(e.originY=Tv(e.originY),u*=-1,e.signY=f)}const g=s.scaleX,p=s.scaleY;return o?(o==="x"&&s.set(At,c),o==="y"&&s.set(on,u)):(!On(s,"lockScalingX")&&s.set(At,c),!On(s,"lockScalingY")&&s.set(on,u)),g!==s.scaleX||p!==s.scaleY}const ec=Ho(xh,Uo((n,e,t,r)=>em(n,e,t,r))),TD=Ho(xh,Uo((n,e,t,r)=>em(n,e,t,r,{by:"x"}))),kD=Ho(xh,Uo((n,e,t,r)=>em(n,e,t,r,{by:"y"}))),ED=["target","ex","ey","skewingSide"],Od={x:{counterAxis:"y",scale:At,skew:Fo,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:on,skew:Bo,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},RD=["ns","nesw","ew","nwse"],PD=(n,e,t)=>{if(e.x!==0&&On(t,"lockSkewingY")||e.y!==0&&On(t,"lockSkewingX"))return Ou;const r=a_(t,e)%4;return"".concat(RD[r],"-resize")};function w_(n,e,t,r,i){const{target:s}=t,{counterAxis:o,origin:a,lockSkewing:l,skew:c,flip:u}=Od[n];if(On(s,l))return!1;const{origin:h,flip:d}=Od[o],f=Ne(t[h])*(s[d]?-1:1),g=-Math.sign(f)*(s[u]?-1:1),p=.5*-((s[c]===0&&Jg(t,ne,ne,r,i)[n]>0||s[c]>0?1:-1)*g)+.5;return Ho(US,Uo((v,m,w,b)=>function(S,_,T){let{target:R,ex:A,ey:M,skewingSide:B}=_,L=Se(_,ED);const{skew:z}=Od[S],N=T.subtract(new P(A,M)).divide(new P(R.scaleX,R.scaleY))[S],G=R[z],$=L[z],H=Math.tan(De($)),O=S==="y"?R._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:R._getTransformedDimensions({scaleX:1,scaleY:1}).y,D=2*N*B/Math.max(O,1)+H,I=Er(Math.atan(D));R.set(z,I);const q=G!==R[z];if(q&&S==="y"){const{skewX:Y,scaleX:Q}=R,K=R._getTransformedDimensions({skewY:G}),ge=R._getTransformedDimensions(),we=Y!==0?K.x/ge.x:1;we!==1&&R.set(At,we*Q)}return q}(n,m,new P(w,b))))(e,E(E({},t),{},{[a]:p,skewingSide:g}),r,i)}const OD=(n,e,t,r)=>w_("x",n,e,t,r),AD=(n,e,t,r)=>w_("y",n,e,t,r);function kh(n,e){return n[e.canvas.altActionKey]}const tc=(n,e,t)=>{const r=kh(n,t);return e.x===0?r?Fo:on:e.y===0?r?Bo:At:""},qs=(n,e,t)=>kh(n,t)?PD(0,e,t):fa(n,e,t),Iv=(n,e,t,r)=>kh(n,e.target)?AD(n,e,t,r):TD(n,e,t,r),Fv=(n,e,t,r)=>kh(n,e.target)?OD(n,e,t,r):kD(n,e,t,r),x_=()=>({ml:new mn({x:-.5,y:0,cursorStyleHandler:qs,actionHandler:Iv,getActionName:tc}),mr:new mn({x:.5,y:0,cursorStyleHandler:qs,actionHandler:Iv,getActionName:tc}),mb:new mn({x:0,y:.5,cursorStyleHandler:qs,actionHandler:Fv,getActionName:tc}),mt:new mn({x:0,y:-.5,cursorStyleHandler:qs,actionHandler:Fv,getActionName:tc}),tl:new mn({x:-.5,y:-.5,cursorStyleHandler:fa,actionHandler:ec}),tr:new mn({x:.5,y:-.5,cursorStyleHandler:fa,actionHandler:ec}),bl:new mn({x:-.5,y:.5,cursorStyleHandler:fa,actionHandler:ec}),br:new mn({x:.5,y:.5,cursorStyleHandler:fa,actionHandler:ec}),mtr:new mn({x:0,y:-.5,actionHandler:_D,cursorStyleHandler:SD,offsetY:-40,withConnection:!0,actionName:Vg})}),DD=()=>({mr:new mn({x:.5,y:0,actionHandler:Wv,cursorStyleHandler:qs,actionName:Za}),ml:new mn({x:-.5,y:0,actionHandler:Wv,cursorStyleHandler:qs,actionName:Za})}),MD=()=>E(E({},x_()),DD());class rl extends sr{static getDefaults(){return E(E({},super.getDefaults()),rl.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),rl.ownDefaults),this.setOptions(e)}static createControls(){return{controls:x_()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,i=t.action;if(this===r&&i&&i.startsWith(bh))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let i=r.length-1;i>=0;i--){const[s,o]=r[i],a=this.controls[s];if(a.shouldActivate(s,this,e,t?o.touchCorner:o.corner))return this.__corner=s,{key:s,control:a,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=yl(t.x,t.y),i=zo({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=Xe(r,i),o=Xe(e,s),a=Xe(o,[1/e[0],0,0,1/e[3],0,0]),l=this.group?Ru(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const c=this._calculateCurrentDimensions(l),u={};return this.forEachControl((h,d)=>{const f=h.positionHandler(c,a,this,h);u[d]=Object.assign(f,this._calcCornerCoords(h,f))}),u}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),i=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/i[0],1/i[3]),e.rotate(De(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=E({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=i.borderColor,this._setLineDash(e,i.borderDashArray),this.strokeBorders(e,t),i.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:i}=this,s=E({hasBorders:r,hasControls:i},t),o=this.getViewportTransform(),a=s.hasBorders,l=s.hasControls,c=Xe(o,this.calcTransformMatrix()),u=Ru(c);e.save(),e.translate(u.translateX,u.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(u.angle-=180),e.rotate(De(this.group?u.angle:this.angle)),a&&this.drawBorders(e,u,t),l&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let i;if(r&&r.forActiveSelection||this.group){const s=Kg(this.width,this.height,Sh(t)),o=this.isStrokeAccountedForInDimensions()?Gg:(this.strokeUniform?new P().scalarAdd(this.canvas?this.canvas.getZoom():1):new P(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);i=s.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else i=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,i,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((i,s)=>{i.withConnection&&i.getVisibility(this,s)&&(r=!0,e.moveTo(i.x*t.x,i.y*t.y),e.lineTo(i.x*t.x+i.offsetX,i.y*t.y+i.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:s,cornerColor:o}=this,a=E({cornerStrokeColor:i,cornerDashArray:s,cornerColor:o},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((l,c)=>{if(l.getVisibility(this,c)){const u=this.oCoords[c];l.render(e,u.x,u.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,i]=t;return this.setControlVisible(r,i)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const i=this.width+4,s=this.height+4;return t.clearRect(-i/2,-s/2,i,s),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function b_(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),n}k(rl,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class st extends rl{}b_(st,[l_]),U.setClass(st),U.setClass(st,"object");const jD=(n,e,t,r)=>{const i=2*(r=Math.round(r))+1,{data:s}=n.getImageData(e-r,t-r,i,i);for(let o=3;o<s.length;o+=4)if(s[o]>0)return!1;return!0};class S_{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new P(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new P(1/this.options.scaleX,1/this.options.scaleY):new P(1,1)}createSideVector(e,t){const r=op(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new P(e);return t.y+=t.x*Math.tan(De(this.options.skewY)),t.x+=t.y*Math.tan(De(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const LD=new P;class uo extends S_{static getOrthogonalRotationFactor(e,t){const r=t?lp(e,t):rD(e);return Math.abs(r)<ml?-1:1}constructor(e,t,r,i){super(i),k(this,"AB",void 0),k(this,"AC",void 0),k(this,"alpha",void 0),k(this,"bisector",void 0),this.A=new P(e),this.B=new P(t),this.C=new P(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=lp(this.AB,this.AC),this.bisector=Qg(p_(this.AB.eq(LD)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t),s=g_(i),o=uo.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,r*o)}projectBevel(){const e=[];return(this.alpha%Cu==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),i=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),s=this.options.strokeUniform?ap(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return ap(i)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(i))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],i=new P(uo.getOrthogonalRotationFactor(this.bisector),uo.getOrthogonalRotationFactor(new P(this.bisector.y,this.bisector.x)));return[new P(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i),new P(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i)].forEach(s=>{jv(s,e,t)&&r.push(this.A.add(s))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:i,skewY:s,scaleX:o,scaleY:a,strokeUniform:l}=this.options,c=new P(Math.tan(De(i)),Math.tan(De(s))),u=this.strokeProjectionMagnitude,h=l?u/a/Math.sqrt(1/a**2+1/o**2*c.y**2):u/Math.sqrt(1+c.y**2),d=new P(Math.sqrt(Math.max(u**2-h**2,0)),h),f=l?u/Math.sqrt(1+c.x**2*(1/a)**2/(1/o+1/o*c.x*c.y)**2):u/Math.sqrt(1+c.x**2/(1+c.x*c.y)**2),g=new P(f,Math.sqrt(Math.max(u**2-f**2,0)));return[g,g.scalarMultiply(-1),d,d.scalarMultiply(-1)].map(p=>this.applySkew(l?p.multiply(this.strokeUniformScalar):p)).forEach(p=>{jv(p,e,t)&&r.push(this.applySkew(this.A).add(p))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%Cu==0,r=this.applySkew(this.A),i=e[t?0:2].subtract(r),s=e[t?1:0].subtract(r),o=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=Ra(i,o)>0,l=a?i:s,c=a?s:i;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,c)):e.push(...this.projectRoundNoSkew(l,c)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Bv extends S_{constructor(e,t,r){super(r),this.A=new P(e),this.T=new P(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t);return this.scaleUnitVector(g_(i),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new P(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new uo(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new P(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(Qg(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),i=this.A.add(r);e.push(i.add(t),i.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const ND=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(n.length===0)return r;const i=n.reduce((s,o)=>(s[s.length-1].eq(o)||s.push(new P(o)),s),[new P(n[0])]);if(i.length===1)t=!0;else if(!t){const s=i[0],o=((a,l)=>{for(let c=a.length-1;c>=0;c--)if(l(a[c],c,a))return c;return-1})(i,a=>!a.eq(s));i.splice(o+1)}return i.forEach((s,o,a)=>{let l,c;o===0?(c=a[1],l=t?s:a[a.length-1]):o===a.length-1?(l=a[o-1],c=t?s:a[0]):(l=a[o-1],c=a[o+1]),t&&a.length===1?r.push(...new Bv(s,s,e).project()):!t||o!==0&&o!==a.length-1?r.push(...new uo(s,l,c,e).project()):r.push(...new Bv(s,o===0?c:l,e).project())}),r},tm=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(r=>{e[t][r]=E({},n[t][r])})}),e},WD=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let oa;const nm=n=>{if(oa||oa||(oa="Intl"in wh()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),oa){const e=oa.segment(n);return Array.from(e).map(t=>{let{segment:r}=t;return r})}return ID(n)},ID=n=>{const e=[];for(let t,r=0;r<n.length;r++)(t=FD(n,r))!==!1&&e.push(t);return e},FD=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const i=n.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},rm=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textDecorationThickness!==e.textDecorationThickness||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},BD=(n,e)=>{const t=e.split(`
`),r=[];let i=-1,s={};n=tm(n);for(let o=0;o<t.length;o++){const a=nm(t[o]);if(n[o])for(let l=0;l<a.length;l++){i++;const c=n[o][l];c&&Object.keys(c).length>0&&(rm(s,c,!0)?r.push({start:i,end:i+1,style:c}):r[r.length-1].end++),s=c||{}}else i+=a.length,s={}}return r},zD=(n,e)=>{if(!Array.isArray(n))return tm(n);const t=e.split(Ug),r={};let i=-1,s=0;for(let o=0;o<t.length;o++){const a=nm(t[o]);for(let l=0;l<a.length;l++)i++,n[s]&&n[s].start<=i&&i<n[s].end&&(r[o]=r[o]||{},r[o][l]=E({},n[s].style),i===n[s].end-1&&s++)}return r},Ei=["display","transform",He,"fill-opacity","fill-rule","opacity",Pt,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function zv(n,e){const t=n.nodeName,r=n.getAttribute("class"),i=n.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+t,"i"),e=e.replace(o,""),i&&e.length&&(o=new RegExp("#"+i+s,"i"),e=e.replace(o,"")),r&&e.length){const a=r.split(" ");for(let l=a.length;l--;)o=new RegExp("\\."+a[l]+s,"i"),e=e.replace(o,"")}return e.length===0}function $D(n,e){let t=!0;const r=zv(n,e.pop());return r&&e.length&&(t=function(i,s){let o,a=!0;for(;i.parentElement&&i.parentElement.nodeType===1&&s.length;)a&&(o=s.pop()),a=zv(i=i.parentElement,o);return s.length===0}(n,e)),r&&t&&e.length===0}const HD=n=>{var e;return(e=tD[n])!==null&&e!==void 0?e:n},UD=new RegExp("(".concat(En,")"),"gi"),VD=n=>n.replace(UD," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var $v,Hv,Uv,Vv,Gv,Yv,Xv;const dt="(".concat(En,")"),GD=String.raw($v||($v=nr(["(skewX)(",")"],["(skewX)\\(","\\)"])),dt),YD=String.raw(Hv||(Hv=nr(["(skewY)(",")"],["(skewY)\\(","\\)"])),dt),XD=String.raw(Uv||(Uv=nr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),dt,dt,dt),qD=String.raw(Vv||(Vv=nr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),dt,dt),KD=String.raw(Gv||(Gv=nr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),dt,dt),JD=String.raw(Yv||(Yv=nr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),dt,dt,dt,dt,dt,dt),im="(?:".concat(JD,"|").concat(KD,"|").concat(XD,"|").concat(qD,"|").concat(GD,"|").concat(YD,")"),QD="(?:".concat(im,"*)"),ZD=String.raw(Xv||(Xv=nr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),QD),eM=new RegExp(ZD),tM=new RegExp(im),nM=new RegExp(im,"g");function cp(n){const e=[];if(!(n=VD(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!eM.test(n))return[...pt];for(const t of n.matchAll(nM)){const r=tM.exec(t[0]);if(!r)continue;let i=pt;const s=r.filter(g=>!!g),[,o,...a]=s,[l,c,u,h,d,f]=a.map(g=>parseFloat(g));switch(o){case"translate":i=yl(l,c);break;case Vg:i=zo({angle:l},{x:c,y:u});break;case bh:i=Xg(l,c);break;case Fo:i=JS(l);break;case Bo:i=QS(l);break;case"matrix":i=[l,c,u,h,d,f]}e.push(i)}return Yg(e)}function rM(n,e,t,r){const i=Array.isArray(e);let s,o=e;if(n!==He&&n!==Pt||e!==Rt){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")o=e===Rt?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")o=t&&t.transformMatrix?Xe(t.transformMatrix,cp(e)):cp(e);else if(n==="visible")o=e!==Rt&&e!=="hidden",t&&t.visible===!1&&(o=!1);else if(n==="opacity")o=parseFloat(e),t&&t.opacity!==void 0&&(o*=t.opacity);else if(n==="textAnchor")o=e==="start"?ce:e==="end"?Oe:ne;else if(n==="charSpacing"||n===us)s=co(e,r)/r*1e3;else if(n==="paintFirst"){const a=e.indexOf(He),l=e.indexOf(Pt);o=He,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(o=Pt)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";s=i?e.map(co):co(e,r)}}else o="";return!i&&isNaN(s)?o:s}function iM(n,e){const t=n.match(eD);if(!t)return;const r=t[1],i=t[3],s=t[4],o=t[5],a=t[6];r&&(e.fontStyle=r),i&&(e.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),s&&(e.fontSize=co(s)),a&&(e.fontFamily=a),o&&(e.lineHeight=o==="normal"?1:o)}function sM(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[r,i]=t.split(":");e[r.trim().toLowerCase()]=i.trim()})}function oM(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?sM(t,e):function(r,i){Object.entries(r).forEach(s=>{let[o,a]=s;a!==void 0&&(i[o.toLowerCase()]=a)})}(t,e)),e}const aM={stroke:"strokeOpacity",fill:"fillOpacity"};function Ar(n,e,t){if(!n)return{};let r,i={},s=Hg;n.parentNode&&Mv.test(n.parentNode.nodeName)&&(i=Ar(n.parentElement,e,t),i.fontSize&&(r=s=co(i.fontSize)));const o=E(E(E({},e.reduce((c,u)=>{const h=n.getAttribute(u);return h&&(c[u]=h),c},{})),function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h={};for(const d in u)$D(c,d.split(" "))&&(h=E(E({},h),u[d]));return h}(n,t)),oM(n));o[Rd]&&n.setAttribute(Rd,o[Rd]),o[Ed]&&(r=co(o[Ed],s),o[Ed]="".concat(r));const a={};for(const c in o){const u=HD(c),h=rM(u,o[c],i,r);a[u]=h}a&&a.font&&iM(a.font,a);const l=E(E({},i),a);return Mv.test(n.nodeName)?l:function(c){const u=st.getDefaults();return Object.entries(aM).forEach(h=>{let[d,f]=h;if(c[f]===void 0||c[d]==="")return;if(c[d]===void 0){if(!u[d])return;c[d]=u[d]}if(c[d].indexOf("url(")===0)return;const g=new le(c[d]);c[d]=g.setAlpha(fe(g.getAlpha()*c[f],2)).toRgba()}),c}(l)}const lM=["left","top","width","height","visible"],__=["rx","ry"];class $n extends st{static getDefaults(){return E(E({},super.getDefaults()),$n.ownDefaults)}constructor(e){super(),Object.assign(this,$n.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,i=-t/2,s=-r/2,o=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,r/2):0,l=o!==0||a!==0;e.beginPath(),e.moveTo(i+o,s),e.lineTo(i+t-o,s),l&&e.bezierCurveTo(i+t-Hr*o,s,i+t,s+Hr*a,i+t,s+a),e.lineTo(i+t,s+r-a),l&&e.bezierCurveTo(i+t,s+r-Hr*a,i+t-Hr*o,s+r,i+t-o,s+r),e.lineTo(i+o,s+r),l&&e.bezierCurveTo(i+Hr*o,s+r,i,s+r-Hr*a,i,s+r-a),e.lineTo(i,s+a),l&&e.bezierCurveTo(i,s+Hr*a,i+Hr*o,s,i+o,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...__,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:i}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(i,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const i=Ar(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:o=0,width:a=0,height:l=0,visible:c=!0}=i,u=Se(i,lM);return new this(E(E(E({},t),u),{},{left:s,top:o,width:a,height:l,visible:!!(c&&a&&l)}))}}k($n,"type","Rect"),k($n,"cacheProperties",[...Or,...__]),k($n,"ownDefaults",{rx:0,ry:0}),k($n,"ATTRIBUTE_NAMES",[...Ei,"x","y","rx","ry","width","height"]),U.setClass($n),U.setSVGClass($n);const pr="initialization",Du="added",sm="removed",Mu="imperative",C_=(n,e)=>{const{strokeUniform:t,strokeWidth:r,width:i,height:s,group:o}=e,a=o&&o!==n?Ch(o.calcTransformMatrix(),n.calcTransformMatrix()):null,l=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),c=!e.isStrokeAccountedForInDimensions(),u=t&&c?Y2(new P(r,r),void 0,n.calcTransformMatrix()):Gg,h=!t&&c?r:0,d=Kg(i+h,s+h,Yg([a,e.calcOwnMatrix()],!0)).add(u).scalarDivide(2);return[l.subtract(d),l.add(d)]};class Eh{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:i}=e;return t===pr||t===Mu||!!r&&i!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==pr&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:i}=t;if(r===Mu&&t.overrides)return t.overrides;if(e.length===0)return;const{left:s,top:o,width:a,height:l}=yr(e.map(h=>C_(i,h)).reduce((h,d)=>h.concat(d),[])),c=new P(a,l),u=new P(s,o).add(c.scalarDivide(2));if(r===pr){const h=this.getInitialSize(t,{size:c,center:u});return{center:u,relativeCorrection:new P(0,0),size:h}}return{center:u.transform(i.calcOwnMatrix()),size:c}}}k(Eh,"type","strategy");class up extends Eh{shouldPerformLayout(e){return!0}}k(up,"type","fit-content"),U.setClass(up);const cM=["strategy"],uM=["target","strategy","bubbles","prevStrategy"],T_="layoutManager";class il{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new up;k(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=E(E({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[ku,$S,Za,HS,xh,US,Tu,M2,j2].map(i=>e.on(i,s=>this.performLayout(i===ku?{type:"object_modified",trigger:i,e:s,target:r}:{type:"object_modifying",trigger:i,e:s,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:i}=t;if(r===pr||r===Du?this.subscribeTargets(e):r===sm&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),i&&i.fire("object:layout:before",{target:t,context:e}),r===Mu&&e.deep){const s=Se(e,cM);t.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(E(E({},s),{},{bubbles:!1,target:o})))}}getLayoutResult(e){const{target:t,strategy:r,type:i}=e,s=r.calcLayoutResult(e,t.getObjects());if(!s)return;const o=i===pr?new P:t.getRelativeCenterPoint(),{center:a,correction:l=new P,relativeCorrection:c=new P}=s,u=o.subtract(a).add(l).transform(i===pr?pt:kn(t.calcOwnMatrix()),!0).add(c);return{result:s,prevCenter:o,nextCenter:a,offset:u}}commitLayout(e,t){const{target:r}=e,{result:{size:i},nextCenter:s}=t;var o,a;r.set({width:i.x,height:i.y}),this.layoutObjects(e,t),e.type===pr?r.set({left:(o=e.x)!==null&&o!==void 0?o:s.x+i.x*Ne(r.originX),top:(a=e.y)!==null&&a!==void 0?a:s.y+i.y*Ne(r.originY)}):(r.setPositionByOrigin(s,ne,ne),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(i=>{i.group===r&&this.layoutObject(e,t,i)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:i}=t;r.set({left:r.left+i.x,top:r.top+i.y})}onAfterLayout(e,t){const{target:r,strategy:i,bubbles:s,prevStrategy:o}=e,a=Se(e,uM),{canvas:l}=r;r.fire("layout:after",{context:e,result:t}),l&&l.fire("object:layout:after",{context:e,result:t,target:r});const c=r.parent;s&&c!=null&&c.layoutManager&&((a.path||(a.path=[])).push(r),c.layoutManager.performLayout(E(E({},a),{},{target:c}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(r=>r())),e.clear()}toObject(){return{type:T_,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}U.setClass(il,T_);const hM=["type","objects","layoutManager"];class dM extends il{performLayout(){}}class rs extends VS(st){static getDefaults(){return E(E({},super.getDefaults()),rs.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),k(this,"_activeObjects",[]),k(this,"__objectSelectionTracker",void 0),k(this,"__objectSelectionDisposer",void 0),Object.assign(this,rs.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(i=>{this.enterGroup(i,!1)}),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new il,this.layoutManager.performLayout({type:pr,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(Si("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(Si("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,i)=>this.canEnterGroup(t)&&i.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const i=this._filterObjectsBeforeEnteringGroup(t),s=super.add(...i);return this._onAfterObjectsChange(Du,i),s}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];const s=this._filterObjectsBeforeEnteringGroup(r),o=super.insertAt(e,...s);return this._onAfterObjectsChange(Du,s),o}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(sm,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach(i=>{i._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const i=this._activeObjects;if(e)i.push(r),this._set("dirty",!0);else if(i.length>0){const s=i.indexOf(r);s>-1&&(i.splice(s,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Pu(e,Xe(kn(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Pu(e,Xe(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=st.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let s=0;s<this._objects.length;s++){var i;const o=this._objects[s];(i=this.canvas)!==null&&i!==void 0&&i.preserveObjectStacking&&o.group!==this?(e.save(),e.transform(...kn(this.calcTransformMatrix())),o.render(e),e.restore()):o.group===this&&o.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(E({target:this,type:Mu},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(i){return!i.excludeFromExport}).map(function(i){const s=i.includeDefaultValues;i.includeDefaultValues=r;const o=i[e||"toObject"](t);return i.includeDefaultValues=s,o})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return E(E(E({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=$n.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const i=t.join("");return e?e(i):i}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let i=0;i<this._objects.length;i++)t.push("		",this._objects[i].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let i=0;i<this._objects.length;i++)t.push("	",this._objects[i].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:i=[],layoutManager:s}=e,o=Se(e,hM);return Promise.all([el(i,t),_h(o,t)]).then(a=>{let[l,c]=a;const u=new this(l,E(E(E({},o),c),{},{layoutManager:new dM}));if(s){const h=U.getClass(s.type),d=U.getClass(s.strategy);u.layoutManager=new h(new d)}else u.layoutManager=new il;return u.layoutManager.subscribeTargets({type:pr,target:u,targets:u.getObjects()}),u.setCoords(),u})}}k(rs,"type","Group"),k(rs,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),U.setClass(rs);const fM=(n,e)=>Math.min(e.width/n.width,e.height/n.height),pM=(n,e)=>Math.max(e.width/n.width,e.height/n.height),hp="\\s*,?\\s*",aa="".concat(hp,"(").concat(En,")"),gM="".concat(aa).concat(aa).concat(aa).concat(hp,"([01])").concat(hp,"([01])").concat(aa).concat(aa),mM={m:"l",M:"L"},yM=(n,e,t,r,i,s,o,a,l,c,u)=>{const h=Cr(n),d=Tr(n),f=Cr(e),g=Tr(e),p=t*i*f-r*s*g+o,y=r*i*f+t*s*g+a;return["C",c+l*(-t*i*d-r*s*h),u+l*(-r*i*d+t*s*h),p+l*(t*i*g+r*s*f),y+l*(r*i*g-t*s*f),p,y]},qv=(n,e,t,r)=>{const i=Math.atan2(e,n),s=Math.atan2(r,t);return s>=i?s-i:2*Math.PI-(i-s)};function Kv(n,e,t,r,i,s,o,a){let l;if(oe.cachesBoundsOfCurve&&(l=[...arguments].join(),Ta.boundsOfCurveCache[l]))return Ta.boundsOfCurveCache[l];const c=Math.sqrt,u=Math.abs,h=[],d=[[0,0],[0,0]];let f=6*n-12*t+6*i,g=-3*n+9*t-9*i+3*o,p=3*t-3*n;for(let b=0;b<2;++b){if(b>0&&(f=6*e-12*r+6*s,g=-3*e+9*r-9*s+3*a,p=3*r-3*e),u(g)<1e-12){if(u(f)<1e-12)continue;const A=-p/f;0<A&&A<1&&h.push(A);continue}const S=f*f-4*p*g;if(S<0)continue;const _=c(S),T=(-f+_)/(2*g);0<T&&T<1&&h.push(T);const R=(-f-_)/(2*g);0<R&&R<1&&h.push(R)}let y=h.length;const v=y,m=k_(n,e,t,r,i,s,o,a);for(;y--;){const{x:b,y:S}=m(h[y]);d[0][y]=b,d[1][y]=S}d[0][v]=n,d[1][v]=e,d[0][v+1]=o,d[1][v+1]=a;const w=[new P(Math.min(...d[0]),Math.min(...d[1])),new P(Math.max(...d[0]),Math.max(...d[1]))];return oe.cachesBoundsOfCurve&&(Ta.boundsOfCurveCache[l]=w),w}const vM=(n,e,t)=>{let[r,i,s,o,a,l,c,u]=t;const h=((d,f,g,p,y,v,m)=>{if(g===0||p===0)return[];let w=0,b=0,S=0;const _=Math.PI,T=m*$g,R=Tr(T),A=Cr(T),M=.5*(-A*d-R*f),B=.5*(-A*f+R*d),L=g**2,z=p**2,N=B**2,G=M**2,$=L*z-L*N-z*G;let H=Math.abs(g),O=Math.abs(p);if($<0){const Qe=Math.sqrt(1-$/(L*z));H*=Qe,O*=Qe}else S=(y===v?-1:1)*Math.sqrt($/(L*N+z*G));const D=S*H*B/O,I=-S*O*M/H,q=A*D-R*I+.5*d,Y=R*D+A*I+.5*f;let Q=qv(1,0,(M-D)/H,(B-I)/O),K=qv((M-D)/H,(B-I)/O,(-M-D)/H,(-B-I)/O);v===0&&K>0?K-=2*_:v===1&&K<0&&(K+=2*_);const ge=Math.ceil(Math.abs(K/_*2)),we=[],ie=K/ge,Dr=8/3*Math.sin(ie/4)*Math.sin(ie/4)/Math.sin(ie/2);let Gt=Q+ie;for(let Qe=0;Qe<ge;Qe++)we[Qe]=yM(Q,Gt,A,R,H,O,q,Y,Dr,w,b),w=we[Qe][5],b=we[Qe][6],Q=Gt,Gt+=ie;return we})(c-n,u-e,i,s,a,l,o);for(let d=0,f=h.length;d<f;d++)h[d][1]+=n,h[d][2]+=e,h[d][3]+=n,h[d][4]+=e,h[d][5]+=n,h[d][6]+=e;return h},wM=n=>{let e=0,t=0,r=0,i=0;const s=[];let o,a=0,l=0;for(const c of n){const u=[...c];let h;switch(u[0]){case"l":u[1]+=e,u[2]+=t;case"L":e=u[1],t=u[2],h=["L",e,t];break;case"h":u[1]+=e;case"H":e=u[1],h=["L",e,t];break;case"v":u[1]+=t;case"V":t=u[1],h=["L",e,t];break;case"m":u[1]+=e,u[2]+=t;case"M":e=u[1],t=u[2],r=u[1],i=u[2],h=["M",e,t];break;case"c":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t,u[5]+=e,u[6]+=t;case"C":a=u[3],l=u[4],e=u[5],t=u[6],h=["C",u[1],u[2],a,l,e,t];break;case"s":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"S":o==="C"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[3],t=u[4],h=["C",a,l,u[1],u[2],e,t],a=h[3],l=h[4];break;case"q":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"Q":a=u[1],l=u[2],e=u[3],t=u[4],h=["Q",a,l,e,t];break;case"t":u[1]+=e,u[2]+=t;case"T":o==="Q"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[1],t=u[2],h=["Q",a,l,e,t];break;case"a":u[6]+=e,u[7]+=t;case"A":vM(e,t,u).forEach(d=>s.push(d)),e=u[6],t=u[7];break;case"z":case"Z":e=r,t=i,h=["Z"]}h?(s.push(h),o=h[0]):o=""}return s},ju=(n,e,t,r)=>Math.sqrt((t-n)**2+(r-e)**2),k_=(n,e,t,r,i,s,o,a)=>l=>{const c=l**3,u=(f=>3*f**2*(1-f))(l),h=(f=>3*f*(1-f)**2)(l),d=(f=>(1-f)**3)(l);return new P(o*c+i*u+t*h+n*d,a*c+s*u+r*h+e*d)},E_=n=>n**2,R_=n=>2*n*(1-n),P_=n=>(1-n)**2,xM=(n,e,t,r,i,s,o,a)=>l=>{const c=E_(l),u=R_(l),h=P_(l),d=3*(h*(t-n)+u*(i-t)+c*(o-i)),f=3*(h*(r-e)+u*(s-r)+c*(a-s));return Math.atan2(f,d)},bM=(n,e,t,r,i,s)=>o=>{const a=E_(o),l=R_(o),c=P_(o);return new P(i*a+t*l+n*c,s*a+r*l+e*c)},SM=(n,e,t,r,i,s)=>o=>{const a=1-o,l=2*(a*(t-n)+o*(i-t)),c=2*(a*(r-e)+o*(s-r));return Math.atan2(c,l)},Jv=(n,e,t)=>{let r=new P(e,t),i=0;for(let s=1;s<=100;s+=1){const o=n(s/100);i+=ju(r.x,r.y,o.x,o.y),r=o}return i},_M=(n,e)=>{let t,r=0,i=0,s={x:n.x,y:n.y},o=E({},s),a=.01,l=0;const c=n.iterator,u=n.angleFinder;for(;i<e&&a>1e-4;)o=c(r),l=r,t=ju(s.x,s.y,o.x,o.y),t+i>e?(r-=a,a/=2):(s=o,r+=a,i+=t);return E(E({},o),{},{angle:u(l)})},O_=n=>{let e,t,r=0,i=0,s=0,o=0,a=0;const l=[];for(const c of n){const u={x:i,y:s,command:c[0],length:0};switch(c[0]){case"M":t=u,t.x=o=i=c[1],t.y=a=s=c[2];break;case"L":t=u,t.length=ju(i,s,c[1],c[2]),i=c[1],s=c[2];break;case"C":e=k_(i,s,c[1],c[2],c[3],c[4],c[5],c[6]),t=u,t.iterator=e,t.angleFinder=xM(i,s,c[1],c[2],c[3],c[4],c[5],c[6]),t.length=Jv(e,i,s),i=c[5],s=c[6];break;case"Q":e=bM(i,s,c[1],c[2],c[3],c[4]),t=u,t.iterator=e,t.angleFinder=SM(i,s,c[1],c[2],c[3],c[4]),t.length=Jv(e,i,s),i=c[3],s=c[4];break;case"Z":t=u,t.destX=o,t.destY=a,t.length=ju(i,s,o,a),i=o,s=a}r+=t.length,l.push(t)}return l.push({length:r,x:i,y:s}),l},CM=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O_(n),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const i=t[r],s=e/i.length,o=n[r];switch(i.command){case"M":return{x:i.x,y:i.y,angle:0};case"Z":return E(E({},new P(i.x,i.y).lerp(new P(i.destX,i.destY),s)),{},{angle:Math.atan2(i.destY-i.y,i.destX-i.x)});case"L":return E(E({},new P(i.x,i.y).lerp(new P(o[1],o[2]),s)),{},{angle:Math.atan2(o[2]-i.y,o[1]-i.x)});case"C":case"Q":return _M(i,e)}},TM=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Qv=new RegExp(gM,"g"),kM=new RegExp(En,"gi"),EM={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},RM=n=>{var e;const t=[],r=(e=n.match(TM))!==null&&e!==void 0?e:[];for(const i of r){const s=i[0];if(s==="z"||s==="Z"){t.push([s]);continue}const o=EM[s.toLowerCase()];let a=[];if(s==="a"||s==="A"){Qv.lastIndex=0;for(let l=null;l=Qv.exec(i);)a.push(...l.slice(1))}else a=i.match(kM)||[];for(let l=0;l<a.length;l+=o){const c=new Array(o),u=mM[s];c[0]=l>0&&u?u:s;for(let h=0;h<o;h++)c[h+1]=parseFloat(a[l+h]);t.push(c)}}return t},PM=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=new P(n[0]),r=new P(n[1]),i=1,s=0;const o=[],a=n.length,l=a>2;let c;for(l&&(i=n[2].x<r.x?-1:n[2].x===r.x?0:1,s=n[2].y<r.y?-1:n[2].y===r.y?0:1),o.push(["M",t.x-i*e,t.y-s*e]),c=1;c<a;c++){if(!t.eq(r)){const u=t.midPointFrom(r);o.push(["Q",t.x,t.y,u.x,u.y])}t=n[c],c+1<n.length&&(r=n[c+1])}return l&&(i=t.x>n[c-2].x?1:t.x===n[c-2].x?0:-1,s=t.y>n[c-2].y?1:t.y===n[c-2].y?0:-1),o.push(["L",t.x+i*e,t.y+s*e]),o},A_=(n,e)=>n.map(t=>t.map((r,i)=>i===0||e===void 0?r:fe(r,e)).join(" ")).join(" ");function dp(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(r=>{let[i,s]=r;return t.setProperty(i,s)}))}class OM extends n_{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),k(this,"upper",void 0),k(this,"container",void 0);const{el:i}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(i,{allowTouchScrolling:t}),this.applyCanvasStyle(s,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(r),i.parentNode&&i.parentNode.replaceChild(o,i),o.append(i,s),this.container=o}createUpperCanvas(){const{el:e}=this.lower,t=kr();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Io().createElement("div");return e.setAttribute("data-fabric","wrapper"),dp(e,{position:"relative"}),_v(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:i}=t;dp(e,E(E({},r),{},{"touch-action":i?"manipulation":Rt})),_v(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:i}=this.upper;t_(r,i,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),ip(this.upper.el,e),ip(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:i}=this.upper;super.cleanupDOM(e),t.removeChild(i),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),Qn().dispose(this.upper.el),delete this.upper,delete this.container}}class Rh extends vl{constructor(){super(...arguments),k(this,"targets",[]),k(this,"_hoveredTargets",[]),k(this,"_objectsToRender",void 0),k(this,"_currentTransform",null),k(this,"_groupSelector",null),k(this,"contextTopDirty",!1)}static getDefaults(){return E(E({},super.getDefaults()),Rh.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new OM(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const i=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-t+i,-r+i),s.transform(...this.viewportTransform);const o=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=o,s.restore();const a=Math.round(i*this.getRetinaScaling());return jD(s,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),i=this._activeObject;return!!(!t||t&&i&&r.length>1&&r.indexOf(t)===-1&&i!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&i&&i!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let i;return t===bh||t===At||t===on||t===Za?i=this.centeredScaling||e.centeredScaling:t===Vg&&(i=this.centeredRotation||e.centeredRotation),i?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=Oe:["mr","tr","br"].includes(t)&&(r.x=ce),["tl","mt","tr"].includes(t)?r.y=rp:["bl","mb","br"].includes(t)&&(r.y=Et)),r}_setupCurrentTransform(e,t,r){var i;const s=t.group?lo(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:o="",control:a}=t.getActiveControl()||{},l=r&&a?(i=a.getActionHandler(e,t,a))===null||i===void 0?void 0:i.bind(a):K2,c=((f,g,p,y)=>{if(!g||!f)return"drag";const v=y.controls[g];return v.getActionName(p,v,y)})(r,o,e,t),u=e[this.centeredKey],h=this._shouldCenterTransform(t,c,u)?{x:ne,y:ne}:this._getOriginFromCorner(t,o),d={target:t,action:c,actionHandler:l,actionPerformed:!1,corner:o,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:s.x-t.left,offsetY:s.y-t.top,originX:h.x,originY:h.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:De(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:u,original:E(E({},r_(t)),{},{originX:h.x,originY:h.y})};this._currentTransform=d,this.fire("before:transform",{e,transform:d})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:i,deltaY:s}=this._groupSelector,o=new P(t,r).transform(this.viewportTransform),a=new P(t+i,r+s).transform(this.viewportTransform),l=this.selectionLineWidth/2;let c=Math.min(o.x,a.x),u=Math.min(o.y,a.y),h=Math.max(o.x,a.x),d=Math.max(o.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(c,u,h-c,d-u)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,c+=l,u+=l,h-=l,d-=l,st.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(c,u,h-c,d-u))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,i=this.getActiveObjects();if(this.targets=[],r&&i.length>=1){if(r.findControl(t,sp(e))||i.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&o&&o!==r?(this.targets=s,r):o}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const i=this.getZoom(),s=e.padding/i;if(s){const[o,a,l,c]=r,u=Math.atan2(a.y-o.y,a.x-o.x),h=Cr(u)*s,d=Tr(u)*s,f=h+d,g=h-d;r=[new P(o.x-g,o.y-f),new P(a.x+f,a.y-g),new P(l.x+g,l.y+f),new P(c.x-f,c.y+g)]}return _e.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,lo(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const i=e[r];if(this._checkTarget(i,t)){if(Hc(i)&&i.subTargetCheck){const s=this._searchPossibleTargets(i._objects,t);s&&this.targets.push(s)}return i}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&Hc(r)&&r.interactive&&this.targets[0]){const i=this.targets;for(let s=i.length-1;s>0;s--){const o=i[s];if(!Hc(o)||!o.interactive)return o}return i[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,i=r.getBoundingClientRect();let s=H2(e),o=i.width||0,a=i.height||0;o&&a||(Et in i&&rp in i&&(a=Math.abs(i.top-i.bottom)),Oe in i&&ce in i&&(o=Math.abs(i.right-i.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,t||(s=lo(s,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(s.x/=l,s.y/=l);const c=o===0||a===0?new P(1,1):new P(r.width/o,r.height/a);return s.multiply(c)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=kr(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Wi(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,i=!1;const s=this.getActiveObjects(),o=[],a=[];e.forEach(l=>{s.includes(l)||(r=!0,l.fire("deselected",{e:t,target:l}),a.push(l))}),s.forEach(l=>{e.includes(l)||(r=!0,l.fire("selected",{e:t,target:l}),o.push(l))}),e.length>0&&s.length>0?(i=!0,r&&this.fire("selection:updated",{e:t,selected:o,deselected:a})):s.length>0?(i=!0,this.fire("selection:created",{e:t,selected:o})):e.length>0&&(i=!0,this.fire("selection:cleared",{e:t,deselected:a})),i&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),i=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),i}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Wi(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),Wi(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const i=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),i}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,i={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",i),r.fire(ku,i))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Wi(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const i=this._realizeGroupTransformOnObject(e),s=super._toObject(e,t,r);return e.set(i),s}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Wi(t)&&this._activeObject===t){const r=$o(e,["angle","flipX","flipY",ce,At,on,Fo,Bo,Et]);return V2(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const i=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(i)}}k(Rh,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class AM{constructor(e){k(this,"targets",[]),k(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:i}=e.getActiveObject()||{};i&&i.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),Ms(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const DM=["target","oldTarget","fireCanvas","e"],jt={passive:!1},ks=(n,e)=>{const t=n.getViewportPoint(e),r=n.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},Ur=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.addEventListener(...t)},Xt=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.removeEventListener(...t)},MM={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class fp extends Rh{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),k(this,"_isClick",void 0),k(this,"textEditingManager",new AM(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(Ur,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,i=this._getEventPrefix();e(e_(r),"resize",this._onResize),e(r,i+"down",this._onMouseDown),e(r,"".concat(i,"move"),this._onMouseMove,jt),e(r,"".concat(i,"out"),this._onMouseOut),e(r,"".concat(i,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"click",this._onClick),e(r,"dblclick",this._onClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,jt)}removeListeners(){this.addOrRemove(Xt,"remove");const e=this._getEventPrefix(),t=Tn(this.upperCanvasEl);Xt(t,"".concat(e,"up"),this._onMouseUp),Xt(t,"touchend",this._onTouchEnd,jt),Xt(t,"".concat(e,"move"),this._onMouseMove,jt),Xt(t,"touchmove",this._onMouseMove,jt),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=E({e},ks(this,e));this.fire("mouse:out",E(E({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",E({},r)),this._hoveredTargets.forEach(i=>{this.fire("mouse:out",E(E({},r),{},{target:i})),i&&i.fire("mouseout",E({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",E({e},ks(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void Ur(this.upperCanvasEl,"drag",this._onDragProgress)}Cv(e)}_renderDragEffects(e,t,r){let i=!1;const s=this._dropTarget;s&&s!==t&&s!==r&&(s.clearContextTop(),i=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),t&&(o.save(),t.transform(o),t.renderDragSourceEffect(e),o.restore(),i=!0),r&&(o.save(),r.transform(o),r.renderDropTargetEffect(e),o.restore(),i=!0),o.restore(),i&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Rt,r=t?this._activeObject:void 0,i={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};Xt(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",i),this._dragSource&&this._dragSource.fire("dragend",i),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:i}=this.findDragTargets(e),s=this._dragSource,o={e,target:r,subTargets:i,dragSource:s,canDrop:!1,dropTarget:void 0};let a;this.fire(t,o),this._fireEnterLeaveEvents(r,o),r&&(r.canDrop(e)&&(a=r),r.fire(t,o));for(let l=0;l<i.length;l++){const c=i[l];c.canDrop(e)&&(a=c),c.fire(t,o)}this._renderDragEffects(e,s,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),i={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",i),this._fireEnterLeaveEvents(t,i)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),i=this._basicEventHandler("drop:before",E({e,target:t,subTargets:r,dragSource:this._dragSource},ks(this,e)));i.didDrop=!1,i.dropTarget=void 0,this._basicEventHandler("drop",i),this.fire("drop:after",i)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],i=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&Cv(e),this._basicEventHandler("contextmenu",i),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),t==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),t==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const i=this.upperCanvasEl,s=this._getEventPrefix(),o=Tn(i);Ur(o,"touchend",this._onTouchEnd,jt),t&&Ur(o,"touchmove",this._onMouseMove,jt),Xt(i,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();Xt(t,"".concat(r,"move"),this._onMouseMove,jt);const i=Tn(t);Ur(i,"".concat(r,"up"),this._onMouseUp),Ur(i,"".concat(r,"move"),this._onMouseMove,jt)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=Tn(this.upperCanvasEl);Xt(r,"touchend",this._onTouchEnd,jt),Xt(r,"touchmove",this._onMouseMove,jt),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Ur(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const i=Tn(this.upperCanvasEl);Xt(i,"".concat(r,"up"),this._onMouseUp),Xt(i,"".concat(r,"move"),this._onMouseMove,jt),Ur(t,"".concat(r,"move"),this._onMouseMove,jt)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,i=this._isClick,s=this._target,{button:o}=e;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,l,c=!1;if(r&&(this._finalizeCurrentTransform(e),c=r.actionPerformed),!i){const u=s===this._activeObject;this.handleSelection(e),c||(c=this._shouldRender(s)||!u&&s===this._activeObject)}if(s){const u=s.findControl(this.getViewportPoint(e),sp(e)),{key:h,control:d}=u||{};if(l=h,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,e),c=!0;else if(d){const f=d.getMouseUpHandler(e,s,d);f&&(a=this.getScenePoint(e),f.call(d,e,r,a.x,a.y))}s.isMoving=!1}if(r&&(r.target!==s||r.corner!==l)){const u=r.target&&r.target.controls[r.corner],h=u&&u.getMouseUpHandler(e,r.target,u);a=a||this.getScenePoint(e),h&&h.call(u,e,r,a.x,a.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),c?this.requestRenderAll():i||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:i=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let s=0;s<i.length;s++)i[s]!==r&&i[s].fire(e,t);return t}_handleEvent(e,t,r){const i=this._target,s=this.targets||[],o=E(E(E({e,target:i,subTargets:s},ks(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),t==="down:before"||t==="down"?r:{});this.fire("mouse:".concat(t),o),i&&i.fire("mouse".concat(t),o);for(let a=0;a<s.length;a++)s[a]!==i&&s[a].fire("mouse".concat(t),o)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,r=!!t&&t===this._activeObject;const{button:i}=e;if(i)return(this.fireMiddleClick&&i===1||this.fireRightClick&&i===2)&&this._handleEvent(e,"down",{alreadySelected:r}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let s=this._shouldRender(t),o=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,o=!0,s=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const a=this.getScenePoint(e);this._groupSelector={x:a.x,y:a.y,deltaY:0,deltaX:0}}if(r=!!t&&t===this._activeObject,t){t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const a=t.findControl(this.getViewportPoint(e),sp(e));if(t===this._activeObject&&(a||!o)){this._setupCurrentTransform(e,t,r);const l=a?a.control:void 0,c=this.getScenePoint(e),u=l&&l.getMouseDownHandler(e,t,l);u&&u.call(l,e,this._currentTransform,c.x,c.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:r}),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=lo(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,i=this._hoveredTargets,s=this.targets,o=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("mouse",{e,target:s[a],oldTarget:i[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,i=this._hoveredTargets,s=this.targets,o=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("drag",E(E({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",E(E({},t),{},{target:s[a],oldTarget:i[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:i,fireCanvas:s,e:o}=t,a=Se(t,DM);const{targetIn:l,targetOut:c,canvasIn:u,canvasOut:h}=MM[e],d=i!==r;if(i&&d){const f=E(E({},a),{},{e:o,target:i,nextTarget:r},ks(this,o));s&&this.fire(h,f),i.fire(c,f)}if(r&&d){const f=E(E({},a),{},{e:o,target:r,previousTarget:i},ks(this,o));s&&this.fire(u,f),r.fire(l,f)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,i=r.target,s=i.group?lo(t,void 0,i.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,s),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:i,actionHandler:s,target:o}=t,a=!!s&&s(e,t,r.x,r.y);a&&o.setCoords(),i==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const i=Wi(this._activeObject)?this._activeObject:null,s=(!i||t.group!==i)&&t.findControl(this.getViewportPoint(e));if(s){const o=s.control;this.setCursor(o.cursorStyleHandler(e,o,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(o=>{r=o.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,i=Wi(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||i)&&(i||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(i){const s=r.getObjects();if(t===r){const o=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(s,o)||this.searchPossibleTargets(this._objects,o))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(s,e)}else{r.isEditing&&r.exitEditing();const s=new(U.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(r,t),this._hoveredTarget=s,this._setActiveObject(s,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:i,deltaY:s}=this._groupSelector,o=new P(t,r),a=o.add(new P(i,s)),l=o.min(a),c=o.max(a).subtract(l),u=this.collectObjects({left:l.x,top:l.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),h=o.eq(a)?u[0]?[u[0]]:[]:u.length>1?u.filter(d=>!d.onSelect({e})).reverse():u;if(h.length===1)this.setActiveObject(h[0],e);else if(h.length>1){const d=U.getClass("ActiveSelection");this.setActiveObject(new d(h,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const D_={x1:0,y1:0,x2:0,y2:0},jM=E(E({},D_),{},{r1:0,r2:0}),Ks=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,LM=/^(\d+\.\d+)%|(\d+)%$/;function M_(n){return n&&LM.test(n)}function j_(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(M_(n)?100:1):NaN;return Oo(0,Ks(t,e),1)}const NM=/\s*;\s*/,WM=/\s*:\s*/;function IM(n,e){let t,r;const i=n.getAttribute("style");if(i){const o=i.split(NM);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,c]=o[a].split(WM).map(u=>u.trim());l==="stop-color"?t=c:l==="stop-opacity"&&(r=c)}}const s=new le(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:j_(n.getAttribute("offset"),0),color:s.toRgb(),opacity:Ks(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*s.getAlpha()*e}}function FM(n,e){const t=[],r=n.getElementsByTagName("stop"),i=j_(e,1);for(let s=r.length;s--;)t.push(IM(r[s],i));return t}function L_(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function N_(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function fn(n,e){return n.getAttribute(e)}function BM(n,e){return function(t,r){let i,{width:s,height:o,gradientUnits:a}=r;return Object.keys(t).reduce((l,c)=>{const u=t[c];return u==="Infinity"?i=1:u==="-Infinity"?i=0:(i=typeof u=="string"?parseFloat(u):u,typeof u=="string"&&M_(u)&&(i*=.01,a==="pixels"&&(c!=="x1"&&c!=="x2"&&c!=="r2"||(i*=s),c!=="y1"&&c!=="y2"||(i*=o)))),l[c]=i,l},{})}(L_(n)==="linear"?function(t){return{x1:fn(t,"x1")||0,y1:fn(t,"y1")||0,x2:fn(t,"x2")||"100%",y2:fn(t,"y2")||0}}(n):function(t){return{x1:fn(t,"fx")||fn(t,"cx")||"50%",y1:fn(t,"fy")||fn(t,"cy")||"50%",r1:0,x2:fn(t,"cx")||"50%",y2:fn(t,"cy")||"50%",r2:fn(t,"r")||"50%"}}(n),E(E({},e),{},{gradientUnits:N_(n)}))}class nc{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:i={},colorStops:s=[],offsetX:o=0,offsetY:a=0,gradientTransform:l,id:c}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:E(E({},t==="radial"?jM:D_),i),colorStops:s,offsetX:o,offsetY:a,gradientTransform:l,id:c?"".concat(c,"_").concat(_i()):_i()})}addColorStop(e){for(const t in e){const r=new le(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return E(E({},$o(this,e)),{},{type:this.type,coords:E({},this.coords),colorStops:this.colorStops.map(t=>E({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],i=this.gradientTransform?this.gradientTransform.concat():pt.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(h=>E({},h)).sort((h,d)=>h.offset-d.offset);let a=-this.offsetX,l=-this.offsetY;var c;s==="objectBoundingBox"?(a/=e.width,l/=e.height):(a+=e.width/2,l+=e.height/2),(c=e)&&typeof c._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,l-=e.pathOffset.y),i[4]-=a,i[5]-=l;const u=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(tl(i),'"'),""].join(" ");if(this.type==="linear"){const{x1:h,y1:d,x2:f,y2:g}=this.coords;r.push("<linearGradient ",u,' x1="',h,'" y1="',d,'" x2="',f,'" y2="',g,`">
`)}else if(this.type==="radial"){const{x1:h,y1:d,x2:f,y2:g,r1:p,r2:y}=this.coords,v=p>y;r.push("<radialGradient ",u,' cx="',v?h:f,'" cy="',v?d:g,'" r="',v?p:y,'" fx="',v?f:h,'" fy="',v?g:d,`">
`),v&&(o.reverse(),o.forEach(w=>{w.offset=1-w.offset}));const m=Math.min(p,y);if(m>0){const w=m/Math.max(p,y);o.forEach(b=>{b.offset+=w*(1-b.offset)})}}return o.forEach(h=>{let{color:d,offset:f,opacity:g}=h;r.push("<stop ",'offset="',100*f+"%",'" style="stop-color:',d,g!==void 0?";stop-opacity: "+g:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:i,y2:s,r1:o,r2:a}=this.coords,l=this.type==="linear"?e.createLinearGradient(t,r,i,s):e.createRadialGradient(t,r,o,i,s,a);return this.colorStops.forEach(c=>{let{color:u,opacity:h,offset:d}=c;l.addColorStop(d,h!==void 0?new le(u).setAlpha(h).toRgba():u)}),l}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(E(E({},e),{},{colorStops:t?t.map(i=>E({},i)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const i=N_(e),s=t._findCenterFromElement();return new this(E({id:e.getAttribute("id")||void 0,type:L_(e),coords:BM(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:FM(e,r.opacity),gradientUnits:i,gradientTransform:cp(e.getAttribute("gradientTransform")||"")},i==="pixels"?{offsetX:t.width/2-s.x,offsetY:t.height/2-s.y}:{offsetX:0,offsetY:0}))}}k(nc,"type","Gradient"),U.setClass(nc,"gradient"),U.setClass(nc,"linear"),U.setClass(nc,"radial");const zM=["type","source","patternTransform"];class Ad{get type(){return"pattern"}set type(e){Si("warn","Setting type has no effect",e)}constructor(e){k(this,"repeat","repeat"),k(this,"offsetX",0),k(this,"offsetY",0),k(this,"crossOrigin",""),this.id=_i(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return E(E({},$o(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:fe(this.offsetX,oe.NUM_FRACTION_DIGITS),offsetY:fe(this.offsetY,oe.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:i,repeat:s,id:o}=this,a=Ks(this.offsetX/t,0),l=Ks(this.offsetY/r,0),c=s==="repeat-y"||s==="no-repeat"?1+Math.abs(a||0):Ks(i.width/t,0),u=s==="repeat-x"||s==="no-repeat"?1+Math.abs(l||0):Ks(i.height/r,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(l,'" width="').concat(c,'" height="').concat(u,'">'),'<image x="0" y="0" width="'.concat(i.width,'" height="').concat(i.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:i,patternTransform:s}=e,o=Se(e,zM);const a=await Vc(i,E(E({},t),{},{crossOrigin:o.crossOrigin}));return new this(E(E({},o),{},{patternTransform:s&&s.slice(0),source:a}))}}k(Ad,"type","Pattern"),U.setClass(Ad),U.setClass(Ad,"pattern");class $M{constructor(e){k(this,"color","rgb(0, 0, 0)"),k(this,"width",1),k(this,"shadow",null),k(this,"strokeLineCap","round"),k(this,"strokeLineJoin","round"),k(this,"strokeMiterLimit",10),k(this,"strokeDashArray",null),k(this,"limitedToCanvasSize",!1),this.canvas=e}_setBrushStyles(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])}_saveAndTransform(e){const t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}needsFullRender(){return new le(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const e=this.canvas,t=this.shadow,r=e.contextTop,i=e.getZoom()*e.getRetinaScaling();r.shadowColor=t.color,r.shadowBlur=t.blur*i,r.shadowOffsetX=t.offsetX*i,r.shadowOffsetY=t.offsetY*i}_resetShadow(){const e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0}_isOutSideCanvas(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}const HM=["path","left","top"],UM=["d"];class Qr extends st{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:i,top:s}=t,o=Se(t,HM);super(),Object.assign(this,Qr.ownDefaults),this.setOptions(o),this._setPath(e||[],!0),typeof i=="number"&&this.set(ce,i),typeof s=="number"&&this.set(Et,s)}_setPath(e,t){this.path=wM(Array.isArray(e)?e:RM(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new P(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const i of this.path)switch(i[0]){case"L":e.lineTo(i[1]+t,i[2]+r);break;case"M":e.moveTo(i[1]+t,i[2]+r);break;case"C":e.bezierCurveTo(i[1]+t,i[2]+r,i[3]+t,i[4]+r,i[5]+t,i[6]+r);break;case"Q":e.quadraticCurveTo(i[1]+t,i[2]+r,i[3]+t,i[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return E(E({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=A_(this.path,oe.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=oe.NUM_FRACTION_DIGITS;return" translate(".concat(fe(-this.pathOffset.x,e),", ").concat(fe(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:i}=this._calcDimensions();this.set({width:t,height:r,pathOffset:i}),e&&this.setPositionByOrigin(i,ne,ne)}_calcBoundsFromPath(){const e=[];let t=0,r=0,i=0,s=0;for(const o of this.path)switch(o[0]){case"L":i=o[1],s=o[2],e.push({x:t,y:r},{x:i,y:s});break;case"M":i=o[1],s=o[2],t=i,r=s;break;case"C":e.push(...Kv(i,s,o[1],o[2],o[3],o[4],o[5],o[6])),i=o[5],s=o[6];break;case"Q":e.push(...Kv(i,s,o[1],o[2],o[1],o[2],o[3],o[4])),i=o[3],s=o[4];break;case"Z":i=t,s=r}return yr(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return E(E({},e),{},{pathOffset:new P(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const i=Ar(e,this.ATTRIBUTE_NAMES,r),{d:s}=i;return new this(s,E(E(E({},Se(i,UM)),t),{},{left:void 0,top:void 0}))}}k(Qr,"type","Path"),k(Qr,"cacheProperties",[...Or,"path","fillRule"]),k(Qr,"ATTRIBUTE_NAMES",[...Ei,"d"]),U.setClass(Qr),U.setSVGClass(Qr);class Lu extends $M{constructor(e){super(e),k(this,"decimate",.4),k(this,"drawStraightLine",!1),k(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(e,t,r){const i=t.midPointFrom(r);return e.quadraticCurveTo(t.x,t.y,i.x,i.y),i}onMouseDown(e,t){let{e:r}=t;this.canvas._isMainEvent(r)&&(this.drawStraightLine=!!this.straightLineKey&&r[this.straightLineKey],this._prepareForDrawing(e),this._addPoint(e),this._render())}onMouseMove(e,t){let{e:r}=t;if(this.canvas._isMainEvent(r)&&(this.drawStraightLine=!!this.straightLineKey&&r[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(e))&&this._addPoint(e)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const i=this._points,s=i.length,o=this.canvas.contextTop;this._saveAndTransform(o),this.oldEnd&&(o.beginPath(),o.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=Lu.drawSegment(o,i[s-2],i[s-1]),o.stroke(),o.restore()}}onMouseUp(e){let{e:t}=e;return!this.canvas._isMainEvent(t)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(e){this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)}_addPoint(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop,t=this._points[0],r=this._points[1];if(this._saveAndTransform(e),e.beginPath(),this._points.length===2&&t.x===r.x&&t.y===r.y){const i=this.width/1e3;t.x-=i,r.x+=i}e.moveTo(t.x,t.y);for(let i=1;i<this._points.length;i++)Lu.drawSegment(e,t,r),t=this._points[i],r=this._points[i+1];e.lineTo(t.x,t.y),e.stroke(),e.restore()}convertPointsToSVGPath(e){const t=this.width/1e3;return PM(e,t)}createPath(e){const t=new Qr(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new Kn(this.shadow)),t}decimatePoints(e,t){if(e.length<=2)return e;let r,i=e[0];const s=this.canvas.getZoom(),o=Math.pow(t/s,2),a=e.length-1,l=[i];for(let c=1;c<a-1;c++)r=Math.pow(i.x-e[c].x,2)+Math.pow(i.y-e[c].y,2),r>=o&&(i=e[c],l.push(i));return l.push(e[a]),l}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const e=this.convertPointsToSVGPath(this._points);if(function(r){return A_(r)==="M 0 0 Q 0 0 0 0 L 0 0"}(e))return void this.canvas.requestRenderAll();const t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}}const VM=["left","top","radius"],W_=["radius","startAngle","endAngle","counterClockwise"];class cr extends st{static getDefaults(){return E(E({},super.getDefaults()),cr.ownDefaults)}constructor(e){super(),Object.assign(this,cr.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,De(this.startAngle),De(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(At)}getRadiusY(){return this.get("radius")*this.get(on)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...W_,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=De(this.startAngle),i=De(this.endAngle),s=Cr(r)*t,o=Tr(r)*t,a=Cr(i)*t,l=Tr(i)*t,c=e>180?1:0,u=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(o," A ").concat(t," ").concat(t," 0 ").concat(c," ").concat(u," ").concat(a," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const i=Ar(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:o=0,radius:a=0}=i;return new this(E(E({},Se(i,VM)),{},{radius:a,left:s-a,top:o-a}))}static fromObject(e){return super._fromObject(e)}}k(cr,"type","Circle"),k(cr,"cacheProperties",[...Or,...W_]),k(cr,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),k(cr,"ATTRIBUTE_NAMES",["cx","cy","r",...Ei]),U.setClass(cr),U.setSVGClass(cr);const GM=["x1","y1","x2","y2"],YM=["x1","y1","x2","y2"],pp=["x1","x2","y1","y2"];class Ii extends st{constructor(){let[e,t,r,i]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Ii.ownDefaults),this.setOptions(s),this.x1=e,this.x2=r,this.y1=t,this.y2=i,this._setWidthHeight();const{left:o,top:a}=s;typeof o=="number"&&this.set(ce,o),typeof a=="number"&&this.set(Et,a)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:i}=this;this.width=Math.abs(r-e),this.height=Math.abs(i-t);const{left:s,top:o,width:a,height:l}=yr([{x:e,y:t},{x:r,y:i}]),c=new P(s+a/2,o+l/2);this.setPositionByOrigin(c,ne,ne)}_set(e,t){return super._set(e,t),pp.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var i;Zt(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(i=this.stroke)!==null&&i!==void 0?i:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new P((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return E(E({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:i,width:s,height:o}=this,a=e<=t?-1:1,l=r<=i?-1:1;return{x1:a*s/2,x2:a*-s/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:i}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(i,`" />
`)]}static async fromElement(e,t,r){const i=Ar(e,this.ATTRIBUTE_NAMES,r),{x1:s=0,y1:o=0,x2:a=0,y2:l=0}=i;return new this([s,o,a,l],Se(i,GM))}static fromObject(e){let{x1:t,y1:r,x2:i,y2:s}=e,o=Se(e,YM);return this._fromObject(E(E({},o),{},{points:[t,r,i,s]}),{extraParam:"points"})}}k(Ii,"type","Line"),k(Ii,"cacheProperties",[...Or,...pp]),k(Ii,"ATTRIBUTE_NAMES",Ei.concat(pp)),U.setClass(Ii),U.setSVGClass(Ii);class Ui extends st{static getDefaults(){return E(E({},super.getDefaults()),Ui.ownDefaults)}constructor(e){super(),Object.assign(this,Ui.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}k(Ui,"type","Triangle"),k(Ui,"ownDefaults",{width:100,height:100}),U.setClass(Ui),U.setSVGClass(Ui);const I_=["rx","ry"];class ur extends st{static getDefaults(){return E(E({},super.getDefaults()),ur.ownDefaults)}constructor(e){super(),Object.assign(this,ur.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(At)}getRy(){return this.get("ry")*this.get(on)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...I_,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,Cu,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const i=Ar(e,this.ATTRIBUTE_NAMES,r);return i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,new this(i)}}function XM(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}k(ur,"type","Ellipse"),k(ur,"cacheProperties",[...Or,...I_]),k(ur,"ownDefaults",{rx:0,ry:0}),k(ur,"ATTRIBUTE_NAMES",[...Ei,"cx","cy","rx","ry"]),U.setClass(ur),U.setSVGClass(ur);const qM=["left","top"],F_={exactBoundingBox:!1};class Sn extends st{static getDefaults(){return E(E({},super.getDefaults()),Sn.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),k(this,"strokeDiff",void 0),Object.assign(this,Sn.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:i}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(ce,r),typeof i=="number"&&this.set(Et,i)}isOpen(){return!0}_projectStrokeOnPoints(e){return ND(this.points,e,this.isOpen())}_calcDimensions(e){e=E({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(c=>c.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new P,strokeOffset:new P,strokeDiff:new P};const r=yr(t),i=Sh(E(E({},e),{},{scaleX:1,scaleY:1})),s=yr(this.points.map(c=>xt(c,i,!0))),o=new P(this.scaleX,this.scaleY);let a=r.left+r.width/2,l=r.top+r.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(De(this.skewX)),l-=a*Math.tan(De(this.skewY))),E(E({},r),{},{pathOffset:new P(a,l),strokeOffset:new P(s.left,s.top).subtract(new P(r.left,r.top)).multiply(o),strokeDiff:new P(r.width,r.height).subtract(new P(s.width,s.height)).multiply(o)})}_findCenterFromElement(){const e=yr(this.points);return new P(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:i,height:s,pathOffset:o,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:i,height:s,pathOffset:o,strokeOffset:a,strokeDiff:l}),e&&this.setPositionByOrigin(new P(t+i/2,r+s/2),ne,ne)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new P(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var t,r;const{width:a,height:l}=this._calcDimensions(e);o=new P((t=e.width)!==null&&t!==void 0?t:a,(r=e.height)!==null&&r!==void 0?r:l)}else{var i,s;o=new P((i=e.width)!==null&&i!==void 0?i:this.width,(s=e.height)!==null&&s!==void 0?s:this.height)}return o.multiply(new P(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,i=super._set(e,t);return this.exactBoundingBox&&r&&((e===At||e===on)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),i}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return E(E({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:r,y:i}=t;return{x:r,y:i}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,i=oe.NUM_FRACTION_DIGITS;for(let s=0,o=this.points.length;s<o;s++)e.push(fe(this.points[s].x-t,i),",",fe(this.points[s].y-r,i)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,i=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-i);for(let s=0;s<t;s++){const o=this.points[s];e.lineTo(o.x-r,o.y-i)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(XM(e.getAttribute("points")),E(E({},Se(Ar(e,this.ATTRIBUTE_NAMES,r),qM)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}k(Sn,"ownDefaults",F_),k(Sn,"type","Polyline"),k(Sn,"layoutProperties",[Fo,Bo,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),k(Sn,"cacheProperties",[...Or,"points"]),k(Sn,"ATTRIBUTE_NAMES",[...Ei]),U.setClass(Sn),U.setSVGClass(Sn);class rc extends Sn{isOpen(){return!1}}k(rc,"ownDefaults",F_),k(rc,"type","Polygon"),U.setClass(rc),U.setSVGClass(rc);class B_ extends st{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const i in t[r])for(const s in t[r][i])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const i in r)for(const s in r[i])if(r[i][s][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,i,s=0,o=!0,a=0;for(const l in t){r=0;for(const c in t[l]){const u=t[l][c]||{};s++,u[e]!==void 0?(i?u[e]!==i&&(o=!1):i=u[e],u[e]===this[e]&&delete u[e]):o=!1,Object.keys(u).length!==0?r++:delete t[l][c]}r===0&&delete t[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&s===a&&(this[e]=i,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,i,s;for(i in t){for(s in r=t[i],r)delete r[s][e],Object.keys(r[s]).length===0&&delete r[s];Object.keys(r).length===0&&delete t[i]}}_extendStyles(e,t){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const s=qg(E(E({},this._getStyleDeclaration(r,i)),t),o=>o!==void 0);this._setStyleDeclaration(r,i,s)}getSelectionStyles(e,t,r){const i=[];for(let s=e;s<(t||e);s++)i.push(this.getStyleAtPosition(s,r));return i}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,i):this._getStyleDeclaration(r,i)}setSelectionStyles(e,t,r){for(let i=t;i<(r||t);i++)this._extendStyles(i,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const i=this.styles&&this.styles[e];return i&&(r=i[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return E(E({},$o(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}k(B_,"_styleProperties",Q2);const KM=/  +/g,JM=/"/g;function Dd(n,e,t,r,i){return"		".concat(function(s,o){let{left:a,top:l,width:c,height:u}=o,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oe.NUM_FRACTION_DIGITS;const d=nl(He,s,!1),[f,g,p,y]=[a,l,c,u].map(v=>fe(v,h));return"<rect ".concat(d,' x="').concat(f,'" y="').concat(g,'" width="').concat(p,'" height="').concat(y,'"></rect>')}(n,{left:e,top:t,width:r,height:i}),`
`)}const QM=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Md;class ut extends B_{static getDefaults(){return E(E({},super.getDefaults()),ut.ownDefaults)}constructor(e,t){super(),k(this,"__charBounds",[]),Object.assign(this,ut.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=O_(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Un)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,i,s,o,a;for(let l=0,c=this._textLines.length;l<c;l++)if((this.textAlign===Un||l!==c-1&&!this.isEndOfWrapping(l))&&(i=0,s=this._textLines[l],t=this.getLineWidth(l),t<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){r=a.length,e=(this.width-t)/r;for(let u=0;u<=s.length;u++)o=this.__charBounds[l][u],this._reSpaceAndTab.test(s[u])?(o.width+=e,o.kernedWidth+=e,o.left+=i,i+=e):o.left+=i}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let i;for(i=0;i<r.length;i++){if(e<=r[i].length)return{lineIndex:i,charIndex:e};e-=r[i].length+this.missingNewlineOffset(i,t)}return{lineIndex:i-1,charIndex:r[i-1].length<e?r[i-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Pt?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case ne:e.textBaseline="middle";break;case"ascender":e.textBaseline=Et;break;case"descender":e.textBaseline=rp}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const i=this.getLineWidth(t);i>e&&(e=i)}return e}_renderTextLine(e,t,r,i,s,o){this._renderChars(e,t,r,i,s,o)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let i=this._getTopOffset();for(let s=0,o=this._textLines.length;s<o;s++){const a=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){i+=a;continue}const l=this._textLines[s].length,c=this._getLineLeftOffset(s);let u,h,d=0,f=0,g=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let p=0;p<l;p++){const y=this.__charBounds[s][p];h=this.getValueOfPropertyAt(s,p,"textBackgroundColor"),this.path?(e.save(),e.translate(y.renderLeft,y.renderTop),e.rotate(y.angle),e.fillStyle=h,h&&e.fillRect(-y.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),y.width,a/this.lineHeight),e.restore()):h!==g?(u=r+c+f,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=g,g&&e.fillRect(u,i,d,a/this.lineHeight),f=y.left,d=y.width,g=h):d+=y.kernedWidth}h&&!this.path&&(u=r+c+f,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=h,e.fillRect(u,i,d,a/this.lineHeight)),i+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,i){const s=Ta.getFontCache(t),o=this._getFontDeclaration(t),a=r+e,l=r&&o===this._getFontDeclaration(i),c=t.fontSize/this.CACHE_FONT_SIZE;let u,h,d,f;if(r&&s[r]!==void 0&&(d=s[r]),s[e]!==void 0&&(f=u=s[e]),l&&s[a]!==void 0&&(h=s[a],f=h-d),u===void 0||d===void 0||h===void 0){const g=function(){return Md||(Md=an({width:0,height:0}).getContext("2d")),Md}();this._setTextStyles(g,t,!0),u===void 0&&(f=u=g.measureText(e).width,s[e]=u),d===void 0&&l&&r&&(d=g.measureText(r).width,s[r]=d),l&&h===void 0&&(h=g.measureText(a).width,s[a]=h,f=h-d)}return{width:u*c,kernedWidth:f*c}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,i=0;const s=this.pathSide===Oe,o=this.path,a=this._textLines[e],l=a.length,c=new Array(l);this.__charBounds[e]=c;for(let u=0;u<l;u++){const h=a[u];r=this._getGraphemeBox(h,e,u,t),c[u]=r,i+=r.kernedWidth,t=h}if(c[l]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let u=0;const h=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case ce:u=s?h-i:0;break;case ne:u=(h-i)/2;break;case Oe:u=s?0:h-i}u+=this.pathStartOffset*(s?-1:1);for(let d=s?l-1:0;s?d>=0:d<l;s?d--:d++)r=c[d],u>h?u%=h:u<0&&(u+=h),this._setGraphemeOnPath(u,r),u+=r.kernedWidth}return{width:i,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,i=this.path,s=CM(i.path,r,i.segmentsInfo);t.renderLeft=s.x-i.pathOffset.x,t.renderTop=s.y-i.pathOffset.y,t.angle=s.angle+(this.pathSide===Oe?Math.PI:0)}_getGraphemeBox(e,t,r,i,s){const o=this.getCompleteStyleDeclaration(t,r),a=i?this.getCompleteStyleDeclaration(t,r-1):{},l=this._measureChar(e,o,i,a);let c,u=l.kernedWidth,h=l.width;this.charSpacing!==0&&(c=this._getWidthOfCharSpacing(),h+=c,u+=c);const d={width:h,left:0,height:o.fontSize,kernedWidth:u,deltaY:o.deltaY};if(r>0&&!s){const f=this.__charBounds[t][r-1];d.left=f.left+f.width+l.kernedWidth-l.width}return d}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,i=this._textLines[e].length;r<i;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,i=this._textLines.length;r<i;r++)e=this.getHeightOfLine(r),t+=r===i-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const i=this._getLeftOffset(),s=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++){const l=this.getHeightOfLine(o),c=l/this.lineHeight,u=this._getLineLeftOffset(o);this._renderTextLine(t,e,this._textLines[o],i+u,s+r+c,o),r+=l}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(He))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,i,s,o){const a=this.getHeightOfLine(o),l=this.textAlign.includes(Un),c=this.path,u=!l&&this.charSpacing===0&&this.isEmptyStyles(o)&&!c,h=this.direction==="ltr",d=this.direction==="ltr"?1:-1,f=t.direction;let g,p,y,v,m,w="",b=0;if(t.save(),f!==this.direction&&(t.canvas.setAttribute("dir",h?"ltr":"rtl"),t.direction=h?"ltr":"rtl",t.textAlign=h?ce:Oe),s-=a*this._fontSizeFraction/this.lineHeight,u)return this._renderChar(e,t,o,0,r.join(""),i,s),void t.restore();for(let S=0,_=r.length-1;S<=_;S++)v=S===_||this.charSpacing||c,w+=r[S],y=this.__charBounds[o][S],b===0?(i+=d*(y.kernedWidth-y.width),b+=y.width):b+=y.kernedWidth,l&&!v&&this._reSpaceAndTab.test(r[S])&&(v=!0),v||(g=g||this.getCompleteStyleDeclaration(o,S),p=this.getCompleteStyleDeclaration(o,S+1),v=rm(g,p,!1)),v&&(c?(t.save(),t.translate(y.renderLeft,y.renderTop),t.rotate(y.angle),this._renderChar(e,t,o,S,w,-b/2,0),t.restore()):(m=i,this._renderChar(e,t,o,S,w,m,s)),w="",g=p,i+=d*b,b=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,i=an({width:t,height:r}),s=i.getContext("2d");return i.width=t,i.height=r,s.beginPath(),s.moveTo(0,0),s.lineTo(t,0),s.lineTo(t,r),s.lineTo(0,r),s.closePath(),s.translate(t/2,r/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(i,"no-repeat")}handleFiller(e,t,r){let i,s;return Zt(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(i=-this.width/2,s=-this.height/2,e.translate(i,s),e[t]=this._applyPatternGradientTransformText(r),{offsetX:i,offsetY:s}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:i}=t;return e.lineWidth=i,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,i,s,o,a){const l=this._getStyleDeclaration(r,i),c=this.getCompleteStyleDeclaration(r,i),u=e==="fillText"&&c.fill,h=e==="strokeText"&&c.stroke&&c.strokeWidth;if(h||u){if(t.save(),t.font=this._getFontDeclaration(c),l.textBackgroundColor&&this._removeShadow(t),l.deltaY&&(a+=l.deltaY),u){const d=this._setFillStyles(t,c);t.fillText(s,o-d.offsetX,a-d.offsetY)}if(h){const d=this._setStrokeStyles(t,c);t.strokeText(s,o-d.offsetX,a-d.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const i=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),o=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),a={fontSize:s*r.size,deltaY:o+s*r.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,i=this.textAlign,s=this.direction,o=this.isEndOfWrapping(e);let a=0;return i===Un||i===Ea&&!o||i===ka&&!o||i===Au&&!o?0:(i===ne&&(a=r/2),i===Oe&&(a=r),i===Ea&&(a=r/2),i===ka&&(a=r),s==="rtl"&&(i===Oe||i===Un||i===ka?a=0:i===ce||i===Au?a=-r:i!==ne&&i!==Ea||(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var i;return(i=this._getStyleDeclaration(e,t)[r])!==null&&i!==void 0?i:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const i=this._getLeftOffset(),s=this.path,o=this._getWidthOfCharSpacing(),a=t==="linethrough"?.5:t==="overline"?1:0,l=this.offsets[t];for(let c=0,u=this._textLines.length;c<u;c++){const h=this.getHeightOfLine(c);if(!this[t]&&!this.styleHas(t,c)){r+=h;continue}const d=this._textLines[c],f=h/this.lineHeight,g=this._getLineLeftOffset(c);let p=0,y=0,v=this.getValueOfPropertyAt(c,0,t),m=this.getValueOfPropertyAt(c,0,He),w=this.getValueOfPropertyAt(c,0,us),b=v,S=m,_=w;const T=r+f*(1-this._fontSizeFraction);let R=this.getHeightOfChar(c,0),A=this.getValueOfPropertyAt(c,0,"deltaY");for(let L=0,z=d.length;L<z;L++){const N=this.__charBounds[c][L];b=this.getValueOfPropertyAt(c,L,t),S=this.getValueOfPropertyAt(c,L,He),_=this.getValueOfPropertyAt(c,L,us);const G=this.getHeightOfChar(c,L),$=this.getValueOfPropertyAt(c,L,"deltaY");if(s&&b&&S){const H=this.fontSize*_/1e3;e.save(),e.fillStyle=m,e.translate(N.renderLeft,N.renderTop),e.rotate(N.angle),e.fillRect(-N.kernedWidth/2,l*G+$-a*H,N.kernedWidth,H),e.restore()}else if((b!==v||S!==m||G!==R||_!==w||$!==A)&&y>0){const H=this.fontSize*w/1e3;let O=i+g+p;this.direction==="rtl"&&(O=this.width-O-y),v&&m&&w&&(e.fillStyle=m,e.fillRect(O,T+l*R+A-a*H,y,H)),p=N.left,y=N.width,v=b,w=_,m=S,R=G,A=$}else y+=N.kernedWidth}let M=i+g+p;this.direction==="rtl"&&(M=this.width-M-y),e.fillStyle=S;const B=this.fontSize*_/1e3;b&&S&&_&&e.fillRect(M,T+l*R+A-a*B,y-o,B),r+=h}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:i=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const o=e.includes("'")||e.includes('"')||e.includes(",")||ut.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(s?this.CACHE_FONT_SIZE:i,"px"),o].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return nm(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),i=[`
`];let s=[];for(let o=0;o<t.length;o++)r[o]=this.graphemeSplit(t[o]),s=s.concat(r[o],i);return s.pop(),{_unwrappedLines:r,lines:t,graphemeText:s,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return E(E({},super.toObject([...d_,...e])),{},{styles:BD(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let i=!1,s=!1;if(typeof e=="object")for(const o in e)o==="path"&&this.setPathInfo(),i=i||r.includes(o),s=s||o==="path";else i=r.includes(e),s=e==="path";return s&&this.setPathInfo(),i&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const i=Ar(e,ut.ATTRIBUTE_NAMES,r),s=E(E({},t),i),{textAnchor:o=ce,textDecoration:a="",dx:l=0,dy:c=0,top:u=0,left:h=0,fontSize:d=Hg,strokeWidth:f=1}=s,g=Se(s,QM),p=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),E({left:h+l,top:u+c,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:d},g)),y=p.getScaledHeight()/p.height,v=((p.height+p.strokeWidth)*p.lineHeight-p.height)*y,m=p.getScaledHeight()+v;let w=0;return o===ne&&(w=p.getScaledWidth()/2),o===Oe&&(w=p.getScaledWidth()),p.set({left:p.left-w,top:p.top-(m-p.fontSize*(.07+p._fontSizeFraction))/p.lineHeight,strokeWidth:f}),p}static fromObject(e){return this._fromObject(E(E({},e),{},{styles:zD(e.styles||{},e.text)}),{extraParam:"text"})}}k(ut,"textLayoutProperties",h_),k(ut,"cacheProperties",[...Or,...d_]),k(ut,"ownDefaults",Z2),k(ut,"type","Text"),k(ut,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),k(ut,"ATTRIBUTE_NAMES",Ei.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),b_(ut,[class extends l_{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0}),t=this.path;return t?e+t._createBaseSVGMarkup(t._toSVG(),{reviver:n,withShadow:!0,additionalTransform:tl(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(JM,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],r=[];let i,s=n;this.backgroundColor&&r.push(...Dd(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)i=this._getLineLeftOffset(o),this.direction==="rtl"&&(i+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(r,o,e+i,s),this._setSVGTextLineText(t,o,e+i,s),s+=this.getHeightOfLine(o);return{textSpans:t,textBgRects:r}}_createTextCharSpan(n,e,t,r,i){const s=oe.NUM_FRACTION_DIGITS,o=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(KM)),a=o?'style="'.concat(o,'"'):"",l=e.deltaY,c=l?' dy="'.concat(fe(l,s),'" '):"",{angle:u,renderLeft:h,renderTop:d,width:f}=i;let g="";if(h!==void 0){const p=f/2;u&&(g=' rotate="'.concat(fe(Er(u),s),'"'));const y=zo({angle:Er(u)});y[4]=h,y[5]=d;const v=new P(-p,0).transform(y);t=v.x,r=v.y}return'<tspan x="'.concat(fe(t,s),'" y="').concat(fe(r,s),'" ').concat(c).concat(g).concat(a,">").concat(WD(n),"</tspan>")}_setSVGTextLineText(n,e,t,r){const i=this.getHeightOfLine(e),s=this.textAlign.includes(Un),o=this._textLines[e];let a,l,c,u,h,d="",f=0;r+=i*(1-this._fontSizeFraction)/this.lineHeight;for(let g=0,p=o.length-1;g<=p;g++)h=g===p||this.charSpacing||this.path,d+=o[g],c=this.__charBounds[e][g],f===0?(t+=c.kernedWidth-c.width,f+=c.width):f+=c.kernedWidth,s&&!h&&this._reSpaceAndTab.test(o[g])&&(h=!0),h||(a=a||this.getCompleteStyleDeclaration(e,g),l=this.getCompleteStyleDeclaration(e,g+1),h=rm(a,l,!0)),h&&(u=this._getStyleDeclaration(e,g),n.push(this._createTextCharSpan(d,u,t,r,c)),d="",a=l,this.direction==="rtl"?t-=f:t+=f,f=0)}_setSVGTextLineBg(n,e,t,r){const i=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight;let o,a=0,l=0,c=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let u=0;u<i.length;u++){const{left:h,width:d,kernedWidth:f}=this.__charBounds[e][u];o=this.getValueOfPropertyAt(e,u,"textBackgroundColor"),o!==c?(c&&n.push(...Dd(c,t+l,r,a,s)),l=h,a=d,c=o):a+=f}o&&n.push(...Dd(c,t+l,r,a,s))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," text-decoration-thickness: ").concat(fe(this.textDecorationThickness*this.getObjectScaling().y/10,oe.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:r,stroke:i,fill:s,fontSize:o,fontStyle:a,fontWeight:l,deltaY:c,textDecorationThickness:u,linethrough:h,overline:d,underline:f}=n,g=this.getSvgTextDecoration({underline:f??this.underline,overline:d??this.overline,linethrough:h??this.linethrough}),p=u||this.textDecorationThickness;return[i?nl(Pt,i):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",g?"text-decoration: ".concat(g,"; text-decoration-thickness: ").concat(fe(p*this.getObjectScaling().y/10,oe.NUM_FRACTION_DIGITS),"%; "):"",s?nl(He,s):"",c?"baseline-shift: ".concat(-c,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),U.setClass(ut),U.setSVGClass(ut);class ZM{constructor(e){k(this,"target",void 0),k(this,"__mouseDownInPlace",!1),k(this,"__dragStartFired",!1),k(this,"__isDraggingOver",!1),k(this,"__dragStartSelection",void 0),k(this,"__dragImageDisposer",void 0),k(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:i,selectionEnd:s}=t;const o=this.target,a=o.canvas,l=new P(o.flipX?-1:1,o.flipY?-1:1),c=o._getCursorBoundaries(i),u=new P(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(o.calcTransformMatrix()),h=a.getScenePoint(e).subtract(u),d=o.getCanvasRetinaScaling(),f=o.getBoundingRect(),g=u.subtract(new P(f.left,f.top)),p=a.viewportTransform,y=g.add(h).transform(p,!0),v=o.backgroundColor,m=tm(o.styles);o.backgroundColor="";const w={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(w,0,i),o.setSelectionStyles(w,s,o.text.length),o.dirty=!0;const b=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=v,o.styles=m,o.dirty=!0,dp(b,{position:"fixed",left:"".concat(-b.width,"px"),border:Rt,width:"".concat(b.width/d,"px"),height:"".concat(b.height/d,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{b.remove()},Tn(e.target||this.target.hiddenTextarea).body.appendChild(b),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(b,y.x,y.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const i=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},s=t._text.slice(i.selectionStart,i.selectionEnd).join(""),o=E({text:t.text,value:s},i);e.dataTransfer.setData("text/plain",s),e.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:t.getSelectionStyles(i.selectionStart,i.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,o)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,i=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let s=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(s&&!i){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(r);const{styles:c}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},u=s[Math.max(0,s.length-1)],h=0;if(this.__dragStartSelection){const d=this.__dragStartSelection.selectionStart,f=this.__dragStartSelection.selectionEnd;l>d&&l<=f?l=d:l>f&&(l-=f-d),o.removeChars(d,f),delete this.__dragStartSelection}o._reNewline.test(u)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=o,o.insertChars(s,c,l),a.setActiveObject(o),o.enterEditing(r),o.selectionStart=Math.min(l+h,o._text.length),o.selectionEnd=Math.min(o.selectionStart+s.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(Tu,{index:l+h,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const i=this.target,s=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||Rt;l===Rt?(i.selectionStart=o,i.selectionEnd=a,i._updateTextarea(),i.hiddenTextarea.focus()):(i.clearContextTop(),l==="move"&&(i.removeChars(o,a),i.selectionStart=i.selectionEnd=o,i.hiddenTextarea&&(i.hiddenTextarea.value=i.text),i._updateTextarea(),i.fire(Tu,{index:o,action:"dragend"}),s.fire("text:changed",{target:i}),s.requestRenderAll()),i.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Zv=/[ \n\.,;!\?\-]/;class ej extends ut{constructor(){super(...arguments),k(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:i,onComplete:s}=e;return m_({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:i,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let i=e>0&&this._reSpace.test(r[e])&&(t===-1||!Ug.test(r[e-1]))?e-1:e,s=r[i];for(;i>0&&i<r.length&&!Zv.test(s);)i+=t,s=r[i];return t===-1&&Zv.test(s)&&i++,i}selectWord(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const r=this.searchWordBoundary(e,-1),i=Math.max(r,this.searchWordBoundary(e,1));this.selectionStart=r,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const r=this.findLineBoundaryLeft(e),i=this.findLineBoundaryRight(e);this.selectionStart=r,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;Tn(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),i=this.selectionStart,s=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&i!==s||i!==r&&s!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const i=r.slice(0,e),s=this.graphemeSplit(i).length;if(e===t)return{selectionStart:s,selectionEnd:s};const o=r.slice(e,t);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(e,t,r){const i=r.slice(0,e).join("").length;return e===t?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),i=r.lineIndex,s=r.charIndex,o=this.getValueOfPropertyAt(i,s,"fontSize")*this.lineHeight,a=t.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,u=c.width/l,h=c.height/l,d=u-o,f=h-o,g=new P(t.left+a,t.top+t.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new P(c.clientWidth/u,c.clientHeight/h));return g.x<0&&(g.x=0),g.x>d&&(g.x=d),g.y<0&&(g.y=0),g.y>f&&(g.y=f),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:"".concat(g.x,"px"),top:"".concat(g.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(ku),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:o}=this.get2DCursorLocation(t,!0);if(r!==s){if(this.styles[r])for(let a=i;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[s])for(let a=o;a<this._unwrappedTextLines[s].length;a++){const l=this.styles[s][a];l&&(this.styles[r]||(this.styles[r]={}),this.styles[r][i+a-o]=l)}for(let a=r+1;a<=s;a++)delete this.styles[a];this.shiftLineStyles(s,r-s)}else if(this.styles[r]){const a=this.styles[r],l=o-i;for(let c=i;c<o;c++)delete a[c];for(const c in this.styles[r]){const u=parseInt(c,10);u>=o&&(a[u-l]=a[c],delete a[c])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const i in this.styles){const s=parseInt(i,10);s>e&&(this.styles[s+t]=r[s],r[s-t]||delete this.styles[s])}}insertNewlineStyleObject(e,t,r,i){const s={},o=this._unwrappedTextLines[e].length,a=o===t;let l=!1;r||(r=1),this.shiftLineStyles(e,r);const c=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const h in this.styles[e]){const d=parseInt(h,10);d>=t&&(l=!0,s[d-t]=this.styles[e][h],a&&t===0||delete this.styles[e][h])}let u=!1;for(l&&!a&&(this.styles[e+r]=s,u=!0),(u||o>t)&&r--;r>0;)i&&i[r-1]?this.styles[e+r]={0:E({},i[r-1])}:c?this.styles[e+r]={0:E({},c)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,i){this.styles||(this.styles={});const s=this.styles[e],o=s?E({},s):{};r||(r=1);for(const l in o){const c=parseInt(l,10);c>=t&&(s[c+r]=o[c],o[c-r]||delete s[c])}if(this._forceClearCache=!0,i){for(;r--;)Object.keys(i[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=E({},i[r]));return}if(!s)return;const a=s[t?t-1:1];for(;a&&r--;)this.styles[e][t+r]=E({},a)}insertNewStyleBlock(e,t,r){const i=this.get2DCursorLocation(t,!0),s=[0];let o,a=0;for(let l=0;l<e.length;l++)e[l]===`
`?(a++,s[a]=0):s[a]++;for(s[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,s[0],r),r=r&&r.slice(s[0]+1)),a&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+s[0],a),o=1;o<a;o++)s[o]>0?this.insertCharStyleObject(i.lineIndex+o,0,s[o],r):r&&this.styles[i.lineIndex+o]&&r[0]&&(this.styles[i.lineIndex+o][0]=r[0]),r=r&&r.slice(s[o]+1);s[o]>0&&this.insertCharStyleObject(i.lineIndex+o,0,s[o],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;i>r&&this.removeStyleFromTo(r,i);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,r,t),this._text=[...this._text.slice(0,r),...s,...this._text.slice(i)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=ce:this._selectionDirection===Oe&&(this._selectionDirection=ce,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===Oe?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=Oe:this._selectionDirection===ce&&(this._selectionDirection=Oe,this.selectionStart=t),this.selectionEnd=r)}}class tj extends ej{initHiddenTextarea(){const e=this.canvas&&Tn(this.canvas.getElement())||Io(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[a,l]=o;return t.setAttribute(a,l)});const{top:r,left:i,fontSize:s}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(i,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[a,l]=o;return t.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:r,selectionStart:i,selectionEnd:s}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const o=()=>{this.updateFromTextArea(),this.fire(Tu),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void o();const a=this._splitTextIntoLines(r).graphemeText,l=this._text.length,c=a.length,u=this.selectionStart,h=this.selectionEnd,d=u!==h;let f,g,p,y,v=c-l;const m=this.fromStringToGraphemeSelection(i,s,r),w=u>m.selectionStart;d?(g=this._text.slice(u,h),v+=h-u):c<l&&(g=w?this._text.slice(h+v,h):this._text.slice(u,u-v));const b=a.slice(m.selectionEnd-v,m.selectionEnd);if(g&&g.length&&(b.length&&(f=this.getSelectionStyles(u,u+1,!1),f=b.map(()=>f[0])),d?(p=u,y=h):w?(p=h-g.length,y=h):(p=h,y=h+g.length),this.removeStyleFromTo(p,y)),b.length){const{copyPasteData:S}=Qn();t&&b.join("")===S.copiedText&&!oe.disableStyleCopyPaste&&(f=S.copiedTextStyle),this.insertNewStyleBlock(b,u,f)}o()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:i}=t;this.compositionStart=r,this.compositionEnd=i,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Qn();e.copiedText=this.getSelectedText(),oe.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,i=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],i+=r.left+r.width),i}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(r),s=i.lineIndex;if(s===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const o=i.charIndex,a=this._getWidthBeforeCursor(s,o),l=this._getIndexOnLine(s+1,a);return this._textLines[s].slice(o).length+l+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(r),s=i.lineIndex;if(s===0||e.metaKey||e.keyCode===33)return-r;const o=i.charIndex,a=this._getWidthBeforeCursor(s,o),l=this._getIndexOnLine(s-1,a),c=this._textLines[s].slice(0,o),u=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+l-c.length+(1-u)}_getIndexOnLine(e,t){const r=this._textLines[e];let i,s,o=this._getLineLeftOffset(e),a=0;for(let l=0,c=r.length;l<c;l++)if(i=this.__charBounds[e][l].width,o+=i,o>t){s=!0;const u=o-i,h=o,d=Math.abs(u-t);a=Math.abs(h-t)<d?l:l-1;break}return s||(a=r.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Oe);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const i=this.text.length;this.selectionStart=Oo(0,this.selectionStart,i),this.selectionEnd=Oo(0,this.selectionEnd,i),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===ce?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let i;if(e.altKey)i=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;i=this["findLineBoundary".concat(r)](this[t])}return i!==void 0&&this[t]!==i&&(this[t]=i,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=ce,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Oe&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=ce,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===ce&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Oe,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Oe,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const e0=n=>!!n.button;class nj extends tj{constructor(){super(...arguments),k(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new ZM(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:r}=e;this.canvas&&this.editable&&!e0(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),r&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=r||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:r}=e;const i=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||e0(t)||i||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,i=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,i,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(kn(this.calcTransformMatrix())).add(new P(-this._getLeftOffset(),-this._getTopOffset()));let r=0,i=0,s=0;for(let c=0;c<this._textLines.length&&r<=t.y;c++)r+=this.getHeightOfLine(c),s=c,c>0&&(i+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));let o=Math.abs(this._getLineLeftOffset(s));const a=this._textLines[s].length,l=this.__charBounds[s];for(let c=0;c<a;c++){const u=o+l[c].kernedWidth;if(t.x<=u){Math.abs(t.x-u)<=Math.abs(t.x-o)&&i++;break}o=u,i++}return Math.min(this.flipX?a-i:i,this._text.length)}}const ic="moveCursorUp",sc="moveCursorDown",oc="moveCursorLeft",ac="moveCursorRight",lc="exitEditing",t0=(n,e)=>{const t=e.getRetinaScaling();n.setTransform(t,0,0,t,0,0);const r=e.viewportTransform;n.transform(r[0],r[1],r[2],r[3],r[4],r[5])},rj=E({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:lc,27:lc,33:ic,34:sc,35:ac,36:oc,37:oc,38:ic,39:ac,40:sc},keysMapRtl:{9:lc,27:lc,33:ic,34:sc,35:oc,36:ac,37:ac,38:ic,39:oc,40:sc},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class gr extends nj{static getDefaults(){return E(E({},super.getDefaults()),gr.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,E(E({},gr.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof fp&&this.canvas.textEditingManager.remove(this),t instanceof fp&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),r=this.findAncestorsWithClipPath(),i=r.length>0;let s,o=e;if(i){s=an(e.canvas),o=s.getContext("2d"),t0(o,this.canvas);const a=this.calcTransformMatrix();o.transform(a[0],a[1],a[2],a[3],a[4],a[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(o,t):this.renderCursor(o,t),i)for(const a of r){const l=a.clipPath,c=an(e.canvas),u=c.getContext("2d");if(t0(u,this.canvas),!l.absolutePositioned){const h=a.calcTransformMatrix();u.transform(h[0],h[1],h[2],h[3],h[4],h[5])}l.transform(u),l.drawObject(u,!0,{}),this.drawClipPathOnCache(o,l,c)}i&&(e.setTransform(1,0,0,1,0,0),e.drawImage(s,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),i=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,t);return{left:r,top:i,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:i,lineIndex:s}=this.get2DCursorLocation(e);for(let c=0;c<s;c++)t+=this.getHeightOfLine(c);const o=this._getLineLeftOffset(s),a=this.__charBounds[s][i];a&&(r=a.left),this.charSpacing!==0&&i===this._textLines[s].length&&(r-=this._getWidthOfCharSpacing());const l={top:t,left:o+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===Oe||this.textAlign===Un||this.textAlign===ka?l.left*=-1:this.textAlign===ce||this.textAlign===Au?l.left=o-(r>0?r:0):this.textAlign!==ne&&this.textAlign!==Ea||(l.left=o-(r>0?r:0))),l}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),i=r.lineIndex,s=r.charIndex>0?r.charIndex-1:0,o=this.getValueOfPropertyAt(i,s,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/a,c=this.getValueOfPropertyAt(i,s,"deltaY"),u=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(i,s,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-l/2,top:u+t.top+c,width:l,height:o}}_renderCursor(e,t,r){const{color:i,opacity:s,left:o,top:a,width:l,height:c}=this.getCursorRenderingData(r,t);e.fillStyle=i,e.globalAlpha=s,e.fillRect(o,a,l,c)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const i=t.selectionStart,s=t.selectionEnd,o=this.textAlign.includes(Un),a=this.get2DCursorLocation(i),l=this.get2DCursorLocation(s),c=a.lineIndex,u=l.lineIndex,h=a.charIndex<0?0:a.charIndex,d=l.charIndex<0?0:l.charIndex;for(let f=c;f<=u;f++){const g=this._getLineLeftOffset(f)||0;let p=this.getHeightOfLine(f),y=0,v=0,m=0;if(f===c&&(v=this.__charBounds[c][h].left),f>=c&&f<u)m=o&&!this.isEndOfWrapping(f)?this.width:this.getLineWidth(f)||5;else if(f===u)if(d===0)m=this.__charBounds[u][d].left;else{const T=this._getWidthOfCharSpacing();m=this.__charBounds[u][d-1].left+this.__charBounds[u][d-1].width-T}y=p,(this.lineHeight<1||f===u&&this.lineHeight>1)&&(p/=this.lineHeight);let w=r.left+g+v,b=p,S=0;const _=m-v;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",b=1,S=p):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Oe||this.textAlign===Un||this.textAlign===ka?w=this.width-w-_:this.textAlign===ce||this.textAlign===Au?w=r.left+g-m:this.textAlign!==ne&&this.textAlign!==Ea||(w=r.left+g-m)),e.fillRect(w,r.top+r.topOffset+S,_,b),r.topOffset+=y}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,He)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}k(gr,"ownDefaults",rj),k(gr,"type","IText"),U.setClass(gr),U.setClass(gr,"i-text");class Vi extends gr{static getDefaults(){return E(E({},super.getDefaults()),Vi.ownDefaults)}constructor(e,t){super(e,E(E({},Vi.ownDefaults),t))}static createControls(){return{controls:MD()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Un)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,i=0;const s={};for(let o=0;o<e.graphemeLines.length;o++)e.graphemeText[i]===`
`&&o>0?(r=0,i++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[i])&&o>0&&(r++,i++),s[o]={line:t,offset:r},i+=e.graphemeLines[o].length,r+=e.graphemeLines[o].length;return s}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,i=e+1,s=!1;const o=this._styleMap[e],a=this._styleMap[e+1];o&&(e=o.line,r=o.offset),a&&(i=a.line,s=i===e,t=a.offset);const l=e===void 0?this.styles:{line:this.styles[e]};for(const c in l)for(const u in l[c]){const h=parseInt(u,10);if(h>=r&&(!s||h<t))for(const d in l[c][u])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const i=this._styleMap[e];super._setStyleDeclaration(i.line,i.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),i=[];for(let s=0;s<r.wordsData.length;s++)i.push(...this._wrapLine(s,t,r));return this.isWrapping=!1,i}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let i=0;return{wordsData:e.map((s,o)=>{let a=0;const l=t?this.graphemeSplit(s):this.wordSplit(s);return l.length===0?[{word:[],width:0}]:l.map(c=>{const u=t?[c]:this.graphemeSplit(c),h=this._measureWord(u,o,a);return i=Math.max(h,i),a+=u.length+r.length,{word:u,width:h}})}),largestWordWidth:i}}_measureWord(e,t){let r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let o=0,a=e.length;o<a;o++)s+=this._getGraphemeBox(e[o],t,o+i,r,!0).kernedWidth,r=e[o];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:i,wordsData:s}=r,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,c=[],u=l?"":" ";let h=0,d=[],f=0,g=0,p=!0;t-=o;const y=Math.max(t,i,this.dynamicMinWidth),v=s[e];let m;for(f=0,m=0;m<v.length;m++){const{word:w,width:b}=v[m];f+=w.length,h+=g+b-a,h>y&&!p?(c.push(d),d=[],h=b,p=!0):h+=a,p||l||d.push(u),d=d.concat(w),g=l?0:this._measureWord([u],e,f),f++,p=!1}return m&&c.push(d),i+o>this.dynamicMinWidth&&(this.dynamicMinWidth=i-a+o),c}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),i=new Array(r.length);for(let s=0;s<r.length;s++)i[s]=r[s].join("");return t.lines=i,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const i=this._styleMap[t].line;e.set("".concat(i),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}k(Vi,"type","Textbox"),k(Vi,"textLayoutProperties",[...gr.textLayoutProperties,"width"]),k(Vi,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),U.setClass(Vi);class n0 extends Eh{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:i,group:s}=r;if(!i||!this.shouldPerformLayout(e))return;const{width:o,height:a}=yr(C_(r,i)),l=new P(o,a);if(i.absolutePositioned)return{center:lo(i.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:l};{const c=i.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:u=new P,correction:h=new P}=this.calcBoundingBox(t,e)||{};return{center:u.add(c),correction:h.subtract(c),size:l}}return{center:r.getRelativeCenterPoint().add(c),size:l}}}}k(n0,"type","clip-path"),U.setClass(n0);class r0 extends Eh{getInitialSize(e,t){let{target:r}=e,{size:i}=t;return new P(r.width||i.x,r.height||i.y)}}k(r0,"type","fixed"),U.setClass(r0);class ij extends il{subscribeTargets(e){const t=e.target;e.targets.reduce((r,i)=>(i.parent&&r.add(i.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((i,s)=>(s.parent&&i.add(s.parent),i),new Set).forEach(i=>{!r.some(s=>s.parent===i)&&i.layoutManager.unsubscribeTargets({target:i,targets:[t]})})}}class Gi extends rs{static getDefaults(){return E(E({},super.getDefaults()),Gi.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Gi.ownDefaults),this.setOptions(t);const{left:r,top:i,layoutManager:s}=t;this.groupInit(e,{left:r,top:i,layoutManager:s??new ij})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(i=>{const s=this._objects.findIndex(a=>a.isInFrontOf(i)),o=s===-1?this.size():s;this.insertAt(o,i)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(Si("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(i=>{const{parent:s}=i;s&&r.add(s)}),e===sm?r.forEach(i=>{i._onAfterObjectsChange(Du,t)}):r.forEach(i=>{i._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const i=E(E({hasControls:!1},r),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,i);super._renderControls(e,t),e.restore()}}k(Gi,"type","ActiveSelection"),k(Gi,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),U.setClass(Gi),U.setClass(Gi,"activeSelection");class sj{constructor(){k(this,"resources",{})}applyFilters(e,t,r,i,s){const o=s.getContext("2d");if(!o)return;o.drawImage(t,0,0,r,i);const a={sourceWidth:r,sourceHeight:i,imageData:o.getImageData(0,0,r,i),originalEl:t,originalImageData:o.getImageData(0,0,r,i),canvasEl:s,ctx:o,filterBackend:this};e.forEach(c=>{c.applyTo(a)});const{imageData:l}=a;return l.width===r&&l.height===i||(s.width=l.width,s.height=l.height),o.putImageData(l,0,0),a}}class z_{constructor(){let{tileSize:e=oe.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};k(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),k(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=an({width:e,height:t}),i=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});i&&(i.clearColor(0,0,0,0),this.canvas=r,this.gl=i)}applyFilters(e,t,r,i,s,o){const a=this.gl,l=s.getContext("2d");if(!a||!l)return;let c;o&&(c=this.getCachedTexture(o,t));const u={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:i,destinationWidth:r,destinationHeight:i,context:a,sourceTexture:this.createTexture(a,r,i,c?void 0:t),targetTexture:this.createTexture(a,r,i),originalTexture:c||this.createTexture(a,r,i,c?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},h=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,h),e.forEach(d=>{d&&d.applyTo(u)}),function(d){const f=d.targetCanvas,g=f.width,p=f.height,y=d.destinationWidth,v=d.destinationHeight;g===y&&p===v||(f.width=y,f.height=v)}(u),this.copyGLTo2D(a,u),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(u.sourceTexture),a.deleteTexture(u.targetTexture),a.deleteFramebuffer(h),l.setTransform(1,0,0,1,0,0),u}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,i,s){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:u,TEXTURE_MAG_FILTER:h,TEXTURE_MIN_FILTER:d,TEXTURE_WRAP_S:f,TEXTURE_WRAP_T:g}=e,p=e.createTexture();return e.bindTexture(a,p),e.texParameteri(a,h,s||o),e.texParameteri(a,d,s||o),e.texParameteri(a,f,u),e.texParameteri(a,g,u),i?e.texImage2D(a,0,l,l,c,i):e.texImage2D(a,0,l,t,r,0,l,c,null),p}getCachedTexture(e,t,r){const{textureCache:i}=this;if(i[e])return i[e];{const s=this.createTexture(this.gl,t.width,t.height,t,r);return s&&(i[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,i=t.targetCanvas,s=i.getContext("2d");if(!s)return;s.translate(0,i.height),s.scale(1,-1);const o=r.height-i.height;s.drawImage(r,0,o,i.width,i.height,0,0,i.width,i.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),i=t.destinationWidth,s=t.destinationHeight,o=i*s*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,i,s,e.RGBA,e.UNSIGNED_BYTE,a);const c=new ImageData(l,i,s);r.putImageData(c,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const i=e.getParameter(r.UNMASKED_RENDERER_WEBGL),s=e.getParameter(r.UNMASKED_VENDOR_WEBGL);i&&(t.renderer=i.toLowerCase()),s&&(t.vendor=s.toLowerCase())}return this.gpuInfo=t,t}}let jd;function oj(){const{WebGLProbe:n}=Qn();return n.queryWebGL(kr()),oe.enableGLFiltering&&n.isSupported(oe.textureSize)?new z_({tileSize:oe.textureSize}):new sj}function Ld(){return!jd&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(jd=oj()),jd}const aj=["filters","resizeFilter","src","crossOrigin","type"],$_=["cropX","cropY"];class Kt extends st{static getDefaults(){return E(E({},super.getDefaults()),Kt.ownDefaults)}constructor(e,t){super(),k(this,"_lastScaleX",1),k(this,"_lastScaleY",1),k(this,"_filterScalingX",1),k(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Kt.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(_i()),this.setElement(typeof e=="string"?(this.canvas&&Tn(this.canvas.getElement())||Io()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(r),(t=e.classList)===null||t===void 0||t.add(Kt.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Ld(!1);t instanceof z_&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Qn().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),E(E({},super.toObject([...$_,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,i=-this.height/2;let s=[],o=[],a="",l="";if(!t)return[];if(this.hasCrop()){const c=_i();s.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+r+'" y="'+i+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(i-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(l).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const c=this.fill;this.fill=null,o=['	<rect x="'.concat(r,'" y="').concat(i,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=c}return s=this.paintFirst!==He?s.concat(o,e):s.concat(e,o),s}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Vc(e,{crossOrigin:t,signal:r}).then(i=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(i)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),i=r.x,s=r.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||i>t&&s>t)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=s);const a=an(o),{width:l,height:c}=o;this._element=a,this._lastScaleX=e.scaleX=i,this._lastScaleY=e.scaleY=s,Ld().applyFilters([e],o,l,c,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(s=>s&&!s.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,i=t.naturalHeight||t.height;if(this._element===this._originalElement){const s=an({width:r,height:i});this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,i),this._lastScaleX=1,this._lastScaleY=1);Ld().applyFilters(e,this._originalElement,r,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,i=this._filterScalingY,s=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=t.naturalWidth||t.width,u=t.naturalHeight||t.height,h=a*r,d=l*i,f=Math.min(s*r,c-h),g=Math.min(o*i,u-d),p=-s/2,y=-o/2,v=Math.min(s,c/r-a),m=Math.min(o,u/i-l);t&&e.drawImage(t,h,d,f,g,p,y,v,m)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=J2(this.preserveAspectRatio||""),t=this.width,r=this.height,i={width:t,height:r};let s,o=this._element.width,a=this._element.height,l=1,c=1,u=0,h=0,d=0,f=0;return!e||e.alignX===Rt&&e.alignY===Rt?(l=t/o,c=r/a):(e.meetOrSlice==="meet"&&(l=c=fM(this._element,i),s=(t-o*l)/2,e.alignX==="Min"&&(u=-s),e.alignX==="Max"&&(u=s),s=(r-a*c)/2,e.alignY==="Min"&&(h=-s),e.alignY==="Max"&&(h=s)),e.meetOrSlice==="slice"&&(l=c=pM(this._element,i),s=o-t/l,e.alignX==="Mid"&&(d=s/2),e.alignX==="Max"&&(d=s),s=a-r/c,e.alignY==="Mid"&&(f=s/2),e.alignY==="Max"&&(f=s),o=t/l,a=r/c)),{width:o,height:a,scaleX:l,scaleY:c,offsetLeft:u,offsetTop:h,cropX:d,cropY:f}}static fromObject(e,t){let{filters:r,resizeFilter:i,src:s,crossOrigin:o,type:a}=e,l=Se(e,aj);return Promise.all([Vc(s,E(E({},t),{},{crossOrigin:o})),r&&el(r,t),i&&el([i],t),_h(l,t)]).then(c=>{let[u,h=[],[d]=[],f={}]=c;return new this(u,E(E({},l),{},{src:s,filters:h,resizeFilter:d},f))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return Vc(e,{crossOrigin:t,signal:r}).then(s=>new this(s,i))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const i=Ar(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(i["xlink:href"]||i.href,t,i).catch(s=>(Si("log","Unable to parse Image",s),null))}}k(Kt,"type","Image"),k(Kt,"cacheProperties",[...Or,...$_]),k(Kt,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),k(Kt,"CSS_CANVAS","canvas-img"),k(Kt,"ATTRIBUTE_NAMES",[...Ei,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),U.setClass(Kt),U.setSVGClass(Kt);Th(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Ph=n=>n.webgl!==void 0,om="precision highp float",lj=`
    `.concat(om,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),cj=["type"],uj=["type"],hj=new RegExp(om,"g");class Ue{get type(){return this.constructor.type}constructor(){let e=Se(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},cj);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return lj}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:i="highp"}}=Qn();i!=="highp"&&(t=t.replace(hj,om.replace("highp",i)));const s=e.createShader(e.VERTEX_SHADER),o=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!s||!o||!a)throw new Gn("Vertex, fragment shader or program creation error");if(e.shaderSource(s,r),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new Gn("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new Gn("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.attachShader(a,s),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Gn('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:l}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,i={};for(let s=0;s<r.length;s++)i[r[s]]=e.getUniformLocation(t,r[s]);return i}sendAttributeData(e,t,r){const i=t.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,i=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===i||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,i)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){Ph(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,i=an({width:t,height:r});e.helpLayer=i}}toObject(){const e=Object.keys(this.constructor.defaults||{});return E({type:this.type},e.reduce((t,r)=>(t[r]=this[r],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Se(e,uj))}}k(Ue,"type","BaseFilter"),k(Ue,"uniformLocations",[]);const dj={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class cc extends Ue{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(dj[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new le(this.color).getSource(),i=this.alpha,s=r[0]*i,o=r[1]*i,a=r[2]*i,l=1-i;for(let c=0;c<t.length;c+=4){const u=t[c],h=t[c+1],d=t[c+2];let f,g,p;switch(this.mode){case"multiply":f=u*s/255,g=h*o/255,p=d*a/255;break;case"screen":f=255-(255-u)*(255-s)/255,g=255-(255-h)*(255-o)/255,p=255-(255-d)*(255-a)/255;break;case"add":f=u+s,g=h+o,p=d+a;break;case"difference":f=Math.abs(u-s),g=Math.abs(h-o),p=Math.abs(d-a);break;case"subtract":f=u-s,g=h-o,p=d-a;break;case"darken":f=Math.min(u,s),g=Math.min(h,o),p=Math.min(d,a);break;case"lighten":f=Math.max(u,s),g=Math.max(h,o),p=Math.max(d,a);break;case"overlay":f=s<128?2*u*s/255:255-2*(255-u)*(255-s)/255,g=o<128?2*h*o/255:255-2*(255-h)*(255-o)/255,p=a<128?2*d*a/255:255-2*(255-d)*(255-a)/255;break;case"exclusion":f=s+u-2*s*u/255,g=o+h-2*o*h/255,p=a+d-2*a*d/255;break;case"tint":f=s+u*l,g=o+h*l,p=a+d*l}t[c]=f,t[c+1]=g,t[c+2]=p}}sendUniformData(e,t){const r=new le(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}k(cc,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),k(cc,"type","BlendColor"),k(cc,"uniformLocations",["uColor"]),U.setClass(cc);const fj={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},pj=["type","image"];class uc extends Ue{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return fj[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:i},filterBackend:{resources:s}}=e;const o=this.image;s.blendImage||(s.blendImage=kr());const a=s.blendImage,l=a.getContext("2d");a.width!==r||a.height!==i?(a.width=r,a.height=i):l.clearRect(0,0,r,i),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,r,i);const c=l.getImageData(0,0,r,i).data;for(let u=0;u<t.length;u+=4){const h=t[u],d=t[u+1],f=t[u+2],g=t[u+3],p=c[u],y=c[u+1],v=c[u+2],m=c[u+3];switch(this.mode){case"multiply":t[u]=h*p/255,t[u+1]=d*y/255,t[u+2]=f*v/255,t[u+3]=g*m/255;break;case"mask":t[u+3]=m}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return E(E({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:i}=e,s=Se(e,pj);return Kt.fromObject(i,t).then(o=>new this(E(E({},s),{},{image:o})))}}k(uc,"type","BlendImage"),k(uc,"defaults",{mode:"multiply",alpha:1}),k(uc,"uniformLocations",["uTransformMatrix","uImage"]),U.setClass(uc);class hc extends Ue{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(e){Ph(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:r,height:i}}=e;this.aspectRatio=r/i,this.horizontal=!0;let s=this.getBlurValue()*r;const o=new Uint8ClampedArray(t),a=15,l=4*r;for(let c=0;c<t.length;c+=4){let u=0,h=0,d=0,f=0,g=0;const p=c-c%l,y=p+l;for(let v=-14;v<a;v++){const m=v/a,w=4*Math.floor(s*m),b=1-Math.abs(m);let S=c+w;S<p?S=p:S>y&&(S=y);const _=t[S+3]*b;u+=t[S]*_,h+=t[S+1]*_,d+=t[S+2]*_,f+=_,g+=b}o[c]=u/f,o[c+1]=h/f,o[c+2]=d/f,o[c+3]=f/g}this.horizontal=!1,s=this.getBlurValue()*i;for(let c=0;c<o.length;c+=4){let u=0,h=0,d=0,f=0,g=0;const p=c%l,y=o.length-l+p;for(let v=-14;v<a;v++){const m=v/a,w=Math.floor(s*m)*l,b=1-Math.abs(m);let S=c+w;S<p?S=p:S>y&&(S=y);const _=o[S+3]*b;u+=o[S]*_,h+=o[S+1]*_,d+=o[S+2]*_,f+=_,g+=b}t[c]=u/f,t[c+1]=h/f,t[c+2]=d/f,t[c+3]=f/g}}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:r}=this;return t?r>1&&(e=1/r):r<1&&(e=r),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}k(hc,"type","Blur"),k(hc,"defaults",{blur:0}),k(hc,"uniformLocations",["uDelta"]),U.setClass(hc);class dc extends Ue{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let i=0;i<t.length;i+=4)t[i]+=r,t[i+1]+=r,t[i+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}k(dc,"type","Brightness"),k(dc,"defaults",{brightness:0}),k(dc,"uniformLocations",["uBrightness"]),U.setClass(dc);const H_={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Js extends Ue{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,i=this.colorsOnly;for(let s=0;s<t.length;s+=4){const o=t[s],a=t[s+1],l=t[s+2];if(t[s]=o*r[0]+a*r[1]+l*r[2]+255*r[4],t[s+1]=o*r[5]+a*r[6]+l*r[7]+255*r[9],t[s+2]=o*r[10]+a*r[11]+l*r[12]+255*r[14],!i){const c=t[s+3];t[s]+=c*r[3],t[s+1]+=c*r[8],t[s+2]+=c*r[13],t[s+3]=o*r[15]+a*r[16]+l*r[17]+c*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,i=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],s=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,i),e.uniform4fv(t.uConstants,s)}toObject(){return E(E({},super.toObject()),{},{matrix:[...this.matrix]})}}function gs(n,e){var t;const r=(k(t=class extends Js{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),k(t,"defaults",{colorsOnly:!1,matrix:e}),t);return U.setClass(r,n),r}k(Js,"type","ColorMatrix"),k(Js,"defaults",H_),k(Js,"uniformLocations",["uColorMatrix","uConstants"]),U.setClass(Js);gs("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);gs("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);gs("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);gs("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);gs("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);gs("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);gs("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class i0 extends Ue{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){Ph(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>U.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}k(i0,"type","Composed"),U.setClass(i0);class fc extends Ue{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),i=259*(r+255)/(255*(259-r));for(let s=0;s<t.length;s+=4)t[s]=i*(t[s]-128)+128,t[s+1]=i*(t[s+1]-128)+128,t[s+2]=i*(t[s+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}k(fc,"type","Contrast"),k(fc,"defaults",{contrast:0}),k(fc,"uniformLocations",["uContrast"]),U.setClass(fc);const gj={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class pc extends Ue{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return gj[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,i=this.matrix,s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),a=t.width,l=t.height,c=e.ctx.createImageData(a,l),u=c.data,h=this.opaque?1:0;let d,f,g,p,y,v,m,w,b,S,_,T,R;for(_=0;_<l;_++)for(S=0;S<a;S++){for(y=4*(_*a+S),d=0,f=0,g=0,p=0,R=0;R<s;R++)for(T=0;T<s;T++)m=_+R-o,v=S+T-o,m<0||m>=l||v<0||v>=a||(w=4*(m*a+v),b=i[R*s+T],d+=r[w]*b,f+=r[w+1]*b,g+=r[w+2]*b,h||(p+=r[w+3]*b));u[y]=d,u[y+1]=f,u[y+2]=g,u[y+3]=h?r[y+3]:p}e.imageData=c}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return E(E({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}k(pc,"type","Convolute"),k(pc,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),k(pc,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),U.setClass(pc);const U_="Gamma";class gc extends Ue{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,i=1/r[0],s=1/r[1],o=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,i),a.g[l]=255*Math.pow(l/255,s),a.b[l]=255*Math.pow(l/255,o);for(let l=0;l<t.length;l+=4)t[l]=a.r[t[l]],t[l+1]=a.g[t[l+1]],t[l+2]=a.b[t[l+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:U_,gamma:this.gamma.concat()}}}k(gc,"type",U_),k(gc,"defaults",{gamma:[1,1,1]}),k(gc,"uniformLocations",["uGamma"]),U.setClass(gc);const mj={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class mc extends Ue{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,i=0;i<t.length;i+=4){const s=t[i],o=t[i+1],a=t[i+2];switch(this.mode){case"average":r=(s+o+a)/3;break;case"lightness":r=(Math.min(s,o,a)+Math.max(s,o,a))/2;break;case"luminosity":r=.21*s+.72*o+.07*a}t[i+2]=t[i+1]=t[i]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return mj[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}k(mc,"type","Grayscale"),k(mc,"defaults",{mode:"average"}),k(mc,"uniformLocations",["uMode"]),U.setClass(mc);const yj=E(E({},H_),{},{rotation:0});class Nd extends Js{calculateMatrix(){const e=this.rotation*Math.PI,t=Cr(e),r=Tr(e),i=1/3,s=Math.sqrt(i)*r,o=1-t;this.matrix=[t+o/3,i*o-s,i*o+s,0,0,i*o+s,t+i*o,i*o-s,0,0,i*o-s,i*o+s,t+i*o,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}k(Nd,"type","HueRotation"),k(Nd,"defaults",yj),U.setClass(Nd);class yc extends Ue{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}k(yc,"type","Invert"),k(yc,"defaults",{alpha:!1,invert:!0}),k(yc,"uniformLocations",["uInvert","uAlpha"]),U.setClass(yc);class vc extends Ue{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let i=0;i<t.length;i+=4){const s=(.5-Math.random())*r;t[i]+=s,t[i+1]+=s,t[i+2]+=s}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}k(vc,"type","Noise"),k(vc,"defaults",{noise:0}),k(vc,"uniformLocations",["uNoise","uSeed"]),U.setClass(vc);class wc extends Ue{applyTo2d(e){let{imageData:{data:t,width:r,height:i}}=e;for(let s=0;s<i;s+=this.blocksize)for(let o=0;o<r;o+=this.blocksize){const a=4*s*r+4*o,l=t[a],c=t[a+1],u=t[a+2],h=t[a+3];for(let d=s;d<Math.min(s+this.blocksize,i);d++)for(let f=o;f<Math.min(o+this.blocksize,r);f++){const g=4*d*r+4*f;t[g]=l,t[g+1]=c,t[g+2]=u,t[g+3]=h}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}k(wc,"type","Pixelate"),k(wc,"defaults",{blocksize:4}),k(wc,"uniformLocations",["uBlocksize"]),U.setClass(wc);class xc extends Ue{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,i=new le(this.color).getSource(),s=[i[0]-r,i[1]-r,i[2]-r],o=[i[0]+r,i[1]+r,i[2]+r];for(let a=0;a<t.length;a+=4){const l=t[a],c=t[a+1],u=t[a+2];l>s[0]&&c>s[1]&&u>s[2]&&l<o[0]&&c<o[1]&&u<o[2]&&(t[a+3]=0)}}sendUniformData(e,t){const r=new le(this.color).getSource(),i=this.distance,s=[0+r[0]/255-i,0+r[1]/255-i,0+r[2]/255-i,1],o=[r[0]/255+i,r[1]/255+i,r[2]/255+i,1];e.uniform4fv(t.uLow,s),e.uniform4fv(t.uHigh,o)}}k(xc,"type","RemoveColor"),k(xc,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),k(xc,"uniformLocations",["uLow","uHigh"]),U.setClass(xc);class bc extends Ue{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),i=new Array(r);for(let s=1;s<=r;s++)i[s-1]=e(s*t);return i}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,i)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(i,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(i,`];
              sum += 2.0 * uTaps[`).concat(i,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){Ph(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,i=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/i;const s=t.width,o=t.height,a=Math.round(s*r),l=Math.round(o*i);let c;c=this.resizeType==="sliceHack"?this.sliceByTwo(e,s,o,a,l):this.resizeType==="hermite"?this.hermiteFastResize(e,s,o,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,s,o,a,l):this.resizeType==="lanczos"?this.lanczosResize(e,s,o,a,l):new ImageData(a,l),e.imageData=c}sliceByTwo(e,t,r,i,s){const o=e.imageData,a=.5;let l=!1,c=!1,u=t*a,h=r*a;const d=e.filterBackend.resources;let f=0,g=0;const p=t;let y=0;d.sliceByTwo||(d.sliceByTwo=kr());const v=d.sliceByTwo;(v.width<1.5*t||v.height<r)&&(v.width=1.5*t,v.height=r);const m=v.getContext("2d");for(m.clearRect(0,0,1.5*t,r),m.putImageData(o,0,0),i=Math.floor(i),s=Math.floor(s);!l||!c;)t=u,r=h,i<Math.floor(u*a)?u=Math.floor(u*a):(u=i,l=!0),s<Math.floor(h*a)?h=Math.floor(h*a):(h=s,c=!0),m.drawImage(v,f,g,t,r,p,y,u,h),f=p,g=y,y+=h;return m.getImageData(f,g,i,s)}lanczosResize(e,t,r,i,s){const o=e.imageData.data,a=e.ctx.createImageData(i,s),l=a.data,c=this.lanczosCreate(this.lanczosLobes),u=this.rcpScaleX,h=this.rcpScaleY,d=2/this.rcpScaleX,f=2/this.rcpScaleY,g=Math.ceil(u*this.lanczosLobes/2),p=Math.ceil(h*this.lanczosLobes/2),y={},v={x:0,y:0},m={x:0,y:0};return function w(b){let S,_,T,R,A,M,B,L,z,N,G;for(v.x=(b+.5)*u,m.x=Math.floor(v.x),S=0;S<s;S++){for(v.y=(S+.5)*h,m.y=Math.floor(v.y),A=0,M=0,B=0,L=0,z=0,_=m.x-g;_<=m.x+g;_++)if(!(_<0||_>=t)){N=Math.floor(1e3*Math.abs(_-v.x)),y[N]||(y[N]={});for(let $=m.y-p;$<=m.y+p;$++)$<0||$>=r||(G=Math.floor(1e3*Math.abs($-v.y)),y[N][G]||(y[N][G]=c(Math.sqrt(Math.pow(N*d,2)+Math.pow(G*f,2))/1e3)),T=y[N][G],T>0&&(R=4*($*t+_),A+=T,M+=T*o[R],B+=T*o[R+1],L+=T*o[R+2],z+=T*o[R+3]))}R=4*(S*i+b),l[R]=M/A,l[R+1]=B/A,l[R+2]=L/A,l[R+3]=z/A}return++b<i?w(b):a}(0)}bilinearFiltering(e,t,r,i,s){let o,a,l,c,u,h,d,f,g,p,y,v,m,w=0;const b=this.rcpScaleX,S=this.rcpScaleY,_=4*(t-1),T=e.imageData.data,R=e.ctx.createImageData(i,s),A=R.data;for(d=0;d<s;d++)for(f=0;f<i;f++)for(u=Math.floor(b*f),h=Math.floor(S*d),g=b*f-u,p=S*d-h,m=4*(h*t+u),y=0;y<4;y++)o=T[m+y],a=T[m+4+y],l=T[m+_+y],c=T[m+_+4+y],v=o*(1-g)*(1-p)+a*g*(1-p)+l*p*(1-g)+c*g*p,A[w++]=v;return R}hermiteFastResize(e,t,r,i,s){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),c=Math.ceil(a/2),u=e.imageData.data,h=e.ctx.createImageData(i,s),d=h.data;for(let f=0;f<s;f++)for(let g=0;g<i;g++){const p=4*(g+f*i);let y=0,v=0,m=0,w=0,b=0,S=0,_=0;const T=(f+.5)*a;for(let R=Math.floor(f*a);R<(f+1)*a;R++){const A=Math.abs(T-(R+.5))/c,M=(g+.5)*o,B=A*A;for(let L=Math.floor(g*o);L<(g+1)*o;L++){let z=Math.abs(M-(L+.5))/l;const N=Math.sqrt(B+z*z);N>1&&N<-1||(y=2*N*N*N-3*N*N+1,y>0&&(z=4*(L+R*t),_+=y*u[z+3],m+=y,u[z+3]<255&&(y=y*u[z+3]/250),w+=y*u[z],b+=y*u[z+1],S+=y*u[z+2],v+=y))}}d[p]=w/v,d[p+1]=b/v,d[p+2]=S/v,d[p+3]=_/m}return h}}k(bc,"type","Resize"),k(bc,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),k(bc,"uniformLocations",["uDelta","uTaps"]),U.setClass(bc);class Sc extends Ue{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let i=0;i<t.length;i+=4){const s=t[i],o=t[i+1],a=t[i+2],l=Math.max(s,o,a);t[i]+=l!==s?(l-s)*r:0,t[i+1]+=l!==o?(l-o)*r:0,t[i+2]+=l!==a?(l-a)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}k(Sc,"type","Saturation"),k(Sc,"defaults",{saturation:0}),k(Sc,"uniformLocations",["uSaturation"]),U.setClass(Sc);class _c extends Ue{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let i=0;i<t.length;i+=4){const s=t[i],o=t[i+1],a=t[i+2],l=Math.max(s,o,a),c=(s+o+a)/3,u=2*Math.abs(l-c)/255*r;t[i]+=l!==s?(l-s)*u:0,t[i+1]+=l!==o?(l-o)*u:0,t[i+2]+=l!==a?(l-a)*u:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}k(_c,"type","Vibrance"),k(_c,"defaults",{vibrance:0}),k(_c,"uniformLocations",["uVibrance"]),U.setClass(_c);const vj=()=>{const n=C.useRef(null),[e,t]=C.useState(null),[r,i]=C.useState("#000000"),[s,o]=C.useState("draw"),a=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFFFFF"];C.useEffect(()=>{if(!n.current)return;const c=new fp(n.current,{width:500,height:350,backgroundColor:"#ffffff"});return c.freeDrawingBrush=new Lu(c),c.freeDrawingBrush.color=r,c.freeDrawingBrush.width=3,c.isDrawingMode=!0,t(c),()=>{c.dispose()}},[]),C.useEffect(()=>{e&&(e.isDrawingMode=!0,e.freeDrawingBrush&&(e.freeDrawingBrush.color=s==="erase"?"#ffffff":r,e.freeDrawingBrush.width=s==="erase"?20:3))},[s,r,e]);const l=()=>{e&&(e.clear(),e.backgroundColor="#ffffff",e.renderAll(),ns.success("Canvas cleared!"))};return x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsxs("div",{className:"win95-border-inset bg-muted p-2 flex gap-2 items-center flex-wrap",children:[x.jsx("button",{onClick:()=>o("draw"),className:`win95-border p-1.5 ${s==="draw"?"win95-border-inset bg-muted":"bg-card hover:bg-muted"}`,title:"Pencil",children:x.jsx(oE,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>o("erase"),className:`win95-border p-1.5 ${s==="erase"?"win95-border-inset bg-muted":"bg-card hover:bg-muted"}`,title:"Eraser",children:x.jsx(Zk,{className:"w-4 h-4"})}),x.jsx("div",{className:"w-px h-6 bg-border mx-1"}),x.jsx("button",{onClick:l,className:"win95-border bg-card hover:bg-muted p-1.5",title:"Clear",children:x.jsx(uE,{className:"w-4 h-4"})}),x.jsx("div",{className:"w-px h-6 bg-border mx-1"}),a.map(c=>x.jsx("button",{onClick:()=>i(c),className:`win95-border w-6 h-6 ${r===c?"win95-border-inset":""}`,style:{backgroundColor:c},title:c},c))]}),x.jsx("div",{className:"win95-border-inset",children:x.jsx("canvas",{ref:n,className:"pixelated"})})]})},wj="modulepreload",xj=function(n){return"/"+n},s0={},wl=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=xj(l),l in s0)return;s0[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":wj,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((d,f)=>{h.addEventListener("load",d),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},bj=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>wl(async()=>{const{default:r}=await Promise.resolve().then(()=>Vo);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class am extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class o0 extends am{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class a0 extends am{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class l0 extends am{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var gp;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(gp||(gp={}));var Sj=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class _j{constructor(e,{headers:t={},customFetch:r,region:i=gp.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=bj(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Sj(this,arguments,void 0,function*(t,r={}){var i;try{const{headers:s,method:o,body:a,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const h=new URL(`${this.url}/${t}`);u&&u!=="any"&&(c["x-region"]=u,h.searchParams.set("forceFunctionRegion",u));let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(c["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(c["Content-Type"]="application/json",d=JSON.stringify(a)));const f=yield this.fetch(h.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:d,signal:l}).catch(v=>{throw v.name==="AbortError"?v:new o0(v)}),g=f.headers.get("x-relay-error");if(g&&g==="true")throw new a0(f);if(!f.ok)throw new l0(f);let p=((i=f.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),y;return p==="application/json"?y=yield f.json():p==="application/octet-stream"?y=yield f.blob():p==="text/event-stream"?y=f:p==="multipart/form-data"?y=yield f.formData():y=yield f.text(),{data:y,error:null,response:f}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new o0(s)}:{data:null,error:s,response:s instanceof l0||s instanceof a0?s.context:void 0}}})}}var St={},lm={},Oh={},xl={},Ah={},Dh={},Cj=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ao=Cj();const Tj=Ao.fetch,V_=Ao.fetch.bind(Ao),G_=Ao.Headers,kj=Ao.Request,Ej=Ao.Response,Vo=Object.freeze(Object.defineProperty({__proto__:null,Headers:G_,Request:kj,Response:Ej,default:V_,fetch:Tj},Symbol.toStringTag,{value:"Module"})),Rj=M0(Vo);var Mh={};Object.defineProperty(Mh,"__esModule",{value:!0});let Pj=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Mh.default=Pj;var Y_=nn&&nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Dh,"__esModule",{value:!0});const Oj=Y_(Rj),Aj=Y_(Mh);let Dj=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Oj.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l,c;let u=null,h=null,d=null,f=s.status,g=s.statusText;if(s.ok){if(this.method!=="HEAD"){const m=await s.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=m:h=JSON.parse(m))}const y=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),v=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&v&&v.length>1&&(d=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,d=null,f=406,g="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const y=await s.text();try{u=JSON.parse(y),Array.isArray(u)&&s.status===404&&(h=[],u=null,f=200,g="OK")}catch{s.status===404&&y===""?(f=204,g="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,g="OK"),u&&this.shouldThrowOnError)throw new Aj.default(u)}return{error:u,data:h,count:d,status:f,statusText:g}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};Dh.default=Dj;var Mj=nn&&nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ah,"__esModule",{value:!0});const jj=Mj(Dh);let Lj=class extends jj.default{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ah.default=Lj;var Nj=nn&&nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(xl,"__esModule",{value:!0});const Wj=Nj(Ah);let Ij=class extends Wj.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};xl.default=Ij;var Fj=nn&&nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Oh,"__esModule",{value:!0});const la=Fj(xl);let Bj=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=i}select(e,t){const{head:r=!1,count:i}=t??{},s=r?"HEAD":"GET";let o=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),i&&this.headers.append("Prefer",`count=${i}`),new la.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var i;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new la.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new la.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var r;const i="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new la.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new la.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};Oh.default=Bj;var X_=nn&&nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(lm,"__esModule",{value:!0});const zj=X_(Oh),$j=X_(xl);let Hj=class q_{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new zj.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new q_(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:s}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;r||i?(a=r?"HEAD":"GET",Object.entries(t).filter(([h,d])=>d!==void 0).map(([h,d])=>[h,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([h,d])=>{l.searchParams.append(h,d)})):(a="POST",c=t);const u=new Headers(this.headers);return s&&u.set("Prefer",`count=${s}`),new $j.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};lm.default=Hj;var Go=nn&&nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(St,"__esModule",{value:!0});St.PostgrestError=St.PostgrestBuilder=St.PostgrestTransformBuilder=St.PostgrestFilterBuilder=St.PostgrestQueryBuilder=St.PostgrestClient=void 0;const K_=Go(lm);St.PostgrestClient=K_.default;const J_=Go(Oh);St.PostgrestQueryBuilder=J_.default;const Q_=Go(xl);St.PostgrestFilterBuilder=Q_.default;const Z_=Go(Ah);St.PostgrestTransformBuilder=Z_.default;const e1=Go(Dh);St.PostgrestBuilder=e1.default;const t1=Go(Mh);St.PostgrestError=t1.default;var Uj=St.default={PostgrestClient:K_.default,PostgrestQueryBuilder:J_.default,PostgrestFilterBuilder:Q_.default,PostgrestTransformBuilder:Z_.default,PostgrestBuilder:e1.default,PostgrestError:t1.default};const{PostgrestClient:Vj,PostgrestQueryBuilder:PW,PostgrestFilterBuilder:OW,PostgrestTransformBuilder:AW,PostgrestBuilder:DW,PostgrestError:MW}=Uj;class Gj{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Yj="2.75.0",Xj=`realtime-js/${Yj}`,qj="1.0.0",mp=1e4,Kj=1e3,Jj=100;var Pa;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Pa||(Pa={}));var Fe;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Fe||(Fe={}));var _n;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(_n||(_n={}));var yp;(function(n){n.websocket="websocket"})(yp||(yp={}));var Fi;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Fi||(Fi={}));class Qj{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class n1{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var de;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(de||(de={}));const c0=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=Zj(o,n,e,i),s),{}):{}},Zj=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i==null?void 0:i.type,o=t[n];return s&&!r.includes(s)?r1(s,o):vp(o)},r1=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return rL(e,t)}switch(n){case de.bool:return eL(e);case de.float4:case de.float8:case de.int2:case de.int4:case de.int8:case de.numeric:case de.oid:return tL(e);case de.json:case de.jsonb:return nL(e);case de.timestamp:return iL(e);case de.abstime:case de.date:case de.daterange:case de.int4range:case de.int8range:case de.money:case de.reltime:case de.text:case de.time:case de.timestamptz:case de.timetz:case de.tsrange:case de.tstzrange:return vp(e);default:return vp(e)}},vp=n=>n,eL=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},tL=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},nL=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},rL=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>r1(e,a))}return n},iL=n=>typeof n=="string"?n.replace(" ","T"):n,i1=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Wd{constructor(e,t,r={},i=mp){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var u0;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(u0||(u0={}));class Oa{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Oa.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Oa.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Oa.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=s[c];if(h){const d=u.map(y=>y.presence_ref),f=h.map(y=>y.presence_ref),g=u.filter(y=>f.indexOf(y.presence_ref)<0),p=h.filter(y=>d.indexOf(y.presence_ref)<0);g.length>0&&(a[c]=g),p.length>0&&(l[c]=p)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const h=e[a].map(f=>f.presence_ref),d=u.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var h0;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(h0||(h0={}));var Aa;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Aa||(Aa={}));var ar;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ar||(ar={}));class cm{constructor(e,t={config:{}},r){var i,s;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Wd(this,_n.join,this.params,this.timeout),this.rejoinTimer=new n1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fe.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_n.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Oa(this),this.broadcastEndpointURL=i1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Fe.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Aa.PRESENCE]&&this.bindings[Aa.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},d={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(ar.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(ar.CLOSED)),this.updateJoinPayload(Object.assign({config:d},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){e==null||e(ar.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,y=(g=p==null?void 0:p.length)!==null&&g!==void 0?g:0,v=[];for(let m=0;m<y;m++){const w=p[m],{filter:{event:b,schema:S,table:_,filter:T}}=w,R=f&&f[m];if(R&&R.event===b&&R.schema===S&&R.table===_&&R.filter===T)v.push(Object.assign(Object.assign({},w),{id:R.id}));else{this.unsubscribe(),this.state=Fe.errored,e==null||e(ar.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(ar.SUBSCRIBED);return}}).receive("error",f=>{this.state=Fe.errored,e==null||e(ar.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ar.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Fe.joined&&e===Aa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Fe.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_n.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Wd(this,_n.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Fe.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Wd(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Jj){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=_n;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let d=this._onMessage(o,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var g,p,y;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(p=f.filter)===null||p===void 0?void 0:p.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(d,r)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var g,p,y,v,m,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const b=f.id,S=(g=f.filter)===null||g===void 0?void 0:g.event;return b&&((p=t.ids)===null||p===void 0?void 0:p.includes(b))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const b=(m=(v=f==null?void 0:f.filter)===null||v===void 0?void 0:v.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return b==="*"||b===((w=t==null?void 0:t.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const g=d.data,{schema:p,table:y,commit_timestamp:v,type:m,errors:w}=g;d=Object.assign(Object.assign({},{schema:p,table:y,commit_timestamp:v,eventType:m,new:{},old:{},errors:w}),this._getPayloadRecords(g))}f.callback(d,r)})}_isClosed(){return this.state===Fe.closed}_isJoined(){return this.state===Fe.joined}_isJoining(){return this.state===Fe.joining}_isLeaving(){return this.state===Fe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&cm.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(_n.close,{},e)}_onError(e){this._on(_n.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=c0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=c0(e.columns,e.old_record)),t}}const Id=()=>{},Cc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},sL=[1e3,2e3,5e3,1e4],oL=1e4,aL=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class lL{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mp,this.transport=null,this.heartbeatIntervalMs=Cc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Id,this.ref=0,this.reconnectTimer=null,this.logger=Id,this.conn=null,this.sendBuffer=[],this.serializer=new Qj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>wl(async()=>{const{default:a}=await Promise.resolve().then(()=>Vo);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${yp.websocket}`,this.httpEndpoint=i1(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gj.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:qj}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Pa.connecting:return Fi.Connecting;case Pa.open:return Fi.Open;case Pa.closing:return Fi.Closing;default:return Fi.Closed}}isConnected(){return this.connectionState()===Fi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new cm(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Kj,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Cc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=t,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(_n.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([aL],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:Xj};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(_n.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new n1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Cc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,s,o,a,l,c,u;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:mp,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Cc.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Id,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:h=>sL[h-1]||oL,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,d)=>d(JSON.stringify(h)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class um extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Le(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class cL extends um{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class wp extends um{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var uL=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const s1=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>wl(async()=>{const{default:r}=await Promise.resolve().then(()=>Vo);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},hL=()=>uL(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wl(()=>Promise.resolve().then(()=>Vo),void 0)).Response:Response}),xp=n=>{if(Array.isArray(n))return n.map(t=>xp(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=xp(r)}),e},dL=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var ms=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Fd=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),fL=(n,e,t)=>ms(void 0,void 0,void 0,function*(){const r=yield hL();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{const s=n.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new cL(Fd(i),s,o))}).catch(i=>{e(new wp(Fd(i),i))}):e(new wp(Fd(n),n))}),pL=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?i:(dL(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function bl(n,e,t,r,i,s){return ms(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,pL(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>fL(l,a,r))})})}function Nu(n,e,t,r){return ms(this,void 0,void 0,function*(){return bl(n,"GET",e,t,r)})}function In(n,e,t,r,i){return ms(this,void 0,void 0,function*(){return bl(n,"POST",e,r,i,t)})}function bp(n,e,t,r,i){return ms(this,void 0,void 0,function*(){return bl(n,"PUT",e,r,i,t)})}function gL(n,e,t,r){return ms(this,void 0,void 0,function*(){return bl(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function o1(n,e,t,r,i){return ms(this,void 0,void 0,function*(){return bl(n,"DELETE",e,r,i,t)})}var mL=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class yL{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return mL(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Le(e))return{data:null,error:e};throw e}})}}var vL=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class wL{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new yL(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return vL(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Le(e))return{data:null,error:e};throw e}})}}var vt=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const xL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},d0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class bL{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=s1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return vt(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},d0),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),h=yield(e=="PUT"?bp:In)(this.fetch,`${this.url}/object/${u}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}upload(e,t,r){return vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return vt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:d0.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield bp(this.fetch,a.toString(),l,{headers:u});return{data:{path:s,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Le(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return vt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield In(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new um("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}update(e,t,r){return vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return vt(this,void 0,void 0,function*(){try{return{data:yield In(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Le(i))return{data:null,error:i};throw i}})}copy(e,t,r){return vt(this,void 0,void 0,function*(){try{return{data:{path:(yield In(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Le(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return vt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield In(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Le(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return vt(this,void 0,void 0,function*(){try{const i=yield In(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Le(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>Nu(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new wL(l,this.shouldThrowOnError)}info(e){return vt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Nu(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:xp(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}exists(e){return vt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield gL(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r)&&r instanceof wp){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return vt(this,void 0,void 0,function*(){try{return{data:yield o1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Le(t))return{data:null,error:t};throw t}})}list(e,t,r){return vt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},xL),t),{prefix:e||""});return{data:yield In(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Le(i))return{data:null,error:i};throw i}})}listV2(e,t){return vt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield In(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const SL="2.75.0",_L={"X-Client-Info":`storage-js/${SL}`};var Es=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class CL{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_L),t),this.fetch=s1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Es(this,void 0,void 0,function*(){try{return{data:yield Nu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Le(e))return{data:null,error:e};throw e}})}getBucket(e){return Es(this,void 0,void 0,function*(){try{return{data:yield Nu(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Le(t))return{data:null,error:t};throw t}})}createBucket(e){return Es(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield In(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Le(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return Es(this,void 0,void 0,function*(){try{return{data:yield bp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Es(this,void 0,void 0,function*(){try{return{data:yield In(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Le(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Es(this,void 0,void 0,function*(){try{return{data:yield o1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Le(t))return{data:null,error:t};throw t}})}}class TL extends CL{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new bL(this.url,this.headers,e,this.fetch)}}const kL="2.75.0";let pa="";typeof Deno<"u"?pa="deno":typeof document<"u"?pa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?pa="react-native":pa="node";const EL={"X-Client-Info":`supabase-js-${pa}/${kL}`},RL={headers:EL},PL={schema:"public"},OL={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},AL={};var DL=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const ML=n=>{let e;return n?e=n:typeof fetch>"u"?e=V_:e=fetch,(...t)=>e(...t)},jL=()=>typeof Headers>"u"?G_:Headers,LL=(n,e,t)=>{const r=ML(t),i=jL();return(s,o)=>DL(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};var NL=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function WL(n){return n.endsWith("/")?n:n+"/"}function IL(n,e){var t,r;const{db:i,auth:s,realtime:o,global:a}=n,{db:l,auth:c,realtime:u,global:h}=e,d={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>NL(this,void 0,void 0,function*(){return""})};return n.accessToken?d.accessToken=n.accessToken:delete d.accessToken,d}function FL(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(WL(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const a1="2.75.0",js=30*1e3,Sp=3,Bd=Sp*js,BL="http://localhost:9999",zL="supabase.auth.token",$L={"X-Client-Info":`gotrue-js/${a1}`},_p="X-Supabase-Api-Version",l1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},HL=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,UL=10*60*1e3;class sl extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function X(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class VL extends sl{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function GL(n){return X(n)&&n.name==="AuthApiError"}class Bi extends sl{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ri extends sl{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class Yr extends Ri{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function YL(n){return X(n)&&n.name==="AuthSessionMissingError"}class Rs extends Ri{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Tc extends Ri{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class kc extends Ri{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function XL(n){return X(n)&&n.name==="AuthImplicitGrantRedirectError"}class f0 extends Ri{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Cp extends Ri{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function zd(n){return X(n)&&n.name==="AuthRetryableFetchError"}class p0 extends Ri{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Tp extends Ri{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),g0=` 	
\r=`.split(""),qL=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<g0.length;e+=1)n[g0[e].charCodeAt(0)]=-2;for(let e=0;e<Wu.length;e+=1)n[Wu[e].charCodeAt(0)]=e;return n})();function m0(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Wu[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Wu[r]),e.queuedBits-=6}}function c1(n,e,t){const r=qL[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function y0(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{QL(o,r,t)};for(let o=0;o<n.length;o+=1)c1(n.charCodeAt(o),i,s);return e.join("")}function KL(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function JL(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}KL(r,e)}}function QL(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ho(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)c1(n.charCodeAt(i),t,r);return new Uint8Array(e)}function ZL(n){const e=[];return JL(n,t=>e.push(t)),new Uint8Array(e)}function Yi(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>m0(i,t,r)),m0(null,t,r),e.join("")}function eN(n){return Math.round(Date.now()/1e3)+n}function tN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Nt=()=>typeof window<"u"&&typeof document<"u",Di={tested:!1,writable:!1},u1=()=>{if(!Nt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Di.tested)return Di.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Di.tested=!0,Di.writable=!0}catch{Di.tested=!0,Di.writable=!1}return Di.writable};function nN(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const h1=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>wl(async()=>{const{default:r}=await Promise.resolve().then(()=>Vo);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},rN=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Ls=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Mi=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Vr=async(n,e)=>{await n.removeItem(e)};class jh{constructor(){this.promise=new jh.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}jh.promiseConstructor=Promise;function $d(n){const e=n.split(".");if(e.length!==3)throw new Tp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!HL.test(e[r]))throw new Tp("JWT not in base64url format");return{header:JSON.parse(y0(e[0])),payload:JSON.parse(y0(e[1])),signature:ho(e[2]),raw:{header:e[0],payload:e[1]}}}async function iN(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function sN(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function oN(n){return("0"+n.toString(16)).substr(-2)}function aN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,oN).join("")}async function lN(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function cN(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await lN(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ps(n,e,t=!1){const r=aN();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await Ls(n,`${e}-code-verifier`,i);const s=await cN(r);return[s,r===s?"plain":"s256"]}const uN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hN(n){const e=n.headers.get(_p);if(!e||!e.match(uN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function dN(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function fN(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const pN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Os(n){if(!pN.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Hd(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function v0(n){return JSON.parse(JSON.stringify(n))}var gN=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Ni=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),mN=[502,503,504];async function w0(n){var e;if(!rN(n))throw new Cp(Ni(n),0);if(mN.includes(n.status))throw new Cp(Ni(n),n.status);let t;try{t=await n.json()}catch(s){throw new Bi(Ni(s),s)}let r;const i=hN(n);if(i&&i.getTime()>=l1["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new p0(Ni(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Yr}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new p0(Ni(t),n.status,t.weak_password.reasons);throw new VL(Ni(t),n.status||500,r)}const yN=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function J(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[_p]||(s[_p]=l1["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await vN(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function vN(n,e,t,r,i,s){const o=yN(e,r,i,s);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new Cp(Ni(l),0)}if(a.ok||await w0(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await w0(l)}}function gn(n){var e;let t=null;bN(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=eN(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function x0(n){const e=gn(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Zr(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function wN(n){return{data:n,error:null}}function xN(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=gN(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function b0(n){return n}function bN(n){return n.access_token&&n.refresh_token&&n.expires_in}const Ud=["global","local","others"];var SN=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class _N{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=h1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Ud[0]){if(Ud.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ud.join(", ")}`);try{return await J(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await J(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Zr})}catch(r){if(X(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=SN(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await J(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:xN,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(X(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await J(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Zr})}catch(t){if(X(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await J(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:b0});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);c[`${y}Page`]=p}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(X(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Os(e);try{return await J(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Zr})}catch(t){if(X(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Os(e);try{return await J(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Zr})}catch(r){if(X(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Os(e);try{return await J(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Zr})}catch(r){if(X(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Os(e.userId);try{const{data:t,error:r}=await J(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(X(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Os(e.userId),Os(e.id);try{return{data:await J(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(X(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await J(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:b0});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);c[`${y}Page`]=p}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(X(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await J(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(X(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await J(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(X(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await J(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(X(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await J(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(X(t))return{data:null,error:t};throw t}}}function S0(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const As={debug:!!(globalThis&&u1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class d1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class CN extends d1{}async function TN(n,e,t){As.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),As.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){As.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{As.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw As.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new CN(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(As.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function kN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function f1(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function EN(n){return parseInt(n,16)}function RN(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function PN(n){var e;const{chainId:t,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:h,version:d}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(d!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const f=f1(n.address),g=u?`${u}://${r}`:r,p=n.statement?`${n.statement}
`:"",y=`${g} wants you to sign in with your Ethereum account:
${f}

${p}`;let v=`URI: ${h}
Version: ${d}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(v+=`
Expiration Time: ${i.toISOString()}`),a&&(v+=`
Not Before: ${a.toISOString()}`),l&&(v+=`
Request ID: ${l}`),c){let m=`
Resources:`;for(const w of c){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);m+=`
- ${w}`}v+=m}return`${y}
${v}`}class je extends Error{constructor({message:e,code:t,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=t}}class Iu extends je{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function ON({error:n,options:e}){var t,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new je({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=s.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new je({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new je({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new je({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new je({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new je({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new je({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new je({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(g1(o)){if(s.rp.id!==o)return new je({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new je({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new je({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function AN({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new je({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new je({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(g1(r)){if(t.rpId!==r)return new je({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new je({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var p1=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class DN{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const MN=new DN;function jN(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,i=p1(n,["challenge","user","excludeCredentials"]),s=ho(e).buffer,o=Object.assign(Object.assign({},t),{id:ho(t.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:ho(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function LN(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=p1(n,["challenge","allowCredentials"]),i=ho(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(t&&t.length>0){s.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const a=t[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ho(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function NN(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Yi(new Uint8Array(n.response.attestationObject)),clientDataJSON:Yi(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function WN(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Yi(new Uint8Array(i.authenticatorData)),clientDataJSON:Yi(new Uint8Array(i.clientDataJSON)),signature:Yi(new Uint8Array(i.signature)),userHandle:i.userHandle?Yi(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function g1(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function _0(){var n,e;return!!(Nt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function IN(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Iu("Browser returned unexpected credential type",e)}:{data:null,error:new Iu("Empty credential response",e)}}catch(e){return{data:null,error:ON({error:e,options:n})}}}async function FN(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Iu("Browser returned unexpected credential type",e)}:{data:null,error:new Iu("Empty credential response",e)}}catch(e){return{data:null,error:AN({error:e,options:n})}}}const BN={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},zN={userVerification:"preferred",hints:["security-key"]};function Fu(...n){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of n)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(t(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=Fu(a,o):r[s]=Fu(o)}else r[s]=o}return r}function $N(n,e){return Fu(BN,n,e||{})}function HN(n,e){return Fu(zN,n,e||{})}class UN{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:a};const l=i??MN.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=$N(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:u,error:h}=await IN({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const c=HN(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:u,error:h}=await FN(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(o){return X(o)?{data:null,error:o}:{data:null,error:new Bi("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!t)return{data:null,error:new sl("rpId is required for WebAuthn authentication")};try{if(!_0())return{data:null,error:new Bi("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:t,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return X(o)?{data:null,error:o}:{data:null,error:new Bi("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!t)return{data:null,error:new sl("rpId is required for WebAuthn registration")};try{if(!_0())return{data:null,error:new Bi("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(d=>d.factor_type==="webauthn"&&d.friendly_name===e&&d.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:t,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return X(o)?{data:null,error:o}:{data:null,error:new Bi("Unexpected error in register",o)}}}}kN();const VN={url:BL,storageKey:zL,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$L,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function C0(n,e,t){return await t()}const Ds={};class ol{get jwks(){var e,t;return(t=(e=Ds[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Ds[this.storageKey]=Object.assign(Object.assign({},Ds[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Ds[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ds[this.storageKey]=Object.assign(Object.assign({},Ds[this.storageKey]),{cachedAt:e})}constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ol.nextInstanceID,ol.nextInstanceID+=1,this.instanceID>0&&Nt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},VN),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new _N({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=h1(i.fetch),this.lock=i.lock||C0,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Nt()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=TN:this.lock=C0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new UN(this)},this.persistSession?(i.storage?this.storage=i.storage:u1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=S0(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=S0(this.memoryStorage)),Nt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${a1}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=nN(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Nt()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),XL(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return X(t)?{error:t}:{error:new Bi("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const s=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:gn}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(X(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,i;try{let s;if("email"in e){const{email:u,password:h,options:d}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Ps(this.storage,this.storageKey)),s=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:u,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:g},xform:gn})}else if("phone"in e){const{phone:u,password:h,options:d}=e;s=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:gn})}else throw new Tc("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(X(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:x0})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:x0})}else throw new Tc("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Rs}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(X(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,i,s,o,a,l,c,u,h,d;let f,g;if("message"in e)f=e.message,g=e.signature;else{const{chain:p,wallet:y,statement:v,options:m}=e;let w;if(Nt())if(typeof y=="object")w=y;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")w=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}const b=new URL((t=m==null?void 0:m.url)!==null&&t!==void 0?t:window.location.href),S=await w.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=f1(S[0]);let T=(r=m==null?void 0:m.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!T){const A=await w.request({method:"eth_chainId"});T=EN(A)}const R={domain:b.host,address:_,statement:v,uri:b.href,version:"1",chainId:T,nonce:(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=m==null?void 0:m.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=PN(R),g=await w.request({method:"personal_sign",params:[RN(f),_]})}try{const{data:p,error:y}=await J(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:g},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:gn});if(y)throw y;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new Rs}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:y})}catch(p){if(X(p))return{data:{user:null,session:null},error:p};throw p}}async signInWithSolana(e){var t,r,i,s,o,a,l,c,u,h,d,f;let g,p;if("message"in e)g=e.message,p=e.signature;else{const{chain:y,wallet:v,statement:m,options:w}=e;let b;if(Nt())if(typeof v=="object")b=v;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))b=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=v}const S=new URL((t=w==null?void 0:w.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in b&&b.signIn){const _=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),m?{statement:m}:null));let T;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")T=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)T=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)g=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),p=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${S.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(i=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const _=await b.signMessage(new TextEncoder().encode(g),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=_}}try{const{data:y,error:v}=await J(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Yi(p)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:gn});if(v)throw v;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Rs}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:v})}catch(y){if(X(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const t=await Mi(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:s,error:o}=await J(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:gn});if(await Vr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Rs}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(X(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:s,nonce:o}=e,a=await J(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:gn}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Rs}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(X(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Ps(this.storage,this.storageKey));const{error:h}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Tc("You must provide either an email or phone number.")}catch(a){if(X(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await J(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:gn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(X(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Ps(this.storage,this.storageKey)),await J(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:wN})}catch(s){if(X(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Yr;const{error:i}=await J(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(X(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await J(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await J(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Tc("You must provide either an email or phone number and a type")}catch(t){if(X(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Mi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Bd:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Mi(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Hd()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Zr}):await this._useSession(async t=>{var r,i,s;const{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Yr}:await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Zr})})}catch(t){if(X(t))return YL(t)&&(await this._removeSession(),await Vr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Yr;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Ps(this.storage,this.storageKey));const{data:c,error:u}=await J(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Zr});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(X(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Yr;const t=Date.now()/1e3;let r=t,i=!0,s=null;const{payload:o}=$d(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(X(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Yr;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(X(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Nt())throw new kc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new kc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new f0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new kc("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new f0("No code detected.");const{data:m,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new kc("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let d=u+h;l&&(d=parseInt(l));const f=d-u;f*1e3<=js&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const g=d-h;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,d,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,d,u);const{data:p,error:y}=await this._getUser(s);if(y)throw y;const v={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:d,refresh_token:o,token_type:c,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(X(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Mi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(GL(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Vr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=tN(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Ps(this.storage,this.storageKey,!0));try{return await J(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(X(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(X(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,u;const{data:h,error:d}=s;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await J(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Nt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(X(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:i,data:{session:s}}=t;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,h=await J(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:gn}),{data:d,error:f}=h;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Rs}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),{data:d,error:f})}catch(i){if(X(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)throw o;return await J(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(X(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await sN(async i=>(i>0&&await iN(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await J(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:gn})),(i,s)=>{const o=200*Math.pow(2,i);return s&&zd(s)&&Date.now()+o-r<js})}catch(r){if(this._debug(t,"error",r),X(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Nt()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Mi(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Mi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Ls(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Hd()}else if(i&&!i.user&&!i.user){const o=await Mi(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Vr(this.storage,this.storageKey+"-user"),await Ls(this.storage,this.storageKey,i)):i.user=Hd()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Bd;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Bd}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),zd(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Yr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new jh;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Yr;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),X(s)){const o={data:null,error:s};return zd(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Ls(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const s=v0(i);await Ls(this.storage,this.storageKey,s)}else{const i=v0(t);await Ls(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Vr(this.storage,this.storageKey),await Vr(this.storage,this.storageKey+"-code-verifier"),await Vr(this.storage,this.storageKey+"-user"),this.userStorage&&await Vr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Nt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),js);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/js);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${js}ms, refresh threshold is ${Sp} ticks`),i<=Sp&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof d1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Nt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Ps(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await J(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(X(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await J(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(X(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?NN(e.webauthn.credential_response):WN(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(t){if(X(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const o=await J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:jN(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:LN(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(X(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=$d(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+UL>i)return r;const{data:s,error:o}=await J(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:f,error:g}=await this.getSession();if(g||!f.session)return{data:null,error:g};r=f.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=$d(r);t!=null&&t.allowExpired||dN(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!c){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:s,header:i,signature:o},error:null}}const u=fN(i.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,ZL(`${a}.${l}`)))throw new Tp("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}}}ol.nextInstanceID=0;const GN=ol;class YN extends GN{constructor(e){super(e)}}var XN=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class qN{constructor(e,t,r){var i,s,o;this.supabaseUrl=e,this.supabaseKey=t;const a=FL(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:PL,realtime:AL,auth:Object.assign(Object.assign({},OL),{storageKey:l}),global:RL},u=IL(r??{},c);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=LL(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Vj(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new TL(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new _j(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return XN(this,void 0,void 0,function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:o,flowType:a,lock:l,debug:c},u,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new YN({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,flowType:a,lock:l,debug:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new lL(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const KN=(n,e,t)=>new qN(n,e,t);function JN(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}JN()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const QN="https://owinjxnvrtzriwlfwudi.supabase.co",ZN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im93aW5qeG52cnR6cml3bGZ3dWRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2Njg4NjQsImV4cCI6MjA3NjI0NDg2NH0.B6eJZU_rYMD0TsdfYP6DICelCQXmOmV-fYRnJFww2qY",Qs=KN(QN,ZN),eW=["😊","😂","❤️","👍","🎨","✨","🌸","🎵","☕","🌙"],tW=()=>{const[n,e]=C.useState([]),[t,r]=C.useState(""),[i,s]=C.useState("Anon"),[o,a]=C.useState(!0),l=C.useRef(null),c=C.useRef(null),u=()=>{var p;(p=l.current)==null||p.scrollIntoView({behavior:"smooth"})};C.useEffect(()=>{u()},[n]),C.useEffect(()=>(h(),d(),()=>{c.current&&Qs.removeChannel(c.current)}),[]);const h=async()=>{try{const{data:p,error:y}=await Qs.from("chat_messages").select("*").order("created_at",{ascending:!0}).limit(100);if(y)throw y;e(p||[])}catch(p){console.error("Error fetching messages:",p),ns.error("Failed to load messages")}finally{a(!1)}},d=()=>{c.current=Qs.channel("chat_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},p=>{e(y=>[...y,p.new])}).subscribe()},f=async p=>{if(p.preventDefault(),!!t.trim())try{const{error:y}=await Qs.from("chat_messages").insert([{username:i.trim()||"Anon",message:t.trim()}]);if(y)throw y;r(""),ns.success("Message sent!")}catch(y){console.error("Error sending message:",y),ns.error("Failed to send message")}},g=p=>{r(t+p)};return x.jsxs("div",{className:"flex flex-col gap-2 h-[400px]",children:[x.jsxs("div",{className:"win95-border-inset bg-white flex-1 overflow-y-auto p-2 font-mono text-xs",children:[o?x.jsx("div",{className:"text-center text-muted-foreground py-4",children:"Loading messages..."}):n.length===0?x.jsx("div",{className:"text-center text-muted-foreground py-4",children:"No messages yet. Start the conversation! 💬"}):n.map(p=>x.jsxs("div",{className:"mb-1",children:[x.jsxs("span",{className:"text-muted-foreground",children:["[",new Date(p.created_at).toLocaleTimeString(),"]"]})," ",x.jsxs("span",{className:"font-bold text-primary",children:[p.username,":"]})," ",x.jsx("span",{className:"text-foreground",children:p.message})]},p.id)),x.jsx("div",{ref:l})]}),x.jsx("div",{className:"win95-border-inset bg-muted p-1 flex gap-1 flex-wrap",children:eW.map(p=>x.jsx("button",{onClick:()=>g(p),className:"win95-border bg-card hover:bg-muted-foreground/10 px-2 py-1 text-sm",children:p},p))}),x.jsxs("form",{onSubmit:f,className:"flex gap-2",children:[x.jsx("input",{type:"text",value:i,onChange:p=>s(p.target.value),className:"win95-border-inset bg-input px-2 py-1 w-24 text-sm",placeholder:"Name"}),x.jsx("input",{type:"text",value:t,onChange:p=>r(p.target.value),className:"win95-border-inset bg-input px-2 py-1 flex-1 text-sm",placeholder:"Say something..."}),x.jsx("button",{type:"submit",className:"win95-border bg-card hover:bg-muted px-3 py-1 active:win95-border-inset",children:x.jsx(aE,{className:"w-4 h-4"})})]})]})},nW=()=>x.jsxs("div",{className:"win95-border-inset bg-white p-4 space-y-4 max-h-[500px] overflow-y-auto",children:[x.jsx("div",{className:"text-center",children:x.jsx("h2",{className:"text-2xl font-bold text-primary mb-2",children:"Mariana Meireles"})}),x.jsxs("div",{className:"win95-border bg-muted p-3 space-y-3 text-sm",children:[x.jsx("p",{children:"I strive to live poetically, compassionately and fearlessly."}),x.jsx("p",{children:"In my career, the ideal expression of this is to broadly improve the lives of all beings."}),x.jsx("p",{children:"Previously, I worked with software in the open-source and open-science ecosystems, contributing to projects like Firefox, Jupyter Notebooks, and Conda."}),x.jsx("p",{children:"As a researcher, I've worked at CHAI at UC Berkeley, the Max Planck and at the University of Bonn."})]}),x.jsxs("div",{className:"win95-border bg-card p-3",children:[x.jsx("h3",{className:"font-bold text-sm mb-2",children:"Connect"}),x.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[x.jsxs("a",{href:"https://github.com/marimeireles/",target:"_blank",rel:"noopener noreferrer",className:"win95-border bg-muted hover:bg-muted-foreground/10 p-2 flex items-center gap-2 text-xs",children:[x.jsx(nE,{className:"w-4 h-4"}),"GitHub"]}),x.jsxs("a",{href:"https://www.linkedin.com/in/mariana-meireles/",target:"_blank",rel:"noopener noreferrer",className:"win95-border bg-muted hover:bg-muted-foreground/10 p-2 flex items-center gap-2 text-xs",children:[x.jsx(rE,{className:"w-4 h-4"}),"LinkedIn"]}),x.jsxs("a",{href:"mailto:marianameireles@protonmail.com",className:"win95-border bg-muted hover:bg-muted-foreground/10 p-2 flex items-center gap-2 text-xs",children:[x.jsx(iE,{className:"w-4 h-4"}),"Email"]}),x.jsxs("a",{href:"https://calendar.app.google/TxR1iiyEriso6AqL9",target:"_blank",rel:"noopener noreferrer",className:"win95-border bg-muted hover:bg-muted-foreground/10 p-2 flex items-center gap-2 text-xs",children:[x.jsx(hE,{className:"w-4 h-4"}),"Book a Call"]})]})]}),x.jsxs("div",{className:"win95-border bg-card p-3",children:[x.jsx("h3",{className:"font-bold text-sm mb-2",children:"Links"}),x.jsx("div",{className:"space-y-1",children:x.jsxs("a",{href:"https://marimeireles.com/cv.pdf",target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-primary hover:underline",children:[x.jsx(tE,{className:"w-3 h-3 inline mr-1"}),"CV"]})})]})]}),rW=()=>{const n={behance:"https://www.behance.net/marianameireles",deviantart:"https://www.deviantart.com/marimeireles/gallery",toes:"https://github.com/marimeireles/touchdesigner-toes/tree/master"},e=[{id:1,title:"Tattoo Art",description:"",color:"bg-gradient-to-br from-orange-400 to-pink-500",url:n.deviantart},{id:2,title:"VJ",description:"",color:"bg-gradient-to-br from-blue-400 to-cyan-300",url:n.toes}];return x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"win95-border bg-muted p-2 text-sm font-bold flex items-center justify-between",children:x.jsx("span",{children:"🎨 My Art Gallery"})}),x.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.map(t=>x.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":`${t.title} — opens external link`,className:"win95-border bg-white p-2 hover:bg-muted/50 cursor-pointer group block focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",children:[x.jsx("div",{className:`${t.color} w-full h-24 win95-border-inset mb-2 transition-transform group-hover:scale-105`}),x.jsxs("div",{className:"text-xs",children:[x.jsx("p",{className:"font-bold underline group-hover:no-underline",children:t.title}),x.jsx("p",{className:"text-muted-foreground",children:t.description||" "})]})]},t.id))})]})},iW=()=>{const[n,e]=C.useState([]),[t,r]=C.useState(""),[i,s]=C.useState(""),[o,a]=C.useState(!0);C.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:u,error:h}=await Qs.from("guestbook").select("*").order("created_at",{ascending:!1});if(h)throw h;e(u||[])}catch(u){console.error("Error fetching guestbook entries:",u),ns.error("Failed to load guestbook entries")}finally{a(!1)}},c=async u=>{if(u.preventDefault(),!(!t.trim()||!i.trim()))try{const{data:h,error:d}=await Qs.from("guestbook").insert([{name:t.trim(),message:i.trim()}]).select().single();if(d)throw d;e([h,...n]),r(""),s(""),ns.success("Thanks for signing the guestbook! ✨")}catch(h){console.error("Error adding guestbook entry:",h),ns.error("Failed to add entry. Please try again.")}};return x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"win95-border bg-muted p-2 text-sm font-bold",children:"📖 Sign My Guestbook"}),x.jsxs("form",{onSubmit:c,className:"win95-border-inset bg-muted p-3 space-y-2",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-xs font-bold block mb-1",children:"Name:"}),x.jsx("input",{type:"text",value:t,onChange:u=>r(u.target.value),className:"w-full win95-border-inset bg-input px-2 py-1 text-sm",placeholder:"Your name",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"text-xs font-bold block mb-1",children:"Message:"}),x.jsx("textarea",{value:i,onChange:u=>s(u.target.value),className:"w-full win95-border-inset bg-input px-2 py-1 text-sm resize-none",rows:3,placeholder:"Leave a message...",required:!0})]}),x.jsx("button",{type:"submit",className:"win95-border bg-card hover:bg-muted px-4 py-1 text-sm font-bold active:win95-border-inset",children:"Sign Guestbook"})]}),x.jsx("div",{className:"win95-border-inset bg-white p-2 max-h-60 overflow-y-auto space-y-2",children:o?x.jsx("div",{className:"text-center text-sm text-muted-foreground py-4",children:"Loading..."}):n.length===0?x.jsx("div",{className:"text-center text-sm text-muted-foreground py-4",children:"No entries yet. Be the first to sign! ✨"}):n.map(u=>x.jsxs("div",{className:"win95-border bg-muted p-2 text-sm",children:[x.jsxs("div",{className:"flex justify-between items-start mb-1",children:[x.jsx("span",{className:"font-bold text-primary",children:u.name}),x.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(u.created_at).toLocaleDateString()})]}),x.jsx("p",{className:"text-xs",children:u.message})]},u.id))})]})},sW=({blogName:n})=>{const t={Software:{emoji:"💻",content:x.jsxs("div",{className:"space-y-3 text-sm",children:[x.jsx("p",{children:"I've worked as a software engineer with a focus on scientific development for several years. All of this work was within open-source organizations."}),x.jsx("p",{children:"I'm a core contributor to projects such as Jupyter, Firefox, Mamba, Conda Forge, Farama's Zoo, PyScript, PySide, Mozilla Webcompat, Qt, and others."}),x.jsx("p",{children:"Currently I'm affiliated with the Open Knowledge Foundation as an Expert."}),x.jsxs("p",{children:["In the past, I served as a member of the Jupyter technical committee, as a member of the DISC NumFOCUS steering committee, as a Max Planck Insitute Open Science Ambassator and as a Subject Matter Expert for NASA, developing a ",x.jsx("a",{href:"https://www.nasa.gov/news-release/new-course-from-nasa-helps-build-open-inclusive-science-community/",target:"_blank",className:"text-primary hover:underline",children:"course"})," aimed at providing guidance for scientists on practicing open science."]}),x.jsxs("p",{children:["I've also taught open science and software classes to graduate students at Harvard through the LSSTC-DSFP program and at ",x.jsx("a",{href:"http://github.com/marimeireles/talks",target:"_blank",className:"text-primary hover:underline",children:"several other"})," conferences, meetups, and groups. I'm also grateful for the Jupyter community having recognized me as a ",x.jsx("a",{href:"https://blog.jupyter.org/congratulations-distinguished-contributors-bc349fa60d68",target:"_blank",className:"text-primary hover:underline",children:"distinguished contributor"})," in early 2022."]})]})},Research:{emoji:"🔬",content:x.jsxs("div",{className:"space-y-3 text-sm",children:[x.jsx("p",{children:"As a researcher I'm interested in understanding what are the underlying characteristics that are important for fostering cooperation among different intelligences and creating a bright future for human and AIs alike."}),x.jsxs("div",{className:"win95-border bg-muted p-2",children:[x.jsx("h4",{className:"font-bold mb-1",children:"Focus Areas"}),x.jsxs("ul",{className:"space-y-1 text-xs",children:[x.jsx("li",{children:"• Coordination & cooperative AI"}),x.jsx("li",{children:"• Evolutionary biology & teleology"}),x.jsx("li",{children:"• Reinforcement learning"}),x.jsx("li",{children:"• Complex systems"}),x.jsx("li",{children:"• Ethics"})]})]}),x.jsx("p",{className:"text-xs",children:x.jsx("a",{href:"https://github.com/marimeireles/talks/",target:"_blank",className:"text-primary hover:underline",children:"Academic work →"})})]})},Community:{emoji:"🦄",content:x.jsxs("div",{className:"space-y-3 text-sm",children:[x.jsxs("p",{children:["I flourish by having the support, serendipity and positive feedback loops that a community brings. Do you want to learn or practice something together? Send me a message! If you want, you can also send me anonymous feedback ",x.jsx("a",{href:"https://www.admonymous.co/marimeireles",target:"_blank",className:"text-primary hover:underline",children:"here"}),"."]}),x.jsxs("div",{className:"win95-border bg-muted p-2",children:[x.jsx("h4",{className:"font-bold mb-1",children:"Activities"}),x.jsxs("ul",{className:"space-y-2 text-xs",children:[x.jsxs("li",{children:["• ",x.jsx("b",{children:"Supper and salon"}),': I host vegan dinners and salons in Berlin. Themes we talked about in the past include "The limits of free speech", "Spirituality and rituals", "Rethinking future socio-economic structures and institutions", "How to be moral", etc. If you are a Berliner or a passer-by and would like to join we welcome first-timers, just send me an email!',x.jsx("ul",{className:"ml-4 mt-1",children:x.jsxs("li",{children:["↪ If we're on a 1:1 I'm happy to have discussions that abide to the ",x.jsx("a",{href:"https://www.lesswrong.com/w/crockers-rules",target:"_blank",className:"text-primary hover:underline",children:"Crocker's Rules"}),"."]})})]}),x.jsxs("li",{children:["• ",x.jsx("b",{children:"Buddhism and meditation"}),": I practice Dzogchen Tibetan Buddhism. That said, I was a part of many religious traditions in the past and I enjoy very much learning about all kinds of different cults and spiritual communities. I'm part of an ",x.jsx("a",{href:"https://aroencyclopaedia.org/shared/text/i/information_in_01_introduction_eng.php",target:"_blank",className:"text-primary hover:underline",children:"Aro"})," sangha in Berlin and you're welcome to join us if you're interested and respectful, the sangha is religious. I'm interested in meditating with others and sharing curious states of consciousness (non-related with drug-usage as I do my best to follow the ",x.jsx("a",{href:"https://www.parallax.org/mindfulnessbell/article/dharma-talk-five-wonderful-precepts/",target:"_blank",className:"text-primary hover:underline",children:"five precepts"}),")."]}),x.jsxs("li",{children:["• ",x.jsx("b",{children:"Literature"}),": I really enjoy learning through reading and exploring new worlds through text. I try to keep an up-to-date ",x.jsx("a",{href:"/reading-list.html",target:"_blank",className:"text-primary hover:underline",children:"reading list"}),", maybe we can chill in a cafe or park and talk about ideas we had after reading together. I also write or post short texts or poems I like ",x.jsx("a",{href:"https://lettersfortheevanescents.mataroa.blog/",target:"_blank",className:"text-primary hover:underline",children:"here"}),"."]}),x.jsxs("li",{children:["• ",x.jsx("b",{children:"Multimedia Artist"}),": It's really fun to be the girl taking care of lights at events. I've built my own DMX controller, and I'm somewhat versed in being scrappy with electronics. I also try to be artsy with Touch Designer, I mainly focus on interactive art. Check some of my ",x.jsx("a",{href:"https://github.com/marimeireles/touchdesigner-toes/tree/master",target:"_blank",className:"text-primary hover:underline",children:"toes"}),". Here's a ",x.jsx("a",{href:"https://www.behance.net/marianameireles",target:"_blank",className:"text-primary hover:underline",children:"link"})," for a portfolio I'm building. I'm open for hire and to collaborate in this kind of work."]}),x.jsxs("li",{children:["• ",x.jsx("b",{children:"Drawing"}),": I'm a ",x.jsx("a",{href:"https://www.deviantart.com/marimeireles/gallery",target:"_blank",className:"text-primary hover:underline",children:"beginner tattoo artist"}),". Tattoing is a very special practice to me, something I consider truly sacred and ritualistic. I'm open to tattooing new people, if you're interested, send me an email. I'm looking to get a Sak Yant done, please let me know if you know anyone in Europe or the US that is able to bless it. I tattoo myself and friends. I also know the basics of painting with spray, and I want to learn more, I would very much like to learn together. I also want to improve in watercolor and drawing, for that I like to go out on small friend dates and paint city/landscapes."]}),x.jsxs("li",{children:["• ",x.jsx("b",{children:"AI Art*"}),": In the past, I've experimented with ",x.jsx("a",{href:"https://colab.research.google.com/drive/1hcUHPLk98zN_V89Z0U5nMUhabPjWk05k?userstoinvite=zeynepsatir35%40gmail.com&actionButton=1",target:"_blank",className:"text-primary hover:underline",children:"GANs"})," and created some ",x.jsx("a",{href:"https://www.deviantart.com/marimeireles/gallery/82011542/gan-designs-2021",target:"_blank",className:"text-primary hover:underline",children:"cool tattoo designs"}),". I've also worked with story telling and agent-based modeling LLMs. Would love to collaborate with artists as a software engineer! For more of my AI projects check my ",x.jsx("a",{href:"https://www.behance.net/marianameireles",target:"_blank",className:"text-primary hover:underline",children:"Behance"}),"."]}),x.jsxs("li",{children:["• ",x.jsx("b",{children:"Music"}),": Music theory, music producing (mainly electronic but also interested in analog jams), djing, foxdot(and similar shenanigans). I play the guitar and sing a bit, trying to be better at my Bossa Nova. Also looking for riot grrrls to play some punk rock with."]}),x.jsxs("li",{children:["• ",x.jsx("b",{children:"Flow"}),": Dragon staff, hula-hoop, fire flow, yoga. Anything flowey, I'm always looking for people to share these practices with."]}),x.jsxs("li",{children:["• ",x.jsx("b",{children:"Sports"}),": I am practicing calisthenics mixed in with some free weight lifting. I think it's fun to practice with friends, as we can teach each other stuff. I go to a nearby calisthenics park, but open to travel for a calisthenics date. I also really like bouldering and am member at a cool climbing gym! If interested, ask me which."]})]})]})]})},Activism:{emoji:"🌈",content:x.jsxs("div",{className:"space-y-3 text-sm",children:[x.jsxs("p",{children:["I support several causes: ",x.jsx("a",{href:"https://ethicalsource.dev/",target:"_blank",className:"text-primary hover:underline",children:"ethical open source"}),", ",x.jsx("a",{href:"https://en.wikipedia.org/wiki/Animal_Liberation_(book)",target:"_blank",className:"text-primary hover:underline",children:"animal liberation"}),", the ",x.jsx("a",{href:"https://ourworldindata.org/environmental-impacts-of-food?insight=differences-carbon-footprint-foods#key-insights-on-the-environmental-impacts-of-food",target:"_blank",className:"text-primary hover:underline",children:"decrease"})," in animal-based products consumption, investing in carbon offsets to decrease my CO2 footprint, leveraging democracy through ",x.jsx("a",{href:"https://pol.is/home",target:"_blank",className:"text-primary hover:underline",children:"open democratic practices"}),", ",x.jsx("a",{href:"https://postmeritocracy.org/",target:"_blank",className:"text-primary hover:underline",children:"post meritocracy"})," in my engineering work context, combating disinformation on the Web, ",x.jsx("a",{href:"https://80000hours.org/problem-profiles/artificial-intelligence/",target:"_blank",className:"text-primary hover:underline",children:"AI alignment"}),", ",x.jsx("a",{href:"https://ia600605.us.archive.org/15/items/GuerillaOpenAccessManifesto/Goamjuly2008.pdf",target:"_blank",className:"text-primary hover:underline",children:"open access to knowledge"}),", empowering people to overcome poverty using a) ",x.jsx("a",{href:"https://marimeireles.notion.site/Poverty-alleviation-6cc16e6e2e3e49d19ed9112aec79d5cf?pvs=4",target:"_blank",className:"text-primary hover:underline",children:"non-traditional methods of pedagogy"}),", b) ",x.jsx("a",{href:"https://marimeireles.notion.site/Poverty-alleviation-6cc16e6e2e3e49d19ed9112aec79d5cf?pvs=4",target:"_blank",className:"text-primary hover:underline",children:"land redistribution coupled with permaculture"})," and community building in rural contexts c) offering OSS opportunities through ",x.jsx("a",{href:"https://marimeireles.notion.site/Poverty-alleviation-6cc16e6e2e3e49d19ed9112aec79d5cf?pvs=4",target:"_blank",className:"text-primary hover:underline",children:"internships"})," and ",x.jsx("a",{href:"https://marimeireles.com/mentorship.html",target:"_blank",className:"text-primary hover:underline",children:"mentoring"})," d) respecting people's agency over their own economical future through ",x.jsx("a",{href:"https://www.givedirectly.org/",target:"_blank",className:"text-primary hover:underline",children:"donating money directly"})," to them."]}),x.jsxs("div",{className:"win95-border bg-muted p-2",children:[x.jsx("h4",{className:"font-bold mb-1",children:"Projects I Support"}),x.jsxs("ul",{className:"space-y-1 text-xs",children:[x.jsxs("li",{children:["• ",x.jsx("a",{href:"https://www.linkedin.com/company/84894279/",target:"_blank",className:"text-primary hover:underline",children:"Women of Color Code"})]}),x.jsxs("li",{children:["• ",x.jsx("a",{href:"https://www.redi-school.org/",target:"_blank",className:"text-primary hover:underline",children:"ReDI School"})]}),x.jsxs("li",{children:["• ",x.jsx("a",{href:"https://berlin.pyladies.com/",target:"_blank",className:"text-primary hover:underline",children:"PyLadies Berlin"})]}),x.jsxs("li",{children:["• ",x.jsx("a",{href:"https://www.frauenloop.org/",target:"_blank",className:"text-primary hover:underline",children:"Frauen Loop"})]})]})]}),x.jsx("p",{className:"text-xs",children:"I believe women have the right to have full control over their own bodies:"}),x.jsx("div",{className:"win95-border bg-muted p-2",children:x.jsxs("ul",{className:"space-y-1 text-xs",children:[x.jsxs("li",{children:["• ",x.jsx("a",{href:"https://fragdenstaat.de/aktionen/219a/",target:"_blank",className:"text-primary hover:underline",children:"Frag Den Staat"}),": Doctors in Germany are not allowed to post factual information on abortions on their websites. This organization is currently providing resources on the subject in German, English, and Turkish."]}),x.jsxs("li",{children:["• ",x.jsx("a",{href:"https://www.womenonwaves.org/en/",target:"_blank",className:"text-primary hover:underline",children:"Women on Waves"}),": A Dutch NGO bringing reproductive health services to women in countries with restrictive abortion laws. If the value of their products is inaccessible to you, I want to help, send me an email."]})]})})]})}}[n];return t?x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"win95-border bg-gradient-to-r from-primary/10 to-accent/20 p-3 text-center",children:[x.jsx("div",{className:"text-3xl mb-2",children:t.emoji}),x.jsx("h2",{className:"text-lg font-bold text-primary",children:n})]}),x.jsx("div",{className:"win95-border-inset bg-white p-3 max-h-[400px] overflow-y-auto",children:t.content})]}):x.jsx("div",{className:"win95-border-inset bg-white p-4 text-center",children:x.jsx("p",{className:"text-muted-foreground",children:"Content not found"})})},oW=`Name,Status,Type,Author,Notes
Alcibiades,Read,philosophy,Plato
The Vital Question,Want to read,biology;teleology,
The Player of Games,Read,sci-fi,Ian Banks
The Wisdom of Insecurity,Read,buddhism,Allan Watts
The Dark Forest,Read,sci-fi,Cixin Liu
The dynamic world of Ukiyo-e,Want to read,art,Kuniyoshi
Ulysses,Reading,fiction,James Joyce
King Lear,Read,fiction,Shakespeare
Introduction to Topological Manifolds,Want to read,math,John M. Lee
Mathematical Structure of Syntactic Merge,Want to read,math;language,Matilda
Why Greatness Cannot Be Planned,Reading,philosophy,Kenneth O. Stanley and Joel Lehman
Population Games and Evolutionary Dynamics,Reading,math;game-theory;evolution,Sandholm
Magic Science and Religion and the Scope of Rationality,Reading,anthropology;religion;history,Stanley Jeyaraja Tambiah
The Calculus of Selfishness,Reading,math;game-theory,Sigmund
The Essential Rilke,Read,poetry,Rilse
The Rebel,Want to read,fiction;philosophy,Camus
Ode to a Nightingale,Want to read,poetry,John Keats
Who Gets What and Why,Want to read,economics,Alvin E. Roth
1q94,Want to read,fiction,Murakami
Small Moral Works,Want to read,philosophy,Giacomo Leopardi
Ramayana,Reading,religion;hinduism,Valmiki
Essays on the Gita,Want to read,religion;hinduism,Aurobindo
The Feeling of Life Itself,Want to read,consciousness,Koch
High Weirdness,Want to read,drugs;magic,Philip K. Dick Terence McKenna and Robert Anton Wilson
Wild Swans: Three Daughters of China,Want to read,history;biography,Jung Chang
Wild Geese,Want to read,poetry,Mary Oliver
Shadows of the mind,Want to read,consciousness,Penrose
Letters to a Young Poet,Read,poetry,Rainer Maria Rilke 
Spacetime and Geometry: An Introduction to General Relativity,Want to read,physics, Sean Carroll
Philebus,Want to read,philosophy,Plato
Gorgias,Want to read,philosophy,Plato
Science and the Modern World,Reading,philosophy;physics,Whitehead
Terra Ignota,Want to read,sci-fi,Palmer
Always Coming Home,Want to read,sci-fi,Le Guin
God is a verb,Reading,judaism;magic,David A. Cooper
An Enquiry Concerning Human Understanding,Abandoned,philosophy,Hume
The Couple's Guide to Thriving with ADHD,Read,psychology,Melissa Orlov and Nancie Kohlenberger
The Unbearable Lightness of Being,Read,fiction;philosophy,Milan Kundera
Ant Architecture,Reading,biology,Walter R Tschinkel
Shadows at Noon,Reading,history,Joya Chatterji
The Computer and the Brain,Read,neuroscience;computer-science,Von Neumann
Spectrum of Ecstasy,Reading,buddhism,Khandro Dechen and Ngakpa Chogyam
Distress,Want to read,sci-fi,Greg Egan
Picturing Quantum Processes,Want to read,physics,Bob Coecke and Stefano Gogioso
Invisible Cities,Want to read,fiction,Italo Calvino
Narciss and Goldmund,Want to read,fiction,Hesse
The Perennial Philosophy,Want to read,philosophy,Huxley
What it is like to be a Bat,Want to read,philosophy,Thomas Nagel
On Certainty,Want to read,philosophy,Wittgenstein
Embodied Mind: Cognitive Science and Human Experience,Want to read,psychology;philosophy,Francisco Varela
Reinventing the sacred: A new view of science reason and religion,Want to read,philosophy,Stuart Kauffman
The tao is silent,Reading,buddhism;philosophy,Raymon Smullyan
The Autobiography of a Super-Tramp,Read,autobiography,H. W. Davis
Jung's Map of the Soul,Read,psychology,
Learn Physics with Functional Programming,Want to read,physics,Scott N. Walck
An Introduction to Automata Theory Languages and Computation,Want to read,computer-science,Hopcroft
Structure and Interpretation of Classical Mechanics,Want to read,physics,Sussman
On Virtue Ethics,Want to read,philosophy,Rosalind Hursthouse
Surprised by Joy: The Shape of My Early Life,Want to read,biography;christianity,C.S. Lewis
Consider Phlebas,Stalled,sci-fi,Iain M. Banks
Opression and liberty,Reading,philosophy;economics,Simone Weil
How to Know a Person: The Art of Seeing Others Deeply and Being Deeply Seen,Want to read,psychology,David Brooks
Living With Complexity,Want to read,complexity,Donald A. Norman
Modern Man in Search of a Soul,Read,psicology,Jung
The Heroic Heart,Read,buddhism,Jetsunma Tenzin Palmo
River Out of Eden,Want to read,evolution;history,Richard Dawkins
Karmamudra: The Yoga of Bliss,Reading,buddhism;sex,Nida Chenagtsang
My Spiritual Autobiography,Read,biography;buddhism,Dalai Lama
Broke: Fixing Britain’s poverty crisis,Reading,economics,Tom Clark
I Want to Keep Smashing Myself Until I Am Whole,Want to read,philosophy,Elias Canetti and Joshua Cohen
Why Greatness Cannot Be Planned,Want to read,computer-science;psychology,Kenneth O. Stanley and Joel Lehman
Models of My Life,Want to read,philosophy;economics,Herbert Simon
The Complex World,Want to read,complex-systems,Krakauer
The Democracy Project,Want to read,history;anthropology;economics,David Graeber
A Book of Noises,Want to read,music,Caspar Henderson
The Moment of Complexity,Want to read,complex-systems,Mike Taylor
Cooperation: A Political Economic and Social Theory,Want to read,coordination;game-theory,Harcourt
The Tyranny of the Ideal,Want to read,philosophy,Gerald F Gaus
Post-scarcity Anarchism,Want to read,anarchism;economics,Murray Bookchin
The Problem of Induction,Want to read,philosophy,Hume
The Usefulness of Useless Knowledge,Want to read,philosophy,Abraham Flexner and Robbert Dijkgraaf
Chaos,Reading,physics;complex-systems,James Gleick
Emotional Intelligence,Read,psychology,Daniel Goleman
Good Economics for Hard Times,Reading,economics,Abhijit and Duflo
Factfulness,Read,economics;philosophy,Hans Rosling
Dynamical Systems in Neuroscience,Want to read,neuroscience,Eugene M. M Izhikevich
The Cyberiad,Read,sci-fi,Stanisław Lem
The Age of Em,Reading,futurism,Robin Hanson,
How Asia Works,Read,economics;history,Joe Studwell,
Norwegian Wood,Stalled,fiction,Haruki Murakami,
Tudo é rio,Read,fiction,Carla Madeira,
The Language Instinct,Want to read,psychology;evolution;consciousness,Steven Pinker
The Society of Mind,Reading,consciousness;computer-science,Marvin Minsky
Logicomix,Want to read,comics,Apostolos Doxiadis
The Miracle of Mindfulness,Read,buddhism,Thich Nhat Hanh
Deschooling Society,Want to read,education,Ivan Illich
Free schools,Want to read,education,Jonathan Kozol
The Ignorant Schoolmaster,Want to read,education,Jacques Rancière
Cognitive Science An Introduction to the Science of the Mind,Want to read,psychology;neuroscience,Jose Luis Bermudez
Macroeconomics,Want to read,economics,Mankiw
Algebra,Want to read,math,Serge Lang
The Theory of Groups and Quantum Mechanics,Want to read,math;physics,Weyl
Representation Theory A First Course,Want to read,math,Fulton & Harris
Introduction to Statistical Inference,Want to read,math,Kiefer
Data Analysis A Bayesian Tutorial,Want to read,math,Skilling & Sivia
Bishop's Pattern Recognition and Machine Learning,Want to read,computer-science,Christopher M. Bishop 
Salinsky & Frances-White's The Improv Handbook,Want to read,comedy,Tom Salinsky and Deborah Frances-White 
Does Altruism Exist? Culture Genes and the Welfare of Others,Read,evolution;philosophy,David Sloan Wilson
This View of Life: Completing the Darwinian Revolution,Want to read,coordination;evolution,David Sloan Wilson
Right Concentration,Reference,buddhism,Leigh Brasington
The Three-Body Problem,Read,sci-fi,Ken Liu
At Home in Mitford,Want to read,fiction,Jan Karon
Good Omens,Abandoned,fiction, Terry Pratchett and Neil Gaiman
Good Sex: Getting Off Without Checking Out,Read,buddhism;sex,Jessica Graham
Orthodox Chinese Buddhism,Read,buddhism,Sheng-yen
Union of Mahamudra and Dzogchen,Want to read,buddhism,Chökyi Nyima Rinpoche
The Science of Enlightenment: How Meditation Works,Read,buddhism,Shinzen Young
Wild Ivy: The Spiritual Autobiography of Zen Master Hakuin,Want to read,buddhism; biography,Hakuin
Zen Mind Beginner's Mind,Read,buddhism,Shunryū Suzuki
Diversity and Complexity,Stalled,complex-systems,Scott E. Page
Handbook of Computational Economics,Want to read,agent-based-modelling;economics,Leigh Tesfatsion
Radical Markets,Want to read,economics,Glen Weil
The Hitchhiker's Guide to the Galaxy,Read,sci-fi,Douglas Adams,
The Restaurant at the End of the Universe,Read,sci-fi,Douglas Adams,
Life the Universe and Everything,Read,sci-fi,Douglas Adams,
So Long and Thanks for All the Fish,Read,sci-fi,Douglas Adams,
Mostly Harmless,Read,sci-fi,Douglas Adams,
How to Travel with a Salmon: and Other Stories,Read,fiction,Umberto Eco
Snowcrash,Read,sci-fi,Neal Stephenson,
Neuromancer,Read,sci-fi
The Rise and Fall of American Growth,Want to read,history,Robert J. Gordon
Men Machines and Modern Times,Want to read,history,Elting E. Morison
Commoning as a Transformative Social Paradigm,Want to read,anarchism;urbanism,David Bollier
You Are Here,Read,buddhism,Thich Nhat Hanh
The Art Of Living,Read,buddhism,Thich Nhat Hanh
The Art of Mindful Living,Read,buddhism,Thich Nhat Hanh
Call Me By My True Names,Want to read,buddhism;poetry,Thich Nhat Hanh
Peace Is Every Step,Read,buddhism,Thich Nhat Hanh
Shambhala: The Sacred Path of the Warrior,Abandoned,buddhism;magic,Chogyam Trungpa,
Cutting Through Spiritual Materialism,Want to read,buddhism,Chogyam Trungpa
On Having No Head,Read,buddhism,Douglas Edison Harding
Cooperative Game Theory and Applications,Want to read,game-theory;coordination,Imma Curiel
Micromotives and Macrobehavior,Want to read,agent-based-modelling,Schelling
Difficult Conversations,Want to read,psychology,Douglas Stone et al.
The Book of Joy,Read,buddhism,Dalai Lama and Desmond Tutu
A Guide to the Good Life,Read,philosophy; psychology,William Irvine
Consciousness Explained,Reading,consciousness,Daniel C. Dennet
The Knowledge Machine,Want to read,philosophy,Michael Strevens
Social Engineering,Want to read,psychology,Robert W. Gehl & Sean T. Lawson
What is Truth,Want to read,philosophy,Peter Vardy
The Logic of Scientific Discovery,Stalled,philosophy,Popper
The Other Significant Others,Read,psychology,,Not a lot of content, unfortunately.
A Treatise of Human Nature,Want to read,philosophy,Hume,
Phenomenology of Perception,Want to read,philosophy,Maurice Merleau-Ponty,
Philosophical Investigations,Reading,philosophy,Wittgenstein,
Secrets of Divine Love: A Spiritual Journey into the Heart of Islam,Want to read,philosophy; islam,Helwa,
From Darkness Into Light,Want to read,philosophy; islam,Helwa,
Zen and the Art of Motorcycles,Read,philosophy,Robert Pirsig,
The Wisdom of Insecurity,Read,philosophy,Alan Watts,
The Social Instinct: How Cooperation Shaped the World,Want to read,psychology; biology,Nichola Raihani,
Walden Two,Want to read,fiction; philosophy,B.F. Skinner,
Beyond Freedom and Dignity,Want to read,philosophy,B.F. Skinner,
The Emergence of Organizations and Markets,Want to read,economics; history,John F. Padgett & Walter W. Powell,
Seeing Like a State: How Certain Schemes to Improve the Human Condition Have Failed,Read,history; economics; urbanism,James C. Scott,Great and unexpected insights against communism coming from the far-left.
Famine Affluence and Morality,Read,philosophy,Peter Singer,
The Art of Statistics: How to Learn from Data,Reading,math,David Spiegelhalter,
If You're an Egalitarian How Come You're So Rich?,Want to read,economics; philosophy,G.A. Cohen,
Supercooperators: The Mathematics of Evolution Altruism and Human Behaviour,Want to read,coordination; evolution,Martin Nowak,
The Nature of Computation,Reading,computer-science; math,Cristopher Moore & Stephan Mertens,
Category Theory for the Sciences,Want to read,math,David I. Spivak,
A Mathematician's Apology,Want to read,math; philosophy,G.H. Hardy,
Evolutionary Dynamics: Exploring the Equations of Life,Want to read,evolution; biology; math,Martin Nowak,
Dilla Time,Want to read,biography,Dan Charnas,
Foundryside,Want to read,sci-fi,Robert Jackson Bennett,
The Long Way to a Small Angry Planet,Read,sci-fi,Becky Chambers,
Beyond,Want to read,game-theory; philosophy; psychology,Martin Nowak,
Finite and Infinite Games,Want to read,philosophy; psychology,James P. Carse,
I Am a Strange Loop,Read,philosophy; math; biography,Douglas R. Hofstadter,
Gathering Moss,Want to read,biology,Robin Wall Kimmerer,
Reading Lessons,Want to read,education,Carol Atherton,
What Capitalism Needs Forgotten Lessons of Great Economists,Want to read,economics,John L Campbell John A. Hall,
Lyapunov Exponents,Want to read,complex-systems; physics,Arkady Pikovsky,
All the Mathematics You Missed,Want to read,math,,
Chaotic dynamics,Want to read,complex-systems; physics,,
Chaos in dynamical systems,Want to read,complex-systems; physics,Edward Ott,
Foundations of Complex-system Theories,Want to read,complex-systems,Sunny Auyang,
Intellectual Curiosity and the Scientific Revolution,Want to read,history,Toby Huff,
Tales of Japan,Want to read,fiction,,
Cognition in the Wild,Want to read,neuroscience,Edwin Hutchins,
The Economy of Cities,Want to read,economics; urbanism,Jane Jacobs,
Green Development: Environment and sustainability in the Third World,Want to read,agroecology,,
Finding the Mother Tree,Want to read,agroecology,,
Organic Manifesto: How Organic Farming Can Heal Our Planet Feed the World and Keep Us Safe,Want to read,agroecology; economics,,
A Networked Self: Identity Community and Culture on Social Network Sites,Want to read,anarchism; computer-science; psychology,,
Ethics: Origin and Development,Want to read,anarchism; philosophy,Peter Kropotkin,
Squatting in Europe,Want to read,anarchism; urbanism,,
The Mushroom at the End of the World,Want to read,anthropology,,
Moral Tribes: Emotion Reason and the Gap Between Us and Them,Want to read,anthropology,,
The Evolution of Civilizations,Want to read,anthropology,,
African Fractals,Want to read,anthropology; art,,
The Secret of Our Success: How Culture Is Driving Human Evolution; Domesticating Our Species; and Making Us Smarter,Want to read,anthropology; behaviorism; evolution; history; psychology,Joseph Henrich,
A Billion Wicked Thoughts: What the Internet Tells Us About Sexual Relationships,Want to read,anthropology; computer-science,,
Technology of the Oppressed: Inequity and the Digital Mundane in Favelas of Brazil,Want to read,anthropology; computer-science,,
Discipline and Punish: The Birth of the Prison,Read,philosophy;history,Foucault,Like every Foucault book this could have been a couple of pages long paper couldn't it?
The Collapse of Complex Societies,Want to read,anthropology; coordination; economics; history,Joseph A. Tainter,
On Human Nature,Want to read,anthropology; evolution; philosophy; psychology,E. O. Wilson,
War and Peace and War: The Rise and Fall of Empires,Want to read,anthropology; history,Peter Turchin,
Ultrasociety,Want to read,anthropology; history; systems-theory,Peter Turchin,
A Brief History of Everyone Who Ever Lived: The Stories in Our Genes,Want to read,anthropology; neuroscience,,
Cosmos,Want to read,anthropology; physics; history,Carl Sagan,
Cybernetics Art and Ideas,Want to read,art,,
10 PRINT CHR$(205.5+RND(1)); : GOTO 10,Want to read,art; computer-science; history,,
Genetics and Analysis of Quantitative Traits,Want to read,behaviorism; evolution,,
The Bell Curve: Intelligence and Class Structure in American Life,Want to read,behaviorism; psychology; questionable-research,Herrnstein,
The Confessions,Want to read,biography,,
The Book of Margery Kempe,Want to read,biography,,
Essays,Want to read,biography,Augustine,
Grace Abounding,Want to read,biography,Michel de Montaigne,
The Narrative of the Captivity and Restoration,Want to read,biography,,
The Autobiography of Benjamin Franklin,Want to read,biography,,
Narrative of the Life of Frederick Douglass,Want to read,biography,,
Incidents in the Life of a Slave Girl,Want to read,biography,,
Little House on the Prairie,Want to read,biography,,
The Road from Coorain,Want to read,biography,,
Black Boy,Want to read,biography,Richard Wright,
The Autobiography of Malcolm X,Want to read,biography,,
Hunger of Memory,Want to read,biography,,
The Year of Magical Thinking,Want to read,biography,,
LSD My Problem Child,Want to read,biography; drugs,Albert Hofmann,
My View of the World,Want to read,biography; philosophy,Schroedigner,
The Song of the Cell: An Exploration of Medicine and the New Human,Want to read,biology,,
Master Builder: How the New Science of the Cell is Rewriting the Story of Life,Want to read,biology; evolution,,
Why Buddhism Is True,Abandoned,buddhism,Bachelor,Very introductory to buddhist practices.
Regenesis: Feeding the World Without Devouring the Planet,Want to read,climate,,
All We Can Save: Truth; Courage and Solutions for the Climate Crisis,Want to read,climate,,
Complex Ecology,Want to read,climate; complex-systems,,
What If,Want to read,comics; computer-science; math; physics,Munroe,
Ghost in the Shell,Want to read,comics; fiction,,
Akira,Want to read,comics; fiction,,
The World of Eden,Want to read,comics; fiction,Moebius,
When the Wind Blows,Want to read,comics; fiction,Raymond Briggs,
The Primacy of Doubt: From Quantum Physics to Climate Change,Want to read,complex-systems,Tim Palmer,
Complex Population Dynamics: A Theoretical/Empirical Synthesis,Want to read,complex-systems; coordination,Peter Turchin,
Systems Thinking for Social Change,Want to read,complex-systems; coordination,,
Out of Control,Want to read,complex-systems; coordination; psychology,Kevin Kelly,
The Age of Prediction: Algorithms and the Shifting Shadow of Risk,Want to read,computer-science,,
The Essence of Software,Want to read,computer-science,Daniel Jackson,
Refactoring,Want to read,computer-science,Martin Fowler,
The Pragmatic Programmer: From Journeyman to Master,Want to read,computer-science,Andy Hunt; Dave Thomas,
Artificial Intelligence: A Modern Approach,Want to read,computer-science,Russel Norvig,
Staff Engineer: Leadership Beyond the Management Track,Want to read,computer-science,Will Larson,
Code,Want to read,computer-science,Charles Petzold,
Web Assembly in Action,Want to read,computer-science,,
Compilers: Principles Techniques and Tools,Want to read,computer-science,,
Waltzing With Bears: Managing Risk on Software Projects,Want to read,computer-science,,
Fairness and Machine Learning: Limitations and Opportunities,Want to read,computer-science,Solon Barca’s Moritz Hardt and Narayana,
The Alignment Problem Machine Learning and Human Values,Want to read,computer-science; philosophy,,
Code: Version 2.0,Want to read,computer-science; governance,,
Curl,Want to read,computer-science; governance,Guy that made curl,
The Revolt of The Public and the Crisis of Authority in the New Millennium,Want to read,computer-science; governance,Martin Gurri Arnold Kling,
The Stack: On Software and Sovereignty ,Want to read,computer-science; governance,,
Democracy in the Information Age,Want to read,computer-science; governance,Elaine Kamarck; Joseph Nye,
Accelerating Democracy: Transforming Governance Through Technology,Want to read,computer-science; governance,,
@ is for Activism: Dissent Resistance and Rebellion in a Digital Culture,Want to read,computer-science; governance,,
#Republic: Divided Democracy in the Age of Social Media,Want to read,computer-science; governance,Sunstein,
The Crowdfunding Revolution: Social Networking Meets Venture Financing,Want to read,computer-science; governance; economics,Lawton Marom,
Abolish Silicon Valley,Want to read,computer-science; governance; economics,,
A World Without Work,Want to read,computer-science; governance; economics,,
Active Measures,Want to read,computer-science; disinformation,,
Geekonomics: The Real Cost of Insecure Software,Want to read,computer-science; economics; info-sec,,
Art of Doing Science and Engineering: Learning to Learn,Want to read,computer-science; education,,
A Madman Dreams of Turing Machines,Want to read,computer-science; history,,
A Computer Called Leo,Want to read,computer-science; history,,
A Brief History of the Future: From Radio Days to Internet Years in a Lifetime,Want to read,computer-science; history,,
A Brief History of Computing,Want to read,computer-science; history,,
@War: The Rise of the Military-Internet Complex,Want to read,computer-science; history,,
Quantum Computing Since Democritus,Want to read,computer-science; history; math; physics,Scott Aaronson,
The Nature of Mathematical Modeling,Want to read,computer-science; math,Neil Geshenfeld,
An Introduction to Statistical Learning: With Applications in R,Want to read,computer-science; math,,
Computers and Intractability: A Guide to the Theory of NP-Completeness,Want to read,computer-science; math,,
Principles of Computational Modelling in Neuroscience,Want to read,computer-science; neuroscience,,
Fundamentals of Computational Neuroscience,Want to read,computer-science; neuroscience,Trappenberg,
The Computer and the Brain,Want to read,computer-science; neuroscience; systems-theory,Von Neumann,
Moral AI: And How We Get There,Want to read,computer-science; philosophy,Jana Schalch Borg,
Hackers & Painters: Big Ideas from the Computer Age,Want to read,computer-science; philosophy,Paul Graham,
A Gift of Fire: Social Legal and Ethical Issues for Computing Technology,Want to read,computer-science; philosophy,,
A Dangerous Master: How to Keep Technology from Slipping Beyond Our Control,Want to read,computer-science; philosophy,,
A Crowd of One: The Future of Individual Identity,Want to read,computer-science; philosophy; psychology,,
Algorithms to Live By,Want to read,computer-science; psychology,,
The Conscious Mind: In Search of a Fundamental Theory,Want to read,consciousness; philosophy,David Chalmers,
The Elephant in the Brain,Want to read,consciousness,,
Thoughtfulness and the Rule of Law,Want to read,governance,Jeremy Waldron,
End Times: Elites Counter-Elites and the Path of Political Disintegration,Want to read,governance,Peter Turchin,
Where There Is No Government,Want to read,governance,Joireman,
Patterns of Democracy,Want to read,governance,Arend Lijphart,
The Death and Life of Great American Cities,Want to read,governance;urbanism,,
Governing the Commons,Read,governance;game-theory,Elinor Ostrom,
Systems Thinking for Social Change,Want to read,governance,,
Regenerative Leadership,Want to read,governance,Giles Hutchins & Laura Storm,
The End of Poverty,Want to read,economics; economics,Sach,
How the World Really Works,Want to read,economics,Vaclav Smil,
Controlling Corruption,Want to read,governance; economics,,
The Great Transformation,Want to read,governance; economics; history,Karl Polanyi,
Knowledge And Decisions,Want to read,governance; economics; philosophy,Thomas Sowell,
The Myth of the Rational Voter: Why Democracies Choose Bad Policies,Want to read,governance; economics; psychology,Bryan Caplan,
Another Now: Dispatches from an Alternative Present,Want to read,governance; fiction,Yanis Varoufakis,Kind of like Postcapitalism but better(?)
Democracy in America,Want to read,governance; history,Tocqueville,
Collapse: How Societies Choose to Fail or Succeed ,Want to read,governance; history,Jared Diamond,
Our Political Nature: The Evolutionary Origins of What Divides Us,Want to read,governance; history; psychology,Avi Tuschman,
Open Development: Networked Innovations in International Development,Want to read,governance; open-source,,
Why We're Polarized,Want to read,governance; philosophy,Ezra Klein,
Economics of Good and Evil,Want to read,economics,,Similar to Poor Economics
The Persistency of Poverty ,Want to read,economics,,
The New Economics: A Manifesto,Want to read,economics,Steve Keen,
Mission Economy,Want to read,economics,Mariana Mazzucato,
Everything for Everyone,Want to read,economics,,
Ours to Hack and to Own,Want to read,economics,Schneider,
Good Capitalism; Bad Capitalism; and the Economics of Growth and Prosperity,Want to read,economics,,
Basic Economics: A Common Sense Guide to the Economy,Want to read,economics,,
On Classical Economics,Want to read,economics,Thomas Sowell,
The Times Complete History of the World,Want to read,economics,Richard Overy,
The Thank You Economy,Want to read,economics,,
Doing Economics: A Guide to Understanding and Carrying Out Economic Research,Want to read,economics,,
How Markets Fail: The Logic of Economic Calamities,Want to read,economics,,
The Trouble with Markets: Saving Capitalism from Itself,Want to read,economics,,
Capitalism Socialism and Democracy,Want to read,economics;governance,,
Building a Sustainable and Desirable Economy-in-Society-in-Nature,Want to read,economics,,
Understanding Capital: Marx's Economic Theory,Want to read,economics;history,,
Grassroots and Nonprofit Leadership: A Guide for Organizations in Changing Times,Want to read,economics,,
Imperialism in the Twenty-First Century: Globalization Super-Exploitation and Capitalism's Final Crisis,Want to read,economics;history,,
Rethinking Money: How New Currencies Turn Scarcity into Prosperity,Want to read,economics,,
The Looting Machine: Warlords Oligarchs Corporations Smugglers and the Theft of Africa's Wealth,Want to read,economics,,
Inequality: What Can Be Done?,Want to read,economics,,
Politics Is for Power: How to Move Beyond Political Hobbyism Take Action and Make Real Change,Want to read,economics,,
Small Is Beautiful: Economics as if People Mattered,Want to read,economics,,
Common Wealth: Economics for a Crowded Planet,Want to read,economics,,
Social Justice Handbook: Small Steps for a Better World,Want to read,economics,,
The Local Economy Solution,Want to read,economics,,
Beyond Growth: The Economics of Sustainable Development,Want to read,economics,,
The Good Society: The Humane Agenda,Want to read,economics,,
Local Is Our Future: Steps to an Economics of Happiness,Want to read,economics,,
Moral Politics: How Liberals and Conservatives Think,Want to read,economics,,
Social Entrepreneurship: What Everyone Needs to Know,Want to read,economics;governance,,
Manifesto of the Free People's Union,Want to read,economics,,
Cities and the Wealth of Nations,Want to read,economics;urbanism,,
Wikinomics: How Mass Collaboration Changes Everything,Want to read,economics,,
Creating a Learning Society: A New Approach to Growth Development and Social Progress,Want to read,economics,,
The Wealth of Nations/The Theory of Moral Sentiments,Want to read,economics,,
Merchants of Doub,Want to read,economics,,
You Can't Be Neutral on a Moving Train: A Personal History of Our Times,Want to read,economics,,
Why Nations Fail,Want to read,economics,Daron Acemoglu and James A. Robinson,
Inventing the Future: Postcapitalism and a World Without Work,Want to read,economics; anarchism;governance,,
The Case Against Education: Why the Education System Is a Waste of Time and Money,Want to read,economics; education,Bryan Caplan,
Atlas Shrugged,Want to read,economics; fiction,Ayn Rand,
Analyzing Politics,Want to read,economics; game-theory, Kenneth A Shepsle,
Understanding Power: The Indispensable Chomsky,Want to read,economics; history,,
The Revolution Will Not be Funded,Want to read,economics; philosophy,,
The Wisdom of Crowds,Want to read,economics; psychology,James Surowiecki,
Nudge,Want to read,economics; questionable-research,Sunstein,
The Tipping Point: How Little Things Can Make a Big Difference,Want to read,economics; questionable-research,Malcolm Gladwell,
Blind Spots: Why We Fail to Do What's Right and What to Do about It,Want to read,economics; questionable-research,,
Blindness,Abandoned,fiction,Saramago,So incredibly boring.
Animal Spirits: How Human Psychology Drives the Economy and Why It Matters for Global Capitalism,Want to read,economics; questionable-research,,
The Educated Mind,Want to read,education,,
Seven Complex Lessons in Education for the Future,Want to read,education,Edgar Morin,
Pedagogy of Freedom,Want to read,education,Paulo Freire,
Pedagogia do Oprimido,Want to read,education,Paulo Freire,
How We Learn: The New Science of Education and the Brain,Want to read,education; neuroscience,,
Power Sex Suicide: Mitochondria and the Meaning of Life,Want to read,evolution,Nick Lane,
The Selfish Gene,Want to read,evolution,Dawkins,
Consilience,Want to read,evolution,E. O. Wilson,
The Origins of Species,Want to read,evolution,,
The Machinery of Life,Want to read,evolution; biology,David S. Goodsell,
Evolution and the Theory of Games,Want to read,evolution; math; systems-theory,John Maynard Smith,
A History of the Human Brain: From the Sea Sponge to CRISPR; How Our Brain Evolved,Want to read,evolution; neuroscience,Bret Stekta,
How to Travel with a Salmon: And Other Essays,Read,fiction,Umberto Eco,
Fahrenheit 451,Want to read,fiction,,
The Sound and the Fury,Want to read,fiction,William Faulkner
The High King,Want to read,fiction,,
Taran Wanderer,Want to read,fiction,,
Solenoid,Want to read,fiction,Mircea Cărtărescu,
Gilead,Want to read,fiction,,
The Ballad of Black Tom,Want to read,fiction,,
I Wonder What Human Flesh Tastes Like,Want to read,fiction,,
Jade City,Want to read,fiction,Fonda Lee,
Mistborn,Want to read,fiction,Brandon Sanderson,
Another Now: Dispatches from an Alternative Present,Want to read,fiction,Yanis Varoufakis,
Foucault's Pendulum,Want to read,fiction,Umberto Eco,
The Grail Quest,Want to read,fiction,Bernard Cornwell,
Into the Wild,Want to read,fiction,,
The Sound and Fury,Want to read,fiction,,
Howl’s Moving Castle,Want to read,fiction,,
David Copperfield,Want to read,fiction,,
Oliver Twist,Want to read,fiction,,
The Call of the Wild,Read,fiction,,
And Then There Were None,Want to read,fiction,,
The Girl With the Dragon Tattoo,Want to read,fiction,,
Dungeon Crawler Karl,Want to read,fiction,,
A Wizard of Earthsea Rimbaud,Want to read,fiction,,
Lolita,Want to read,fiction,Vladimir Nabokov,
Man’s Search for Meaning,Want to read,biography; philosophy,Viktor Frankl,
Waves,Want to read,fiction,Virginia Woolf,
Mrs Dalloway,Want to read,fiction,Virginia Woolf,
The Decameron,Want to read,fiction,Boccaccio,
O Guarani,Want to read,fiction,,
O Ateneu,Want to read,fiction,,
Sagarana,Want to read,fiction,,
The Gambler,Want to read,fiction,Dostoevsky,
Moby Dick,Want to read,fiction,,
Don Quixote,Want to read,fiction,,
The Return of the Native,Want to read,fiction,,
Madame Bovary,Want to read,fiction,,
Huckleberry Finn,Want to read,fiction,,
The Portrait of a Lady,Want to read,fiction,,
Red Badge of Courage,Want to read,fiction,,
Seize the Day,Want to read,fiction,,
One Hundred Years of Solitude,Want to read,fiction,,
If On A Winter’s Night A Traveler,Want to read,fiction,,
Beloved,Want to read,fiction,,
Heart of Darkness,Want to read,fiction,,
The Things They Carried,Want to read,fiction,,
The House of Mirth,Want to read,fiction,,
Mrs. Dalloway,Want to read,fiction,,
Native Son,Want to read,fiction,,
Jane Eyre,Want to read,fiction,,
Uncle Tom's Cabin,Want to read,fiction,,
The Scarlet Letter,Want to read,fiction,,
Pilgrim’s Progress,Want to read,fiction,,
Agamemnon,Want to read,fiction,Aeschylus,
Oedipus Rex,Want to read,fiction,Sophocles,
Hippolytus,Want to read,fiction,Euripides,
The Comedy of Error,Want to read,fiction,William Shakespeare,
Richard II,Want to read,fiction,William Shakespeare,
The Spanish Tragedy,Want to read,fiction,Thomas Kyd,
Doctor Faustus,Want to read,fiction,Christopher Marlowe,
Life Is a Dream,Want to read,fiction,Pedro Calderon de la Barca,
Hedda Gabler,Want to read,fiction,Henrik Ibsen,
The Cherry Orchard,Want to read,fiction,Anton Chekhov,
Major Barbara,Want to read,fiction,George Bernard Shaw,
Six Characters in Search of an Author,Want to read,fiction,Luigi Pirandello,
Mother Courage and Her Children,Want to read,fiction,Bertolt Brecht,
Death of a Salesman,Want to read,fiction,Arthur Miller,
Waiting for Godot,Want to read,fiction,Samuel Beckett,
The Fall,Want to read,fiction; philosophy,Camus,
Dancing in the Glory of Monsters: The Collapse of the Congo and the Great War of Africa,Want to read,history,,
The Gulag Archipelago,Want to read,history,,
The White Pill: A Tale of Good and Evil,Want to read,history,,
Human Accomplishment,Want to read,history,Charles Murray,
Slavery and Social Death,Want to read,history,,
1491: New Revelations of the Americas Before Columbus,Want to read,history,Charles C. Mann,
The Strange Death of Europe: Immigration Identity Islam,Want to read,history,Douglas Murray,
How Europe Underdeveloped Africa,Want to read,history,Walter Rodney,
Histories,Want to read,history,Herodotus,
The Peloponnesian War,Want to read,history,Thucydides,
The Power of Geography,Want to read,history;,,
Common Sense,Want to read,history; philosophy,Thomas Paine,
The Federalist Papers,Want to read,history; philosophy,,
The Wretched of the Earth,Want to read,history; philosophy,Frantz Fanon,
Quantum: Einstein Bohr and the Great Debate about the Nature of Reality,Want to read,history; physics,Kumar,
The Matter of Everything: How Curiosity Physics and Improbable Experiments Changed the World,Want to read,history; physics,Suzie Sheehy,
Mild Children,Want to read,history; sci-fi,Hand Moravec,
A Myriad of Tongues,Want to read,language,,
The Case Against Reality,Want to read,magic;questionable-research,Donald Hoffman,
Existential Kink,Read,magic;questionable-research,,
Doing Bayesian Data Analysis: A Tutorial with R JAGS and Stan,Want to read,math,,
Proof and the Art of Mathematics,Want to read,math,Hamkins,
Mathematics: Its Content Methods and Meaning,Want to read,math,Aleksandrov and Kolmogorov,
The Fractal Geometry of Nature   The Fractal Geometry of Nature ,Want to read,math,Mandelbrot,
Linear Algebra and Its Applications,Want to read,math,Gilbert Strang,
Categories for the Working Mathematician,Want to read,math,Saunders Mac Lane,
Gödel's Proof,Want to read,math,,
Div Grad Curl and All That: An Informal Text on Vector Calculus,Want to read,math,Harry Schey,
Linear Algebra and Its Applications,Want to read,math,Gilbert Strang,
Concrete Mathematics: A Foundation for Computer Science,Want to read,math; computer-science,,
The Road to Reality,Want to read,math; philosophy; physics,,
The Theoretical Minimum: What You Need to Know to Start Doing Physics,Want to read,math; physics,Leonard Susskind,
Theoretical Neuroscience: Computational and Mathematical Modeling of Neural Systems,Want to read,neuroscience,Peter Dayan and Abbott,
Cognition in Practice: Mind Mathematics and Culture in Everyday Life,Want to read,neuroscience,,
Metamagical Themas: Questing for the Essence of Mind and Pattern,Want to read,neuroscience; coordination; computer-science; game-theory,David Hofstadter,
How We Learn: Why Brains Learn Better Than Any Machine . . . for Now,Want to read,neuroscience; psychology,,
Models of the Mind: How Physics Engineering and Mathematics Have Shaped Our Understanding of the Brain,Want to read,neuroscience; psychology,Grace Lindsay,
Why Zebras Don't Get Ulcers,Want to read,neuroscience; psychology,Sapolsky,
The Elephant in the Brain,Want to read,neuroscience; psychology,,
Why We Sleep,Want to read,neuroscience; questionable-research,Matthew Walker,
Open Sources: Voices from the Open Source Revolution,Want to read,open-source,,
Free Software Free Society,Want to read,open-source,Stallman,
On the Shortness of Life,Want to read,philosophy,Seneca,
Popper Selections,Want to read,philosophy,David Miller,
Tractatus Logico-Philosophicus,Want to read,philosophy,,
The Skeptics' Guide to the Universe: How to Know What's Really Real in a World Increasingly Full of Fake,Want to read,philosophy,Steven Novella,
After Virtue,Want to read,philosophy,,
Consider the Lobster: And Other Essays,Want to read,philosophy,David Foster Wallace,
Waking Up: A Guide to Spirituality Without Religion,Want to read,philosophy,Sam Harris,
The Trouble with Being Born,Want to read,philosophy,Emil Cioran,
Letters to a Young Contrarian,Want to read,philosophy,Christopher Hitchens,
The Open Society and Its Enemies,Want to read,philosophy,Karl Popper,
After Virtue,Want to read,philosophy,,
Nausea,Want to read,philosophy,Sartre,
Animal Rights: A Very Short Introduction,Want to read,philosophy,,
Epistemic Risk and the Demands of Rationality,Want to read,philosophy,,
Being and Time,Want to read,philosophy,Heidegger,
The Sofist,Want to read,philosophy,,
Consilience: The Unity of Knowledge ,Want to read,philosophy; evolution,E. O. Wilson,
Mind-body Problem,Want to read,philosophy; fiction,Rebecca Goldstein,
What Is Life? with Mind and Matter and Autobiographical Sketches,Want to read,philosophy; physics; biology,Erwin Schrödinger,
Rationality and the Reflective Mind,Want to read,philosophy; psychology,Stanovich,
Science Fictions: The Epidemic of Fraud Bias Negligence and Hype in Science,Want to read,philosophy; psychology,Stuart Ritchie,
Spacetime and Geometry: An Introduction to General Relativity ,Want to read,physics,Sean Carroll,
How to Make an Apple Pie from Scratch,Reading,physics,Harry Cliff,
Einstein's Universe,Want to read,physics,Nigel Calder,
Parallel Worlds: A Journey through Creation Higher Dimensions and the Future of the Cosmos,Want to read,physics,Michio Kaku,
String of Beads,Want to read,poetry,Shikishi,
Unforgotten Dreams,Want to read,poetry,Shotetsu,
Poemas Malditos Gostosos e Gozosos,Want to read,poetry,,
The Gold Cell,Want to read,poetry,Sharon Olds,
26 poetas hoje,Want to read,poetry,,
Pale Fire,Want to read,poetry,Nabokov,
The Iliad,Want to read,poetry,Homer,
The Odyssey,Want to read,poetry,Homer,
Sappho,Want to read,poetry,Sappho,
The Aeneid,Want to read,poetry,Virgil,
Canterbury Tales,Want to read,poetry,Geoffrey Chaucer,
Sonnets,Want to read,poetry,William Shakespeare,
Paradise Lost,Want to read,poetry,John Milton,
The Rape of the Lock,Want to read,poetry, Alexander Pope,
The Prelude,Want to read,poetry,William Wordsworth,
Leaves of Grass,Want to read,poetry,Walt Whitman,
Middlemarch,Want to read,poetry,George Eliot,
The Waste Land,Want to read,poetry,T.S. Eliot,
The Love Song of J. Alfred Prufrock,Want to read,poetry,T.S. Eliot,
Four Quartets,Want to read,poetry,T.S. Eliot,
The Dream Songs,Want to read,poetry,John Berryman,
Flow: The Psychology of Optimal Experience,Want to read,psychology,,
The Body Keeps the Score: Brain Mind and Body in the Healing of Trauma,Want to read,psychology,Kolk,
How Emotions Are Made: The Secret Life of the Brain,Want to read,psychology,,
The Red Book,Reading,psychology,Jung,
The Anxiety and Depression Work Book,Want to read,psychology,,
Nonviolent Communication: A Language of Life,Want to read,psychology,,
Inadequate Equilibria,Want to read,psychology,Eliezer Yudkowsky,
How We Change,Want to read,psychology,Polan,
Radical Acceptance,Want to read,psychology,Tara Brach,
The Paradox of Choice,Want to read,psychology,,
Stumbling on Happiness,Want to read,psychology,,
Predictably Irrational: The Hidden Forces That Shape Our Decisions,Want to read,psychology; economics,,
The Shape of Thought: How Mental Adaptations Evolve,Want to read,psychology; evolution,H. Clark Barrett,
Children of Time,Want to read,sci-fi,,
Enders Game,Want to read,sci-fi,,
Stories of Your Life and Others,Read,sci-fi,Ted Chiang,
Hyperion,Read,sci-fi,Dan Simmons,
Blindsight,Want to read,sci-fi,Peter Watts,
Sword & Citadel,Want to read,sci-fi,Gene Wolf,
The Peace War,Want to read,sci-fi,Vernor Vinge,
Permutation City,Read,sci-fi,Greg Egan,
Diaspora,Read,sci-fi,Greg Egan,
Cryptonomicon,Want to read,sci-fi,,
A Fire Upon the Deep,Read,sci-fi,Vernor Vinge,
Island,Want to read,sci-fi,Asimov,
Linked: How Everything Is Connected to Everything Else,Want to read,systems-theory,,
Nonlinear Dynamics and Chaos,Want to read,systems-theory; complex-systems; physics,Strogatz Steven H.,
Deep Simplicity: Bringing Order to Chaos and Complexity ,Want to read,systems-theory; complex-systems; physics,John Gribbin,
Sync: The Emerging Science of Spontaneous Order ,Want to read,systems-theory; history,,
The (Mis)Behavior of Markets,Want to read,systems-theory; math; economics,Mandelbrot,
A First Course in Chaotic Dynamical Systems: Theory and Experiment ,Want to read,systems-theory; physics,,
Does God Play Dice?: The New Mathematics of Chaos ,Want to read,systems-theory; physics; math,,
Dream States,Want to read,urbanism,,
Gödel Escher Bach: An Eternal Golden Braid,Stalled,computer-science;math;physics;Hofstadter,,
Crime and Punishment,Stalled,fiction,,
The Ministry for the Future,Stalled,sci-fi,Kim Stanley,
The Omnivore’s Dilemma ,Stalled,agroecology; anthropology,,
Rules Without Rulers,Stalled,anarchism,,
Anarcho-syndicalism: Theory and Practice,Stalled,anarchism,,
On Anarchism,Stalled,anarchism,Chomsky,
Ferramentas para Autonomia,Stalled,anarchism; governance,,
Markets Not Capitalism,Stalled,anarchism; economics,,
A Queda do Céu,Stalled,anthropology,,
Behave,Stalled,anthropology; behaviorism; neuroscience; psychology; questionable-research,,
You Are an Artist: Assignments to Spark Creation,Stalled,art,,
Active Inference,Reading,neuroscience; computer-science; math,Thomas Parr,
Wir Kindern vom Zoo Bahnhof,Stalled,biography,Christiane F.,
Memories Dreams Reflections,Stalled,biography,Jung,
Entering the Heart of Sun and Moon,Stalled,buddhism,,
Complexity: A Guided Tour,Stalled,complex-systems,Mitchell,
Which Side Are You On?,Stalled,governance,Thomas Geoghegan,
Postcapitalism,Stalled,governance; economics,,
The Origins of Political Order,Stalled,governance; economics; history,Fukuyama,
The Digital Party,Stalled,governance; open-source,,
Antifragile,Stalled,coordination; questionable-research,,
Thinking in Systems,Stalled,coordination; systems-theory,Donella Meadows,
Pihkal: A Chemical Love Story,Stalled,drugs,,
Sacred Economics,Stalled,economics; magic,,
How to Solve It: A New Aspect of Mathematical Method,Stalled,education; math,Polya,
Infinite Jest,Reading,fiction,David Foster Wallace,
Ficciones,Stalled,fiction,Jorge Luis Borges,
Der Mann mit der Ledertasche,Stalled,fiction,Bukowski,
The Plague,Stalled,fiction,,
War and Peace,Stalled,fiction,,
13th Age,Reference,games,,
Mathematical Proofs: A transition to advanced mathematics,Stalled,math,,
The Joy of Abstraction ,Stalled,math; systems-theory,Cheng,
Surfing Uncertainty,Stalled,neuroscience;consciousness,Clarke,
The Nichomachean Ethics,Read,philosophy,Aristotle,
Being and Nothingness,Stalled,philosophy,Sartre,
Meditations,Stalled,philosophy,Marcus Aurelius,
Geneology of Morals,Stalled,philosophy,Nietzsche,
Being and Time,Stalled,philosophy,,
Causation Prediction and Search,Stalled,philosophy; math,,
Boitempo ,Stalled,poetry,Drummond ,
Thinking Fast and Slow,Stalled,psychology,Daniel Kahneman Patrick Egan et al.,
Monalisa Overdrive,Stalled,sci-fi,,
On Writing Well,Stalled,writing,,
Reinforcement Learning: An Introduction,Reference,computer-science,Sutton & Richard S.,
The Beginning of Infinity,Read,physics,David Deutsch,
Agent Based Models of Geographical Systems,Reference,agent-based-modelling,,
Color and Light,Reference,art,,
Images of Enlightenment,Reference,buddhism,,
The Mind Illuminated,Reference,buddhism,Culadasa,
Worlds of Transformation,Reference,buddhism; art,,
The Theory of Complex Systems,Reference,complex-systems; computer-science; math,,
Cellular Automata And Complexity: Collected Papers,Reference,complex-systems; computer-science; math; systems-theory,Wolfram,
Architecture Patterns With Python,Reference,computer-science,,
Robust Python,Reference,computer-science,,
Machine Learning: A Probabilistic Perspective,Reference,computer-science,Kevin Murphy,
Deep Learning,Reference,computer-science,,
The Rust Programming Language,Reference,computer-science,,
Algorithms,Reference,computer-science,Sedwick,
Essential TypeScript,Reference,computer-science,Adam Freeman,
Effective Modern C++,Reference,computer-science,Meyers,
Introduction to Algorithms,Reference,computer-science,Cormen,
Web Assembly the Definitive Guide,Reference,computer-science,,
Fluent Python,Reference,computer-science,,
Test Driven Development ,Reference,computer-science,Kant Beck,
Hands-On Machine Learning with Scikit-Learn and TensorFlow,Reference,computer-science,,
Python for Data Analysis,Reference,computer-science; math,,
A New Kind of Science,Reference,computer-science; math,Wolfram,
Cellular Automata and Complexity,Reference,computer-science; math; systems-theory,Wolfram,
Game Theory: An Introduction,Reference,game-theory,Tadelis,
Essentials of Game Theory,Reference,game-theory,Yoav Shoham Kevin Leyton-Brown,
Multiagent systems: algorithmic game-theoretic and logical foundations,Reference,game-theory; agent-based-modelling,Yoav Shoham Kevin Leyton-Brown,
Behavioral Game Theory: Experiments in Strategic Interaction,Reference,game-theory; behaviorism,Colin Camerer,
A History of Western Philosophy,Reference,history; philosophy,Bertrand Russel,
All of Statistics,Reference,math,,
Introduction to Probability,Reference,math,Joseph K. Blitzstein,
Probability Theory: The Logic of Science,Reference,math,E.T. Jaynes,
Calculus,Reference,math,James Stewart,
Um Curso de Geometria Analitica e Algebra Linear,Reference,math,Reginaldo,
On Numbers and Games,Reference,math; systems-theory,Conway,
The Problems of Philosophy,Reference,philosophy,Bertrand Russel,
The Art of Electronics,Reference,physics,Paul Horowitz,
Introduction to Graph Theory,Reference,systems-theory,Richard Trudeau,
Frankenstein,Read,fiction,Mary Shelley,
How to Be Compassionate,Read,buddhism,Dalai Lama,
The Topmost Yoga System,Read,anthropology; questionable-research,,
Essential Yoga,Read,sport; buddhism,,
Multiagent Systems: A Modern Approach to Distributed Artificial Intelligence,Read,agent-based-modelling,,
Modeling Social Behavior Mathematical and Agent-Based,Read,agent-based-modelling,Smaldino,
The One-Straw Revolution,Read,agroecology,,
Technological Slavery,Read,anarchism,,
Steal This Book,Read,anarchism,,
Walden,Read,anarchism; biography; climate,,
Plunder of the Commons,Read,anarchism; climate; governance; economics,Guy Standing,
V for Vendetta,Read,anarchism; comics; fiction,,
Community Rules,Read,anarchism; governance; open-source,,
Banqueiro Anarquista,Read,anarchism; economics; fiction,,
The Social Conquest of Earth,Read,anthropology; evolution,E. O. Wilson,
Mitos e Lendas Nórdicas,Read,anthropology; fiction,,
Guns Germs and Steel,Read,anthropology; history; questionable-research,,
The Dawn of Everything,Read,anthropology; philosophy,,
The Righteous Mind,Read,anthropology; philosophy; questionable-research,,
Charles Evan’s Pocket Book to Watercolor Artists,Read,art,,
Asterios Polyp,Read,art; comics; fiction,,
The Design of Everyday Things,Read,art; computer-science; psychology,,
Surely You're Joking Mr. Feynman!,Read,biography,,
What Do You Care What Other People Think,Read,biography,,
Deep Thinking,Read,biography,Kasparov,
Ludwig Wittgenstein: The Duty of Genius,Read,biography,Ray Monk,
Persepolis,Read,biography; comics,,
Maus,Read,biography; comics; history,,
The Man Who Knew Infinity: A Life of the Genius Ramanujan,Read,biography; math,,
Roaring Silence,Read,buddhism,,
Buddha,Read,buddhism; comics,,
Demian,Read,buddhism; fiction,Hesse,
Siddharta,Read,buddhism; fiction,,
The Art of Sexual Ecstasy,Read,buddhism; magic;sex,,
Tao Te Ching,Read,buddhism; philosophy,,
Alone with Others,Read,buddhism; philosophy,,
The Internal Game of Tennis,Read,buddhism; psychology; sports,,
O Evangelho Segundo O Espiritismo,Read,christianity,Allan Kardec,
Violetas na Janela,Read,christianity,,
Livro dos Espíritos,Read,christianity,Allan Kardec,
O Grande Amigo de Deus,Read,christianity; fiction,Caldwell,
Servos de Deus,Read,christianity; fiction,Caldwell,
Medico de Homens e de Almas,Read,christianity; fiction,Caldwell,
Every Species is a Masterpiece,Read,climate,E. O. Wilson,
Billions and Billions,Read,climate; philosophy,Carl Sagan,
Pale Blue Dot,Read,climate; physics,,
Sabrina,Read,comics,,
The Best We Could Do,Read,comics; biography,,
Heaven No Hell,Read,comics; fiction,Michael Deforge,
100 Bullets,Read,comics; fiction,,
Jerusalem,Read,comics; fiction,,
Batman: The Killing Joke,Read,comics; fiction,,
Batman: Year One,Read,comics; fiction,,
The Dark Knight Returns,Read,comics; fiction,,
Elektra Dead or Alive,Read,comics; fiction,,
Sin City,Read,comics; fiction,,
Ronin,Read,comics; fiction,Miller,
Vagabond,Read,comics; fiction,Takehiko Inoue,
The Walking Dead,Read,comics; fiction,Robert Kirkman,
Blade of the Immortal,Read,comics; fiction,Hiroaki Samura,
Crisis on Infinite Earths,Read,comics; fiction,,
300,Read,comics; fiction,,
Swamp Thing,Read,comics; fiction,,
Black Hole,Read,comics; fiction,,
Death Note,Read,comics; fiction,,
Scott Pilgrim,Read,comics; fiction,,
Y; The Last Man,Read,comics; fiction,,
Batman: Year One,Read,comics; fiction,,
Preacher,Read,comics; fiction,,
Sweet Tooth,Read,comics; fiction,,
Blankets,Read,comics; fiction,,
Transmetropolitan,Read,comics; fiction,,
Habibi,Read,comics; fiction,,
Conan of Cimmeria,Read,comics; fiction,Robert E. Howard,
Sandman Series,Read,comics; fiction,,
Watchmen Series,Read,comics; fiction,,
The Incal,Read,comics; fiction,Jodorowsky,
The Incal,Read,comics; sci-fi,,
Making Things Work: Solving Complex Problems in a Complex World,Read,complex-systems; coordination,Yaneer Bar-Yam,
The Evolution of Cooperation,Read,complex-systems; coordination; game-theory,Axelrod,
Mastering Python High Performance,Read,computer-science,Fernando Doglio,
Python High Performance,Read,computer-science,Gabriele Lanaro,
Effective Python: 90 Specific Ways to Write Better Python,Read,computer-science,,
A Philosophy of Software Design,Read,computer-science,,
Developer Hegemony,Read,computer-science,,
C++: How to Program,Read,computer-science,Deitel,
C++ for Programmers,Read,computer-science,Deitel,
Algoritmos e Estrutura de Dados,Read,computer-science,Ziviani,
Clean Architecture,Read,computer-science,,
Surveillance Capitalism,Read,computer-science,,
Mindstorms: Children Computers And Powerful Ideas,Read,computer-science; education,,
The Book of Why,Read,computer-science; math; philosophy,Judea Pearl ,
The Art of Community,Read,computer-science; open-source,Bacon,
Working in Public,Read,computer-science; open-source; questionable-research,,
Utopia,Read,governance,Thomas More,
The Handbook for Radical Local Democracy,Read,governance; economics,,
Poor Economics,Read,economics,Abhijit Banerjee; Esther Duflo,
Greenpilled,Read,economics; questionable-research,,
Producing Open Source Software,Read,computer-science; open-source,Karl Fogel,
The Prince,Read,governance; philosophy,,
Vier Tage Woche,Read,psychology,,
The Pragmatist's Guide to Governance,Read,governance; questionable-research,,
The Doors of Perception,Read,drugs; philosophy,Albert Hofmann,
Debt,Read,economics,,
Who Rules the World,Read,economics,,
Manufacturing Consent,Read,economics,,
Utopia for Realists: And How We Can Get There,Read,economics,Rutger Bregman,
Poverty by America,Read,economics,Matthew Desmond,
The Origin of Wealth,Read,economics,,
Capital and Ideology ,Read,economics; history,Piketty ,
Doughnut Economics,Read,economics; history; questionable-research,,
The Wealth of Networks,Read,economics; open-source,,
The Well Educated Mind,Read,education; questionable-research,Susan Wise Bauer,
The Castle of Llyr,Read,fiction,,
The Black Cauldron,Read,fiction,,
The Book of Three,Read,fiction,,
The Man in the High Castle,Read,fiction,,
Maktub,Read,fiction,,
Brida,Read,fiction,,
Memorias de Emilia,Read,fiction,,
Tonico e Carnica,Read,fiction,,
Garra de Campeão,Read,fiction,,
Comedias para Se Ler na Escola,Read,fiction,Verissimo,
Sozinha no Mundo,Read,fiction,,
O Menino do Dedo Verde,Read,fiction,,
A Ilha Perdida,Read,fiction,,
O Escaravelho do Diabo,Read,fiction,,
As Aventuras de Xisto,Read,fiction,,
The Sorcerer of the North,Read,fiction,,
The Battle for Skandia,Read,fiction,,
The Icebound Land,Read,fiction,,
The Burning Bridge,Read,fiction,,
The Ruins of Gorlan,Read,fiction,,
Sharpe's Fortress,Read,fiction,,
Sharpe’s Triumph,Read,fiction,,
Sharpe’s Tiger,Read,fiction,,
Saxon Stories: The Lords of the North,Read,fiction,,
Saxon Stories: The Pale Horseman,Read,fiction,,
Saxon Stories: The Last Kingdom,Read,fiction,,
Roverandom,Read,fiction,Tolkien,
The Idiot,Read,fiction,Dostoevsky,
Overstory,Read,fiction,Richard Powers,
Os Sete Gatinhos,Read,fiction,Nelson Rodrigues,
Não Se Pode Amar e Ser Feliz ao Mesmo Tempo,Read,fiction,Nelson Rodrigues,
A Vida Como Ela É,Read,fiction,Nelson Rodrigues,
Poliana Moça,Read,fiction,,
Poliana,Read,fiction,,
A Series of Unfortunate Events,Read,fiction,,
The Arabian Nights,Read,fiction,,
The Lost Symbol,Read,fiction,,
The Ring of the Nibelung,Read,fiction,,
Beowulf,Read,fiction,,
Hamlet,Read,fiction,,
The Three Musketeers,Read,fiction,,
Wuthering Heights,Read,fiction,,
O Cortiço,Read,fiction,,
O Homem de Cabeça de Papelão,Read,fiction,,
The Archer's Tale,Read,fiction,Bernard Cornwell,
The Old Man and the Sea,Read,fiction,,
The Call of Cthulhu,Read,fiction,,
Necronomicon,Read,fiction,,
The Mists of Avalon,Read,fiction,,
Running With Wolves,Read,fiction,,
Faust,Read,fiction,,
The Sorrows of Young Werther,Read,fiction,,
Romeo and Juliet,Read,fiction,,
The Little Prince,Read,fiction,,
The Wise Man's Fear,Read,fiction,,
Ranger's Apprentice Series,Read,fiction,,
Name of the Wind,Read,fiction,,
At the Mountains of Madness,Read,fiction,Lovecraft,
Eragon,Read,fiction,,
Harry Potter e o Prisioneiro de Azkaban,Read,fiction,,
Harry Potter e a Camara Secre,Read,fiction,,
Harry Potter e a Pedra Filosofal,Read,fiction,,
Gulliver's Travels,Read,fiction,,
Digital Fortress,Read,fiction,,
Angels and Demons,Read,fiction,,
Da Vinci Code,Read,fiction,,
A Sala De Âmbar,Read,fiction,,
I Ching,Reference,magic,,
The Sun Also Rises,Read,fiction,,
Kholstomer,Read,fiction,Tolstoi,
Fight Club,Read,fiction,Bukowski,
The Hobbit,Read,fiction,Tolkien,
Breaking Dawn,Read,fiction,,
Twilight Saga,Read,fiction,,
Dracula,Read,fiction,,
Pride and Prejudice,Read,fiction,Jane Austen,
The Sky is Falling,Read,fiction,Sydney Sheldon,
The Pilgrimage,Read,fiction,Paulo Coelho,
If Tomorrow Comes,Read,fiction,Sydney Sheldon,
Memories of Midnight,Read,fiction,Sydney Sheldon,
A Strange in the Mirror,Read,fiction,Sydney Sheldon,
Carrie,Read,fiction,Stephan King,
À Espera de um Milagre,Read,fiction,Stephan King,
The Shining,Read,fiction,Stephan King,
The Earth is the Lord's,Read,fiction,Caldwell,
The Valley of Horses,Read,fiction,,
The Clan of the Cave Bear,Read,fiction,,
Inferno,Read,fiction,,
Quincas Borba,Read,fiction,Machado de Assis,
Ensaion Sobre a Lucidez,Read,fiction,,
Animal Farm,Read,fiction,Orwell,
The Catcher in the Rye,Read,fiction,Paulo Coelho,
Veronika Decide Morrer,Read,fiction,,
Metamorphosis,Read,fiction,Paulo Coelho,
O Alquimista,Read,fiction,Paulo Coelho,
Estrela da Manhã,Read,fiction,Lispector,
Memórias de um Sargento de Milícia,Read,fiction,,
São Bernardo,Read,fiction,Graciliano Ramos,
Vidas Secas,Read,fiction,Graciliano Ramos,
Noite na Taverna,Read,fiction,Alvares de Azevedo,
Morte e Vida Severina,Read,fiction,,
Grande Sertão Veredas,Abandoned,fiction,João Guimarães Rosa,
A Paixão Segundo G.H,Read,fiction,,
Uma Aprendizagem ou O Livro dos Prazeres,Read,fiction,,
A Hora da Estrela,Read,fiction,,
The Death of Ivan Illych,Read,fiction,,
Dead Souls,Read,fiction,Gogol,
O Fazedor de Velhos,Read,fiction,,
Lord of the Flies,Read,fiction,,
O Cortiço,Read,fiction,,
Memórias Póstumas de Brás Cubas,Read,fiction,,
Alice’s Adventures in Wonderland,Read,fiction,,
Moreninha,Read,fiction,,
The Picture of Dorian Gray,Read,fiction,,
Dracula,Read,fiction,,
Iracema,Read,fiction,,
Triste Fim de Policarpo Quaresma,Read,fiction,,
Nine Princess in Amber,Read,fiction,,
Lord of the Rings,Read,fiction,,
The Call of Cthulhu and Other Weird Stories,Read,fiction,,
The Brothers Karamazov,Read,fiction,,
Anna Karenina,Read,fiction,,
Candide,Read,fiction; philosophy,Voltaire,
The Stranger,Read,fiction; philosophy,,
The Age of Reason,Read,fiction; philosophy,Sartre,
Angústia,Read,fiction; psychology,Graciliano Ramos,
White Nights,Read,fiction; psychology,,
Steppenwolf,Read,fiction; psychology,,
Notes from the Underground,Read,fiction; psychology,,
Go for Beginners,Reading,games,,
The Way to Go,Read,games,,
Tormenta,Read,games,,
Tagmar,Read,games,,
Fiasco,Read,games,,
Changeling: The Lost,Read,games,,
Mage: The Awakening,Read,games,,
Dungeon World,Read,games,,
Numenera,Read,games,,
Mage: The Ascension,Read,games,,
World of Darkness,Read,games,,
Vampire the Masquerade,Read,games,,
Pathfinder,Read,games,,
Savage Worlds,Read,games,,
Fate,Read,games,,
Cyberpunk 2020,Read,games,,
GURPS 2,Read,games,,
Dungeon and Dragons 5,Read,games,,
Dungeon and Dragons 3.5,Read,games,,
Dungeon and Dragons 2,Read,games,,
Dungeon and Dragons 3,Read,games,,
On Tennis,Read,games; biography,David Foster Wallace,
Shadowrun,Read,games; sci-fi,,
GURPS Cyberpunk,Read,games; sci-fi,,
Star Wars: Edge of the Empire,Read,games; sci-fi,,
Star Wars Roleplaying Game,Read,games; sci-fi,,
Eclipse Phase,Read,games; sci-fi,,
1808,Read,history,,
Quilombos: Resistência ao Escravismo,Read,history,,
Casa-Grande Senzala,Read,history,Gilberto Freyre,
Between the World and Me,Read,history,,
The Road to Serfdom,Read,history,von Hayek,
On Tyranny,Read,history,Timothy Snyder,
The Origins of Totalitarianism,Read,history;,Hannah Arendt,
The Secret,Read,magic,,
The Prophet,Read,magic,Khalil,
The Book of Five Rings,Read,magic; philosophy,,
You Are the One You’ve Been Waiting For,Read,magic; psychology,,
99 Variations on a Proof,Read,math,,
How to Change Your Mind,Stalled,neuroscience; psychology; drugs,Michael Pollan,
The Cathedral and the Bazaar,Read,open-source,,
The Coproduction of Open Source Software by Volunteers and Big Tech Firms,Read,open-source,,
The Art of Logic,Read,philosophy,Cheng,
80000 Hours,Read,philosophy,,
A Little History of Philosophy,Read,philosophy,,
On the Genealogy of Morality,Read,philosophy,Nietzsche,
The Republic,Read,philosophy,Plato,
The Art of War,Read,philosophy,,
The Myth of Sisyphus,Read,philosophy,Camus,
Symposium,Read,philosophy,Plato,
Fedon,Read,philosophy,Plato,
Thus Spoke Zarathustra,Read,philosophy,,
50 Philosophy Ideas,Read,philosophy,,
What We Owe the Future,Read,philosophy,William MacASkill,
Superintelligence,Read,philosophy,Nick Bostrom,
The Life You Can Save,Read,philosophy,Peter Singer,
Leviathan,Read,philosophy,Thomas Hobbes,
The Daily Stoic,Read,philosophy,,
How to Be Perfect,Read,philosophy; questionable-research,,
Howl,Read,poetry,Ginsberg,
Bagagem,Read,poetry,Adelia Prado,
Antologia Poetica,Read,poetry,Cecilia Meireles,
Toda Poesia,Read,poetry,Paulo Leminski,
Morte e Vida Severina,Read,poetry,,
Eu,Read,poetry,Augusto dos Anjos,
Antologia Poética,Read,poetry,Vinicius de Morais,
Veinte poemas de amor y una canción desesperada,Read,poetry,,
Poesia de Fernando Pessoa,Read,poetry,,
A Rosa do Povo,Read,poetry,Carlos Drummond de Andrade,
Sim: Existo Dentro do Meu Corpo,Read,poetry,,
O Livro do Desassossego,Read,psychology,,
All About Love,Read,psychology,Bell Hooks,
Chatter: The Voice in Our Head Why It Matters and How to Harness It ,Read,psychology,,
Man and His Symbols,Read,psychology; magic,Jung and others,
The Archetypes and the Collective Unconscious,Read,psychology; magic,Jung,
Atomic Habits,Read,psychology; questionable-research,,
Deep Work,Read,psychology; questionable-research,,
How to Win Friends and Influence People,Read,psychology; questionable-research,,
I Have No Mouth and I Must Scream,Read,sci-fi,,
The Bicentennial Man,Read,sci-fi,Isaac Asimov,
The Dispossessed: An Ambiguous Utopia,Read,sci-fi,,
Hitchhiker's Guide Collection,Read,sci-fi,Douglas Adams,
Dune Messiah,Read,sci-fi,Frank Herbert,
I; Robot,Read,sci-fi,Asimov,
2001: Space Odyssey,Read,sci-fi,,
Foundation,Read,sci-fi,Asimov,
Do Androids Dream of Electric Sheep?,Read,sci-fi,,
The Naked Sun,Read,sci-fi,Asimov,
The Caves of Steel,Read,sci-fi,,
Project Hail Mary,Read,sci-fi,,
1984,Read,sci-fi,Orwell,
Dune,Read,sci-fi,,
Brave New World,Read,sci-fi,,
Red Mars,Read,sci-fi,Kim Stanley,
Practical Programming for Strength Training,Read,sports,,
Starting Strength,Read,sports,,
Complex Adaptive Systems,Read,systems-theory; complex-systems,John H. Miller,
Data Science from Scratch,Read,computer-science,,
Ishmael,Abandoned,anthropology; fiction; questionable-research,,
Sapiens,Abandoned,anthropology; questionable-research,Yuval Noah Harari,
The Creative Act,Abandoned,art,,
A Guide to the Bodhisattva Way,Reading,buddhism,,
Spawn ,Abandoned,comics; fiction,,
In a Flight of Starlings,Abandoned,complex-systems; biography,Giorgio Parisi,
Grokking Deep Learning,Abandoned,computer-science,,
Structure and Interpretation of Computer Programs,Abandoned,computer-science,,
Clean Code: A Handbook of Agile Software Craftsmanship,Abandoned,computer-science,,
Think Bayes,Abandoned,computer-science; math,,
Invisible Women,Abandoned,computer-science; philosophy,,
Superforcasting,Abandoned,psychology,,
The Relevance of the Communist Manifesto,Abandoned,economics,Žižek,
Enlightenment Now,Abandoned,economics; questionable-research,Steven Pinker,
By the River Piedra I Sat Down and Wept,Abandoned,fiction,,
Sharpe's Prey,Abandoned,fiction,,
Saxon Stories: Sword Song,Abandoned,fiction,,
Harry Potter e o Calice de Fogo,Abandoned,fiction,,
The Adventures of Sherlock Holmes,Abandoned,fiction,,
Game of Thrones,Abandoned,fiction,,
Gone With the Wind,Abandoned,fiction,,
The Chronicles of Narnia,Abandoned,fiction,,
The Name of the Rose,Abandoned,fiction,,
The Trial,Abandoned,fiction,,
The Count of Monte Cristo,Abandoned,fiction,,
Don Quixote,Abandoned,fiction,,
Invisible Man,Abandoned,fiction,,
O Tempo e o Vento,Abandoned,fiction,,
Lucíola,Abandoned,fiction,,
The Invisible Man,Abandoned,fiction,Ralph Ellinson,
The Silmarillon,Abandoned,fiction,,
3d&t,Abandoned,games,,
After Tamerlane,Abandoned,history,,
The Feynman Lectures on Physics,Abandoned,math; physics,,
Critique of Pure Reason,Abandoned,philosophy,,
The World as Will and Representation,Abandoned,philosophy,,
On the Freedom of the Will,Abandoned,philosophy,,
The Second Sex,Abandoned,philosophy,,
Beyond Good and Evil,Abandoned,philosophy,,
The Courage to Be Disliked,Abandoned,psychology,,
Walkaway,Abandoned,sci-fi,,
Complex Population Dynamics,Abandoned,systems-theory,Peter Turchin`,aW=()=>oW.split(`
`).slice(1).map(n=>{const e=[];let t="",r=!1;for(let c=0;c<n.length;c++){const u=n[c];u==='"'?r=!r:u===","&&!r?(e.push(t.trim()),t=""):t+=u}e.push(t.trim());const[i="",s="",o="",a="",l=""]=e;return{Name:i,Status:s,Type:o,Author:a,Notes:l}}).filter(n=>n.Name),lW=n=>{const e={fiction:"bg-pink-200 text-pink-800","sci-fi":"bg-purple-200 text-purple-800",poetry:"bg-rose-200 text-rose-800",comics:"bg-yellow-200 text-yellow-800",biography:"bg-orange-200 text-orange-800",autobiography:"bg-orange-100 text-orange-700",philosophy:"bg-indigo-200 text-indigo-800",math:"bg-blue-200 text-blue-800",physics:"bg-cyan-200 text-cyan-800",biology:"bg-green-200 text-green-800",neuroscience:"bg-teal-200 text-teal-800",psychology:"bg-violet-200 text-violet-800","computer-science":"bg-slate-200 text-slate-800",history:"bg-amber-200 text-amber-800",economics:"bg-emerald-200 text-emerald-800",anthropology:"bg-lime-200 text-lime-800",buddhism:"bg-yellow-100 text-yellow-700",christianity:"bg-blue-100 text-blue-700",islam:"bg-green-100 text-green-700",hinduism:"bg-orange-100 text-orange-700",magic:"bg-purple-100 text-purple-700",art:"bg-fuchsia-200 text-fuchsia-800",games:"bg-red-200 text-red-800",education:"bg-sky-200 text-sky-800",governance:"bg-stone-200 text-stone-800",anarchism:"bg-red-300 text-red-900",climate:"bg-green-300 text-green-900",drugs:"bg-purple-300 text-purple-900"},t=n.toLowerCase().trim();return e[t]||"bg-gray-200 text-gray-800"},cW=n=>{const e={read:"bg-green-200 text-green-800",reading:"bg-blue-200 text-blue-800","want to read":"bg-amber-200 text-amber-800",stalled:"bg-gray-200 text-gray-800",abandoned:"bg-red-200 text-red-800",reference:"bg-purple-200 text-purple-800"},t=n.toLowerCase().trim();return e[t]||"bg-gray-200 text-gray-800"},uW=()=>{const[n,e]=C.useState(""),[t,r]=C.useState(""),[i,s]=C.useState(null),[o,a]=C.useState("asc"),[l,c]=C.useState("idle"),u=C.useMemo(()=>aW(),[]),h=g=>{i===g?a(o==="asc"?"desc":"asc"):(s(g),a("asc"))},d=C.useMemo(()=>{let g=u.filter(p=>Object.values(p).some(y=>y.toLowerCase().includes(n.toLowerCase())));return i&&(g=[...g].sort((p,y)=>{const v=p[i].toLowerCase(),m=y[i].toLowerCase(),w=v.localeCompare(m);return o==="asc"?w:-w})),g},[u,n,i,o]),f=async g=>{if(g.preventDefault(),!!t.trim()){c("loading");try{(await fetch("https://formspree.io/f/xjvndedd",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookName:t})})).ok?(c("success"),r(""),setTimeout(()=>c("idle"),3e3)):(c("error"),setTimeout(()=>c("idle"),3e3))}catch(p){console.error("Error submitting form:",p),c("error"),setTimeout(()=>c("idle"),3e3)}}};return x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"win95-border bg-muted p-3",children:[x.jsxs("form",{onSubmit:f,className:"flex gap-2 items-center flex-wrap",children:[x.jsx("label",{htmlFor:"bookName",className:"text-sm font-bold",children:"Recommend a book:"}),x.jsx("input",{type:"text",id:"bookName",name:"bookName",value:t,onChange:g=>r(g.target.value),className:"win95-border-inset bg-input px-2 py-1 text-sm flex-1 min-w-[200px]",placeholder:"type...",disabled:l==="loading"}),x.jsx("button",{type:"submit",className:"win95-border bg-card hover:bg-muted px-3 py-1 text-sm font-bold active:win95-border-inset disabled:opacity-50 disabled:cursor-not-allowed",disabled:l==="loading",children:l==="loading"?"sending...":"send"})]}),l==="success"&&x.jsx("div",{className:"mt-2 text-sm text-green-700 bg-green-100 border border-green-300 px-2 py-1 rounded",children:"Thank you! Your book recommendation has been sent."}),l==="error"&&x.jsx("div",{className:"mt-2 text-sm text-red-700 bg-red-100 border border-red-300 px-2 py-1 rounded",children:"Oops! Something went wrong. Please try again."})]}),x.jsx("div",{className:"flex justify-end",children:x.jsx("input",{type:"text",value:n,onChange:g=>e(g.target.value),className:"win95-border-inset bg-input px-3 py-1 text-sm w-1/3",placeholder:"search..."})}),x.jsx("div",{className:"win95-border-inset bg-white p-2 max-h-[400px] overflow-y-auto",children:x.jsxs("table",{className:"w-full text-sm",children:[x.jsx("thead",{children:x.jsxs("tr",{className:"border-b border-border",children:[x.jsxs("th",{className:"text-left py-2 px-2 font-bold",children:["Name"," ",x.jsx("span",{className:"cursor-pointer",onClick:()=>h("Name"),children:"↑"}),x.jsx("span",{className:"cursor-pointer",onClick:()=>h("Name"),children:"↓"})]}),x.jsxs("th",{className:"text-left py-2 px-2 font-bold",children:["Status"," ",x.jsx("span",{className:"cursor-pointer",onClick:()=>h("Status"),children:"↑"}),x.jsx("span",{className:"cursor-pointer",onClick:()=>h("Status"),children:"↓"})]}),x.jsxs("th",{className:"text-left py-2 px-2 font-bold",children:["Type"," ",x.jsx("span",{className:"cursor-pointer",onClick:()=>h("Type"),children:"↑"}),x.jsx("span",{className:"cursor-pointer",onClick:()=>h("Type"),children:"↓"})]}),x.jsx("th",{className:"text-left py-2 px-2 font-bold",children:"Author"}),x.jsx("th",{className:"text-left py-2 px-2 font-bold",children:"Notes"})]})}),x.jsx("tbody",{children:d.length===0?x.jsx("tr",{children:x.jsx("td",{colSpan:5,className:"text-center py-4 text-muted-foreground",children:"No books found"})}):d.map((g,p)=>x.jsxs("tr",{className:"border-b border-border/50 hover:bg-accent/10",children:[x.jsx("td",{className:"py-2 px-2",children:g.Name}),x.jsx("td",{className:"py-2 px-2",children:x.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium mr-1 mb-1 ${cW(g.Status)}`,children:g.Status})}),x.jsx("td",{className:"py-2 px-2",children:g.Type.split(";").map((y,v)=>x.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium mr-1 mb-1 ${lW(y.trim())}`,children:y.trim()},v))}),x.jsx("td",{className:"py-2 px-2",children:g.Author}),x.jsx("td",{className:"py-2 px-2",children:g.Notes})]},p))})]})})]})},hW=()=>{const n=C.useRef(null);return C.useEffect(()=>{const e=n.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const r=()=>{e.width=window.innerWidth,e.height=window.innerHeight};r(),window.addEventListener("resize",r);const i=[[["#FFB6D9","#D4A5FF"],["#D4A5FF","#A5D8FF"],["#A5D8FF","#FFE5A5"],["#FFE5A5","#FFB6D9"],["#FFA5C7","#D4A5FF"]],[["#FF9CEE","#C9A0FF"],["#C9A0FF","#A0E7FF"],["#A0E7FF","#FFD4A3"],["#FFD4A3","#FF94B3"],["#FF94B3","#FF9CEE"]],[["#E5B8F4","#C9E4FF"],["#C9E4FF","#FFE4B5"],["#FFE4B5","#FFB8E6"],["#FFB8E6","#D4B5FF"],["#D4B5FF","#E5B8F4"]],[["#FFC4E1","#E8B5FF"],["#E8B5FF","#B5E8FF"],["#B5E8FF","#FFEAA7"],["#FFEAA7","#FFB8D1"],["#FFB8D1","#FFC4E1"]],[["#FFD1F0","#E0C3FF"],["#E0C3FF","#C3E8FF"],["#C3E8FF","#FFF4C4"],["#FFF4C4","#FFD1E3"],["#FFD1E3","#FFD1F0"]]],s=i[Math.floor(Math.random()*i.length)],o=[],a=40+Math.floor(Math.random()*30);for(let u=0;u<a;u++){const h=s[Math.floor(Math.random()*s.length)],d=.3+Math.random()*1.2;o.push({x:Math.random()*e.width,y:Math.random()*e.height,radius:50+Math.random()*200,color:h[Math.floor(Math.random()*2)],vx:(Math.random()-.5)*d,vy:(Math.random()-.5)*d,opacity:.4+Math.random()*.5,phase:Math.random()*Math.PI*2,speed:d})}let l=0;const c=()=>{t.clearRect(0,0,e.width,e.height),l+=.01,o.forEach(u=>{u.phase+=.02;const h=Math.sin(u.phase)*2,d=Math.cos(u.phase*.7)*2;u.x+=u.vx+h,u.y+=u.vy+d,u.x<-u.radius&&(u.x=e.width+u.radius),u.x>e.width+u.radius&&(u.x=-u.radius),u.y<-u.radius&&(u.y=e.height+u.radius),u.y>e.height+u.radius&&(u.y=-u.radius);const f=u.opacity+Math.sin(l+u.phase)*.1;t.save();const g=t.createRadialGradient(u.x,u.y,0,u.x,u.y,u.radius),p=Math.max(.2,Math.min(.9,f));g.addColorStop(0,u.color+Math.round(p*255).toString(16).padStart(2,"0")),g.addColorStop(.5,u.color+Math.round(p*.6*255).toString(16).padStart(2,"0")),g.addColorStop(1,u.color+"00"),t.fillStyle=g,t.beginPath(),t.arc(u.x,u.y,u.radius*1.5,0,Math.PI*2),t.fill(),t.restore()}),requestAnimationFrame(c)};return c(),()=>{window.removeEventListener("resize",r)}},[]),x.jsx("canvas",{ref:n,className:"fixed top-0 left-0 w-full h-full pointer-events-none",style:{opacity:.8,zIndex:0}})},dW=()=>{const[n,e]=C.useState(new Set(["about"])),[t,r]=C.useState([{id:"software-1",name:"Software"},{id:"research-1",name:"Research"}]),[i,s]=C.useState(!1),[o,a]=C.useState({about:13,"software-1":11,"research-1":12}),[l,c]=C.useState(13),[u,h]=C.useState({}),d=_=>{e(new Set(n).add(_)),y(_)},f=_=>{const T=new Set(n);T.delete(_),e(T);const R={...o};delete R[_],a(R)},g=_=>{const T=t.find(R=>R.name===_);if(T)y(T.id);else{const R=Date.now().toString();r([...t,{id:R,name:_}]),y(R)}},p=_=>{r(t.filter(R=>R.id!==_));const T={...o};delete T[_],a(T)},y=_=>{const T=l+1;c(T),a({...o,[_]:T})},v={paint:{title:"Paint",icon:"🎨"},chat:{title:"Chat Room",icon:"💬"},about:{title:"About Mariana Meireles",icon:"🌸"},gallery:{title:"My Art Gallery",icon:"🖼️"},guestbook:{title:"Guestbook",icon:"📖"},readingList:{title:"Reading List",icon:"📚"}},m={Software:"💻",Research:"🔬",Community:"🦄",Activism:"🌈"},w=[...Array.from(n).map(_=>({id:_,title:v[_].title,icon:v[_].icon})),...t.map(_=>({id:_.id,title:_.name,icon:m[_.name]||"📝"}))],b=_=>{u[_]&&h({...u,[_]:!1}),y(_)},S=(_,T)=>{h({...u,[_]:T})};return x.jsxs("div",{className:"min-h-screen w-full relative overflow-hidden",style:{backgroundColor:"#f0e6ff"},children:[x.jsx("div",{className:"hidden md:block",children:x.jsx(hW,{})}),x.jsxs("div",{className:"hidden md:flex absolute top-4 left-4 flex-col gap-4 z-10",children:[x.jsx(Cs,{icon:"💬",label:"Chat",onClick:()=>d("chat")}),x.jsx(Cs,{icon:"📖",label:"Guestbook",onClick:()=>d("guestbook")}),x.jsx(Cs,{icon:"💻",label:"Software",onClick:()=>g("Software")}),x.jsx(Cs,{icon:"🔬",label:"Research",onClick:()=>g("Research")}),x.jsx(Cs,{icon:"📚",label:"Reading List",onClick:()=>d("readingList")}),x.jsx(Cs,{icon:"🌸",label:"About",onClick:()=>d("about")})]}),n.has("paint")&&x.jsx(Ai,{title:"Paint",onClose:()=>f("paint"),defaultPosition:{x:20,y:50},width:"w-auto",icon:"🎨",zIndex:o.paint||10,onFocus:()=>y("paint"),isMinimized:u.paint,onMinimize:_=>S("paint",_),children:x.jsx(vj,{})}),n.has("chat")&&x.jsx(Ai,{title:"Chat Room",onClose:()=>f("chat"),defaultPosition:{x:200,y:50},width:"w-[500px]",icon:"💬",zIndex:o.chat||10,onFocus:()=>y("chat"),isMinimized:u.chat,onMinimize:_=>S("chat",_),children:x.jsx(tW,{})}),n.has("about")&&x.jsx(Ai,{title:"About me",onClose:()=>f("about"),defaultPosition:{x:150,y:100},width:"w-96",icon:"🌸",zIndex:o.about||10,onFocus:()=>y("about"),isMinimized:u.about,onMinimize:_=>S("about",_),children:x.jsx(nW,{})}),n.has("gallery")&&x.jsx(Ai,{title:"My Art Gallery",onClose:()=>f("gallery"),defaultPosition:{x:250,y:100},width:"w-[450px]",icon:"🖼️",zIndex:o.gallery||10,onFocus:()=>y("gallery"),isMinimized:u.gallery,onMinimize:_=>S("gallery",_),children:x.jsx(rW,{})}),n.has("guestbook")&&x.jsx(Ai,{title:"Guestbook",onClose:()=>f("guestbook"),defaultPosition:{x:40,y:150},width:"w-[400px]",icon:"📖",zIndex:o.guestbook||10,onFocus:()=>y("guestbook"),isMinimized:u.guestbook,onMinimize:_=>S("guestbook",_),children:x.jsx(iW,{})}),n.has("readingList")&&x.jsx(Ai,{title:"Reading List",onClose:()=>f("readingList"),defaultPosition:{x:50,y:100},width:"w-[800px]",icon:"📚",zIndex:o.readingList||10,onFocus:()=>y("readingList"),isMinimized:u.readingList,onMinimize:_=>S("readingList",_),children:x.jsx(uW,{})}),t.map((_,T)=>{const A={Software:{x:300,y:80},Research:{x:450,y:180},Community:{x:320,y:120},Activism:{x:380,y:140}}[_.name]||{x:300+T*150,y:80+T*100};return x.jsx(Ai,{title:_.name,onClose:()=>p(_.id),defaultPosition:A,width:"w-[450px]",icon:m[_.name]||"📝",zIndex:o[_.id]||10,onFocus:()=>y(_.id),isMinimized:u[_.id],onMinimize:M=>S(_.id,M),children:x.jsx(sW,{blogName:_.name})},_.id)}),x.jsx(R2,{isOpen:i,onClose:()=>s(!1),onOpenBlog:g,onOpenWindow:d}),x.jsx(E2,{onStartClick:()=>s(!i),windows:w,onWindowClick:b})]})},fW=()=>{const n=kS();return C.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),x.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:x.jsxs("div",{className:"text-center",children:[x.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),x.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),x.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},pW=new LO,gW=()=>x.jsx(WO,{client:pW,children:x.jsxs(hO,{children:[x.jsx(XE,{}),x.jsx(kR,{}),x.jsx(SA,{children:x.jsxs(wA,{children:[x.jsx(Zf,{path:"/",element:x.jsx(dW,{})}),x.jsx(Zf,{path:"*",element:x.jsx(fW,{})})]})})]})});Xx(document.getElementById("root")).render(x.jsx(gW,{}));
